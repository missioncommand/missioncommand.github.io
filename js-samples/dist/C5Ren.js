!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.C5Ren=t():e.C5Ren=t()}(self,(()=>(()=>{"use strict";var e={92:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGInfo=void 0,t.SVGInfo=class{_ID;_Bbox;_SVG;constructor(e,t,i){this._ID=e,this._Bbox=t,this._SVG=i}getID(){return this._ID}getBbox(){return this._Bbox}getSVG(){return this._SVG}toString(){return this._ID+"\n"+this._Bbox.toString()+"\n"+this._SVG}}},106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RendererException=void 0;class i extends Error{constructor(e,t){super(e)}}t.RendererException=i},151:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Point=void 0;const a=i(9441);class n{x=0;y=0;constructor(...e){switch(e.length){case 0:this.setLocation(0,0);break;case 2:{const[t,i]=e;this.setLocation(t,i);break}default:throw Error("Invalid number of arguments")}}getX(){return this.x}getY(){return this.y}setLocation(e,t){this.x=Math.trunc(e),this.y=Math.trunc(t)}getShapeType(){return"POINT"}shift(e,t){this.x+=e,this.y+=t}toStringFormatted(){return"{x:"+this.x+", y:"+this.y+"}"}clone(){return new n(this.x,this.y)}toPoint2D(){return new a.Point2D(this.x,this.y)}setPath(e){let t=this.x,i=this.y;e.moveTo(t,i),e.lineTo(t+1,i),e.lineTo(t+1,i+1),e.lineTo(t,i+1),e.closePath()}stroke(e){e.beginPath(),this.setPath(e),e.stroke()}fill(e){e.beginPath(),this.setPath(e),e.fill()}}t.Point=n},269:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsChangedEvent=void 0,t.SettingsChangedEvent=class{static EventType_CacheSizeChanged="CACHE_CHANGED";static EventType_CacheToggled="CACHE_TOGGLED";static EventType_FontChanged="FONT_CHANGED";_EventType;constructor(e){null!=e&&""!==e&&(this._EventType=e)}getEventType(){return this._EventType}}},498:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clsUtility=void 0;const a=i(8624),n=i(8087),s=i(151),l=i(9441),r=i(3170),o=i(1207),c=i(7389),T=i(5772),u=i(8101),g=i(2937),L=i(8113),d=i(7300),_=i(106),h=i(8678);class E{static _className="clsUtility";static Hatch_ForwardDiagonal=2;static Hatch_BackwardDiagonal=3;static Hatch_Vertical=4;static Hatch_Horizontal=5;static Hatch_Cross=8;static addHatchFills(e,t){try{if(null==t||0===t.length)return;let i,a=e.get_LineType(),s=e.get_FillStyle(),l=0,r=0,o=0,c=e.get_LineThickness()/2,T=e.get_LineColor(),d=Math.trunc(10*c);if(!1===h.clsUtility.isClosedPolygon(a)&&!1===h.clsUtility.IsChange1Area(a))return;switch(a){case u.TacticalLines.NFA:case u.TacticalLines.NFA_CIRCULAR:case u.TacticalLines.NFA_RECTANGULAR:case u.TacticalLines.LAA:s=E.Hatch_BackwardDiagonal;break;case u.TacticalLines.BIO:case u.TacticalLines.NUC:case u.TacticalLines.CHEM:case u.TacticalLines.RAD:s=E.Hatch_BackwardDiagonal,T=L.Color.yellow,c=e.get_LineThickness();break;case u.TacticalLines.WFZ:s=E.Hatch_BackwardDiagonal,e.get_LineColor()===L.Color.BLACK&&(T=L.Color.GRAY),d=Math.trunc(d/2);break;case u.TacticalLines.OBSAREA:for(l=0;l<t.length;l++){let e=t[l];null!=e.getLineColor()&&0===e.getLineColor().toRGB()&&t.splice(l,1)}s=E.Hatch_BackwardDiagonal,d=Math.trunc(1.25*d);break;default:if(s<=0)return}let _=t.length;for(l=0;l<_;l++)if(i=t[l],r=i.getFillStyle(),r===s){o=l;break}_=t.length;for(let l=0;l<_;l++){let r;if(a===u.TacticalLines.RANGE_FAN||a===u.TacticalLines.RANGE_FAN_SECTOR||a===u.TacticalLines.RADAR_SEARCH?(r=t[l],i=t[l],s=i.getFillStyle()):r=t[o],!(s<E.Hatch_ForwardDiagonal)){if(e.get_UseHatchFill()){let e=g.PatternFillRenderer.MakeHatchPatternFill(s,d,c,T);r.setPatternFillImage(e)}else if(s!==E.Hatch_Cross){let i=E.buildHatchArea(e,r,s,d);i.setStroke(new n.BasicStroke(c)),i.setLineColor(T),t.push(i)}else{let i=E.buildHatchArea(e,r,E.Hatch_BackwardDiagonal,d),a=E.buildHatchArea(e,r,E.Hatch_ForwardDiagonal,d);i.setStroke(new n.BasicStroke(c)),i.setLineColor(T),t.push(i),a.setStroke(new n.BasicStroke(c)),a.setLineColor(T),t.push(a)}if(a!==u.TacticalLines.RANGE_FAN&&a!==u.TacticalLines.RANGE_FAN_SECTOR&&a!==u.TacticalLines.RADAR_SEARCH)break}}}catch(e){if(!(e instanceof Error))throw e;d.ErrorLogger.LogException(E._className,"addHatchFills",new _.RendererException("Failed inside addHatchFills",e))}}static buildHatchArea(e,t,i,n){let s;try{let l;s=new T.Shape2(T.Shape2.SHAPE_TYPE_POLYLINE);let r=t.getBounds(),u=r.getX(),g=r.getY(),L=r.getWidth(),d=r.getHeight();if(L>d?d=L:L=d,e.get_UseHatchFill())return s.setFillStyle(i),s.setShape(o.lineutility.createStrokedShape(t.getShape())),s;L*=2,d*=2;let _,h,A=0,I=0,S=0,y=new Array,f=new Array;if(i===E.Hatch_BackwardDiagonal){for(A=Math.trunc(L/n),I=Math.trunc(d/n),S=0;S<I;S++)_=new c.POINT2(u,g+n*S),y.push(_);for(S=0;S<A;S++)h=new c.POINT2(u+n*S,g),f.push(h);for(s.moveTo(new c.POINT2(u-n/2,g-n/2)),s.lineTo(new c.POINT2(u,g)),S=0;S<I;S++)S%2==0?(s.lineTo(y[S]),s.lineTo(f[S])):(s.lineTo(f[S]),s.lineTo(y[S]));s.lineTo(new c.POINT2(u+L+n/2,g+d+n/2)),s.lineTo(new c.POINT2(u+L+n,g+d+n/2)),s.lineTo(new c.POINT2(u+L+n,g-n/2)),s.lineTo(new c.POINT2(u-n/2,g-n/2))}if(i===E.Hatch_ForwardDiagonal){for(A=Math.trunc(L/n),I=Math.trunc(d/n),L/=2,S=0;S<I;S++)_=new c.POINT2(u+L,g+n*S),y.push(_);for(S=0;S<A;S++)h=new c.POINT2(u+L-n*S,g),f.push(h);for(s.moveTo(new c.POINT2(u+L+n/2,g-n/2)),s.lineTo(new c.POINT2(u,g)),S=0;S<I;S++)S%2==0?(s.lineTo(y[S]),s.lineTo(f[S])):(s.lineTo(f[S]),s.lineTo(y[S]));s.lineTo(new c.POINT2(u-n/2,g+d+n/2)),s.lineTo(new c.POINT2(u-n,g+d+n/2)),s.lineTo(new c.POINT2(u-n,g-n/2)),s.lineTo(new c.POINT2(u+L+n/2,g-n/2))}if(i===E.Hatch_Vertical){for(A=Math.trunc(L/(n/2)),I=Math.trunc(d/(n/2)),S=0;S<A;S++)S%2==0?(_=new c.POINT2(u+n/2*S,g),y.push(_),_=new c.POINT2(u+n/2*S,g+d),y.push(_)):(_=new c.POINT2(u+n/2*S,g+d),y.push(_),_=new c.POINT2(u+n/2*S,g),y.push(_));for(s.moveTo(new c.POINT2(u-n/2,g-n/2)),s.lineTo(new c.POINT2(u,g)),S=0;S<I-1;S++)s.lineTo(y[S]);s.lineTo(new c.POINT2(u+L+n/2,g+d+n/2)),s.lineTo(new c.POINT2(u+L+n,g+d+n/2)),s.lineTo(new c.POINT2(u+L+n,g-n/2)),s.lineTo(new c.POINT2(u-n/2,g-n/2))}if(i===E.Hatch_Horizontal){for(A=Math.trunc(L/(n/2)),I=Math.trunc(d/(n/2)),S=0;S<I;S++)S%2==0?(h=new c.POINT2(u,g+n/2*S),f.push(h),h=new c.POINT2(u+L,g+n/2*S),f.push(h)):(h=new c.POINT2(u+L,g+n/2*S),f.push(h),h=new c.POINT2(u,g+n/2*S),f.push(h));for(s.moveTo(new c.POINT2(u-n/2,g-n/2)),s.lineTo(new c.POINT2(u,g)),S=0;S<I-1;S++)s.lineTo(f[S]);s.lineTo(new c.POINT2(u-n/2,g+d+n/2)),s.lineTo(new c.POINT2(u-n,g+d+n/2)),s.lineTo(new c.POINT2(u-n,g-n/2)),s.lineTo(new c.POINT2(u+L+n/2,g-n/2))}let D=new a.Area(t.getShape());l=new a.Area(s.getShape()),l.intersect(D),s.setShape(l)}catch(e){if(!(e instanceof Error))throw e;d.ErrorLogger.LogException(E._className,"buildHatchArea",new _.RendererException("Failed inside buildHatchArea",e))}return s}static POINT2ToPoint(e){let t=new s.Point;return t.x=e.x,t.y=e.y,t}static PointToPOINT2(e){return new c.POINT2(e.x,e.y)}static POINT2ToPoint2D(e){return new l.Point2D(e.x,e.y)}static Points2DToPOINT2(e){let t,i=new Array,a=e.length;for(let n=0;n<a;n++)t=new c.POINT2(e[n].getX(),e[n].getY()),i.push(t);return i}static Point2DToPOINT2(e){return new c.POINT2(e.getX(),e.getY())}static addModifiersBeforeClipping(e){let t=!1,i=e.get_LineType();switch(i){case u.TacticalLines.TORPEDO:case u.TacticalLines.OPTICAL:case u.TacticalLines.ELECTRO:case u.TacticalLines.BEARING_EW:case u.TacticalLines.ACOUSTIC:case u.TacticalLines.ACOUSTIC_AMB:case u.TacticalLines.BEARING:case u.TacticalLines.BEARING_J:case u.TacticalLines.BEARING_RDF:case u.TacticalLines.MSR:case u.TacticalLines.MSR_ONEWAY:case u.TacticalLines.MSR_TWOWAY:case u.TacticalLines.MSR_ALT:case u.TacticalLines.ASR:case u.TacticalLines.ASR_ONEWAY:case u.TacticalLines.ASR_TWOWAY:case u.TacticalLines.ASR_ALT:case u.TacticalLines.ROUTE:case u.TacticalLines.ROUTE_ONEWAY:case u.TacticalLines.ROUTE_ALT:case u.TacticalLines.HCONVOY:case u.TacticalLines.CONVOY:case u.TacticalLines.MFP:case u.TacticalLines.RFL:case u.TacticalLines.NFL:case u.TacticalLines.CFL:case u.TacticalLines.FSCL:case u.TacticalLines.BCL_REVD:case u.TacticalLines.BCL:case u.TacticalLines.ICL:case u.TacticalLines.IFF_OFF:case u.TacticalLines.IFF_ON:case u.TacticalLines.GENERIC_LINE:case u.TacticalLines.FPF:case u.TacticalLines.LINTGT:case u.TacticalLines.LINTGTS:case u.TacticalLines.MSDZ:case u.TacticalLines.GAP:case u.TacticalLines.IL:case u.TacticalLines.DIRATKAIR:case u.TacticalLines.PDF:case u.TacticalLines.AC:case u.TacticalLines.SAAFR:case u.TacticalLines.LLTR:case u.TacticalLines.SC:case u.TacticalLines.MRR:case u.TacticalLines.SL:case u.TacticalLines.TC:case u.TacticalLines.BOUNDARY:case u.TacticalLines.WDRAWUP:case u.TacticalLines.WITHDRAW:case u.TacticalLines.RETIRE:case u.TacticalLines.FPOL:case u.TacticalLines.RPOL:case u.TacticalLines.RIP:case u.TacticalLines.DELAY:case u.TacticalLines.CATK:case u.TacticalLines.CATKBYFIRE:case u.TacticalLines.SCREEN:case u.TacticalLines.COVER:case u.TacticalLines.GUARD:case u.TacticalLines.FLOT:case u.TacticalLines.LC:case u.TacticalLines.PL:case u.TacticalLines.FEBA:case u.TacticalLines.LL:case u.TacticalLines.EWL:case u.TacticalLines.FCL:case u.TacticalLines.HOLD:case u.TacticalLines.BRDGHD:case u.TacticalLines.HOLD_GE:case u.TacticalLines.BRDGHD_GE:case u.TacticalLines.LOA:case u.TacticalLines.LOD:case u.TacticalLines.LDLC:case u.TacticalLines.PLD:case u.TacticalLines.RELEASE:case u.TacticalLines.HOL:case u.TacticalLines.BHL:t=!0}return!0===h.clsUtility.isClosedPolygon(i)&&(t=!0),t}static FilterPoints(e){try{let t=e.get_LineType(),i=0;switch(t){case u.TacticalLines.ATDITCH:case u.TacticalLines.ATDITCHC:case u.TacticalLines.ATDITCHM:case u.TacticalLines.FLOT:case u.TacticalLines.FORT_REVD:case u.TacticalLines.FORT:case u.TacticalLines.FORTL:case u.TacticalLines.STRONG:i=25;break;case u.TacticalLines.LC:case u.TacticalLines.OBSAREA:case u.TacticalLines.OBSFAREA:case u.TacticalLines.ENCIRCLE:case u.TacticalLines.ZONE:case u.TacticalLines.LINE:case u.TacticalLines.ATWALL:case u.TacticalLines.UNSP:case u.TacticalLines.SFENCE:case u.TacticalLines.DFENCE:case u.TacticalLines.DOUBLEA:case u.TacticalLines.LWFENCE:case u.TacticalLines.HWFENCE:case u.TacticalLines.SINGLEC:case u.TacticalLines.DOUBLEC:case u.TacticalLines.TRIPLE:i=35;break;case u.TacticalLines.UCF:case u.TacticalLines.CF:case u.TacticalLines.CFG:case u.TacticalLines.CFY:case u.TacticalLines.SF:case u.TacticalLines.USF:case u.TacticalLines.OCCLUDED:case u.TacticalLines.UOF:case u.TacticalLines.SFG:case u.TacticalLines.SFY:case u.TacticalLines.WFY:case u.TacticalLines.WFG:case u.TacticalLines.OFY:i=60;break;case u.TacticalLines.WF:case u.TacticalLines.UWF:i=40;break;case u.TacticalLines.RIDGE:case u.TacticalLines.ICE_EDGE_RADAR:case u.TacticalLines.ICE_OPENINGS_FROZEN:case u.TacticalLines.CRACKS_SPECIFIC_LOCATION:i=35;break;default:return}let a=0,n=0,s=new Array,l=new Array;s.push(e.Pixels[0]),l.push(e.LatLongs[0]);let r,c,T=e.Pixels[0],g=!1,L=e.Pixels.length;for(a=1;a<L;a++)r=e.Pixels[a],c=e.LatLongs[a],-1!==r.style?(n=o.lineutility.CalcDistanceDouble(T,r),t===u.TacticalLines.LC?n>i?(T=r,s.push(r),l.push(c),g=!0):a===e.Pixels.length-1&&(s[s.length-1]=r,l[l.length-1]=c):(n>i||a===e.Pixels.length-1)&&(T=r,s.push(r),l.push(c),g=!0)):(T=r,s.push(r),l.push(c),g=!0,r.style=0);!0===g&&(e.Pixels=s,e.LatLongs=l)}catch(e){if(!(e instanceof Error))throw e;d.ErrorLogger.LogException("clsUtility","FilterPoints",new _.RendererException("Failed inside FilterPoints",e))}}static PixelsToLatLong(e,t){let i,a,n=0,s=new Array,l=e.length;for(n=0;n<l;n++)i=e[n],a=E.PointPixelsToLatLong(i,t),s.push(a);return s}static LatLongToPixels(e,t){let i,a,n=0,s=new Array,l=e.length;for(n=0;n<l;n++)i=e[n],a=E.PointLatLongToPixels(i,t),s.push(a);return s}static PointLatLongToPixels(e,t){let i=new c.POINT2,a=E.POINT2ToPoint2D(e);return a=t.GeoToPixels(a),i=E.Point2DToPOINT2(a),i.style=e.style,i}static FilterAXADPoints(e,t){try{switch(e.get_LineType()){case u.TacticalLines.CATK:case u.TacticalLines.CATKBYFIRE:case u.TacticalLines.AIRAOA:case u.TacticalLines.AAAAA:case u.TacticalLines.SPT:case u.TacticalLines.MAIN:break;default:return}let i,a,n=0,s=new Array,r=new Array,T=e.Pixels[0],g=e.Pixels[1],L=new l.Point2D(g.x,g.y),d=t.PixelsToGeo(L),_=new c.POINT2(d.getX(),d.getY()),h=e.Pixels[e.Pixels.length-1],E=o.lineutility.PointRelativeToLine(T,g,T,h),A=o.lineutility.CalcDistanceDouble(E,h);A+=5;let I=o.lineutility.CalcDistanceDouble(T,g),S=!1;A>I?(s.push(T),L=new l.Point2D(T.x,T.y),d=t.PixelsToGeo(L),_=new c.POINT2(d.getX(),d.getY()),r.push(_),g=o.lineutility.ExtendAlongLineDouble(T,g,A),s.push(g),L=new l.Point2D(g.x,g.y),d=t.PixelsToGeo(L),_=new c.POINT2(d.getX(),d.getY()),r.push(_)):(S=!0,s=e.Pixels,r=e.LatLongs);let y=e.Pixels.length;if(!1===S){for(n=2;n<y-1;n++)if(i=e.Pixels[n],a=e.LatLongs[n],S)s.push(i),r.push(a);else{if(I=o.lineutility.CalcDistanceDouble(T,i),A>I)continue;s.push(i),r.push(a),S=!0}s.push(h),L=new l.Point2D(h.x,h.y),d=t.PixelsToGeo(L),_=new c.POINT2(d.getX(),d.getY()),r.push(_)}let f,D,M=s[1],P=0;for(e.Pixels=new Array,e.LatLongs=new Array,n=0;n<2;n++)e.Pixels.push(s[n]),e.LatLongs.push(r[n]);for(y=s.length,n=2;n<y-1;n++)f=s[n],D=r[n],P=o.lineutility.CalcDistanceDouble(f,M),P>5&&(M=f,e.Pixels.push(f),e.LatLongs.push(D));e.Pixels.push(s[s.length-1]),e.LatLongs.push(r[r.length-1])}catch(e){if(!(e instanceof Error))throw e;d.ErrorLogger.LogException("clsUtility","FilterAXADPoints",new _.RendererException("Failed inside FilterAXADPoints",e))}}static RemoveDuplicatePoints(e){try{switch(e.get_LineType()){case u.TacticalLines.SC:case u.TacticalLines.MRR:case u.TacticalLines.SL:case u.TacticalLines.TC:case u.TacticalLines.LLTR:case u.TacticalLines.AC:case u.TacticalLines.SAAFR:break;default:if(h.clsUtility.isAutoshape(e))return}switch(e.get_LineType()){case u.TacticalLines.CATK:case u.TacticalLines.AIRAOA:case u.TacticalLines.AAAAA:case u.TacticalLines.SPT:case u.TacticalLines.MAIN:case u.TacticalLines.CATKBYFIRE:return;case u.TacticalLines.BOUNDARY:case u.TacticalLines.MSR:case u.TacticalLines.ASR:case u.TacticalLines.ROUTE:{let t=e.get_H();if(null!=t&&t.length>0&&t.split(",").length>1)return;break}}let t,i,a=e.get_LineType();if(h.clsUtility.IsChange1Area(a))return;let n=h.clsUtility.isClosedPolygon(e.get_LineType()),s=2;n&&(s=3);for(let a=1;a<e.Pixels.length;a++)i=new c.POINT2(e.Pixels[a-1]),t=new c.POINT2(e.Pixels[a]),Math.abs(t.x-i.x)<.5&&Math.abs(t.y-i.y)<.5&&e.Pixels.length>s&&(e.Pixels.splice(a,1),e.LatLongs.splice(a,1),a=1)}catch(e){if(!(e instanceof Error))throw e;d.ErrorLogger.LogException("clsUtility","RemoveDuplicatePoints",new _.RendererException("Failed inside RemoveDuplicatePoints",e))}}static PointPixelsToLatLong(e,t){let i=new c.POINT2;try{let a=new l.Point2D(e.x,e.y),n=t.PixelsToGeo(a);i=E.Point2DToPOINT2(n),i.style=e.style}catch(e){if(!(e instanceof Error))throw e;d.ErrorLogger.LogException("clsUtility","PointPixelsToLatLong",new _.RendererException("Could not convert point to geo",e))}return i}static getMBR(e){let t;try{let i,a=0,n=e[0].getX(),s=n,l=e[0].getY(),o=l,c=e.length;for(a=0;a<c;a++)i=e[a],i.getX()<s&&(s=i.getX()),i.getX()>n&&(n=i.getX()),i.getY()<=o&&(o=i.getY()),i.getY()>l&&(l=i.getY());t=new r.Rectangle2D(s,o,n-s,l-o)}catch(e){if(!(e instanceof Error))throw e;d.ErrorLogger.LogException(E._className,"AddBoundaryPointsForLines",new _.RendererException("Failed inside AddBoundaryPointsForLines",e))}return t}static GetMBR(e,t,i,a,n){try{let s=e[0].getPoints()[0];t.x=s.x,t.y=s.y,i.x=s.x,i.y=s.y,n.x=s.x,n.y=s.y,a.x=s.x,a.y=s.y;for(let s of e){let e=s.getPoints();for(let s=0;s<e.length;s++){let l=e[s].x,r=e[s].y;l<n.x&&(n.x=l,t.x=l),l>a.x&&(a.x=l,i.x=l),r>n.y&&(n.y=r,a.y=r),r<t.y&&(t.y=r,i.y=r)}}}catch(e){if(!(e instanceof Error))throw e;d.ErrorLogger.LogException(E._className,"GetMBR",new _.RendererException("Failed inside GetMBR",e))}}}t.clsUtility=E},628:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Font=void 0;class i{static PLAIN=0;static BOLD=1;static ITALIC=2;_size=10;_text="";_type=0;constructor(e,t,i){this._text=e,this._type=t,this._size=i}getSize(){return this._size}getName(){return this._text}getType(){return this._type}isBold(){return this._type===i.BOLD}getTypeString(){let e;switch(this._type){case i.BOLD:e="bold";break;case i.ITALIC:e="italic";break;default:e="normal"}return e}static getTypeString(e){let t;return t=e===i.BOLD?"bold":"normal",t}static getTypeInt(e){let t=i.PLAIN;switch(e){case"bold":t=i.BOLD;break;case"italic":t=i.ITALIC;break;default:t=i.PLAIN}return t}toString(){return this.getTypeString()+" "+this._size+"px "+this._text}}t.Font=i},680:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MSInfo=void 0;const a=i(3247),n=i(2051),s=i(2421);class l{_Version=0;_Name;_Path;_SymbolSet;_SymbolSetInt=0;_EntityCode;_Geometry="point";_Modifiers;_MinPointCount=0;_MaxPointCount=0;_DrawRule=0;constructor(...e){switch(e.length){case 7:{const[t,i,n,r,o,c,T]=e;this._Version=t,this._SymbolSetInt=parseInt(i),this._SymbolSet=l.parseSymbolSetName(i,this._Version),null!=o&&""!==o&&(this._Name=o,this._Path=this._SymbolSet+" / "+n+" / "+r+" / "),null!=r&&""!==r&&(null==this._Name&&(this._Name=r),null==this._Path&&(this._Path=this._SymbolSet+" / "+n+" / ")),null!=n&&""!==n&&(null==this._Name&&(this._Name=n),null==this._Path&&(this._Path=this._SymbolSet+" / ")),null!=c&&6===c.length&&(this._EntityCode=c),this._Geometry="point","000000"!==c&&this._SymbolSetInt!==s.SymbolID.SymbolSet_ControlMeasure&&this._SymbolSetInt!==s.SymbolID.SymbolSet_Atmospheric&&this._SymbolSetInt!==s.SymbolID.SymbolSet_Oceanographic&&this._SymbolSetInt!==s.SymbolID.SymbolSet_MeteorologicalSpace&&(this._DrawRule=a.DrawRules.POINT2,this._MinPointCount=1,this._MaxPointCount=1),this._Modifiers=T;break}case 9:{const[t,i,a,n,s,r,o,c,T]=e;this._Version=t,this._SymbolSetInt=parseInt(i),this._SymbolSet=l.parseSymbolSetName(i,this._Version),null!=s&&""!==s&&(this._Name=s,this._Path=this._SymbolSet+" / "+a+" / "+n+" / "),null!=n&&""!==n&&(null==this._Name&&(this._Name=n),null==this._Path&&(this._Path=this._SymbolSet+" / "+a+" / ")),null!=a&&""!==a&&(null==this._Name&&(this._Name=a),null==this._Path&&(this._Path=this._SymbolSet+" / ")),null!=r&&6===r.length&&(this._EntityCode=r),this._Geometry=o,this._DrawRule=this.parseDrawRule(c);let u=[0,0];"25"===i?u=l.getMinMaxPointsFromDrawRule(this._DrawRule,t):"45"!==i&&"46"!==i||(u=l.getMinMaxPointsFromMODrawRule(this._DrawRule)),this._MinPointCount=u[0],this._MaxPointCount=u[1],this._Modifiers=T;break}default:throw Error("Invalid number of arguments")}}parseDrawRule(e){let t=0;switch(e.toLowerCase()){case"area1":t=a.DrawRules.AREA1;break;case"area2":t=a.DrawRules.AREA2;break;case"area3":t=a.DrawRules.AREA3;break;case"area4":t=a.DrawRules.AREA4;break;case"area5":t=a.DrawRules.AREA5;break;case"area6":t=a.DrawRules.AREA6;break;case"area7":t=a.DrawRules.AREA7;break;case"area8":t=a.DrawRules.AREA8;break;case"area9":t=a.DrawRules.AREA9;break;case"area10":t=a.DrawRules.AREA10;break;case"area11":t=a.DrawRules.AREA11;break;case"area12":t=a.DrawRules.AREA12;break;case"area13":t=a.DrawRules.AREA13;break;case"area14":t=a.DrawRules.AREA14;break;case"area15":t=a.DrawRules.AREA15;break;case"area16":t=a.DrawRules.AREA16;break;case"area17":t=a.DrawRules.AREA17;break;case"area18":t=a.DrawRules.AREA18;break;case"area19":t=a.DrawRules.AREA19;break;case"area20":t=a.DrawRules.AREA20;break;case"area21":t=a.DrawRules.AREA21;break;case"area22":t=a.DrawRules.AREA22;break;case"area23":t=a.DrawRules.AREA23;break;case"area24":t=a.DrawRules.AREA24;break;case"area25":t=a.DrawRules.AREA25;break;case"area26":t=a.DrawRules.AREA26;break;case"point1":t=a.DrawRules.POINT1;break;case"point2":t=a.DrawRules.POINT2;break;case"point3":t=a.DrawRules.POINT3;break;case"point4":t=a.DrawRules.POINT4;break;case"point5":t=a.DrawRules.POINT5;break;case"point6":t=a.DrawRules.POINT6;break;case"point7":t=a.DrawRules.POINT7;break;case"point8":t=a.DrawRules.POINT8;break;case"point9":t=a.DrawRules.POINT9;break;case"point10":t=a.DrawRules.POINT10;break;case"point11":t=a.DrawRules.POINT11;break;case"point12":t=a.DrawRules.POINT12;break;case"point13":t=a.DrawRules.POINT13;break;case"point14":t=a.DrawRules.POINT14;break;case"point15":t=a.DrawRules.POINT15;break;case"point16":t=a.DrawRules.POINT16;break;case"point17":t=a.DrawRules.POINT17;break;case"point18":t=a.DrawRules.POINT18;break;case"line1":t=a.DrawRules.LINE1;break;case"line2":t=a.DrawRules.LINE2;break;case"line3":t=a.DrawRules.LINE3;break;case"line4":t=a.DrawRules.LINE4;break;case"line5":t=a.DrawRules.LINE5;break;case"line6":t=a.DrawRules.LINE6;break;case"line7":t=a.DrawRules.LINE7;break;case"line8":t=a.DrawRules.LINE8;break;case"line9":t=a.DrawRules.LINE9;break;case"line10":t=a.DrawRules.LINE10;break;case"line11":t=a.DrawRules.LINE11;break;case"line12":t=a.DrawRules.LINE12;break;case"line13":t=a.DrawRules.LINE13;break;case"line14":t=a.DrawRules.LINE14;break;case"line15":t=a.DrawRules.LINE15;break;case"line16":t=a.DrawRules.LINE16;break;case"line17":t=a.DrawRules.LINE17;break;case"line18":t=a.DrawRules.LINE18;break;case"line19":t=a.DrawRules.LINE19;break;case"line20":t=a.DrawRules.LINE20;break;case"line21":t=a.DrawRules.LINE21;break;case"line22":t=a.DrawRules.LINE22;break;case"line23":t=a.DrawRules.LINE23;break;case"line24":t=a.DrawRules.LINE24;break;case"line25":t=a.DrawRules.LINE25;break;case"line26":t=a.DrawRules.LINE26;break;case"line27":t=a.DrawRules.LINE27;break;case"line28":t=a.DrawRules.LINE28;break;case"line29":t=a.DrawRules.LINE29;break;case"corridor1":t=a.DrawRules.CORRIDOR1;break;case"axis1":t=a.DrawRules.AXIS1;break;case"axis2":t=a.DrawRules.AXIS2;break;case"polyline1":t=a.DrawRules.POLYLINE1;break;case"ellipse1":t=a.DrawRules.ELLIPSE1;break;case"rectangular1":t=a.DrawRules.RECTANGULAR1;break;case"rectangular2":t=a.DrawRules.RECTANGULAR2;break;case"rectangular3":t=a.DrawRules.RECTANGULAR3;break;case"circular1":t=a.DrawRules.CIRCULAR1;break;case"circular2":t=a.DrawRules.CIRCULAR2;break;case"arc1":t=a.DrawRules.ARC1;break;default:t=a.DrawRules.DONOTDRAW}return t}static parseSymbolSetName(...e){switch(e.length){case 1:{const[t]=e;return l.parseSymbolSetName(t.substring(4,6),s.SymbolID.getVersion(t))}case 2:{const[t,i]=e;let a;switch(t){case"01":a="Air";break;case"02":a="Air Missile";break;case"05":a="Space";break;case"06":a="Space Missile";break;case"10":a="Land Unit";break;case"11":a="Land Civilian Unit-Org";break;case"15":a="Land Equipment";break;case"20":a="Land Installations";break;case"25":a="Control Measure";break;case"27":a="Dismounted Individuals";break;case"30":a="Sea Surface";break;case"35":a="Sea Subsurface";break;case"36":a="Mine Warfare";break;case"40":a="Activities";break;case"45":a="Atmospheric";break;case"46":a="Oceanographic";break;case"47":a="Meteorological Space";break;case"50":a=i<s.SymbolID.Version_2525E?"Space SIGINT":"SIGINT";break;case"51":a="Air SIGINT";break;case"52":a="Land SIGINT";break;case"53":a="Sea Surface SIGINT";break;case"54":a="Sea Subsurface SIGINT";break;case"60":a="Cyberspace";break;default:a="UNKNOWN"}return a}default:throw Error("Invalid number of arguments")}}static getMinMaxPointsFromDrawRule(e,t){let i=[1,1];switch(e){case a.DrawRules.AREA1:case a.DrawRules.AREA2:case a.DrawRules.AREA3:case a.DrawRules.AREA4:case a.DrawRules.AREA9:case a.DrawRules.AREA20:case a.DrawRules.AREA23:i[0]=3,i[1]=Number.MAX_VALUE;break;case a.DrawRules.AREA5:case a.DrawRules.AREA7:case a.DrawRules.AREA11:case a.DrawRules.AREA12:case a.DrawRules.AREA17:case a.DrawRules.AREA21:case a.DrawRules.AREA24:case a.DrawRules.AREA25:case a.DrawRules.POINT12:case a.DrawRules.LINE3:case a.DrawRules.LINE6:case a.DrawRules.LINE10:case a.DrawRules.LINE12:case a.DrawRules.LINE15:case a.DrawRules.LINE17:case a.DrawRules.LINE22:case a.DrawRules.LINE23:case a.DrawRules.LINE24:case a.DrawRules.LINE29:case a.DrawRules.POLYLINE1:i[0]=3,i[1]=3;break;case a.DrawRules.AREA6:case a.DrawRules.AREA13:case a.DrawRules.AREA15:case a.DrawRules.AREA16:case a.DrawRules.AREA19:case a.DrawRules.LINE4:case a.DrawRules.LINE5:case a.DrawRules.LINE9:case a.DrawRules.LINE14:case a.DrawRules.LINE18:case a.DrawRules.LINE19:case a.DrawRules.LINE20:case a.DrawRules.LINE25:case a.DrawRules.LINE28:case a.DrawRules.RECTANGULAR1:case a.DrawRules.RECTANGULAR3:i[0]=2,i[1]=2;break;case a.DrawRules.AREA8:case a.DrawRules.AREA18:case a.DrawRules.LINE11:case a.DrawRules.LINE16:i[0]=4,i[1]=4;break;case a.DrawRules.AREA10:i[0]=3,i[1]=6;break;case a.DrawRules.AREA14:i[0]=3,t==s.SymbolID.Version_2525D?i[1]=4:i[1]=3;break;case a.DrawRules.LINE1:case a.DrawRules.LINE2:case a.DrawRules.LINE7:case a.DrawRules.LINE13:case a.DrawRules.LINE21:case a.DrawRules.CORRIDOR1:i[0]=2,i[1]=Number.MAX_VALUE;break;case a.DrawRules.AREA26:i[0]=6,i[1]=Number.MAX_VALUE;break;case a.DrawRules.LINE8:i[0]=2,i[1]=300;break;case a.DrawRules.LINE26:case a.DrawRules.LINE27:t>=s.SymbolID.Version_2525E?i[0]=4:i[0]=3,i[1]=4;break;case a.DrawRules.AXIS1:case a.DrawRules.AXIS2:i[0]=3,i[1]=50;break;case 0:i[0]=0,i[1]=0;case a.DrawRules.AREA22:case a.DrawRules.POINT17:case a.DrawRules.POINT18:case a.DrawRules.ELLIPSE1:case a.DrawRules.RECTANGULAR2:}return i}static getMinMaxPointsFromMODrawRule(e){let t=[1,1];switch(e){case n.MODrawRules.AREA1:case n.MODrawRules.AREA2:case n.MODrawRules.LINE5:t[0]=3,t[1]=Number.MAX_VALUE;break;case n.MODrawRules.POINT5:case n.MODrawRules.LINE1:case n.MODrawRules.LINE2:case n.MODrawRules.LINE3:case n.MODrawRules.LINE4:case n.MODrawRules.LINE6:case n.MODrawRules.LINE7:case n.MODrawRules.LINE8:t[0]=2,t[1]=Number.MAX_VALUE;break;case 0:t[0]=0,t[1]=0}return t}getVersion(){return this._Version}getName(){return this._Name}getPath(){return this._Path}getGeometry(){return this._Geometry}getDrawRule(){return this._DrawRule}getSymbolSet(){return this._SymbolSetInt}getEntityCode(){return Number.parseInt(this._EntityCode)}getBasicSymbolID(){return this._SymbolSetInt<10?"0"+this._SymbolSetInt+this._EntityCode:""+this._SymbolSetInt+this._EntityCode}getMinPointCount(){return this._MinPointCount}getMaxPointCount(){return this._MaxPointCount}getModifiers(){return this._Modifiers}}t.MSInfo=l},921:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clsClipQuad=void 0;const a=i(1207),n=i(7389),s=i(5772),l=i(8101),r=i(3515),o=i(7300),c=i(106),T=i(8678),u=i(1024),g=i(8977),L=i(9441),d=i(6967),_=i(9485);class h{static _className="clsClipQuad";static AddBoundaryPointsForLines(e,t){let i=0;try{let s=e[0],l=e[e.length-1],r=new n.POINT2(s.getX(),s.getY()),o=new n.POINT2(l.getX(),l.getY()),c=new L.Point2D,T=new d.Polygon,u=0,g=Number.MAX_VALUE,_=0,h=new n.POINT2,E=!1,A=!1;for(u=0;u<t.length;u++)T.addPoint(t[u].getX(),t[u].getY());let I=0,S=0,y=0;for(u=0;u<t.length-1;u++)I+=t[u].getX(),S+=t[u].getY(),y++;t[0].getX()===t[u].getX()&&t[0].getY()===t[u].getY()||(I+=t[u].getX(),S+=t[u].getY(),y++);let f,D=I/y,M=S/y,P=new n.POINT2(D,M);if(!1===T.contains(s)){for(u=0;u<t.length;u++)h.x=t[u].getX(),h.y=t[u].getY(),_=a.lineutility.CalcDistanceDouble(r,h),_<g&&(g=_,c.setLocation(h.x,h.y));f=new n.POINT2(c.getX(),c.getY()),f=a.lineutility.ExtendAlongLineDouble(f,P,2),c.setLocation(f.x,f.y),e.splice(0,0,c),E=!0}if(c=new L.Point2D,g=Number.MAX_VALUE,!1===T.contains(l)){for(u=0;u<t.length;u++)h.x=t[u].getX(),h.y=t[u].getY(),_=a.lineutility.CalcDistanceDouble(o,h),_<g&&(g=_,c.setLocation(h.x,h.y));f=new n.POINT2(c.getX(),c.getY()),f=a.lineutility.ExtendAlongLineDouble(f,P,2),c.setLocation(f.x,f.y),e.push(c),A=!0}!1===E&&!1===A?i=0:!0===E&&!1===A?i=1:!1===E&&!0===A?i=2:!0===E&&!0===A&&(i=3)}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(h._className,"AddBoundaryPointsForLines",new c.RendererException("Failed inside AddBoundaryPointsForLines",e))}return i}static CalcTrueIntersectDouble(e,t,i,a,n,s,l,r){let T=new L.Point2D(l,r);try{let o=0,c=0;if(0===n&&0===s)return T;if(0===n&&1===s)return T.setLocation(l,i*l+a),T;if(1===n&&0===s)return T.setLocation(r,e*r+t),T;if(e!==i)return o=(a-t)/(e-i),c=e*o+t,T.setLocation(o,c),T}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(h._className,"CalcTrueIntersectDouble",new c.RendererException("Failed inside CalcTrueIntersectDouble",e))}return T}static intersectPoint2(e,t,i){let a;try{let n=i.getP1(),s=i.getP2();Math.abs(t.getX()-e.getX())<1&&t.setLocation(t.getX()+1,t.getY());let l=(s.getY()-n.getY())/(s.getX()-n.getX()),r=(t.getY()-e.getY())/(t.getX()-e.getX()),o=s.getY()-l*s.getX(),c=t.getY()-r*t.getX();a=h.CalcTrueIntersectDouble(l,o,r,c,1,1,0,0)}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(h._className,"intersectPoint2",new c.RendererException("Failed inside intersectPoint2",e))}return a}static clipSide(e,t,i,n){let s;try{let l,r,o,c,T,u,g,d,E=new L.Point2D(n[i].getX(),n[i].getY()),A=new L.Point2D(n[i+1].getX(),n[i+1].getY()),I=0,S=0,y=0,f=0,D=0,M=0,P=0,R=-1,N=-1,C=-1;for(s=new Array,0===i?l=new L.Point2D(n[i+2].getX(),n[i+2].getY()):i>1?l=new L.Point2D(n[i-2].getX(),n[i-2].getY()):1===i&&(l=new L.Point2D(n[0].getX(),n[0].getY())),Math.abs(A.getX()-E.getX())<1&&A.setLocation(A.getX()+1,A.getY()),Math.abs(A.getY()-E.getY())<1&&A.setLocation(A.getX(),A.getY()+1),P=0;P<t.length;P++)if(T=t[P],u=0===P?t[t.length-1]:t[P-1],I=(A.getY()-E.getY())/(A.getX()-E.getX()),S=-1/I,y=A.getY()-I*A.getX(),f=u.getY()-S*u.getX(),D=T.getY()-S*T.getX(),M=l.getY()-S*l.getX(),o=h.CalcTrueIntersectDouble(I,y,S,f,1,1,0,0),c=h.CalcTrueIntersectDouble(I,y,S,D,1,1,0,0),r=h.CalcTrueIntersectDouble(I,y,S,M,1,1,0,0),R=a.lineutility.GetQuadrantDouble(l.getX(),l.getY(),r.getX(),r.getY()),N=a.lineutility.GetQuadrantDouble(u.getX(),u.getY(),o.getX(),o.getY()),C=a.lineutility.GetQuadrantDouble(T.getX(),T.getY(),c.getX(),c.getY()),N===R&&C===R)s.push(T);else if(N===R&&C!==R)d=new _.Line2D(E,A),g=h.intersectPoint2(u,T,d),null!=g&&s.push(g),e.set_WasClipped(!0);else if(N!==R&&C===R)d=new _.Line2D(E,A),g=h.intersectPoint2(u,T,d),null!=g&&s.push(g),s.push(T),e.set_WasClipped(!0);else if(N!==R&&C!==R)continue}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(h._className,"clipSide",new c.RendererException("Failed inside clipSide",e))}return s}static addAbatisFill(e,t){try{if(null==e.Pixels||e.Pixels.length<2||null==e.get_FillColor()||e.get_FillColor().getAlpha()<2||null==t)return;let i,a,n=0,o=e.Pixels.length;switch(e.get_LineType()){case l.TacticalLines.MSDZ:{let t=0,a=0,l=0;if(i=new s.Shape2(s.Shape2.SHAPE_TYPE_POLYLINE),i.setFillColor(e.get_FillColor()),null!=e.Pixels&&e.Pixels.length>=300){t=Math.abs(e.Pixels[0].x-e.Pixels[50].x),a=Math.abs(e.Pixels[100].x-e.Pixels[150].x),l=Math.abs(e.Pixels[200].x-e.Pixels[250].x);let s=-1,r=-1;for(t>=a&&t>=l?(s=0,r=99):a>=t&&a>=l?(s=100,r=199):(s=200,r=299),i.moveTo(e.Pixels[s]),n=s;n<=r;n++)i.lineTo(e.Pixels[n])}break}case l.TacticalLines.ABATIS:if(i=new s.Shape2(s.Shape2.SHAPE_TYPE_POLYLINE),i.setFillColor(e.get_FillColor()),a=new r.TGLight,a.set_LineType(l.TacticalLines.GENERAL),a.Pixels=new Array,null!=e.Pixels&&e.Pixels.length>2)for(a.Pixels.push(e.Pixels[o-3]),a.Pixels.push(e.Pixels[o-2]),a.Pixels.push(e.Pixels[o-1]),a.Pixels.push(e.Pixels[o-3]),i.moveTo(a.Pixels[0]),n=1;n<a.Pixels.length;n++)i.lineTo(a.Pixels[n]);break;default:return}null!=t&&t.splice(0,0,i)}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(h._className,"addAbatisFill",new c.RendererException("Failed inside addAbatisFill",e))}}static LinesWithFill(e,t){let i;try{if(null==e.get_FillColor()||e.get_FillColor().getAlpha()<=1||null==e.Pixels||0===e.Pixels.length)return i;switch(e.get_LineType()){case l.TacticalLines.ABATIS:case l.TacticalLines.SPT:case l.TacticalLines.MAIN:case l.TacticalLines.AAAAA:case l.TacticalLines.AIRAOA:case l.TacticalLines.CATK:case l.TacticalLines.CATKBYFIRE:case l.TacticalLines.CORDONSEARCH:case l.TacticalLines.CORDONKNOCK:case l.TacticalLines.SECURE:case l.TacticalLines.OCCUPY:case l.TacticalLines.RETAIN:case l.TacticalLines.ISOLATE:case l.TacticalLines.CONVOY:case l.TacticalLines.HCONVOY:return i;case l.TacticalLines.PAA_RECTANGULAR:case l.TacticalLines.RECTANGULAR_TARGET:return null;case l.TacticalLines.OBSFAREA:case l.TacticalLines.OBSAREA:case l.TacticalLines.STRONG:case l.TacticalLines.ZONE:case l.TacticalLines.FORT_REVD:case l.TacticalLines.FORT:case l.TacticalLines.ENCIRCLE:case l.TacticalLines.ATDITCHC:case l.TacticalLines.ATDITCHM:return h.fillDMA(e,t)}if(!1===T.clsUtility.LinesWithFill(e.get_LineType()))return i;let a;i=new Array;let n=new r.TGLight;if(n.set_LineType(l.TacticalLines.GENERAL),n.Pixels=new Array,n.Pixels.push(...e.Pixels),h.closeAreaTG(n),null!=t&&h.ClipPolygon(n,t),null==n.Pixels||0===n.Pixels.length)return null;let o=0;for(a=new s.Shape2(s.Shape2.SHAPE_TYPE_POLYLINE),a.setFillColor(e.get_FillColor()),a.moveTo(n.Pixels[0]),o=1;o<n.Pixels.length;o++)a.lineTo(n.Pixels[o]);if(!(null!=e.get_FillColor()||e.get_FillColor().getAlpha()>1))return null;i.push(a)}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(h._className,"LinesWithFill",new c.RendererException("Failed inside LinesWithFill",e))}return i}static closeAreaTG(e){try{if(null==e.Pixels||0===e.Pixels.length)return;let t=e.Pixels[0],i=e.Pixels[e.Pixels.length-1];t.x===i.x&&t.y===i.y||e.Pixels.push(t)}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(h._className,"closeAreaTG",new c.RendererException("Failed inside closeAreaTG",e))}}static fillDMA(e,t){let i=new Array;try{switch(e.get_LineType()){case l.TacticalLines.OBSFAREA:case l.TacticalLines.OBSAREA:case l.TacticalLines.STRONG:case l.TacticalLines.ZONE:case l.TacticalLines.FORT_REVD:case l.TacticalLines.FORT:case l.TacticalLines.ENCIRCLE:case l.TacticalLines.ATDITCHC:case l.TacticalLines.ATDITCHM:break;default:return i}let a,n=0,o=new r.TGLight;o.set_LineType(l.TacticalLines.GENERAL),o.Pixels=new Array;let c=0;for(c=e.Pixels.length,n=0;n<c;n++)o.Pixels.push(e.Pixels[n]);if(h.closeAreaTG(o),null!=t&&h.ClipPolygon(o,t),null==o.Pixels||0===o.Pixels.length)return i;for(a=new s.Shape2(s.Shape2.SHAPE_TYPE_POLYLINE),a.setFillColor(e.get_FillColor()),a.moveTo(o.Pixels[0]),n=1;n<o.Pixels.length;n++)a.lineTo(o.Pixels[n]);i.push(a)}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(h._className,"fillDMA",new c.RendererException("Failed inside fillDMA",e))}return i}static ClipPolygon(e,t){let i=new Array;try{let a=T.clsUtility.isClosedPolygon(e.get_LineType());t=g.clsUtilityGE.expandPolygon(t,20);let n=u.clsUtilityCPOF.POINT2toPoint2D(e.Pixels),s=0,l=new Map;for(s=0;s<n.length;s++)l.set(s.toString(),n[s]);let r=t[0],o=t[t.length-1];r.getX()===o.getX()&&r.getY()===o.getY()||t.push(r);let c=0;for(a?n.splice(n.length-1,1):c=h.AddBoundaryPointsForLines(n,t),s=0;s<t.length-1;s++)i=0===s?h.clipSide(e,n,s,t):h.clipSide(e,i,s,t);if(a)i.length>0&&i.push(i[0]);else switch(c){case 0:break;case 1:i.length>0&&i.splice(0,1),i.length>0&&i.splice(0,1);break;case 2:i.length>0&&i.splice(i.length-1,1),i.length>0&&i.splice(i.length-1,1);break;case 3:i.length>0&&i.splice(0,1),i.length>0&&i.splice(0,1),i.length>0&&i.splice(i.length-1,1),i.length>0&&i.splice(i.length-1,1)}!0===a?i.length>2?e.Pixels=u.clsUtilityCPOF.Point2DtoPOINT2Mapped(i,l):e.Pixels=new Array:i.length>1?e.Pixels=u.clsUtilityCPOF.Point2DtoPOINT2Mapped(i,l):e.Pixels=new Array}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(h._className,"ClipPolygon",new c.RendererException("Failed inside ClipPolygon",e))}return i}}t.clsClipQuad=h},960:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mdlGeodesic=void 0;const a=i(3170),n=i(7389),s=i(8712),l=i(7300),r=i(106);class o{static _className="mdlGeodesic";static sm_a=6378137;static DegToRad(e){return e/180*Math.PI}static RadToDeg(e){return e/Math.PI*180}static GetAzimuth(e,t){let i=0;try{let a=o.DegToRad(e.y),n=o.DegToRad(e.x),s=o.DegToRad(t.y),l=o.DegToRad(t.x),r=Math.sin(l-n);r*=Math.cos(s);let c=Math.cos(a);c*=Math.sin(s);let T=Math.sin(a);T*=Math.cos(s),T*=Math.cos(l-n),c-=T,i=Math.atan2(r,c),i=o.RadToDeg(i)}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException(o._className,"GetAzimuth",new r.RendererException("Failed inside GetAzimuth",e))}return i}static geodesic_distance(e,t,i,a){let n=0;try{null!=i&&null!=a&&(i.value=new Array(1),a.value=new Array(1),i.value[0]=o.GetAzimuth(e,t),a.value[0]=o.GetAzimuth(t,e));let s=o.DegToRad(t.y-e.y),l=o.DegToRad(t.x-e.x),r=0,c=0,T=0,u=0,g=0,L=0,d=0;r=Math.sin(s/2),c=o.DegToRad(e.y),T=o.DegToRad(t.y),u=Math.sin(l/2),g=Math.cos(c),L=Math.cos(T);let _=r*r+g*L*u*u;n=Math.sqrt(_),d=Math.sqrt(1-_),n=2*Math.atan2(n,d)}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException(o._className,"geodesic_distance",new r.RendererException("Failed inside geodesic_distance",e))}return o.sm_a*n}static geodesic_coordinate(e,t,i){let a;try{let s=0,l=0,r=0,c=0,T=0,u=0,g=0,L=0,d=0,_=0,h=0,E=0,A=0;s=o.DegToRad(e.y),l=Math.cos(s),r=o.DegToRad(i),c=Math.sin(s),T=Math.cos(t/o.sm_a),u=Math.sin(t/o.sm_a),g=Math.cos(r);let I=o.RadToDeg(Math.asin(c*T+l*u*g));L=Math.sin(r),d=Math.sin(L),_=Math.cos(s),h=o.DegToRad(I),E=Math.sin(h),A=Math.atan2(L*u*l,T-c*E);let S=e.x+o.RadToDeg(A);a=new n.POINT2(S,I)}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException(o._className,"geodesic_coordinate",new r.RendererException("Failed inside geodesic_coordinate",e))}return a}static GetGeodesicArc(e){let t=new Array;try{if(null==e)return null;if(e.length<3)return null;let i,a=new n.POINT2(e[0]),l=new n.POINT2(e[1]),r=new n.POINT2(e[2]),c=new s.ref,T=0,u=0,g=new s.ref,L=new s.ref;u=o.geodesic_distance(a,l,g,L);let d=L.value[0];T=o.geodesic_distance(a,r,c,L),Math.abs(L.value[0]-d)<=1&&(g.value[0]<360&&(g.value[0]+=360),c.value[0]=g.value[0]+360);let _=new s.ref,h=0;for(c.value[0]<0&&(c.value[0]=360+c.value[0]),g.value[0]<0&&(g.value[0]=360+g.value[0]),c.value[0]<g.value[0]&&(c.value[0]=c.value[0]+360),_.value=new Array(1),h=0;h<=100;h++)_.value[0]=g.value[0]+h/100*(c.value[0]-g.value[0]),i=o.geodesic_coordinate(a,u,_.value[0]),t.push(i);Math.abs(L.value[0]-d)>1&&t.push(a),g.value[0]<c.value[0]?t.push(l):t.push(r)}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException(o._className,"GetGeodesicArc",new r.RendererException("Failed inside GetGeodesicArc",e))}return t}static GetGeodesicArc2(e,t){let i=!1;try{let a=new n.POINT2(e[0]),l=new n.POINT2(e[1]),r=new n.POINT2(e[2]),c=new s.ref,T=0,u=new s.ref,g=new s.ref;T=o.geodesic_distance(a,l,u,g);let L=g.value[0];o.geodesic_distance(a,r,c,g),Math.abs(g.value[0]-L)<=1&&(u.value[0]<360&&(u.value[0]+=360),c.value[0]=u.value[0]+360,i=!0);let d=new s.ref;d.value=new Array(1);let _=0,h=new n.POINT2;for(c.value[0]<0&&(c.value[0]=360+c.value[0]),u.value[0]<0&&(u.value[0]=360+u.value[0]),c.value[0]<u.value[0]&&(c.value[0]=c.value[0]+360),_=0;_<=100;_++)d.value[0]=u.value[0]+_/100*(c.value[0]-u.value[0]),h=o.geodesic_coordinate(a,T,d.value[0]),t.push(h)}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException(o._className,"GetGeodesicArc2",new r.RendererException("Failed inside GetGeodesicArc2",e))}return i}static IntersectLines(e,t,i,a){let s;try{let l=o.DegToRad(e.y),r=o.DegToRad(e.x),c=o.DegToRad(i.y),T=o.DegToRad(i.x),u=o.DegToRad(t),g=o.DegToRad(a),L=c-l,d=T-r,_=2*Math.asin(Math.sqrt(Math.sin(L/2)*Math.sin(L/2)+Math.cos(l)*Math.cos(c)*Math.sin(d/2)*Math.sin(d/2)));if(0===_)return null;let h=Math.acos((Math.sin(c)-Math.sin(l)*Math.cos(_))/(Math.sin(_)*Math.cos(l)));Number.isNaN(h)&&(h=0);let E=Math.acos((Math.sin(l)-Math.sin(c)*Math.cos(_))/(Math.sin(_)*Math.cos(c))),A=0,I=0;Math.sin(T-r)>0?(A=h,I=2*Math.PI-E):(A=2*Math.PI-h,I=E);let S=(u-A+Math.PI)%(2*Math.PI)-Math.PI,y=(I-g+Math.PI)%(2*Math.PI)-Math.PI;if(0===Math.sin(S)&&0===Math.sin(y))return null;if(Math.sin(S)*Math.sin(y)<0)return null;let f=Math.acos(-Math.cos(S)*Math.cos(y)+Math.sin(S)*Math.sin(y)*Math.cos(_)),D=Math.atan2(Math.sin(_)*Math.sin(S)*Math.sin(y),Math.cos(y)+Math.cos(S)*Math.cos(f)),M=Math.asin(Math.sin(l)*Math.cos(D)+Math.cos(l)*Math.sin(D)*Math.cos(u)),P=r+Math.atan2(Math.sin(u)*Math.sin(D)*Math.cos(l),Math.cos(D)-Math.sin(l)*Math.sin(M));P=(P+Math.PI)%(2*Math.PI)-Math.PI,s=new n.POINT2(o.RadToDeg(P),o.RadToDeg(M))}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException(o._className,"IntersectLines",new r.RendererException("Failed inside IntersectLines",e))}return s}static normalize_points(e){let t;try{if(null==e||0===e.length)return t;let i,a=0,n=e[0].x,s=n,l=!1,r=e.length;for(a=1;a<r;a++)i=e[a],i.x<n&&(n=i.x),i.x>s&&(s=i.x);if(s-n>180&&(l=!0),!l)return e;for(t=new Array,r=e.length,a=0;a<r;a++)i=e[a],i.x<0&&(i.x+=360),t.push(i)}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException(o._className,"normalize_pts",new r.RendererException("Failed inside normalize_pts",e))}return t}static geodesic_mbr(e){let t;try{if(null==e||0===e.length)return null;let i,s=o.normalize_points(e),l=s[0].x,r=l,c=s[0].y,T=c,u=0,g=s.length;for(u=1;u<g;u++)i=s[u],i.x<l&&(l=i.x),i.x>r&&(r=i.x),i.y>c&&(c=i.y),i.y<T&&(T=i.y);let L=new n.POINT2(l,c),d=new n.POINT2(r,c),_=new n.POINT2(r,T),h=o.geodesic_distance(L,d,null,null),E=o.geodesic_distance(d,_,null,null);t=new a.Rectangle2D(l,c,h,E)}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException(o._className,"geodesic_mbr",new r.RendererException("Failed inside geodesic_mbr",e))}return t}static geodesic_center(e){let t;try{if(null==e||0===e.length)return null;let i=o.geodesic_mbr(e),a=i.getWidth()/2,s=i.getHeight()/2,l=new n.POINT2(i.x,i.y),r=o.geodesic_coordinate(l,a,90);t=o.geodesic_coordinate(r,s,180)}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException(o._className,"geodesic_center",new r.RendererException("Failed inside geodesic_center",e))}return t}static geoRotatePoint(e,t,i){try{let a=o.GetAzimuth(e,t),n=o.geodesic_distance(e,t,null,null);return o.geodesic_coordinate(e,n,a+i)}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException(o._className,"geoRotatePoint",new r.RendererException("Failed inside geoRotatePoint",e))}return null}static getGeoEllipse(e,t,i,a){let s;try{let l;s=new Array(37);let r,c,T=0,u=0,g=0;for(let L=1;L<37;L++)T=10*L*Math.PI/180,u=t*Math.cos(T),g=i*Math.sin(T),r=o.geodesic_coordinate(e,u,90),c=o.geodesic_coordinate(e,g,0),l=new n.POINT2(r.x,c.y),s[L-1]=o.geoRotatePoint(e,l,-a);s[36]=new n.POINT2(s[0])}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException(o._className,"GetGeoEllipse",new r.RendererException("GetGeoEllipse",e))}return s}}t.mdlGeodesic=o},979:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clsRenderer=void 0;const a=i(8087),n=i(628),s=i(7142),l=i(9441),r=i(7940),o=i(3170),c=i(8262),T=i(4571),u=i(1207),g=i(7389),L=i(5772),d=i(8101),_=i(8678),h=i(960),E=i(2493),A=i(3515),I=i(8113),S=i(4513),y=i(3247),f=i(7300),D=i(8003),M=i(6932),P=i(3874),R=i(106),N=i(3254),C=i(2421),O=i(2466),p=i(4546),x=i(921),b=i(8965),w=i(498),m=i(1024),F=i(8977);class G{static _className="clsRenderer";static setClientCoords(e,t){try{let i,a,n=new Array,s=0,l=e.getCoordinates(),r=l.length;for(s=0;s<r;s++)i=l[s],a=w.clsUtility.Point2DToPOINT2(i),n.push(a);t.set_LatLongs(n)}catch(t){if(!(t instanceof Error))throw t;f.ErrorLogger.LogException("clsRenderer","setClientCoords",new R.RendererException("Failed to set geo points or pixels for "+e.getSymbolID(),t))}}static getClientCoords(e){let t;try{let i,a,n=0;t=new Array;let s=e.LatLongs.length;for(n=0;n<s;n++)a=e.LatLongs[n],i=new l.Point2D(a.x,a.y),t.push(i)}catch(t){if(!(t instanceof Error))throw t;f.ErrorLogger.LogException("clsRenderer","getClientCoords",new R.RendererException("Failed to set geo points or pixels for "+e.get_SymbolId(),t))}return t}static createMilStdSymboFromTGLight(e,t){let i;try{let a=e.get_SymbolId(),s=_.clsUtility.GetLinetypeFromString(a);e.get_Status(),e.Pixels=w.clsUtility.LatLongToPixels(e.LatLongs,t),_.clsUtility.isClosedPolygon(s)&&(_.clsUtility.ClosePolygon(e.Pixels),_.clsUtility.ClosePolygon(e.LatLongs));let l=G.getClientCoords(e);e.set_Font(new n.Font("Arial",n.Font.PLAIN,12));let r=new Map;r.set(M.Modifiers.W_DTG_1,e.get_DTG()),r.set(M.Modifiers.W1_DTG_2,e.get_DTG1()),r.set(M.Modifiers.H_ADDITIONAL_INFO_1,e.get_H()),r.set(M.Modifiers.H1_ADDITIONAL_INFO_2,e.get_H1()),r.set(M.Modifiers.H2_ADDITIONAL_INFO_3,e.get_H2()),r.set(M.Modifiers.T_UNIQUE_DESIGNATION_1,e.get_Name()),r.set(M.Modifiers.T1_UNIQUE_DESIGNATION_2,e.get_T1()),r.set(M.Modifiers.Y_LOCATION,e.get_Location()),r.set(M.Modifiers.N_HOSTILE,e.get_N()),i=new D.MilStdSymbol(a,"1",l,r),i.setFillColor(e.get_FillColor()),i.setLineColor(e.get_LineColor()),i.setLineWidth(e.get_LineThickness()),i.setFillStyle(e.get_TexturePaint())}catch(t){if(!(t instanceof Error))throw t;f.ErrorLogger.LogException("clsRenderer","createMilStdSymboFromTGLight",new R.RendererException("Failed to set geo points or pixels for "+e.get_SymbolId(),t))}return i}static createTGLightFromMilStdSymbol(...e){switch(e.length){case 2:{const[t,i]=e;let a=new A.TGLight;try{let e=t.getSymbolID();a.set_SymbolId(e);let n=t.getUseLineInterpolation();a.set_UseLineInterpolation(n);let s=_.clsUtility.GetLinetypeFromString(e);a.set_LineType(s);let r=a.get_Status();null!=r&&"A"===r&&a.set_LineStyle(1),a.set_VisibleModifiers(!0),G.setClientCoords(t,a),a.Pixels=w.clsUtility.LatLongToPixels(a.LatLongs,i),a.set_Font(N.RendererSettings.getInstance().getMPLabelFont()),a.set_FillColor(t.getFillColor()),a.set_LineColor(t.getLineColor()),a.set_LineThickness(t.getLineWidth()),a.set_TexturePaint(t.getFillStyle()),a.setIconSize(t.getUnitSize()),a.set_KeepUnitRatio(t.getKeepUnitRatio()),a.set_FontBackColor(I.Color.WHITE),a.set_TextColor(t.getTextColor()),null!=t.getModifier(M.Modifiers.W_DTG_1)&&a.set_DTG(t.getModifier(M.Modifiers.W_DTG_1)),null!=t.getModifier(M.Modifiers.W1_DTG_2)&&a.set_DTG1(t.getModifier(M.Modifiers.W1_DTG_2)),null!=t.getModifier(M.Modifiers.H_ADDITIONAL_INFO_1)&&a.set_H(t.getModifier(M.Modifiers.H_ADDITIONAL_INFO_1)),null!=t.getModifier(M.Modifiers.H1_ADDITIONAL_INFO_2)&&a.set_H1(t.getModifier(M.Modifiers.H1_ADDITIONAL_INFO_2)),null!=t.getModifier(M.Modifiers.H2_ADDITIONAL_INFO_3)&&a.set_H2(t.getModifier(M.Modifiers.H2_ADDITIONAL_INFO_3)),null!=t.getModifier(M.Modifiers.T_UNIQUE_DESIGNATION_1)&&a.set_Name(t.getModifier(M.Modifiers.T_UNIQUE_DESIGNATION_1)),null!=t.getModifier(M.Modifiers.T1_UNIQUE_DESIGNATION_2)&&a.set_T1(t.getModifier(M.Modifiers.T1_UNIQUE_DESIGNATION_2)),null!=t.getModifier(M.Modifiers.V_EQUIP_TYPE)&&a.set_V(t.getModifier(M.Modifiers.V_EQUIP_TYPE)),null!=t.getModifier(M.Modifiers.AS_COUNTRY)&&a.set_AS(t.getModifier(M.Modifiers.AS_COUNTRY)),null!=t.getModifier(M.Modifiers.AP_TARGET_NUMBER)&&a.set_AP(t.getModifier(M.Modifiers.AP_TARGET_NUMBER)),null!=t.getModifier(M.Modifiers.Y_LOCATION)&&a.set_Location(t.getModifier(M.Modifiers.Y_LOCATION)),null!=t.getModifier(M.Modifiers.N_HOSTILE)&&a.set_N(t.getModifier(M.Modifiers.N_HOSTILE)),a.set_UseDashArray(t.getUseDashArray()),a.set_UseHatchFill(t.getUseFillPattern()),a.set_HideOptionalLabels(t.getHideOptionalLabels());let o=_.clsUtility.isClosedPolygon(s);if(s===d.TacticalLines.STRIKWARN){let e=a.Pixels.slice(0,a.Pixels.length/2),t=a.LatLongs.slice(0,a.LatLongs.length/2),i=a.Pixels.slice(a.Pixels.length/2,a.Pixels.length),n=a.LatLongs.slice(a.LatLongs.length/2,a.LatLongs.length);_.clsUtility.ClosePolygon(e),_.clsUtility.ClosePolygon(t),a.Pixels=e,a.LatLongs=t,_.clsUtility.ClosePolygon(i),_.clsUtility.ClosePolygon(n),a.Pixels.push(...i),a.LatLongs.push(...n)}else o&&(_.clsUtility.ClosePolygon(a.Pixels),_.clsUtility.ClosePolygon(a.LatLongs));let c=t.getAltitudeMode();null!=c&&0!==c.length||(c="AMSL");let T=t.getAltitudeUnit();null==T&&(T=S.DistanceUnit.FEET);let L=t.getDistanceUnit();null==L&&(L=S.DistanceUnit.METERS);let E="";if(s===d.TacticalLines.RANGE_FAN_SECTOR){let e=t.getModifiers_AM_AN_X(M.Modifiers.AM_DISTANCE),i=t.getModifiers_AM_AN_X(M.Modifiers.AN_AZIMUTH),n=t.getModifiers_AM_AN_X(M.Modifiers.X_ALTITUDE_DEPTH);if(null!=e){let t="";for(let i=0;i<e.length;i++)t+=e[i].toString(),i<e.length-1&&(t+=",");a.set_AM(t)}if(null!=i){let e="";for(let t=0;t<i.length;t++)e+=i[t],t<i.length-1&&(e+=",");a.set_AN(e)}if(null!=n){let e="";for(let t=0;t<n.length;t++)E=G.createAltitudeLabel(n[t],T,c),e+=E,t<n.length-1&&(e+=",");a.set_X(e)}if(null!=e&&null!=i){let t=i.length/2,n=0,s=0,l=0,r=0,o="";for(let a=0;a<t&&(n=i[2*a],s=i[2*a+1],a+1!==e.length);a++)l=e[a],r=e[a+1],o+=n.toString()+","+s.toString()+","+l.toString()+","+r.toString(),a<t-1&&(o+=",");let c=o.length;","===o.substring(c-1,c)&&(o=o.substring(0,c-1)),a.set_LRMM(o)}}else if(s===d.TacticalLines.RADAR_SEARCH){let e=t.getModifiers_AM_AN_X(M.Modifiers.AM_DISTANCE),i=t.getModifiers_AM_AN_X(M.Modifiers.AN_AZIMUTH);if(null!=e){let t="";for(let i=0;i<e.length&&i<2;i++)t+=e[i].toString(),i<e.length-1&&(t+=",");a.set_AM(t)}if(null!=i){let e="";for(let t=0;t<i.length&&t<2;t++)e+=i[t],t<i.length-1&&(e+=",");a.set_AN(e)}if(null!=e&&null!=i){let t=0,n=0,s=0,l=0,r="";t=i[0],n=i[1],s=e[0],l=e[1],r+=t.toString()+","+n.toString()+","+s.toString()+","+l.toString(),a.set_LRMM(r)}}let A=0;if(s===d.TacticalLines.LAUNCH_AREA||s===d.TacticalLines.DEFENDED_AREA_CIRCULAR||s===d.TacticalLines.SHIP_AOI_CIRCULAR){let e=t.getModifiers_AM_AN_X(M.Modifiers.AM_DISTANCE),i=t.getModifiers_AM_AN_X(M.Modifiers.AN_AZIMUTH);if(null!=e&&e.length>1){let t=e[0].toString();a.set_AM(t);let i=e[1].toString();a.set_AM1(i)}if(null!=i&&i.length>0){let e=i[0].toString();a.set_AN(e)}}switch(s){case d.TacticalLines.ROZ:case d.TacticalLines.AARROZ:case d.TacticalLines.UAROZ:case d.TacticalLines.WEZ:case d.TacticalLines.FEZ:case d.TacticalLines.JEZ:case d.TacticalLines.FAADZ:case d.TacticalLines.HIDACZ:case d.TacticalLines.MEZ:case d.TacticalLines.LOMEZ:case d.TacticalLines.HIMEZ:case d.TacticalLines.ACA:case d.TacticalLines.ACA_RECTANGULAR:case d.TacticalLines.ACA_CIRCULAR:{let e=t.getModifiers_AM_AN_X(M.Modifiers.X_ALTITUDE_DEPTH);null!=e&&e.length>0&&(E=G.createAltitudeLabel(e[0],T,c),a.set_X(E)),null!=e&&e.length>1&&(E=G.createAltitudeLabel(e[1],T,c),a.set_X1(E));break}case d.TacticalLines.SC:case d.TacticalLines.MRR:case d.TacticalLines.SL:case d.TacticalLines.TC:case d.TacticalLines.LLTR:case d.TacticalLines.AC:case d.TacticalLines.SAAFR:{let e,n=a.LatLongs[0],s=new l.Point2D(n.x,n.y),r=i.GeoToPixels(s),o=new g.POINT2(r.getX(),r.getY()),d=1e4,_=h.mdlGeodesic.geodesic_coordinate(n,d,0),I=new l.Point2D(_.x,_.y),S=i.GeoToPixels(I),y=new g.POINT2(S.getX(),S.getY()),f=u.lineutility.CalcDistanceDouble(o,y)/d,D=t.getModifiers_AM_AN_X(M.Modifiers.AM_DISTANCE);if(null!=D){let e="";for(A=0;A<D.length;A++)e+=D[A].toString(),A<D.length-1&&(e+=",");a.set_AM(e)}let P=0,R=0,N=0;if(null!=a.get_AM()&&a.get_AM().length>0&&(e=a.get_AM().split(","),e.length>0)){for(A=0;A<e.length;A++)Number.isNaN(parseFloat(e[A]))||(R=parseFloat(e[A]),R>P&&(P=R));for(N=P,P*=f/2,A=0;A<a.Pixels.length;A++)if(e.length>A)if(Number.isNaN(parseFloat(e[A])))a.Pixels[A].style=P,a.LatLongs[A].style=P;else{let t=parseFloat(e[A])*f/2;a.Pixels[A].style=t,a.LatLongs[A].style=t}else a.Pixels[A].style=P,a.LatLongs[A].style=P}N*=L.conversionFactor,N*=10,N=Math.round(N),N/=10,a.set_AM(N.toString()+" "+L.label);let C=t.getModifiers_AM_AN_X(M.Modifiers.X_ALTITUDE_DEPTH);null!=C&&C.length>0&&(E=G.createAltitudeLabel(C[0],T,c),a.set_X(E)),null!=C&&C.length>1&&(E=G.createAltitudeLabel(C[1],T,c),a.set_X1(E));break}}if(s===d.TacticalLines.RANGE_FAN){let e=t.getModifiers_AM_AN_X(M.Modifiers.AM_DISTANCE),i=t.getModifiers_AM_AN_X(M.Modifiers.X_ALTITUDE_DEPTH),n="",s="";if(null!=e)for(A=0;A<e.length&&A<3;A++)n+=e[A].toString(),A<e.length-1&&(n+=","),null!=i&&A<i.length&&(E=G.createAltitudeLabel(i[A],T,c),s+=E,A<i.length-1&&(s+=","));a.set_AM(n),a.set_X(s)}switch(s){case d.TacticalLines.PAA_RECTANGULAR:case d.TacticalLines.RECTANGULAR_TARGET:case d.TacticalLines.FSA_RECTANGULAR:case d.TacticalLines.SHIP_AOI_RECTANGULAR:case d.TacticalLines.DEFENDED_AREA_RECTANGULAR:case d.TacticalLines.FFA_RECTANGULAR:case d.TacticalLines.ACA_RECTANGULAR:case d.TacticalLines.NFA_RECTANGULAR:case d.TacticalLines.RFA_RECTANGULAR:case d.TacticalLines.ATI_RECTANGULAR:case d.TacticalLines.CFFZ_RECTANGULAR:case d.TacticalLines.SENSOR_RECTANGULAR:case d.TacticalLines.CENSOR_RECTANGULAR:case d.TacticalLines.DA_RECTANGULAR:case d.TacticalLines.CFZ_RECTANGULAR:case d.TacticalLines.ZOR_RECTANGULAR:case d.TacticalLines.TBA_RECTANGULAR:case d.TacticalLines.TVAR_RECTANGULAR:case d.TacticalLines.CIRCULAR:case d.TacticalLines.BDZ:case d.TacticalLines.FSA_CIRCULAR:case d.TacticalLines.NOTACK:case d.TacticalLines.ACA_CIRCULAR:case d.TacticalLines.FFA_CIRCULAR:case d.TacticalLines.NFA_CIRCULAR:case d.TacticalLines.RFA_CIRCULAR:case d.TacticalLines.PAA_CIRCULAR:case d.TacticalLines.ATI_CIRCULAR:case d.TacticalLines.CFFZ_CIRCULAR:case d.TacticalLines.SENSOR_CIRCULAR:case d.TacticalLines.CENSOR_CIRCULAR:case d.TacticalLines.DA_CIRCULAR:case d.TacticalLines.CFZ_CIRCULAR:case d.TacticalLines.ZOR_CIRCULAR:case d.TacticalLines.TBA_CIRCULAR:case d.TacticalLines.TVAR_CIRCULAR:case d.TacticalLines.KILLBOXBLUE_CIRCULAR:case d.TacticalLines.KILLBOXPURPLE_CIRCULAR:case d.TacticalLines.KILLBOXBLUE_RECTANGULAR:case d.TacticalLines.KILLBOXPURPLE_RECTANGULAR:{let e=t.getModifiers_AM_AN_X(M.Modifiers.AM_DISTANCE);if(null!=e&&e.length>0){let t=e[0].toString();a.set_AM(t)}break}}if(s===d.TacticalLines.RECTANGULAR||s===d.TacticalLines.CUED_ACQUISITION){let e=t.getModifiers_AM_AN_X(M.Modifiers.AM_DISTANCE),i=t.getModifiers_AM_AN_X(M.Modifiers.AN_AZIMUTH);if(null==i&&(i=new Array),0===i.length&&i.push(0),null!=e&&e.length>1){let t=e[0].toString(),n=e[1].toString();a.set_AM(t),a.set_AM1(n);let s=i[0].toString();a.set_AN(s)}}}catch(e){if(!(e instanceof Error))throw e;f.ErrorLogger.LogException("clsRenderer","createTGLightfromMilStdSymbol",new R.RendererException("Failed to build multipoint TG for "+t.getSymbolID(),e))}return a}case 3:{const[t,i,a]=e;let s=new A.TGLight;try{let e=t.getSymbolID();s.set_SymbolId(e);let r=s.get_Status();null!=r&&"A"===r&&s.set_LineStyle(1),s.set_VisibleModifiers(!0),G.setClientCoords(t,s),s.Pixels=w.clsUtility.LatLongToPixels(s.LatLongs,i),s.set_Font(new n.Font("Arial",n.Font.PLAIN,12)),s.set_FillColor(t.getFillColor()),s.set_LineColor(t.getLineColor()),s.set_LineThickness(t.getLineWidth()),s.set_TexturePaint(t.getFillStyle()),s.set_FontBackColor(I.Color.WHITE),s.set_TextColor(t.getTextColor()),null!=t.getModifier(M.Modifiers.W_DTG_1)&&s.set_DTG(t.getModifier(M.Modifiers.W_DTG_1)),null!=t.getModifier(M.Modifiers.W1_DTG_2)&&s.set_DTG1(t.getModifier(M.Modifiers.W1_DTG_2)),null!=t.getModifier(M.Modifiers.H_ADDITIONAL_INFO_1)&&s.set_H(t.getModifier(M.Modifiers.H_ADDITIONAL_INFO_1)),null!=t.getModifier(M.Modifiers.H1_ADDITIONAL_INFO_2)&&s.set_H1(t.getModifier(M.Modifiers.H1_ADDITIONAL_INFO_2)),null!=t.getModifier(M.Modifiers.H2_ADDITIONAL_INFO_3)&&s.set_H2(t.getModifier(M.Modifiers.H2_ADDITIONAL_INFO_3)),null!=t.getModifier(M.Modifiers.T_UNIQUE_DESIGNATION_1)&&s.set_Name(t.getModifier(M.Modifiers.T_UNIQUE_DESIGNATION_1)),null!=t.getModifier(M.Modifiers.T1_UNIQUE_DESIGNATION_2)&&s.set_T1(t.getModifier(M.Modifiers.T1_UNIQUE_DESIGNATION_2)),null!=t.getModifier(M.Modifiers.V_EQUIP_TYPE)&&s.set_V(t.getModifier(M.Modifiers.V_EQUIP_TYPE)),null!=t.getModifier(M.Modifiers.AS_COUNTRY)&&s.set_AS(t.getModifier(M.Modifiers.AS_COUNTRY)),null!=t.getModifier(M.Modifiers.AP_TARGET_NUMBER)&&s.set_AP(t.getModifier(M.Modifiers.AP_TARGET_NUMBER)),null!=t.getModifier(M.Modifiers.Y_LOCATION)&&s.set_Location(t.getModifier(M.Modifiers.Y_LOCATION)),null!=t.getModifier(M.Modifiers.N_HOSTILE)&&s.set_N(t.getModifier(M.Modifiers.N_HOSTILE));let o=_.clsUtility.GetLinetypeFromString(e);if(_.clsUtility.isClosedPolygon(o)&&(_.clsUtility.ClosePolygon(s.Pixels),_.clsUtility.ClosePolygon(s.LatLongs)),a)switch(o){case d.TacticalLines.CATK:case d.TacticalLines.CATKBYFIRE:case d.TacticalLines.AAAAA:case d.TacticalLines.AIRAOA:case d.TacticalLines.MAIN:case d.TacticalLines.SPT:{let e=_.clsUtility.ComputeLastPoint(s.Pixels);s.Pixels.push(e);let t=new l.Point2D(e.x,e.y),a=i.PixelsToGeo(t),n=w.clsUtility.Point2DToPOINT2(a);s.LatLongs.push(n);break}}}catch(e){if(!(e instanceof Error))throw e;f.ErrorLogger.LogException("clsRenderer","createTGLightfromMilStdSymbol",new R.RendererException("Failed to build multipoint TG for "+t.getSymbolID(),e))}return s}default:throw Error("Invalid number of arguments")}}static createAltitudeLabel(e,t,i){let a=0;a="FL"===i?S.DistanceUnit.FLIGHT_LEVEL.conversionFactor:t.conversionFactor;let n=e*a;n*=10,n=Math.round(n);let s=n/10;if(0===s){if("AGL"===i||"GL"===i)return"GL";if("AMSL"===i||"BMSL"===i||"MSL"===i)return"MSL"}return"FL"===i?"FL "+String(s).padStart(3,"0"):s+" "+t.label+" "+i}static Shape2ToShapeInfo(e,t){try{let i,a=0;if(null==t||null==e||0===t.length)return;for(a=0;a<t.length;a++)i=t[a],null!=i&&void 0!==i&&e.push(i)}catch(e){if(!(e instanceof Error))throw e;f.ErrorLogger.LogException("clsRenderer","Shape2ToShapeInfo",new R.RendererException("Failed to build ShapeInfo ArrayList",e))}}static intersectsClipArea(e,t,i){try{if(null==i||e.LatLongs.length<2)return!0;let a=null,n=null;if(null!=i)if(i instanceof o.Rectangle2D)a=i;else if(i instanceof r.Rectangle){let e=i;a=new o.Rectangle2D(e.x,e.y,e.width,e.height)}else i instanceof Array&&(n=i,a=w.clsUtility.getMBR(n));let s=0,l=a.getMinX(),c=a.getMinY(),T=a.getWidth(),u=a.getHeight(),L=new g.POINT2(l,c),d=new g.POINT2(l+T,c+u);L=w.clsUtility.PointPixelsToLatLong(L,t),d=w.clsUtility.PointPixelsToLatLong(d,t);let _=e.LatLongs[0].x,h=_,E=e.LatLongs[0].y,A=E,I=!1,S=e.LatLongs[0].x,y=S,f=0;for(s=0;s<e.LatLongs.length;s++){let t=e.LatLongs[s];t.x<S&&(S=t.x),t.x>y&&(y=t.x),0===f&&t.x<0&&(f=t.x),f<0&&t.x<0&&t.x>f&&(f=t.x),t.y<A&&(A=t.y),t.y>E&&(E=t.y)}let D=!1;if(180!==y&&-180!==S||(D=!0),y-S>=180?(D=!0,_=y,h=f):(_=S,h=y),d.y<=A&&A<=L.y)I=!0;else{if(!(A<=d.y&&d.y<=E))return!1;I=!0}I=!1;let M=!1;return(180===L.x||-180===L.x||180===d.x||-180===d.x||Math.abs(d.x-L.x)>180)&&(M=!0),D&&M?I=!0:D||M?!D&&M?(L.x<h&&h<180&&(I=!0),-180<_&&_<d.x&&(I=!0)):D&&!M&&(_<d.x&&d.x<180&&(I=!0),-180<L.x&&L.x<h&&(I=!0)):(_<=L.x&&L.x<=h&&(I=!0),_<=d.x&&d.x<=h&&(I=!0),L.x<=_&&_<=d.x&&(I=!0),L.x<=h&&h<=d.x&&(I=!0)),I}catch(e){if(!(e instanceof Error))throw e;f.ErrorLogger.LogException("clsRenderer","intersectsClipArea",new R.RendererException("Failed inside intersectsClipArea",e))}return!1}static addFDI(e,t){try{let i=P.MSLookup.getInstance().getMSLInfo(e.get_SymbolId()),a=null!=i?i.getDrawRule():-1,n=e.get_LineType();if(n===d.TacticalLines.MAIN){let i=t[1].getPoints(),a=new g.POINT2(i[i.length-3]),n=new g.POINT2(i[i.length-8]),s=new g.POINT2(i[i.length-7]);t.push(T.DISMSupport.getFDIShape(e,a,n,s))}else if(a===y.DrawRules.AXIS1||a===y.DrawRules.AXIS2){let i=t[0].getPoints(),a=Math.trunc(i.length/2),n=new g.POINT2(i[a-1]),s=new g.POINT2(i[a]),l=new g.POINT2(i[a+1]);t.push(T.DISMSupport.getFDIShape(e,n,s,l))}else if(n===d.TacticalLines.DIRATKAIR){let i=t[2].getPoints(),a=new g.POINT2(i[0]),n=new g.POINT2(i[1]),s=new g.POINT2(i[2]);t.push(T.DISMSupport.getFDIShape(e,a,n,s))}else if(n===d.TacticalLines.DIRATKGND){let i=t[1].getPoints(),a=new g.POINT2(i[7]),n=new g.POINT2(i[4]),s=new g.POINT2(i[9]);t.push(T.DISMSupport.getFDIShape(e,a,n,s))}else if(n===d.TacticalLines.DIRATKSPT){let i=t[1].getPoints(),a=new g.POINT2(i[0]),n=new g.POINT2(i[1]),s=new g.POINT2(i[2]);t.push(T.DISMSupport.getFDIShape(e,a,n,s))}else{let i=t[0].getPoints()[0],a=new g.POINT2(i),n=new g.POINT2(i),s=new g.POINT2(i),l=new g.POINT2(i);w.clsUtility.GetMBR(t,a,n,s,l),t.push(T.DISMSupport.getFDIShape(e,a,n))}}catch(e){if(!(e instanceof Error))throw e;f.ErrorLogger.LogException(G._className,"addFDI",new R.RendererException("failed inside addFDI",e))}}static renderWithPolylines(...e){switch(e.length){case 3:{const[t,i,a]=e;try{let e=G.createTGLightFromMilStdSymbol(t,i),n=new Array,s=new Array;G.intersectsClipArea(e,i,a)&&G.render_GE(e,n,s,i,a),t.setSymbolShapes(n),t.setModifierShapes(s),t.set_WasClipped(e.get_WasClipped())}catch(e){if(!(e instanceof Error))throw e;f.ErrorLogger.LogException("clsRenderer","renderWithPolylines",new R.RendererException("Failed inside renderWithPolylines",e))}break}case 4:{const[t,i,a,n]=e;try{let e=G.createTGLightFromMilStdSymbol(t,i),s=new Array,l=new Array;G.intersectsClipArea(e,i,a)&&G.render_GE(e,s,l,i,a,n),t.setSymbolShapes(s),t.setModifierShapes(l)}catch(e){if(!(e instanceof Error))throw e;f.ErrorLogger.LogException("clsRenderer","renderWithPolylines",new R.RendererException("Failed inside renderWithPolylines",e))}break}default:throw Error("Invalid number of arguments")}}static render_GE(...e){switch(e.length){case 5:{const[t,i,a,n,l]=e;try{G.reversePointsRevD(t);let e=null;c.CELineArray.setClient("ge");let T=u.lineutility.getDeepCopy(t.Pixels);t.get_LineType()!==d.TacticalLines.LC&&t.get_LineType()!==d.TacticalLines.LC_HOSTILE||_.clsUtility.SegmentLCPoints(t,n);let g=null;if(null!=l)if(l instanceof o.Rectangle2D)e=l;else if(l instanceof r.Rectangle){let t=l;e=new o.Rectangle2D(t.x,t.y,t.width,t.height)}else l instanceof Array&&(g=l);let L=F.clsUtilityGE.getZoomFactor(e,g,t.Pixels);null!=t.get_Client()&&0!==t.get_Client().length||t.set_client("ge"),w.clsUtility.RemoveDuplicatePoints(t);let h=t.get_LineType();h<0&&(h=_.clsUtility.GetLinetypeFromString(t.get_SymbolId()),t.set_LineType(h));let A,I=!1;F.clsUtilityGE.setSplineLinetype(t),G.setHostileLC(t),m.clsUtilityCPOF.SegmentGeoPoints(t,n,L),null==e&&null==g||m.clsUtilityCPOF.canClipPoints(t)&&(null!=e?p.clsClipPolygon2.ClipPolygon(t,e):null!=g&&x.clsClipQuad.ClipPolygon(t,g),F.clsUtilityGE.removeTrailingPoints(t,l),t.LatLongs=w.clsUtility.PixelsToLatLong(t.Pixels,n)),_.clsUtility.InterpolatePixels(t),t.modifiers=new Array;let S=new s.Graphics2D;S.setFont(t.get_Font()),E.Modifier2.AddModifiersGeo(t,S,l,n),m.clsUtilityCPOF.FilterPoints2(t,n),_.clsUtility.FilterVerticalSegments(t),w.clsUtility.FilterAXADPoints(t,n),m.clsUtilityCPOF.ClearPixelsStyle(t);let y,f=null,D=t.Pixels;t.Pixels=T,null!=e?f=p.clsClipPolygon2.LinesWithFill(t,e):null!=g?f=x.clsClipQuad.LinesWithFill(t,g):null==l&&(f=p.clsClipPolygon2.LinesWithFill(t,null)),t.Pixels=D;let M=t.get_FillStyle();switch(h===d.TacticalLines.RANGE_FAN&&t.set_Fillstyle(0),null!=e?A=b.clsRenderer2.GetLineArray(t,n,I,e):null!=g?A=b.clsRenderer2.GetLineArray(t,n,I,g):null==l&&(A=b.clsRenderer2.GetLineArray(t,n,I,null)),null!=A&&C.SymbolID.getSymbolSet(t.get_SymbolId())===C.SymbolID.SymbolSet_ControlMeasure&&O.SymbolUtilities.hasFDI(t.get_SymbolId())&&G.addFDI(t,A),h){case d.TacticalLines.RANGE_FAN:case d.TacticalLines.RANGE_FAN_SECTOR:case d.TacticalLines.RADAR_SEARCH:{if(null==t.get_FillColor()||t.get_FillColor().getAlpha()<2)break;let i=m.clsUtilityCPOF.GetCircularRangeFanFillTG(t);if(i.set_Fillstyle(M),i.set_SymbolId(t.get_SymbolId()),null!=e?y=b.clsRenderer2.GetLineArray(i,n,I,e):null!=g?y=b.clsRenderer2.GetLineArray(i,n,I,g):null==l&&(y=b.clsRenderer2.GetLineArray(i,n,I,null)),null!=y){if(null==A){console.log("shapes is null");break}A.splice(0,0,...y)}break}default:b.clsRenderer2.getAutoshapeFillShape(t,A)}if(m.clsUtilityCPOF.LinesWithSeparateFill(t.get_LineType(),A),p.clsClipPolygon2.addAbatisFill(t,A),null!=A&&null!=f&&f.length>0&&A.splice(0,0,...f),!1===m.clsUtilityCPOF.canClipPoints(t)&&null!=e?A=m.clsUtilityCPOF.postClipShapes(t,A,e):!1===m.clsUtilityCPOF.canClipPoints(t)&&null!=g&&(A=m.clsUtilityCPOF.postClipShapes(t,A,g)),null!=a){let e=new Array;E.Modifier2.DisplayModifiers2(t,S,e,I,n),G.Shape2ToShapeInfo(a,e)}G.Shape2ToShapeInfo(i,A),w.clsUtility.addHatchFills(t,i),null!=e?F.clsUtilityGE.SetShapeInfosPolylines(t,i,e):null!=g?F.clsUtilityGE.SetShapeInfosPolylines(t,i,g):null==l&&F.clsUtilityGE.SetShapeInfosPolylines(t,i,null)}catch(e){if(!(e instanceof Error))throw e;f.ErrorLogger.LogException(G._className,"render_GE",new R.RendererException("Failed inside render_GE",e))}break}case 6:{const[t,i,a,n,s,l]=e;G.render_GE(t,i,a,n,s);break}default:throw Error("Invalid number of arguments")}}static render_Shape(e,t,i=null,n,s=null,l=null,c){try{let T=null,u=null;null!=i&&(i instanceof o.Rectangle2D?T=i:i instanceof r.Rectangle?T=new o.Rectangle2D(i.x,i.y,i.width,i.height):i instanceof Array&&(u=i));let g=new A.TGLight;g.set_SymbolId(e.getSymbolID()),G.setClientCoords(e,g),g.Pixels=w.clsUtility.LatLongToPixels(g.LatLongs,t);let d,_=new L.Shape2(n);_.setFillColor(l),null!=s&&(_.setLineColor(s),_.setStroke(new a.BasicStroke(e.getLineWidth())));for(let e=0;e<g.Pixels.length;e++)d=g.Pixels[e],0===e?_.moveTo(d):_.lineTo(d);let h=new Array;h.push(_),!1===m.clsUtilityCPOF.canClipPoints(g)&&null!=T?h=m.clsUtilityCPOF.postClipShapes(g,h,T):!1===m.clsUtilityCPOF.canClipPoints(g)&&null!=u&&(h=m.clsUtilityCPOF.postClipShapes(g,h,u)),_=h[0],c>1&&(_=w.clsUtility.buildHatchArea(g,_,c,20),_.setLineColor(s),_.setStroke(new a.BasicStroke(1)),h.push(_));let E=new Array;return G.Shape2ToShapeInfo(E,h),null!=T?F.clsUtilityGE.SetShapeInfosPolylines(g,E,T):null!=u?F.clsUtilityGE.SetShapeInfosPolylines(g,E,u):null==i&&F.clsUtilityGE.SetShapeInfosPolylines(g,E,null),void(null==e.getSymbolShapes()?e.setSymbolShapes(E):e.getSymbolShapes().push(...E))}catch(e){if(!(e instanceof Error))throw e;f.ErrorLogger.LogException(G._className,"render_Shape",new R.RendererException("Failed inside render_Shape",e))}}static setHostileLC(e){try{let t=new Array,i=0;switch(e.get_LineType()){case d.TacticalLines.LC:if(!e.isHostile())break;for(t=[...e.Pixels],i=0;i<e.Pixels.length;i++)e.Pixels[i]=t[t.length-i-1];for(t=[...e.LatLongs],i=0;i<e.LatLongs.length;i++)e.LatLongs[i]=t[t.length-i-1];break;case d.TacticalLines.LINE:for(t=[...e.Pixels],i=0;i<e.Pixels.length;i++)e.Pixels[i]=t[t.length-i-1];for(t=[...e.LatLongs],i=0;i<e.LatLongs.length;i++)e.LatLongs[i]=t[t.length-i-1];break;default:return}}catch(e){if(!(e instanceof Error))throw e;f.ErrorLogger.LogException(G._className,"setHostileLC",new R.RendererException("Failed inside setHostileLC",e))}}static setClip(e,t,i){try{if(null==e)return!1;if(e instanceof o.Rectangle2D)t.setRect(e);else if(e instanceof r.Rectangle){let i=e;t.setRect(i.x,i.y,i.width,i.height)}else e instanceof Array&&i.push(...e)}catch(e){if(!(e instanceof Error))throw e;f.ErrorLogger.LogException(G._className,"setClip",new R.RendererException("Failed inside setClip",e))}return!0}static render(...e){switch(e.length){case 3:{const[t,i,a]=e;try{let e=new Array,n=new Array;G.render(t,i,e,n,a)}catch(e){if(!(e instanceof Error))throw e;f.ErrorLogger.LogException(G._className,"render",new R.RendererException("render",e))}break}case 5:{const[t,i,a,n,l]=e;try{let e=new o.Rectangle2D,r=new Array;G.setClip(l,e,r);let T=G.createTGLightFromMilStdSymbol(t,i);G.reversePointsRevD(T),c.CELineArray.setClient("generic");let u=T.get_LineType();w.clsUtility.RemoveDuplicatePoints(T),G.setHostileLC(T);let g=new s.Graphics2D;g.setFont(T.get_Font()),m.clsUtilityCPOF.SegmentGeoPoints(T,i,1),w.clsUtility.FilterAXADPoints(T,i),_.clsUtility.FilterVerticalSegments(T);let L=_.clsUtility.IsChange1Area(u),h=!1,A=new Array,I=new Array;!1===L&&m.clsUtilityCPOF.GetFarPixels(T,i,A,I);let S,y,f,D=new Array,M=new Array;y=new Array,f=new Array,A.length>0&&(T.Pixels=A,D=b.clsRenderer2.GetLineArray(T,i,h,l),E.Modifier2.DisplayModifiers2(T,g,y,h,null)),I.length>0&&(T.Pixels=I,M=b.clsRenderer2.GetLineArray(T,i,h,l),E.Modifier2.DisplayModifiers2(T,g,f,h,null));let P=new Array;if(0===D.length||0===M.length){let a,s=null;s=null!=r&&r.length>0?x.clsClipQuad.LinesWithFill(T,r):null!=e&&0!==e.getWidth()?p.clsClipPolygon2.LinesWithFill(T,e):p.clsClipPolygon2.LinesWithFill(T,null),m.clsUtilityCPOF.canClipPoints(T)&&null!=l&&(null!=r&&r.length>0?x.clsClipQuad.ClipPolygon(T,r):null!=e&&0!==e.getWidth()&&p.clsClipPolygon2.ClipPolygon(T,e),T.LatLongs=w.clsUtility.PixelsToLatLong(T.Pixels,i)),_.clsUtility.InterpolatePixels(T),T.modifiers=new Array,E.Modifier2.AddModifiersGeo(T,g,l,i),m.clsUtilityCPOF.FilterPoints2(T,i),m.clsUtilityCPOF.ClearPixelsStyle(T);let o=T.get_FillStyle();switch(u===d.TacticalLines.RANGE_FAN&&T.set_Fillstyle(0),S=b.clsRenderer2.GetLineArray(T,i,h,l),null!=S&&C.SymbolID.getSymbolSet(T.get_SymbolId())===C.SymbolID.SymbolSet_ControlMeasure&&O.SymbolUtilities.hasFDI(T.get_SymbolId())&&G.addFDI(T,S),u){case d.TacticalLines.RANGE_FAN:case d.TacticalLines.RANGE_FAN_SECTOR:case d.TacticalLines.RADAR_SEARCH:{if(null==T.get_FillColor()||T.get_FillColor().getAlpha()<2)break;let e=m.clsUtilityCPOF.GetCircularRangeFanFillTG(T);e.set_Fillstyle(o),e.set_SymbolId(T.get_SymbolId()),a=b.clsRenderer2.GetLineArray(e,i,h,l),null!=a&&S.splice(0,0,...a);break}}m.clsUtilityCPOF.LinesWithSeparateFill(T.get_LineType(),S),p.clsClipPolygon2.addAbatisFill(T,S),null!=S&&null!=s&&s.length>0&&S.splice(0,0,...s),null!=S&&S.length>0&&(E.Modifier2.DisplayModifiers2(T,g,P,h,null),G.Shape2ToShapeInfo(n,P),t.setModifierShapes(n))}else S=D,S.push(...M),null!=P&&(P.push(...y),P.push(...f));!1===m.clsUtilityCPOF.canClipPoints(T)&&null!=l&&(S=m.clsUtilityCPOF.postClipShapes(T,S,l)),G.Shape2ToShapeInfo(a,S),w.clsUtility.addHatchFills(T,a),t.setSymbolShapes(a)}catch(e){if(!(e instanceof Error))throw e;f.ErrorLogger.LogException(G._className,"render",new R.RendererException("Failed inside render",e))}break}default:throw Error("Invalid number of arguments")}}static getCMLineType(e,t){if(e===C.SymbolID.Version_2525E)switch(t){case 110400:return d.TacticalLines.GENERIC_LINE;case 120700:return d.TacticalLines.GENERIC_AREA;case 141800:return d.TacticalLines.HOL;case 141900:return d.TacticalLines.BHL;case 310800:return d.TacticalLines.CSA;case 330500:return d.TacticalLines.ROUTE;case 330501:return d.TacticalLines.ROUTE_ONEWAY;case 330502:return d.TacticalLines.ROUTE_ALT;case 344100:return d.TacticalLines.FPOL;case 344200:return d.TacticalLines.RPOL;case 120500:return d.TacticalLines.BASE_CAMP;case 120600:return d.TacticalLines.GUERILLA_BASE;case 151e3:return d.TacticalLines.FORT;case 260400:return d.TacticalLines.BCL;case 310100:return d.TacticalLines.DHA}else switch(t){case 120500:return d.TacticalLines.BASE_CAMP_REVD;case 120600:return d.TacticalLines.GUERILLA_BASE_REVD;case 151e3:return d.TacticalLines.FORT_REVD;case 260400:return d.TacticalLines.BCL_REVD;case 310100:return d.TacticalLines.DHA_REVD;case 150300:return d.TacticalLines.ASSY;case 241601:return d.TacticalLines.SENSOR;case 241602:return d.TacticalLines.SENSOR_RECTANGULAR;case 241603:return d.TacticalLines.SENSOR_CIRCULAR}switch(t){case 200101:return d.TacticalLines.LAUNCH_AREA;case 200201:return d.TacticalLines.DEFENDED_AREA_CIRCULAR;case 200202:return d.TacticalLines.DEFENDED_AREA_RECTANGULAR;case 120100:return d.TacticalLines.AO;case 120200:return d.TacticalLines.NAI;case 120300:return d.TacticalLines.TAI;case 120400:return d.TacticalLines.AIRFIELD;case 151401:return d.TacticalLines.AIRAOA;case 151402:return d.TacticalLines.AAAAA;case 151403:return d.TacticalLines.MAIN;case 151404:return d.TacticalLines.SPT;case 110100:return d.TacticalLines.BOUNDARY;case 110200:return d.TacticalLines.LL;case 110300:return d.TacticalLines.EWL;case 140100:return d.TacticalLines.FLOT;case 140200:return d.TacticalLines.LC;case 140300:return d.TacticalLines.PL;case 140400:return d.TacticalLines.FEBA;case 140500:return d.TacticalLines.PDF;case 140601:return d.TacticalLines.DIRATKAIR;case 140602:return d.TacticalLines.DIRATKGND;case 140603:return d.TacticalLines.DIRATKSPT;case 140700:return d.TacticalLines.FCL;case 140800:return d.TacticalLines.IL;case 140900:return d.TacticalLines.LOA;case 141e3:return d.TacticalLines.LOD;case 141100:return d.TacticalLines.LDLC;case 141200:return d.TacticalLines.PLD;case 150200:return d.TacticalLines.ASSY;case 150100:return d.TacticalLines.GENERAL;case 150501:return d.TacticalLines.JTAA;case 150502:return d.TacticalLines.SAA;case 150503:return d.TacticalLines.SGAA;case 150600:return d.TacticalLines.DZ;case 150700:return d.TacticalLines.EZ;case 150800:return d.TacticalLines.LZ;case 150900:return d.TacticalLines.PZ;case 151100:return d.TacticalLines.LAA;case 151200:return d.TacticalLines.BATTLE;case 151202:return d.TacticalLines.PNO;case 151204:return d.TacticalLines.CONTAIN;case 151205:return d.TacticalLines.RETAIN;case 151300:return d.TacticalLines.EA;case 151203:return d.TacticalLines.STRONG;case 151500:return d.TacticalLines.ASSAULT;case 151600:return d.TacticalLines.ATKPOS;case 151700:return d.TacticalLines.OBJ;case 151800:return d.TacticalLines.ENCIRCLE;case 151900:return d.TacticalLines.PEN;case 152e3:return d.TacticalLines.ATKBYFIRE;case 152100:return d.TacticalLines.SPTBYFIRE;case 152200:return d.TacticalLines.SARA;case 141300:return d.TacticalLines.AIRHEAD;case 141400:return d.TacticalLines.BRDGHD;case 141500:return d.TacticalLines.HOLD;case 141600:return d.TacticalLines.RELEASE;case 141700:return d.TacticalLines.AMBUSH;case 170100:return d.TacticalLines.AC;case 170200:return d.TacticalLines.LLTR;case 170300:return d.TacticalLines.MRR;case 170400:return d.TacticalLines.SL;case 170500:return d.TacticalLines.SAAFR;case 170600:return d.TacticalLines.TC;case 170700:return d.TacticalLines.SC;case 170800:return d.TacticalLines.BDZ;case 170900:return d.TacticalLines.HIDACZ;case 171e3:return d.TacticalLines.ROZ;case 171100:return d.TacticalLines.AARROZ;case 171200:return d.TacticalLines.UAROZ;case 171300:return d.TacticalLines.WEZ;case 171400:return d.TacticalLines.FEZ;case 171500:return d.TacticalLines.JEZ;case 171600:return d.TacticalLines.MEZ;case 171700:return d.TacticalLines.LOMEZ;case 171800:return d.TacticalLines.HIMEZ;case 171900:return d.TacticalLines.FAADZ;case 172e3:return d.TacticalLines.WFZ;case 200401:return d.TacticalLines.SHIP_AOI_CIRCULAR;case 240804:return d.TacticalLines.RECTANGULAR_TARGET;case 220100:return d.TacticalLines.BEARING;case 220101:return d.TacticalLines.ELECTRO;case 220102:return d.TacticalLines.BEARING_EW;case 220103:return d.TacticalLines.ACOUSTIC;case 220104:return d.TacticalLines.ACOUSTIC_AMB;case 220105:return d.TacticalLines.TORPEDO;case 220106:return d.TacticalLines.OPTICAL;case 218400:return d.TacticalLines.NAVIGATION;case 220107:return d.TacticalLines.BEARING_J;case 220108:return d.TacticalLines.BEARING_RDF;case 240101:return d.TacticalLines.ACA;case 240102:return d.TacticalLines.ACA_RECTANGULAR;case 240103:return d.TacticalLines.ACA_CIRCULAR;case 240201:return d.TacticalLines.FFA;case 240202:return d.TacticalLines.FFA_RECTANGULAR;case 240203:return d.TacticalLines.FFA_CIRCULAR;case 240301:return d.TacticalLines.NFA;case 240302:return d.TacticalLines.NFA_RECTANGULAR;case 240303:return d.TacticalLines.NFA_CIRCULAR;case 240401:return d.TacticalLines.RFA;case 240402:return d.TacticalLines.RFA_RECTANGULAR;case 240403:return d.TacticalLines.RFA_CIRCULAR;case 240503:return d.TacticalLines.PAA;case 240501:return d.TacticalLines.PAA_RECTANGULAR;case 240502:return d.TacticalLines.PAA_CIRCULAR;case 260100:return d.TacticalLines.FSCL;case 300100:return d.TacticalLines.ICL;case 190100:return d.TacticalLines.IFF_OFF;case 190200:return d.TacticalLines.IFF_ON;case 260200:return d.TacticalLines.CFL;case 260300:return d.TacticalLines.NFL;case 260500:return d.TacticalLines.RFL;case 260600:return d.TacticalLines.MFP;case 240701:return d.TacticalLines.LINTGT;case 240702:return d.TacticalLines.LINTGTS;case 240703:return d.TacticalLines.FPF;case 240801:return d.TacticalLines.AT;case 240802:return d.TacticalLines.RECTANGULAR;case 240803:return d.TacticalLines.CIRCULAR;case 240805:return d.TacticalLines.SERIES;case 240806:return d.TacticalLines.SMOKE;case 240808:return d.TacticalLines.BOMB;case 241001:return d.TacticalLines.FSA;case 241002:return d.TacticalLines.FSA_RECTANGULAR;case 200402:return d.TacticalLines.SHIP_AOI_RECTANGULAR;case 200600:return d.TacticalLines.CUED_ACQUISITION;case 200700:return d.TacticalLines.RADAR_SEARCH;case 241003:return d.TacticalLines.FSA_CIRCULAR;case 200300:return d.TacticalLines.NOTACK;case 241101:return d.TacticalLines.ATI;case 241102:return d.TacticalLines.ATI_RECTANGULAR;case 241103:return d.TacticalLines.ATI_CIRCULAR;case 241201:return d.TacticalLines.CFFZ;case 241202:return d.TacticalLines.CFFZ_RECTANGULAR;case 241203:return d.TacticalLines.CFFZ_CIRCULAR;case 241301:return d.TacticalLines.CENSOR;case 241302:return d.TacticalLines.CENSOR_RECTANGULAR;case 241303:return d.TacticalLines.CENSOR_CIRCULAR;case 241401:return d.TacticalLines.CFZ;case 241402:return d.TacticalLines.CFZ_RECTANGULAR;case 241403:return d.TacticalLines.CFZ_CIRCULAR;case 241501:return d.TacticalLines.DA;case 241502:return d.TacticalLines.DA_RECTANGULAR;case 241503:return d.TacticalLines.DA_CIRCULAR;case 241701:return d.TacticalLines.TBA;case 241702:return d.TacticalLines.TBA_RECTANGULAR;case 241703:return d.TacticalLines.TBA_CIRCULAR;case 241801:return d.TacticalLines.TVAR;case 241802:return d.TacticalLines.TVAR_RECTANGULAR;case 241803:return d.TacticalLines.TVAR_CIRCULAR;case 241901:return d.TacticalLines.ZOR;case 241902:return d.TacticalLines.ZOR_RECTANGULAR;case 241903:return d.TacticalLines.ZOR_CIRCULAR;case 242e3:return d.TacticalLines.TGMF;case 242100:return d.TacticalLines.RANGE_FAN;case 242200:return d.TacticalLines.RANGE_FAN_SECTOR;case 242301:return d.TacticalLines.KILLBOXBLUE;case 242302:return d.TacticalLines.KILLBOXBLUE_RECTANGULAR;case 242303:return d.TacticalLines.KILLBOXBLUE_CIRCULAR;case 242304:return d.TacticalLines.KILLBOXPURPLE;case 242305:return d.TacticalLines.KILLBOXPURPLE_RECTANGULAR;case 242306:return d.TacticalLines.KILLBOXPURPLE_CIRCULAR;case 270100:case 270200:return d.TacticalLines.ZONE;case 270300:return d.TacticalLines.OBSFAREA;case 270400:return d.TacticalLines.OBSAREA;case 270501:return d.TacticalLines.MNFLDBLK;case 270502:return d.TacticalLines.MNFLDDIS;case 270503:return d.TacticalLines.MNFLDFIX;case 270504:return d.TacticalLines.TURN;case 270601:return d.TacticalLines.EASY;case 270602:return d.TacticalLines.BYDIF;case 270603:return d.TacticalLines.BYIMP;case 271100:return d.TacticalLines.GAP;case 271201:return d.TacticalLines.PLANNED;case 271202:return d.TacticalLines.ESR1;case 271203:return d.TacticalLines.ESR2;case 271204:return d.TacticalLines.ROADBLK;case 280100:return d.TacticalLines.ABATIS;case 290100:return d.TacticalLines.LINE;case 290201:return d.TacticalLines.ATDITCH;case 290202:return d.TacticalLines.ATDITCHC;case 290203:return d.TacticalLines.ATDITCHM;case 290204:return d.TacticalLines.ATWALL;case 290301:return d.TacticalLines.UNSP;case 290302:return d.TacticalLines.SFENCE;case 290303:return d.TacticalLines.DFENCE;case 290304:return d.TacticalLines.DOUBLEA;case 290305:return d.TacticalLines.LWFENCE;case 290306:return d.TacticalLines.HWFENCE;case 290307:return d.TacticalLines.SINGLEC;case 290308:return d.TacticalLines.DOUBLEC;case 290309:return d.TacticalLines.TRIPLE;case 290600:return d.TacticalLines.MFLANE;case 270707:return d.TacticalLines.DEPICT;case 270800:return d.TacticalLines.MINED;case 270801:return d.TacticalLines.FENCED;case 290101:return d.TacticalLines.MINE_LINE;case 271e3:return d.TacticalLines.UXO;case 271700:return d.TacticalLines.BIO;case 271800:return d.TacticalLines.CHEM;case 271900:return d.TacticalLines.NUC;case 272e3:return d.TacticalLines.RAD;case 290400:return d.TacticalLines.CLUSTER;case 290500:return d.TacticalLines.TRIP;case 282003:return d.TacticalLines.OVERHEAD_WIRE;case 271300:return d.TacticalLines.ASLTXING;case 271500:return d.TacticalLines.FORDSITE;case 271600:return d.TacticalLines.FORDIF;case 290700:return d.TacticalLines.FERRY;case 290800:return d.TacticalLines.RAFT;case 290900:return d.TacticalLines.FORTL;case 291e3:return d.TacticalLines.FOXHOLE;case 272100:return d.TacticalLines.MSDZ;case 272200:return d.TacticalLines.DRCL;case 310200:return d.TacticalLines.EPW;case 310300:return d.TacticalLines.FARP;case 310400:return d.TacticalLines.RHA;case 310500:return d.TacticalLines.RSA;case 310600:return d.TacticalLines.BSA;case 310700:return d.TacticalLines.DSA;case 330100:return d.TacticalLines.CONVOY;case 330200:return d.TacticalLines.HCONVOY;case 330300:return d.TacticalLines.MSR;case 330301:return d.TacticalLines.MSR_ONEWAY;case 330401:return d.TacticalLines.ASR_ONEWAY;case 330302:return d.TacticalLines.MSR_TWOWAY;case 330402:return d.TacticalLines.ASR_TWOWAY;case 330303:return d.TacticalLines.MSR_ALT;case 330403:return d.TacticalLines.ASR_ALT;case 330400:return d.TacticalLines.ASR;case 340100:return d.TacticalLines.BLOCK;case 340200:return d.TacticalLines.BREACH;case 340300:return d.TacticalLines.BYPASS;case 340400:return d.TacticalLines.CANALIZE;case 340500:return d.TacticalLines.CLEAR;case 340600:return d.TacticalLines.CATK;case 340700:return d.TacticalLines.CATKBYFIRE;case 340800:return d.TacticalLines.DELAY;case 341e3:return d.TacticalLines.DISRUPT;case 341100:return d.TacticalLines.FIX;case 341200:return d.TacticalLines.FOLLA;case 341300:return d.TacticalLines.FOLSP;case 341500:return d.TacticalLines.ISOLATE;case 341700:return d.TacticalLines.OCCUPY;case 341800:return d.TacticalLines.PENETRATE;case 341900:return d.TacticalLines.RIP;case 342e3:return d.TacticalLines.RETIRE;case 342100:return d.TacticalLines.SECURE;case 342201:return d.TacticalLines.COVER;case 342202:return d.TacticalLines.GUARD;case 342203:return d.TacticalLines.SCREEN;case 342300:return d.TacticalLines.SEIZE;case 342400:return d.TacticalLines.WITHDRAW;case 342500:return d.TacticalLines.WDRAWUP;case 342600:return d.TacticalLines.CORDONKNOCK;case 342700:return d.TacticalLines.CORDONSEARCH;case 272101:return d.TacticalLines.STRIKWARN}return-1}static reversePointsRevD(e){try{if(e.get_SymbolId().length<20||25!==C.SymbolID.getSymbolSet(e.get_SymbolId()))return;switch(e.get_LineType()){case d.TacticalLines.LC:case d.TacticalLines.UNSP:case d.TacticalLines.LWFENCE:case d.TacticalLines.HWFENCE:case d.TacticalLines.SINGLEC:case d.TacticalLines.DOUBLEC:case d.TacticalLines.TRIPLE:null!=e.Pixels&&e.Pixels.reverse(),null!=e.LatLongs&&e.LatLongs.reverse();break;case d.TacticalLines.CLUSTER:C.SymbolID.getVersion(e.get_SymbolId())<C.SymbolID.Version_2525E&&(null!=e.Pixels&&e.Pixels.reverse(),null!=e.LatLongs&&e.LatLongs.reverse())}}catch(e){if(!(e instanceof Error))throw e;f.ErrorLogger.LogException("clsRenderer","reversePointsRevD",new R.RendererException("Failed inside reversePointsRevD",e))}}}t.clsRenderer=G},1024:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clsUtilityCPOF=void 0;const a=i(1358),n=i(2876),s=i(9441),l=i(7940),r=i(3170),o=i(4305),c=i(1207),T=i(7389),u=i(8712),g=i(5772),L=i(8101),d=i(8678),_=i(960),h=i(3515),E=i(7300),A=i(106),I=i(8795),S=i(2466),y=i(4546),f=i(921),D=i(498),M=i(4738);class P{static _className="clsUtilityCPOF";static PointLatLongToPixels(e,t){let i=new T.POINT2;try{let a=e.x,n=e.y,l=t.GeoToPixels(new s.Point2D(a,n));i.x=l.getX(),i.y=l.getY(),i.style=e.style}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"PointLatLongToPixels",new A.RendererException("Failed inside PointLatLongToPixels",e))}return i}static GetNumericFields(e,t,i,a,n,s){try{if(t===L.TacticalLines.RANGE_FAN_FILL)return;let l=0,r=new u.ref,o=new u.ref,c=new T.POINT2(0,0),g=new T.POINT2(0,0);switch(i.value=new Array(1),a.value=new Array(1),s.value=new Array(1),n.value=new Array(1),t){case L.TacticalLines.CIRCULAR:case L.TacticalLines.BDZ:case L.TacticalLines.FSA_CIRCULAR:case L.TacticalLines.NOTACK:case L.TacticalLines.FFA_CIRCULAR:case L.TacticalLines.NFA_CIRCULAR:case L.TacticalLines.RFA_CIRCULAR:case L.TacticalLines.PAA_CIRCULAR:case L.TacticalLines.ATI_CIRCULAR:case L.TacticalLines.CFFZ_CIRCULAR:case L.TacticalLines.SENSOR_CIRCULAR:case L.TacticalLines.CENSOR_CIRCULAR:case L.TacticalLines.DA_CIRCULAR:case L.TacticalLines.CFZ_CIRCULAR:case L.TacticalLines.ZOR_CIRCULAR:case L.TacticalLines.TBA_CIRCULAR:case L.TacticalLines.TVAR_CIRCULAR:case L.TacticalLines.ACA_CIRCULAR:case L.TacticalLines.KILLBOXBLUE_CIRCULAR:case L.TacticalLines.KILLBOXPURPLE_CIRCULAR:S.SymbolUtilities.isNumber(e.get_AM())&&(i.value[0]=parseFloat(e.get_AM()));break;case L.TacticalLines.LAUNCH_AREA:case L.TacticalLines.DEFENDED_AREA_CIRCULAR:case L.TacticalLines.SHIP_AOI_CIRCULAR:S.SymbolUtilities.isNumber(e.get_AM1())&&(n.value[0]=parseFloat(e.get_AM1())),S.SymbolUtilities.isNumber(e.get_AM())&&(a.value[0]=parseFloat(e.get_AM())),S.SymbolUtilities.isNumber(e.get_AN())&&(s.value[0]=parseFloat(e.get_AN()));break;case L.TacticalLines.RECTANGULAR:S.SymbolUtilities.isNumber(e.get_AM1())&&(n.value[0]=parseFloat(e.get_AM1())),S.SymbolUtilities.isNumber(e.get_AM())&&(a.value[0]=parseFloat(e.get_AM())),S.SymbolUtilities.isNumber(e.get_AN())&&(s.value[0]=.05625*parseFloat(e.get_AN()));break;case L.TacticalLines.CUED_ACQUISITION:S.SymbolUtilities.isNumber(e.get_AM())&&(n.value[0]=parseFloat(e.get_AM())),S.SymbolUtilities.isNumber(e.get_AM1())&&(a.value[0]=parseFloat(e.get_AM1())),S.SymbolUtilities.isNumber(e.get_AN())&&(s.value[0]=parseFloat(e.get_AN())+270);break;case L.TacticalLines.PAA_RECTANGULAR:case L.TacticalLines.FSA_RECTANGULAR:case L.TacticalLines.SHIP_AOI_RECTANGULAR:case L.TacticalLines.DEFENDED_AREA_RECTANGULAR:case L.TacticalLines.FFA_RECTANGULAR:case L.TacticalLines.ACA_RECTANGULAR:case L.TacticalLines.NFA_RECTANGULAR:case L.TacticalLines.RFA_RECTANGULAR:case L.TacticalLines.ATI_RECTANGULAR:case L.TacticalLines.CFFZ_RECTANGULAR:case L.TacticalLines.SENSOR_RECTANGULAR:case L.TacticalLines.CENSOR_RECTANGULAR:case L.TacticalLines.DA_RECTANGULAR:case L.TacticalLines.CFZ_RECTANGULAR:case L.TacticalLines.ZOR_RECTANGULAR:case L.TacticalLines.TBA_RECTANGULAR:case L.TacticalLines.TVAR_RECTANGULAR:case L.TacticalLines.KILLBOXBLUE_RECTANGULAR:case L.TacticalLines.KILLBOXPURPLE_RECTANGULAR:case L.TacticalLines.RECTANGULAR_TARGET:e.LatLongs.length>=2&&(c=e.LatLongs[0],g=e.LatLongs[1],l=_.mdlGeodesic.geodesic_distance(c,g,r,o),s.value[0]=r.value[0]),S.SymbolUtilities.isNumber(e.get_AM())&&(a.value[0]=parseFloat(e.get_AM()))}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"GetNumericFields",new A.RendererException("Failed inside GetNumericFields",e))}}static GetFarPixels(e,t,i,a){try{if(null==i||null==a)return;let n=t.GeoToPixels(new s.Point2D(50,30)),l=t.GeoToPixels(new s.Point2D(60,30)),r=10/Math.abs(l.getX()-n.getX()),o=0,c=Number.MAX_VALUE,u=-Number.MAX_VALUE,g=e.Pixels.length;for(o=0;o<g;o++)e.Pixels[o].x<c&&(c=e.Pixels[o].x),e.Pixels[o].x>u&&(u=e.Pixels[o].x);let L=(u-c)*r;if(Math.abs(L)<180)return;let d=Math.abs(180/r),_=0,h=0;for(o=0;o<g;o++)_=e.Pixels[o].x,h=e.Pixels[o].y,_>d&&(_-=2*d),i.push(new T.POINT2(_,h));for(o=0;o<g;o++)_=e.Pixels[o].x,h=e.Pixels[o].y,_<d&&(_+=2*d),a.push(new T.POINT2(_,h))}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"GetFarPixels",new A.RendererException("Failed inside GetFarPixels",e))}}static Change1TacticalAreas(e,t,i,a){try{let n,s,l=new u.ref,r=new u.ref,o=new u.ref,g=new u.ref,d=0,h=e.LatLongs[0],E=new T.POINT2,A=new T.POINT2;switch(n=e.LatLongs.length>1?e.LatLongs[1]:e.LatLongs[0],P.PointLatLongToPixels(h,i),P.GetNumericFields(e,t,g,l,r,o),t){case L.TacticalLines.LAUNCH_AREA:case L.TacticalLines.DEFENDED_AREA_CIRCULAR:case L.TacticalLines.SHIP_AOI_CIRCULAR:{let t=_.mdlGeodesic.getGeoEllipse(h,l.value[0],r.value[0],o.value[0]);for(d=0;d<t.length;d++)h=t[d],n=P.PointLatLongToPixels(h,i),e.Pixels.push(n);break}case L.TacticalLines.PAA_RECTANGULAR:case L.TacticalLines.FSA_RECTANGULAR:case L.TacticalLines.SHIP_AOI_RECTANGULAR:case L.TacticalLines.DEFENDED_AREA_RECTANGULAR:case L.TacticalLines.FFA_RECTANGULAR:case L.TacticalLines.ACA_RECTANGULAR:case L.TacticalLines.NFA_RECTANGULAR:case L.TacticalLines.RFA_RECTANGULAR:case L.TacticalLines.ATI_RECTANGULAR:case L.TacticalLines.CFFZ_RECTANGULAR:case L.TacticalLines.SENSOR_RECTANGULAR:case L.TacticalLines.CENSOR_RECTANGULAR:case L.TacticalLines.DA_RECTANGULAR:case L.TacticalLines.CFZ_RECTANGULAR:case L.TacticalLines.ZOR_RECTANGULAR:case L.TacticalLines.TBA_RECTANGULAR:case L.TacticalLines.TVAR_RECTANGULAR:case L.TacticalLines.KILLBOXBLUE_RECTANGULAR:case L.TacticalLines.KILLBOXPURPLE_RECTANGULAR:A=_.mdlGeodesic.geodesic_coordinate(h,l.value[0]/2,o.value[0]-90),A=P.PointLatLongToPixels(A,i),A.style=0,e.Pixels.push(A),E=_.mdlGeodesic.geodesic_coordinate(h,l.value[0]/2,o.value[0]+90),E=P.PointLatLongToPixels(E,i),E.style=0,e.Pixels.push(E),E=_.mdlGeodesic.geodesic_coordinate(n,l.value[0]/2,o.value[0]+90),E=P.PointLatLongToPixels(E,i),E.style=0,e.Pixels.push(E),E=_.mdlGeodesic.geodesic_coordinate(n,l.value[0]/2,o.value[0]-90),E=P.PointLatLongToPixels(E,i),E.style=0,e.Pixels.push(E),e.Pixels.push(A);break;case L.TacticalLines.RECTANGULAR_TARGET:{let t=new Array(4);t[0]=_.mdlGeodesic.geodesic_coordinate(h,l.value[0]/2,o.value[0]-90),E=P.PointLatLongToPixels(t[0],i),E.style=0,e.Pixels.push(E),t[1]=_.mdlGeodesic.geodesic_coordinate(h,l.value[0]/2,o.value[0]+90),E=P.PointLatLongToPixels(t[1],i),E.style=0,e.Pixels.push(E),t[2]=_.mdlGeodesic.geodesic_coordinate(n,l.value[0]/2,o.value[0]+90),E=P.PointLatLongToPixels(t[2],i),E.style=0,e.Pixels.push(E),t[3]=_.mdlGeodesic.geodesic_coordinate(n,l.value[0]/2,o.value[0]-90),E=P.PointLatLongToPixels(t[3],i),E.style=0,e.Pixels.push(E),E=P.PointLatLongToPixels(t[0],i),E.style=5,e.Pixels.push(E);let a=_.mdlGeodesic.geodesic_distance(t[0],t[1],null,null),s=_.mdlGeodesic.geodesic_distance(t[1],t[2],null,null),r=.4*Math.min(a,s),T=c.lineutility.CalcCenterPointDouble2(t,4);E=_.mdlGeodesic.geodesic_coordinate(T,r,0),E=P.PointLatLongToPixels(E,i),E.style=0,e.Pixels.push(E),E=_.mdlGeodesic.geodesic_coordinate(T,r,180),E=P.PointLatLongToPixels(E,i),E.style=5,e.Pixels.push(E),E=_.mdlGeodesic.geodesic_coordinate(T,r,-90),E=P.PointLatLongToPixels(E,i),E.style=0,e.Pixels.push(E),E=_.mdlGeodesic.geodesic_coordinate(T,r,90),E=P.PointLatLongToPixels(E,i),E.style=0,e.Pixels.push(E);break}case L.TacticalLines.RECTANGULAR:case L.TacticalLines.CUED_ACQUISITION:E=_.mdlGeodesic.geodesic_coordinate(h,r.value[0]/2,o.value[0]-90),E=_.mdlGeodesic.geodesic_coordinate(E,l.value[0]/2,o.value[0]+0),E=P.PointLatLongToPixels(E,i),e.Pixels.push(E),E=_.mdlGeodesic.geodesic_coordinate(h,r.value[0]/2,o.value[0]+90),E=_.mdlGeodesic.geodesic_coordinate(E,l.value[0]/2,o.value[0]+0),E=P.PointLatLongToPixels(E,i),e.Pixels.push(E),E=_.mdlGeodesic.geodesic_coordinate(h,r.value[0]/2,o.value[0]+90),E=_.mdlGeodesic.geodesic_coordinate(E,l.value[0]/2,o.value[0]+180),E=P.PointLatLongToPixels(E,i),e.Pixels.push(E),E=_.mdlGeodesic.geodesic_coordinate(h,r.value[0]/2,o.value[0]-90),E=_.mdlGeodesic.geodesic_coordinate(E,l.value[0]/2,o.value[0]+180),E=P.PointLatLongToPixels(E,i),e.Pixels.push(E),e.Pixels.push(new T.POINT2(e.Pixels[0].x,e.Pixels[0].y));break;case L.TacticalLines.CIRCULAR:case L.TacticalLines.BDZ:case L.TacticalLines.FSA_CIRCULAR:case L.TacticalLines.NOTACK:case L.TacticalLines.ACA_CIRCULAR:case L.TacticalLines.FFA_CIRCULAR:case L.TacticalLines.NFA_CIRCULAR:case L.TacticalLines.RFA_CIRCULAR:case L.TacticalLines.PAA_CIRCULAR:case L.TacticalLines.ATI_CIRCULAR:case L.TacticalLines.CFFZ_CIRCULAR:case L.TacticalLines.SENSOR_CIRCULAR:case L.TacticalLines.CENSOR_CIRCULAR:case L.TacticalLines.DA_CIRCULAR:case L.TacticalLines.CFZ_CIRCULAR:case L.TacticalLines.ZOR_CIRCULAR:case L.TacticalLines.TBA_CIRCULAR:case L.TacticalLines.TVAR_CIRCULAR:case L.TacticalLines.KILLBOXBLUE_CIRCULAR:case L.TacticalLines.KILLBOXPURPLE_CIRCULAR:{h=e.LatLongs[0],E=_.mdlGeodesic.geodesic_coordinate(h,g.value[0],90),s=new Array(3),s[0]=new T.POINT2(h),s[1]=new T.POINT2(E),s[2]=new T.POINT2(E);let t,a=_.mdlGeodesic.GetGeodesicArc(s);for(d=0;d<a.length;d++)h=a[d],t=new T.POINT2,t=P.PointLatLongToPixels(h,i),e.Pixels.push(t);break}case L.TacticalLines.RANGE_FAN:P.GetConcentricCircles(e,t,i),e.LatLongs.length>1&&P.RangeFanOrientation(e,t,i);break;case L.TacticalLines.RANGE_FAN_SECTOR:P.GetSectorRangeFan(e,i),P.RangeFanOrientation(e,t,i);break;case L.TacticalLines.RADAR_SEARCH:case L.TacticalLines.RANGE_FAN_FILL:P.GetSectorRangeFan(e,i);break;default:return!1}let I=new Array,S=new Array;P.GetFarPixels(e,i,I,S);let y=new Array,f=new Array;if(0===I.length||0===S.length){let t=new Array;t.push(...e.Pixels),P.postSegmentFSA(e,i),P.Change1PixelsToShapes(e,a,!1),e.Pixels=t}else e.Pixels=I,P.Change1PixelsToShapes(e,y,!1),e.Pixels=S,P.Change1PixelsToShapes(e,f,!1),a.push(...y),a.push(...f);return!0}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"Change1TacticalAreas",new A.RendererException("Failed inside Change1TacticalAreas",e))}return!1}static Change1PixelsToShapes(e,t,i){let a,n,s,l=!0,r=0,o=e.get_LineType(),c=e.Pixels.length;for(r=0;r<c;r++)null==a&&(i?i&&(a=new g.Shape2(g.Shape2.SHAPE_TYPE_FILL)):a=new g.Shape2(g.Shape2.SHAPE_TYPE_POLYLINE)),n=e.Pixels[r],r>0&&(s=e.Pixels[r-1]),l?(0===r&&a.set_Style(n.style),r>0&&5===n.style&&5===s.style&&a.lineTo(n),a.moveTo(n),l=!1):(a.lineTo(n),5!==n.style&&10!==n.style||(l=!0,o===L.TacticalLines.RANGE_FAN_FILL&&r<e.Pixels.length-1&&(t.push(a),a=new g.Shape2(g.Shape2.SHAPE_TYPE_POLYLINE)))),r===e.Pixels.length-1&&(a.getShapeType()===I.ShapeInfo.SHAPE_TYPE_FILL?t.splice(0,0,a):t.push(a))}static GetConcentricCircles(e,t,i){try{let t,a=0,n=0,s=0,l=new T.POINT2,r=new Array,o=e.get_AM();if(1===e.LatLongs.length&&null!=o){let e=o.split(",");for(t=new Array(e.length),a=0;a<e.length;a++)t[a]=parseFloat(e[a])}let c,u=t.length;for(n=0;n<u;n++){if(s=t[n],0===s)continue;let o;c=new Array(3),l=e.LatLongs[0],c[0]=new T.POINT2(l),l=_.mdlGeodesic.geodesic_coordinate(l,s,90),c[1]=new T.POINT2(l),c[2]=new T.POINT2(l),r=_.mdlGeodesic.GetGeodesicArc(c);let u=r.length;for(a=0;a<u;a++)o=new T.POINT2,o=P.PointLatLongToPixels(r[a],i),o.style=0,a===r.length-1&&(o.style=5),e.Pixels.push(o)}let g=e.Pixels.length;e.Pixels[g-1].style=5}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"GetConcentricCircles",new A.RendererException("Failed inside GetConcentricCircles",e))}}static GetMaxSector(e){let t;try{let i=0,a=-Number.MAX_VALUE;t=e.get_LRMM();let n=t.split(","),s=n.length/4,l=0,r=-1;if(s<1)return null;if(4*s!==n.length)return null;for(l=0;l<s;l++)i=parseFloat(n[4*l+3]),i>a&&(a=i,r=l);t=n[4*r]+","+n[4*r+1]+","+n[4*r+2]+","+n[4*r+3]}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"GetMaxSector",new A.RendererException("Failed inside GetMaxSector",e))}return t}static GetCircularRangeFanFillTG(e){let t;try{if(t=new h.TGLight,t.set_VisibleModifiers(!0),t.set_LineThickness(0),t.set_FillColor(e.get_FillColor()),t.set_Fillstyle(e.get_FillStyle()),t.LatLongs=new Array,t.Pixels=new Array,t.LatLongs.push(e.LatLongs[0]),t.Pixels.push(e.Pixels[0]),t.Pixels.push(e.Pixels[1]),t.set_LineType(L.TacticalLines.RANGE_FAN_FILL),e.get_LineType()===L.TacticalLines.RANGE_FAN_SECTOR||e.get_LineType()===L.TacticalLines.RADAR_SEARCH)return t.set_LRMM(e.get_LRMM()),t;if(e.get_LineType()===L.TacticalLines.RANGE_FAN){let i=e.get_AM().split(","),a="";for(let e=0;e<i.length-1;e++)e>0&&(a+=","),a+="0,0,"+i[e]+","+i[e+1];t.set_LRMM(a)}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"GetCircularRangeFanFillTG",new A.RendererException("Failed inside GetCircularRangeFanFillTG",e))}return t}static GetSectorRangeFan(e,t){let i=!1;try{let a=e.LatLongs[0],n=0,s=0,l=0;d.clsUtility.GetSectorRadiiFromPoints(e);let r,o=new Array,c=new Array,u=new Array,g=new Array,L=new Array,h=new T.POINT2,E=new T.POINT2,A=e.get_LRMM().split(","),I=0,S=0,y=0,f=0;if(l=A.length/4,l<1)return!1;if(4*l!==A.length)return!1;for(n=0;n<l;n++)I=parseFloat(A[4*n]),S=parseFloat(A[4*n+1]),y=parseFloat(A[4*n+2]),f=parseFloat(A[4*n+3]);for(n=0;n<l;n++){g.length=0,u.length=0,c.length=0,I=parseFloat(A[4*n]),S=parseFloat(A[4*n+1]),y=parseFloat(A[4*n+2]),f=parseFloat(A[4*n+3]),h=_.mdlGeodesic.geodesic_coordinate(a,y,I),E=_.mdlGeodesic.geodesic_coordinate(a,y,S),o.length=0,o.push(a),o.push(h),o.push(E),i=_.mdlGeodesic.GetGeodesicArc2(o,c),o.length=0,i=!1,h=_.mdlGeodesic.geodesic_coordinate(a,f,I),E=_.mdlGeodesic.geodesic_coordinate(a,f,S),o.push(a),o.push(h),o.push(E),i=_.mdlGeodesic.GetGeodesicArc2(o,u);let e=c.length;for(s=0;s<e;s++)h=new T.POINT2(c[s]),g.push(h);for(e=u.length,s=e-1;s>=0;s--)h=new T.POINT2(u[s]),g.push(h);for(h=new T.POINT2(c[0]),h.style=5,g.push(h),e=g.length,s=0;s<e;s++)L.push(g[s])}c=null,u=null,a=null;let D=L.length;for(s=0;s<D;s++)h=new T.POINT2,h=P.PointLatLongToPixels(L[s],t),null!=r&&h.x===r.x&&h.y===r.y||(e.Pixels.push(new T.POINT2(h)),r=new T.POINT2(h));return!0}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"GetSectorRangeFan",new A.RendererException("Failed inside GetSectorRangeFan",e))}return i}static RangeFanOrientation(e,t,i){try{let t=e.LatLongs[0],a=0,n=0,s=0,l=new T.POINT2,r=new u.ref,o=new u.ref;if(e.LatLongs.length>1)l=e.LatLongs[1],a=_.mdlGeodesic.geodesic_distance(t,l,r,o),n=r.value[0];else{let t=P.GetMaxSector(e).split(","),i=parseFloat(t[0]),s=parseFloat(t[1]),l=(parseFloat(t[2]),parseFloat(t[3]));for(;i>360;)i-=360;for(;s>360;)s-=360;for(;i<0;)i+=360;for(;s<0;)s+=360;n=i>s?(i-360+s)/2:(i+s)/2,a=l}s=1.1*a;let g=new T.POINT2,L=new T.POINT2,d=new T.POINT2,h=new T.POINT2,E=new T.POINT2,A=new T.POINT2;t=e.LatLongs[0],g=P.PointLatLongToPixels(t,i),l=_.mdlGeodesic.geodesic_coordinate(t,s,n),L=P.PointLatLongToPixels(l,i),a=c.lineutility.CalcDistanceDouble(g,L);let I=10;a<100&&(I=a/10),I<5&&(I=5);let S=2*I;d=c.lineutility.ExtendAlongLineDouble(g,L,a+I),A=c.lineutility.ExtendAlongLineDouble(g,L,a+S),h=c.lineutility.ExtendDirectedLine(g,d,d,0,I),E=c.lineutility.ExtendDirectedLine(g,d,d,1,I),e.Pixels.push(g),A.style=5,e.Pixels.push(A),e.Pixels.push(h),A.style=0,e.Pixels.push(A),e.Pixels.push(E)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"RangeFanOrientation",new A.RendererException("Failed inside RangeFanOrientation",e))}}static ClearPixelsStyle(e){try{switch(e.get_LineType()){case L.TacticalLines.SC:case L.TacticalLines.MRR:case L.TacticalLines.SL:case L.TacticalLines.TC:case L.TacticalLines.LLTR:case L.TacticalLines.AC:case L.TacticalLines.SAAFR:return}let t=e.Pixels.length;for(let i=0;i<t;i++)e.Pixels[i].style=0}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"ClearPixelsStyle",new A.RendererException("Failed inside ClearPixelsStyle",e))}}static FilterPoints2(e,t){try{let i=e.get_LineType(),a=0,n=!0;if(e.Pixels.length<3)return;switch(i){case L.TacticalLines.PL:case L.TacticalLines.FEBA:case L.TacticalLines.LOA:case L.TacticalLines.LL:case L.TacticalLines.EWL:case L.TacticalLines.FCL:case L.TacticalLines.LOD:case L.TacticalLines.LDLC:case L.TacticalLines.PLD:case L.TacticalLines.HOLD:case L.TacticalLines.HOLD_GE:case L.TacticalLines.RELEASE:case L.TacticalLines.HOL:case L.TacticalLines.BHL:case L.TacticalLines.BRDGHD:case L.TacticalLines.BRDGHD_GE:case L.TacticalLines.NFL:a=o.arraysupport.getScaledSize(5,e.get_LineThickness()),n=!1;break;case L.TacticalLines.ATDITCH:case L.TacticalLines.ATDITCHC:case L.TacticalLines.ATDITCHM:case L.TacticalLines.FLOT:case L.TacticalLines.FORT_REVD:case L.TacticalLines.FORT:case L.TacticalLines.FORTL:case L.TacticalLines.STRONG:a=o.arraysupport.getScaledSize(25,e.get_LineThickness());break;case L.TacticalLines.LC:case L.TacticalLines.OBSAREA:case L.TacticalLines.OBSFAREA:case L.TacticalLines.ENCIRCLE:case L.TacticalLines.ZONE:case L.TacticalLines.LINE:case L.TacticalLines.ATWALL:case L.TacticalLines.UNSP:case L.TacticalLines.SFENCE:case L.TacticalLines.DFENCE:case L.TacticalLines.DOUBLEA:case L.TacticalLines.LWFENCE:case L.TacticalLines.HWFENCE:case L.TacticalLines.SINGLEC:case L.TacticalLines.DOUBLEC:case L.TacticalLines.TRIPLE:case L.TacticalLines.ICE_EDGE_RADAR:case L.TacticalLines.ICE_OPENINGS_FROZEN:case L.TacticalLines.CRACKS_SPECIFIC_LOCATION:a=o.arraysupport.getScaledSize(35,e.get_LineThickness());break;default:return}let s,l,r,T=0,u=new Array,g=0,d=e.Pixels.length;for(g=0;g<d;g++)s=e.Pixels[g],s.style=e.Pixels[g].style,u.push(s);let _=!0;e:for(;!0===_;)for(_=!1,g=0;g<u.length-1;g++)if(l=u[g],r=u[g+1],T=c.lineutility.CalcDistanceDouble(u[g],u[g+1]),T<a){if(!1===n){g+1===u.length-1?u.splice(g,1):u.splice(g+1,1),_=!0;break e}if(0===l.style&&-1===r.style){u.splice(g+1,1),_=!0;break e}if(0===l.style&&-2===r.style){u.splice(g+1,1),_=!0;break e}if(-1===l.style&&0===r.style){u.splice(g,1),_=!0;break e}if(-1===l.style&&-1===r.style){u.splice(g+1,1),_=!0;break e}if(-1===l.style&&-2===r.style){u.splice(g+1,1),_=!0;break e}if(-2===l.style&&0===r.style){u.splice(g,1),_=!0;break e}if(-2===l.style&&-1===r.style){u.splice(g,1),_=!0;break e}if(-2===l.style&&-2===r.style){u.splice(g+1,1),_=!0;break e}}e.Pixels=u,e.LatLongs=D.clsUtility.PixelsToLatLong(u,t)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"FilterPoints2",new A.RendererException("Failed inside FilterPoints2",e))}}static canClipPoints(e){try{let t=e.get_SymbolId();if(M.clsMETOC.IsWeather(t)>0)return!0;switch(e.get_LineType()){case L.TacticalLines.ABATIS:case L.TacticalLines.FLOT:case L.TacticalLines.LC:case L.TacticalLines.PL:case L.TacticalLines.FEBA:case L.TacticalLines.LL:case L.TacticalLines.EWL:case L.TacticalLines.GENERAL:case L.TacticalLines.JTAA:case L.TacticalLines.SAA:case L.TacticalLines.SGAA:case L.TacticalLines.ASSY:case L.TacticalLines.EA:case L.TacticalLines.FORT_REVD:case L.TacticalLines.FORT:case L.TacticalLines.DZ:case L.TacticalLines.EZ:case L.TacticalLines.LZ:case L.TacticalLines.PZ:case L.TacticalLines.LAA:case L.TacticalLines.ROZ:case L.TacticalLines.AARROZ:case L.TacticalLines.UAROZ:case L.TacticalLines.WEZ:case L.TacticalLines.FEZ:case L.TacticalLines.JEZ:case L.TacticalLines.FAADZ:case L.TacticalLines.HIDACZ:case L.TacticalLines.MEZ:case L.TacticalLines.LOMEZ:case L.TacticalLines.HIMEZ:case L.TacticalLines.WFZ:case L.TacticalLines.AIRFIELD:case L.TacticalLines.BATTLE:case L.TacticalLines.PNO:case L.TacticalLines.DIRATKAIR:case L.TacticalLines.DIRATKGND:case L.TacticalLines.DIRATKSPT:case L.TacticalLines.FCL:case L.TacticalLines.HOLD:case L.TacticalLines.BRDGHD:case L.TacticalLines.HOLD_GE:case L.TacticalLines.BRDGHD_GE:case L.TacticalLines.LOA:case L.TacticalLines.LOD:case L.TacticalLines.LDLC:case L.TacticalLines.PLD:case L.TacticalLines.ASSAULT:case L.TacticalLines.ATKPOS:case L.TacticalLines.OBJ:case L.TacticalLines.PEN:case L.TacticalLines.RELEASE:case L.TacticalLines.HOL:case L.TacticalLines.BHL:case L.TacticalLines.AO:case L.TacticalLines.AIRHEAD:case L.TacticalLines.ENCIRCLE:case L.TacticalLines.NAI:case L.TacticalLines.TAI:case L.TacticalLines.BASE_CAMP_REVD:case L.TacticalLines.BASE_CAMP:case L.TacticalLines.GUERILLA_BASE_REVD:case L.TacticalLines.GUERILLA_BASE:case L.TacticalLines.GENERIC_AREA:case L.TacticalLines.LINE:case L.TacticalLines.ZONE:case L.TacticalLines.OBSAREA:case L.TacticalLines.OBSFAREA:case L.TacticalLines.ATDITCH:case L.TacticalLines.ATDITCHC:case L.TacticalLines.ATDITCHM:case L.TacticalLines.ATWALL:case L.TacticalLines.DEPICT:case L.TacticalLines.MINED:case L.TacticalLines.FENCED:case L.TacticalLines.UXO:case L.TacticalLines.UNSP:case L.TacticalLines.SFENCE:case L.TacticalLines.DFENCE:case L.TacticalLines.DOUBLEA:case L.TacticalLines.LWFENCE:case L.TacticalLines.HWFENCE:case L.TacticalLines.SINGLEC:case L.TacticalLines.DOUBLEC:case L.TacticalLines.TRIPLE:case L.TacticalLines.FORTL:case L.TacticalLines.STRONG:case L.TacticalLines.RAD:case L.TacticalLines.BIO:case L.TacticalLines.NUC:case L.TacticalLines.CHEM:case L.TacticalLines.DRCL:case L.TacticalLines.LINTGT:case L.TacticalLines.LINTGTS:case L.TacticalLines.FPF:case L.TacticalLines.FSCL:case L.TacticalLines.BCL_REVD:case L.TacticalLines.BCL:case L.TacticalLines.ICL:case L.TacticalLines.IFF_OFF:case L.TacticalLines.IFF_ON:case L.TacticalLines.GENERIC_LINE:case L.TacticalLines.CFL:case L.TacticalLines.OVERHEAD_WIRE:case L.TacticalLines.NFL:case L.TacticalLines.MFP:case L.TacticalLines.RFL:case L.TacticalLines.AT:case L.TacticalLines.SERIES:case L.TacticalLines.STRIKWARN:case L.TacticalLines.SMOKE:case L.TacticalLines.BOMB:case L.TacticalLines.FSA:case L.TacticalLines.ACA:case L.TacticalLines.FFA:case L.TacticalLines.NFA:case L.TacticalLines.RFA:case L.TacticalLines.PAA:case L.TacticalLines.ATI:case L.TacticalLines.CFFZ:case L.TacticalLines.CFZ:case L.TacticalLines.SENSOR:case L.TacticalLines.CENSOR:case L.TacticalLines.DA:case L.TacticalLines.ZOR:case L.TacticalLines.TBA:case L.TacticalLines.TVAR:case L.TacticalLines.KILLBOXBLUE:case L.TacticalLines.KILLBOXPURPLE:case L.TacticalLines.MSR_ONEWAY:case L.TacticalLines.MSR_TWOWAY:case L.TacticalLines.MSR_ALT:case L.TacticalLines.ASR_ONEWAY:case L.TacticalLines.ASR_TWOWAY:case L.TacticalLines.ASR_ALT:case L.TacticalLines.ROUTE_ONEWAY:case L.TacticalLines.ROUTE_ALT:case L.TacticalLines.DHA_REVD:case L.TacticalLines.DHA:case L.TacticalLines.EPW:case L.TacticalLines.FARP:case L.TacticalLines.RHA:case L.TacticalLines.BSA:case L.TacticalLines.DSA:case L.TacticalLines.CSA:case L.TacticalLines.RSA:case L.TacticalLines.TGMF:return!0;case L.TacticalLines.MSR:case L.TacticalLines.ASR:case L.TacticalLines.ROUTE:case L.TacticalLines.BOUNDARY:default:return!1}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"canClipPoints",new A.RendererException("Failed inside canClipPoints",e))}return!1}static LinesWithSeparateFill(e,t){if(null==t)return!1;switch(e){case L.TacticalLines.MSDZ:return!0;case L.TacticalLines.OBSFAREA:case L.TacticalLines.OBSAREA:case L.TacticalLines.STRONG:case L.TacticalLines.ZONE:case L.TacticalLines.FORT_REVD:case L.TacticalLines.FORT:case L.TacticalLines.ENCIRCLE:case L.TacticalLines.FIX:case L.TacticalLines.BOUNDARY:case L.TacticalLines.FLOT:case L.TacticalLines.LC:case L.TacticalLines.PL:case L.TacticalLines.FEBA:case L.TacticalLines.LL:case L.TacticalLines.EWL:case L.TacticalLines.AC:case L.TacticalLines.MRR:case L.TacticalLines.SL:case L.TacticalLines.TC:case L.TacticalLines.SAAFR:case L.TacticalLines.SC:case L.TacticalLines.LLTR:case L.TacticalLines.DIRATKAIR:case L.TacticalLines.DIRATKGND:case L.TacticalLines.DIRATKSPT:case L.TacticalLines.FCL:case L.TacticalLines.HOLD:case L.TacticalLines.BRDGHD:case L.TacticalLines.HOLD_GE:case L.TacticalLines.BRDGHD_GE:case L.TacticalLines.LOA:case L.TacticalLines.LOD:case L.TacticalLines.LDLC:case L.TacticalLines.PLD:case L.TacticalLines.RELEASE:case L.TacticalLines.HOL:case L.TacticalLines.BHL:case L.TacticalLines.LINE:case L.TacticalLines.ABATIS:case L.TacticalLines.ATDITCH:case L.TacticalLines.ATDITCHC:case L.TacticalLines.ATDITCHM:case L.TacticalLines.ATWALL:case L.TacticalLines.MNFLDFIX:case L.TacticalLines.UNSP:case L.TacticalLines.SFENCE:case L.TacticalLines.DFENCE:case L.TacticalLines.DOUBLEA:case L.TacticalLines.LWFENCE:case L.TacticalLines.HWFENCE:case L.TacticalLines.SINGLEC:case L.TacticalLines.DOUBLEC:case L.TacticalLines.TRIPLE:case L.TacticalLines.FORTL:case L.TacticalLines.LINTGT:case L.TacticalLines.LINTGTS:case L.TacticalLines.FSCL:case L.TacticalLines.BCL_REVD:case L.TacticalLines.BCL:case L.TacticalLines.ICL:case L.TacticalLines.IFF_OFF:case L.TacticalLines.IFF_ON:case L.TacticalLines.GENERIC_LINE:case L.TacticalLines.CFL:case L.TacticalLines.NFL:case L.TacticalLines.MFP:case L.TacticalLines.RFL:case L.TacticalLines.MSR:case L.TacticalLines.MSR_ONEWAY:case L.TacticalLines.MSR_TWOWAY:case L.TacticalLines.MSR_ALT:case L.TacticalLines.ASR:case L.TacticalLines.ASR_ONEWAY:case L.TacticalLines.ASR_TWOWAY:case L.TacticalLines.ASR_ALT:case L.TacticalLines.ROUTE:case L.TacticalLines.ROUTE_ONEWAY:case L.TacticalLines.ROUTE_ALT:{let e;if(null!=t&&t.length>0){let i=t.length;for(let a=0;a<i;a++)e=t[a],e.getShapeType()===g.Shape2.SHAPE_TYPE_POLYLINE&&t[a].setFillColor(null)}return!0}default:return!1}}static Point2DtoPOINT2Mapped(e,t){let i=new Array;try{let a,n=0,s=e.length;for(let l=0;l<s;l++)a=e[l],n=Array.from(t.values()).includes(a)?0:-1,i.push(new T.POINT2(e[l].getX(),e[l].getY(),n))}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"Point2DToPOINT2Mapped",new A.RendererException("Failed inside Point2DToPOINT2Mapped",e))}return i}static Point2DtoPOINT2(e){let t=new Array;try{let i=e.length;for(let a=0;a<i;a++)t.push(new T.POINT2(e[a].getX(),e[a].getY()))}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"Point2DToPOINT2",new A.RendererException("Failed inside Point2DToPOINT2",e))}return t}static POINT2toPoint2D(e){let t=new Array;try{let i=e.length;for(let a=0;a<i;a++)t.push(new s.Point2D(e[a].x,e[a].y))}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"POINT2toPoint2D",new A.RendererException("Failed inside POINT2toPoint2D",e))}return t}static BuildShapeFromPoints(e){let t=new a.GeneralPath;try{t.moveTo(e[0].getX(),e[0].getY());let i=e.length;for(let a=1;a<i;a++)t.lineTo(e[a].getX(),e[a].getY())}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"buildShapeFromPoints",new A.RendererException("Failed inside buildShapeFromPoints",e))}return t}static buildShapeSpecFromPoints(e,t,i,n){let s,o;try{s=new Array;let c,T,u=0,d=0,_=(t.getBounds(),t.getBounds().height),E=t.getBounds().width,A=t.getBounds().x,I=t.getBounds().y;if(0===_&&(_=1),0===E&&(E=1),null!=n&&n instanceof r.Rectangle2D)c=n;else if(null!=n&&n instanceof l.Rectangle){let e=n;c=new r.Rectangle2D(e.x,e.y,e.width,e.height)}else null!=n&&n instanceof Array&&(T=n);if(null!=c&&!1===c.contains(t.getShape().getBounds2D())&&!1===c.intersects(t.getShape().getBounds2D())){if(!1===c.contains(A,I,E,_)&&!1===c.intersects(A,I,E,_))return s}else if(null!=T){let e=new a.GeneralPath;for(d=T.length,u=0;u<d;u++)0===u?e.moveTo(T[u].getX(),T[u].getY()):e.lineTo(T[u].getX(),T[u].getY());if(e.closePath(),!1===e.contains(t.getShape().getBounds2D())&&!1===e.intersects(t.getShape().getBounds2D())&&!1===e.contains(A,I,E,_)&&!1===e.intersects(A,I,E,_))return s}if(t.getShapeType()===g.Shape2.SHAPE_TYPE_MODIFIER||t.getShapeType()===g.Shape2.SHAPE_TYPE_MODIFIER_FILL)return s.push(t),s;let S,D=new h.TGLight;D.set_LineType(L.TacticalLines.PL);let M,R,N=new Array,C=new a.GeneralPath;for(d=i.length,u=0;u<d;u++)S=i[u],0===S.style&&N.length>1?(D=new h.TGLight,D.set_LineType(L.TacticalLines.PL),D.Pixels=N,null!=c?M=y.clsClipPolygon2.ClipPolygon(D,c):null!=T&&T.length>0&&(M=f.clsClipQuad.ClipPolygon(D,T)),null!=M&&M.length>1&&(R=P.BuildShapeFromPoints(M),C.append(R,!1)),N.length=0,N.push(S)):N.push(S);N.length>1&&(D=new h.TGLight,D.set_LineType(L.TacticalLines.PL),D.Pixels=N,null!=c?M=y.clsClipPolygon2.ClipPolygon(D,c):null!=T&&(M=f.clsClipQuad.ClipPolygon(D,T)),null!=M&&M.length>1&&(R=P.BuildShapeFromPoints(M),C.append(R,!1)),e.set_WasClipped(D.get_WasClipped())),o=new g.Shape2(t.getShapeType()),o.setLineColor(t.getLineColor()),o.setFillColor(t.getFillColor()),o.setStroke(t.getStroke()),o.setTexturePaint(t.getTexturePaint()),o.setShape(C),s.push(o)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"buildShapeSpecFromPoints",new A.RendererException("Failed inside buildShapeSpecFromPoints",e))}return s}static postClipShapes(e,t,i){let a,s;try{if(null==t||0===t.length)return null;a=new Array;let l=0,r=new Array,o=t.length;for(l=0;l<o;l++)r.push(t[l]);let c,u,g,L=new Array,d=new Array(6);for(o=r.length,l=0;l<o;l++){g=r[l],c=g.getShape(),L.length=0;for(let e=c.getPathIterator(null);!e.isDone();e.next())switch(e.currentSegment(d)){case n.PathIterator.SEG_MOVETO:u=new T.POINT2(d[0],d[1]),u.style=0,L.push(u);break;case n.PathIterator.SEG_LINETO:u=new T.POINT2(d[0],d[1]),u.style=1,L.push(u);break;case n.PathIterator.SEG_QUADTO:u=new T.POINT2(d[0],d[1]),u.style=2,L.push(u),u=new T.POINT2(d[2],d[3]),u.style=2,L.push(u);break;case n.PathIterator.SEG_CUBICTO:u=new T.POINT2(d[0],d[1]),u.style=3,L.push(u),u=new T.POINT2(d[2],d[3]),u.style=3,L.push(u),u=new T.POINT2(d[4],d[5]),u.style=3,L.push(u);break;case n.PathIterator.SEG_CLOSE:u=new T.POINT2(d[0],d[1]),u.style=4,L.push(u);break;default:u=null}s=P.buildShapeSpecFromPoints(e,g,L,i),a.push(...s)}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"postClipShapes",new A.RendererException("Failed inside postClipShapes",e))}return a}static segmentAnticipatedLine(e){try{let t=e.get_LineType();if(d.clsUtility.IsChange1Area(t))return!1;if(d.clsUtility.isAutoshape(e))return!1;switch(t){case L.TacticalLines.OVERHEAD_WIRE:case L.TacticalLines.CATK:case L.TacticalLines.CATKBYFIRE:case L.TacticalLines.MAIN:case L.TacticalLines.SPT:case L.TacticalLines.AIRAOA:case L.TacticalLines.AAAAA:case L.TacticalLines.MSR_ONEWAY:case L.TacticalLines.MSR_TWOWAY:case L.TacticalLines.MSR_ALT:case L.TacticalLines.ASR_ONEWAY:case L.TacticalLines.ASR_TWOWAY:case L.TacticalLines.ASR_ALT:case L.TacticalLines.ROUTE_ONEWAY:case L.TacticalLines.ROUTE_ALT:return!1}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"segmentGenericLine",new A.RendererException("Failed inside segmentGenericLine",e))}return!0}static postSegmentFSA(e,t){try{if("2D"===e.get_Client())return;switch(e.get_LineType()){case L.TacticalLines.PAA_RECTANGULAR:case L.TacticalLines.FSA_RECTANGULAR:case L.TacticalLines.SHIP_AOI_RECTANGULAR:case L.TacticalLines.DEFENDED_AREA_RECTANGULAR:case L.TacticalLines.FFA_RECTANGULAR:case L.TacticalLines.ACA_RECTANGULAR:case L.TacticalLines.NFA_RECTANGULAR:case L.TacticalLines.RFA_RECTANGULAR:case L.TacticalLines.ATI_RECTANGULAR:case L.TacticalLines.CFFZ_RECTANGULAR:case L.TacticalLines.SENSOR_RECTANGULAR:case L.TacticalLines.CENSOR_RECTANGULAR:case L.TacticalLines.DA_RECTANGULAR:case L.TacticalLines.CFZ_RECTANGULAR:case L.TacticalLines.ZOR_RECTANGULAR:case L.TacticalLines.TBA_RECTANGULAR:case L.TacticalLines.TVAR_RECTANGULAR:case L.TacticalLines.KILLBOXBLUE_RECTANGULAR:case L.TacticalLines.KILLBOXPURPLE_RECTANGULAR:break;default:return}let i,a,n,l,r=new Array,o=new Array,c=0,u=0,g=0,d=0,h=25e4,E=0,A=0,I=e.Pixels.length;for(c=0;c<I;c++)i=e.Pixels[c],l=new s.Point2D(i.x,i.y),l=t.PixelsToGeo(l),i=new T.POINT2(l.getX(),l.getY()),r.push(i);for(I=r.length,c=0;c<I-1;c++)i=r[c],a=r[c+1],a.style=-1,E=_.mdlGeodesic.GetAzimuth(i,a),d=_.mdlGeodesic.geodesic_distance(r[c],r[c+1],null,null),d>A&&(A=d);for(h>A&&(h=A),c=0;c<I-1;c++){for(i=new T.POINT2(r[c]),i.style=0,a=new T.POINT2(r[c+1]),a.style=0,E=_.mdlGeodesic.GetAzimuth(i,a),d=_.mdlGeodesic.geodesic_distance(r[c],r[c+1],null,null),g=Math.trunc(d/h),0===c&&o.push(i),u=1;u<=g;u++)n=_.mdlGeodesic.geodesic_coordinate(i,h*u,E),n.style=-2,d=_.mdlGeodesic.geodesic_distance(n,a,null,null),d>=h/2&&o.push(n);o.push(a)}r=o,e.Pixels=D.clsUtility.LatLongToPixels(r,t)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"postSegmentFSA",new A.RendererException("Failed inside postSegmentFSA",e))}}static toGeodesic(e,t,i){let a=new Array;try{let n=0,s=0,l=0,r=e.LatLongs,o="",c="",u=!1,g=0;switch(e.get_LineType()){case L.TacticalLines.AC:case L.TacticalLines.LLTR:case L.TacticalLines.MRR:case L.TacticalLines.SL:case L.TacticalLines.SAAFR:case L.TacticalLines.TC:case L.TacticalLines.SC:u=!0}for(n=0;n<r.length-1;n++){u&&(g=r[n].style);let e=r[n].y*Math.PI/180,L=r[n].x*Math.PI/180,d=r[n+1].y*Math.PI/180,h=r[n+1].x*Math.PI/180,E=2*Math.asin(Math.sqrt(Math.pow(Math.sin((e-d)/2),2)+Math.cos(e)*Math.cos(d)*Math.pow(Math.sin((L-h)/2),2))),A=_.mdlGeodesic.geodesic_distance(r[n],r[n+1],null,null)/t;for(l=Math.round(A),l<1&&(l=1),l>32&&(l=32),s=0;s<=l;s++){if(0===s){a.push(new T.POINT2(r[n])),null!=i&&i.has(n)&&(o.length>0&&(o+=","),c=String(i.get(n)),o+=(a.length-1).toString()+":"+c);continue}if(s===l){n===r.length-2&&(a.push(new T.POINT2(r[n+1])),null!=i&&i.has(n+1)&&(o.length>0&&(o+=","),c=String(i.get(n+1)),o+=(a.length-1).toString()+":"+c));break}let t=s/l,_=Math.sin((1-t)*E)/Math.sin(E),A=Math.sin(t*E)/Math.sin(E),I=_*Math.cos(e)*Math.cos(L)+A*Math.cos(d)*Math.cos(h),S=_*Math.cos(e)*Math.sin(L)+A*Math.cos(d)*Math.sin(h),y=_*Math.sin(e)+A*Math.sin(d),f=Math.atan2(y,Math.sqrt(Math.pow(I,2)+Math.pow(S,2))),D=Math.atan2(S,I);f*=180/Math.PI,D*=180/Math.PI;let M=new T.POINT2(D,f);u&&(M.style=-g),a.push(M),null!=i&&i.has(n)&&(o.length>0&&(o+=","),c=String(i.get(n)),o+=(a.length-1).toString()+":"+c)}}o.length>0&&e.set_H(o)}catch(e){if(e instanceof Error)return E.ErrorLogger.LogException(P._className,"toGeodesic",new A.RendererException("Failed inside toGeodesic",e)),null;throw e}return a}static SegmentGeoPoints(e,t,i){try{if("2D"===e.get_Client())return;let a=new Array,n=e.get_LineType(),s=25e4,l=!1,r=!1;switch(l=!0,n){case L.TacticalLines.AC:case L.TacticalLines.LLTR:case L.TacticalLines.MRR:case L.TacticalLines.SL:case L.TacticalLines.SAAFR:case L.TacticalLines.TC:case L.TacticalLines.SC:if(!l)return;r=!0;break;case L.TacticalLines.PLD:case L.TacticalLines.CFL:case L.TacticalLines.UNSP:case L.TacticalLines.TRIPLE:case L.TacticalLines.DOUBLEC:case L.TacticalLines.SINGLEC:case L.TacticalLines.ATDITCH:case L.TacticalLines.ATDITCHC:case L.TacticalLines.ATDITCHM:case L.TacticalLines.ATWALL:case L.TacticalLines.LINE:case L.TacticalLines.DIRATKAIR:case L.TacticalLines.STRONG:case L.TacticalLines.ENCIRCLE:case L.TacticalLines.FLOT:case L.TacticalLines.ZONE:case L.TacticalLines.OBSAREA:case L.TacticalLines.OBSFAREA:case L.TacticalLines.FORT_REVD:case L.TacticalLines.FORT:case L.TacticalLines.FORTL:break;case L.TacticalLines.HWFENCE:case L.TacticalLines.LWFENCE:case L.TacticalLines.DOUBLEA:case L.TacticalLines.DFENCE:case L.TacticalLines.SFENCE:s=5e5;break;case L.TacticalLines.LC:s=2e6;break;default:if(P.segmentAnticipatedLine(e))break;return}let o,c,u,g=0,h=0,E=0,A=0,I=0,S=0,y=e.LatLongs.length;for(g=0;g<y-1;g++)o=e.LatLongs[g],c=e.LatLongs[g+1],r||(c.style=-1),I=_.mdlGeodesic.GetAzimuth(o,c),A=_.mdlGeodesic.geodesic_distance(e.LatLongs[g],e.LatLongs[g+1],null,null),A>S&&(S=A);s>S&&(s=S),i>0&&i<.01&&(i=.01),i>0&&i<1&&(s*=i);let f=!1,M="",R="",N=d.clsUtility.getMSRSegmentColorStrings(e);if(null!=N&&e.set_H(""),f=!0,f)return a=P.toGeodesic(e,s,N),e.LatLongs=a,void(e.Pixels=D.clsUtility.LatLongToPixels(e.LatLongs,t));for(g=0;g<e.LatLongs.length-1;g++){for(o=new T.POINT2(e.LatLongs[g]),o.style=0,c=new T.POINT2(e.LatLongs[g+1]),c.style=0,I=_.mdlGeodesic.GetAzimuth(o,c),A=_.mdlGeodesic.geodesic_distance(e.LatLongs[g],e.LatLongs[g+1],null,null),E=Math.trunc(A/s),0===g&&(a.push(o),null!=N&&N.has(g)&&(M.length>0&&(M+=","),R=String(N.get(g)),M+=(a.length-1).toString()+":"+R)),h=1;h<=E;h++)u=_.mdlGeodesic.geodesic_coordinate(o,s*h,I),u.style=-2,A=_.mdlGeodesic.geodesic_distance(u,c,null,null),A>=s/2&&(a.push(u),null!=N&&N.has(g)&&(R=String(N.get(g)),M.length>0&&(M+=","),M+=(a.length-1).toString()+":"+R));a.push(c),null!=N&&N.has(g+1)&&(M.length>0&&(M+=","),R=String(N.get(g+1)),M+=(a.length-1).toString()+":"+R)}M.length>0&&e.set_H(M),e.LatLongs=a,e.Pixels=D.clsUtility.LatLongToPixels(e.LatLongs,t)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"SegmentGeoPoints",new A.RendererException("Failed inside SegmentGeoPoints",e))}}}t.clsUtilityCPOF=P},1036:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WebRenderer=void 0;const a=i(628),n=i(9441),s=i(3170),l=i(7300),r=i(7028),o=i(3254),c=i(7314),T=i(8739),u=i(960),g=i(7389),L=i(8712);class d{static OUTPUT_FORMAT_KML=0;static OUTPUT_FORMAT_JSON=1;static OUTPUT_FORMAT_GEOJSON=2;static OUTPUT_FORMAT_GEOSVG=3;static MIN_ALT_DEFAULT=0;static MAX_ALT_DEFAULT=100;static RADIUS1_DEFAULT=50;static RADIUS2_DEFAULT=100;static LEFT_AZIMUTH_DEFAULT=0;static RIGHT_AZIMUTH_DEFAULT=90;static ERR_ATTRIBUTES_NOT_FORMATTED='{"type":"error","error":"The attribute paramaters are not formatted correctly';static DEFAULT_ATTRIBUTES=`{"attributes":[{"radius1":${d.RADIUS1_DEFAULT},\n    "radius2":${d.RADIUS2_DEFAULT},\n    "minalt":${d.MIN_ALT_DEFAULT},"maxalt":${d.MAX_ALT_DEFAULT},\n    "leftAzimuth":${d.LEFT_AZIMUTH_DEFAULT},"rightAzimuth":${d.RIGHT_AZIMUTH_DEFAULT}}]}`;static _initSuccess=!1;static init(){try{!1===d._initSuccess&&(o.RendererSettings.getInstance().setTextBackgroundMethod(o.RendererSettings.TextBackgroundMethod_OUTLINE_QUICK),o.RendererSettings.getInstance().setLabelFont("arial",a.Font.PLAIN,12),l.ErrorLogger.setLevel(r.LogLevel.FINE),d._initSuccess=!0)}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException("WebRenderer","init",e,r.LogLevel.WARNING)}}static setLoggingLevel(e){if(e instanceof r.LogLevel)try{l.ErrorLogger.setLevel(e,!0),l.ErrorLogger.LogMessage("WebRenderer","setLoggingLevel(Level)","Logging level set to: "+l.ErrorLogger.getLevel().getName(),r.LogLevel.CONFIG)}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException("WebRenderer","setLoggingLevel(Level)",e,r.LogLevel.INFO)}else try{e>1e3?l.ErrorLogger.setLevel(r.LogLevel.OFF,!0):e>900?l.ErrorLogger.setLevel(r.LogLevel.SEVERE,!0):e>800?l.ErrorLogger.setLevel(r.LogLevel.WARNING,!0):e>700?l.ErrorLogger.setLevel(r.LogLevel.INFO,!0):e>500?l.ErrorLogger.setLevel(r.LogLevel.CONFIG,!0):e>400?l.ErrorLogger.setLevel(r.LogLevel.FINE,!0):e>300?l.ErrorLogger.setLevel(r.LogLevel.FINER,!0):e>Number.MIN_VALUE?l.ErrorLogger.setLevel(r.LogLevel.FINEST,!0):l.ErrorLogger.setLevel(r.LogLevel.ALL,!0),l.ErrorLogger.LogMessage("WebRenderer","setLoggingLevel(int)","Logging level set to: "+l.ErrorLogger.getLevel().getName(),r.LogLevel.CONFIG)}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException("WebRenderer","setLoggingLevel(int)",e,r.LogLevel.INFO)}}static setTacticalGraphicPointSize(e){}static setUnitPointSize(e){}static RenderSymbol(e,t,i,a,n,s,o,u,g,L,d){let _="";try{if(T.JavaRendererUtilities.addAltModeToModifiersString(L,s),_=c.MultiPointHandler.RenderSymbol(e,t,i,a,n,o,u,g,L,d),l.ErrorLogger.getLevel().intValue()<=r.LogLevel.FINER.intValue()){console.log("");let s="";s+="\nID: "+e+"\n",s+="Name: "+t+"\n",s+="Description: "+i+"\n",s+="SymbolID: "+a+"\n",s+="Scale: "+o.toString()+"\n",s+="BBox: "+u+"\n",s+="Coords: "+n+"\n",s+="Modifiers: "+g+"\n",l.ErrorLogger.LogMessage("WebRenderer","RenderSymbol",s.toString(),r.LogLevel.FINER)}if(l.ErrorLogger.getLevel().intValue()<=r.LogLevel.FINEST.intValue()){let e=_.replaceAll("</Placemark>","</Placemark>\n");e=_.replaceAll("(?s)<description[^>]*>.*?</description>","<description></description>"),l.ErrorLogger.LogMessage("WebRenderer","RenderSymbol","Output:\n"+e,r.LogLevel.FINEST)}}catch(e){if(!(e instanceof Error))throw e;_="{\"type\":'error',error:'There was an error creating the MilStdSymbol - "+e.toString()+"'}",l.ErrorLogger.LogException("WebRenderer","RenderSymbol",e,r.LogLevel.WARNING)}return _}static RenderSymbol2D(e,t,i,a,n,s,l,r,o,T,u){let g="";try{g=c.MultiPointHandler.RenderSymbol2D(e,t,i,a,n,s,l,r,o,T,u)}catch(t){if(!(t instanceof Error))throw t;g="{\"type\":'error',error:'There was an error creating the MilStdSymbol: "+a+" - ID: "+e+" "+t.toString()+"'}"}return g}static RenderMultiPointAsMilStdSymbol(e,t,i,a,n,s,o,T,u,g){let L;try{L=c.MultiPointHandler.RenderSymbolAsMilStdSymbol(e,t,i,a,n,o,T,u,g)}catch(e){if(!(e instanceof Error))throw e;L=null,l.ErrorLogger.LogException("WebRenderer","RenderMultiPointAsMilStdSymbol - "+a,e,r.LogLevel.WARNING)}return L}getSinglePointAnchor(e){let t="",i=new n.Point2D;return t=i.getX()+","+i.getY(),t}static getSinglePointInfo(e){return new n.Point2D,new s.Rectangle2D,""}static ShouldClipMultipointSymbol(e){return c.MultiPointHandler.ShouldClipSymbol(e)?"true":"false"}static getSinglePointByteArray(e){return null}static getRectangleCorners(e,t){let i=new g.POINT2,a=new g.POINT2;const n=[];let s=new L.ref,l=new L.ref,r=e.split(" "),o=r[0].split(",");i.x=parseFloat(o[0]),i.y=parseFloat(o[1]),o=r[1].split(","),a.x=parseFloat(o[0]),a.y=parseFloat(o[1]),u.mdlGeodesic.geodesic_distance(i,a,s,l),n.push(u.mdlGeodesic.geodesic_coordinate(i,t/2,s.value[0]-90)),n.push(u.mdlGeodesic.geodesic_coordinate(i,t/2,s.value[0]+90)),n.push(u.mdlGeodesic.geodesic_coordinate(a,t/2,s.value[0]+90)),n.push(u.mdlGeodesic.geodesic_coordinate(a,t/2,s.value[0]-90));let c="";for(let e of n)c+=`${e.getX()},${e.getY()} `;return c.trim()}}t.WebRenderer=d},1059:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RendererUtilities=void 0;const a=i(8113),n=i(7300),s=i(3254),l=i(6142),r=i(2421),o=i(2466),c=i(7028),T=i(3170),u=i(92);class g{static OUTLINE_SCALING_FACTOR=2.5;static async imgToBase64String(e){e.getContext("2d");let t=await e.convertToBlob();const i=(new FileReader).readAsDataURL(t);return new String(i).toString()}static pastIdealOutlineColors=new Map;static getIdealOutlineColor(e){let t=a.Color.white;if(null!=e&&g.pastIdealOutlineColors.has(e.toInt()))return g.pastIdealOutlineColors.get(e.toInt());if(null!=e){let i=s.RendererSettings.getInstance().getTextBackgroundAutoColorThreshold();t=255-(.299*e.getRed()+.587*e.getGreen()+.114*e.getBlue())<i?a.Color.black:a.Color.white}return null!=e&&g.pastIdealOutlineColors.set(e.toInt(),t),t}static setColorAlpha(e,t){return null!=e?t>=0&&t<=1?new a.Color(e.getRed(),e.getGreen(),e.getBlue(),Math.trunc(255*t)):e:null}static ColorToHex(e){return e.getAlpha().toString(16).padStart(2,"0")+e.getRed().toString(16).padStart(2,"0")+e.getGreen().toString(16).padStart(2,"0")+e.getBlue().toString(16).padStart(2,"0")}static colorToHexString(e,t){return null!=e?e.toHexString(t):""}static measureText(...e){let t;switch(e.length){case 2:{const[i,a]=e;if(4===arguments.length){let e=a.measureText(i),n=e.fontBoundingBoxAscent-1,s=-1,l=e.width+2;l=e.actualBoundingBoxRight+e.actualBoundingBoxLeft;let r=e.fontBoundingBoxDescent+e.fontBoundingBoxAscent+2;t=new T.Rectangle2D(n,s,l,r)}break}case 3:{const[i,a,n]=e;if(3===arguments.length){let e;null==n?(e=new OffscreenCanvas(10,10).getContext("2d"),e.font=i,t=this.measureText(a,e)):t=this.measureText(a,n)}break}case 5:{const[i,a,n,s,l]=e;if(5===arguments.length){let e,r=n+" "+a+"px "+i;null==l?(e=new OffscreenCanvas(10,10).getContext("2d"),e.font=r,t=this.measureText(s,e)):t=this.measureText(s,l)}break}}return t}static getColorFromHexString(e){try{if(null==e||0===e.length)return null;let t=e,i="0123456789ABCDEF";"#"===e.charAt(0)&&(e=e.substring(1)),"0x"!==e.substring(0,2)&&"0X"!==e.substring(0,2)||(e=e.substring(2));let s,l=(e=e.toUpperCase()).length,r=0,o=0,T=0;if(8===l||6===l){s=new Array(l/2);for(let a=0;a<l;a+=2){if(o=i.indexOf(e.charAt(a)),T=i.indexOf(e.charAt(a+1)),-1===o||-1===T)return n.ErrorLogger.LogMessage("SymbolUtilities","getColorFromHexString","Bad hex value: "+t,c.LogLevel.WARNING),null;s[r]=16*o+T,r++}return 8===l?new a.Color(s[1],s[2],s[3],s[0]):new a.Color(s[0],s[1],s[2])}return n.ErrorLogger.LogMessage("RendererUtilities","getColorFromHexString","Bad hex value: "+t,c.LogLevel.WARNING),null}catch(e){if(e instanceof Error)return n.ErrorLogger.LogException("RendererUtilities","getColorFromHexString",e),null;throw e}}static setSVGFrameColors(e,t,i,a){let n,s,o,c,T=1,u=1,L="",d="",_=r.SymbolID.getSymbolSet(e),h=r.SymbolID.getAffiliation(e);if(null!=i&&(255!==i.getAlpha()&&(T=i.getAlpha()/255,L=' stroke-opacity="'+T.toString()+'"',d=' fill-opacity="'+T.toString()+'"'),s=g.colorToHexString(i,!1),n=t.replaceAll('stroke="#000000"','stroke="'+s+'"'+L),n=n.replaceAll('fill="#000000"','fill="'+s+'"'+d),_===r.SymbolID.SymbolSet_LandInstallation||_===r.SymbolID.SymbolSet_Space||_===r.SymbolID.SymbolSet_CyberSpace||_===r.SymbolID.SymbolSet_Activities)){let t='<g id="'+l.SVGLookup.getFrameID(e)+'">',i=t.substring(0,t.length-1)+' fill="'+s+'"'+d+">";n=n.replace(t,i)}if(null!=a){switch(255!==a.getAlpha()&&(u=a.getAlpha()/255,d=' fill-opacity="'+u.toString()+'"'),o=g.colorToHexString(a,!1),h){case r.SymbolID.StandardIdentity_Affiliation_Friend:case r.SymbolID.StandardIdentity_Affiliation_AssumedFriend:c='fill="#80E0FF"';break;case r.SymbolID.StandardIdentity_Affiliation_Hostile_Faker:c='fill="#FF8080"';break;case r.SymbolID.StandardIdentity_Affiliation_Suspect_Joker:c=r.SymbolID.getVersion(e)>=r.SymbolID.Version_2525E?'fill="#FFE599"':'fill="#FF8080"';break;case r.SymbolID.StandardIdentity_Affiliation_Unknown:case r.SymbolID.StandardIdentity_Affiliation_Pending:c='fill="#FFFF80"';break;case r.SymbolID.StandardIdentity_Affiliation_Neutral:c='fill="#AAFFAA"';break;default:c='fill="#80E0FF"'}n=null==n?t.replace(c,'fill="'+o+'"'+d):n.replace(c,'fill="'+o+'"'+d)}return null!=n?n:t}static setSVGSPCMColors(...e){switch(e.length){case 4:{const[t,i,a,n]=e;return g.setSVGSPCMColors(t,i,a,n,!1)}case 5:{let t,i,n,[s,l,c,T,u]=e,L=l,d=1,_=1,h="",E="",A=' stroke-linecap="square"';if(r.SymbolID.getAffiliation(s),null!=c){255!==c.getAlpha()&&(d=c.getAlpha()/255,h=' stroke-opacity="'+d+'"',E=' fill-opacity="'+d+'"'),t=g.colorToHexString(c,!1);let e="#000000";5===s.length&&parseInt(s.substring(2,4))>=13&&(e="#00A651"),s.length>=20&&"25132100"===o.SymbolUtilities.getBasicSymbolID(s)&&r.SymbolID.getVersion(s)>=r.SymbolID.Version_2525E&&(e="#800080"),L=L.replaceAll('stroke="'+e+'"','stroke="'+t+'"'+h),L=L.replaceAll('fill="'+e+'"','fill="'+t+'"'+E)}else c=a.Color.BLACK;if(u){let e=RegExp('(stroke-width=")(\\d+\\.?\\d*)"',"g"),t=[...L.matchAll(e)],i=new Set;for(let e of t)i.add(parseFloat(e[2]));for(let e of Array.from(i).sort(((e,t)=>t-e))){let t='stroke-width="'+e*g.OUTLINE_SCALING_FACTOR+'"';L=L.replaceAll('stroke-width="'+e+'"',t)}let a="<g"+A+' stroke-width="'+2.5*g.OUTLINE_SCALING_FACTOR+'" stroke="#'+g.ColorToHex(c).substring(2)+'" ';L=L.replaceAll("<g",a)}else{let e=' fill="#'+g.ColorToHex(c).substring(2)+'" ';L=L.replace('fill="#000000"',e);let i='<g id="'+o.SymbolUtilities.getBasicSymbolID(s)+'">',a='<g id="'+o.SymbolUtilities.getBasicSymbolID(s)+'" stroke="'+t+'"'+h+" "+e+">";L=L.replace(i,a)}return null!=T&&(255!==T.getAlpha()&&(_=T.getAlpha()/255,E=' fill-opacity="'+_+'"'),i=g.colorToHexString(T,!1),n='fill="#000000"',L=L.replaceAll(n,'fill="'+i+'"'+E)),L}default:throw Error("Invalid number of arguments")}}static findWidestStrokeWidth(e){let t=RegExp('(stroke-width=")(\\d+\\.?\\d*)"',"g"),i=4,a=[...e.matchAll(t)];for(let e of a){const t=parseFloat(e[2]);t>i&&(i=t)}return i*g.OUTLINE_SCALING_FACTOR}static getDistanceBetweenPoints(e,t){return Math.sqrt(Math.pow(t.getX()-e.getX(),2)+Math.pow(t.getY()-e.getY(),2))}static scaleIcon(e,t){let i=t,a=null;null!==t&&(a=t.getBbox());let n=0;if(null!=a&&(n=Math.max(a.getWidth(),a.getHeight())),n<100&&n>0&&0==r.SymbolID.getCommonModifier1(e)&&0==r.SymbolID.getCommonModifier2(e)&&0==r.SymbolID.getModifier1(e)&&0==r.SymbolID.getModifier2(e)){let e=170/n,s=(a.getX()+a.getWidth()/2)*e-(a.getX()+a.getWidth()/2),l=(a.getY()+a.getHeight()/2)*e-(a.getY()+a.getHeight()/2),r=' transform="translate(-'+s+",-"+l+") scale("+e+" "+e+')">',o=t.getSVG();o=o.replace(">",r);let c=new T.Rectangle2D(a.getX()-s,a.getY()-l,a.getWidth()*e,a.getHeight()*e);i=new u.SVGInfo(t.getID(),c,o)}return i}static async getData(e){const t=e;try{const e=await fetch(t);if(!e.ok)throw new Error(`Response status: ${e.status}`);return await e.json()}catch(e){if(!console)throw e;console.error(e.message)}}}t.RendererUtilities=g},1207:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.lineutility=void 0;const a=i(1358),n=i(9441),s=i(4305),l=i(7389),r=i(8712),o=i(5772),c=i(8101),T=i(960),u=i(7300),g=i(106),L=i(5467);class d{static _className="lineutility";static extend_left=0;static extend_right=1;static extend_above=2;static extend_below=3;static ResizeArray(e,t){let i=new Array(t);try{if(e.length<=t)return e;let a=0;for(a=0;a<t;a++)i[a]=new l.POINT2(e[a])}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ResizeArray",new g.RendererException("Failed inside ResizeArray",e))}return i}static SegmentLineShape(e,t,i){try{if(null==e||null==t)return;let a,n=0,s=0,l=d.CalcDistanceDouble(e,t);for(s=Math.trunc(l/25),i.lineTo(e),n=1;n<=s;n++)a=d.ExtendAlongLineDouble(e,t,25),i.lineTo(a);i.lineTo(t)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"SegmentLineShape",new g.RendererException("Failed inside SegmentLineShape",e))}}static GetDirAtkAirMiddleSegment(e,t){let i=-1;try{let a=0,n=0;for(n=t-1;n>0&&(a+=d.CalcDistanceDouble(e[n],e[n-1]),!(a>60));n--);i=a>60?n:t<=3?1:2}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"GetDirAtkAirMiddleSegment",new g.RendererException("Failed inside GetDirAtkAirMiddleSegment",e))}return i}static CalcSegmentAngleDouble(e,t){let i=0;try{let a=0,n=new r.ref;a=d.CalcTrueSlopeDouble(e,t,n),i=0===a?Math.PI/2:Math.atan(n.value[0])}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcSegmentAngleDouble",new g.RendererException("Failed inside CalcSegmentAngleDouble",e))}return i}static InitializePOINT2Array(e){if(null==e||0===e.length)return;let t=e.length;for(let i=0;i<t;i++)e[i]=new l.POINT2}static CalcCenterPointDouble(e,t){let i=new l.POINT2(e[0]);try{let a=0,n=e[0].x,s=e[0].y,l=e[0].x,r=e[0].y;for(n=e[0].x,s=e[0].y,l=e[0].x,r=e[0].y,a=0;a<t;a++)e[a].x<n&&(n=e[a].x),e[a].y<s&&(s=e[a].y),e[a].x>l&&(l=e[a].x),e[a].y>r&&(r=e[a].y);i.x=(n+l)/2,i.y=(s+r)/2}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcCenterPointDouble",new g.RendererException("Failed inside CalcCenterPointDouble",e))}return i}static CalcCenterPointDouble2(e,t){let i=e[0],a=new l.POINT2;try{let n,s=0,l=i.x,r=i.y,o=i.x,c=i.y;for(l=i.x,r=i.y,o=i.x,c=i.y,s=0;s<t;s++)n=e[s],n.x<l&&(l=n.x),n.y<r&&(r=n.y),n.x>o&&(o=n.x),n.y>c&&(c=n.y);a.x=(l+o)/2,a.y=(r+c)/2}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcCenterPointDouble2",new g.RendererException("Failed inside CalcCenterPointDouble2",e))}return a}static CalcDistanceDouble(e,t){let i=0;try{i=Math.sqrt((e.getX()-t.getX())*(e.getX()-t.getX())+(e.getY()-t.getY())*(e.getY()-t.getY()));let a=Math.abs(e.getX()-t.getX()),n=Math.abs(e.getY()-t.getY()),s=a;n>a&&(s=n),0!==i&&Number.isFinite(i)||s>0&&(i=s)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcDistanceDouble",new g.RendererException("Failed inside CalcDistanceDouble",e))}return i}static CalcTrueSlopeDouble(e,t,i){let a=1;try{null==i.value&&(i.value=new Array(1));let n=0,s=0;n=e.x-t.x,Math.abs(n)<1&&(n=n>=0?1:-1,a=1),s=e.y-t.y,i.value[0]=s/n}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcTrueSlopeDouble",new g.RendererException("Failed inside CalcTrueSlopeDouble",e))}return a}static ReversePointsDouble2(e,t){try{let i=new Array(t),a=0;for(a=0;a<t;a++)i[a]=new l.POINT2(e[t-a-1]);for(a=0;a<t;a++)e[a]=new l.POINT2(i[a])}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ReversePointsDouble2",new g.RendererException("Failed inside ReversePointsDouble2",e))}}static CalcTrueSlopeDoubleForRoutes(e,t,i){try{let a=0,n=0;if(a=e.x-t.x,Math.abs(a)<2)return!1;n=e.y-t.y,null==i.value&&(i.value=new Array(1)),i.value[0]=n/a}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcTrueSlopeDoubleForRoutes",new g.RendererException("Failed inside CalcTrueSlopeDoubleForRoutes",e))}return!0}static CalcTrueSlopeDouble2(e,t,i){let a=!0;try{let n=0,s=0;n=e.x-t.x,Math.abs(n)<1&&(n=n>=0?1:-1,a=!1),s=e.y-t.y,null==i.value&&(i.value=new Array(1)),i.value[0]=s/n}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcTrueSlopeDouble2",new g.RendererException("Failed inside CalcTrueSlopeDouble2",e))}return a}static CalcTrueLinesDouble(e,t,i,a){try{let n=0,s=0,l=0,o=new r.ref;if(n=d.CalcTrueSlopeDouble(t,i,o),a.value=new Array(6),0===n)return a.value[3]=t.x+e,a.value[5]=t.x-e,0;s=i.y-o.value[0]*i.x,l=Math.sqrt(o.value[0]*o.value[0]*e*e+e*e),a.value[0]=o.value[0],a.value[1]=s,a.value[2]=o.value[0],a.value[3]=s+l,a.value[4]=o.value[0],a.value[5]=s-l}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcTrueLinesDouble",new g.RendererException("Failed inside CalcTrueLinesDouble",e))}return 1}static CalcTrueIntersectDouble2(e,t,i,a,n,s,r,o){let c=new l.POINT2;try{let l=0,T=0;if(c.x=r,c.y=o,0===n&&0===s)return c;if(0===n&&1===s)return c.x=r,c.y=i*r+a,c;if(1===n&&0===s)return c.x=o,c.y=e*o+t,c;if(e!==i)return l=(a-t)/(e-i),T=e*l+t,c.x=l,c.y=T,c}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcTrueIntersectDouble2",new g.RendererException("Failed inside CalcTrueIntersectDouble2",e))}return c}static GetOffsetPointDouble(e,t,i){let a=new l.POINT2(e);try{let n=t.x-e.x,s=t.y-e.y,l=i,r=0,o=0;if(0===n)return s>0?(a.x=t.x,a.y=t.y+l):(a.x=t.x,a.y=t.y-l),a;if(0===s)return n>0?(a.x=t.x+l,a.y=t.y):(a.x=t.x-l,a.y=t.y),a;o=0===s?0:Math.atan(n/s)+Math.PI/2,r=i,t.x>e.x?a.x=t.x+r*Math.abs(Math.cos(o)):a.x=t.x-r*Math.abs(Math.cos(o)),t.y>e.y?a.y=t.y+r*Math.abs(Math.sin(o)):a.y=t.y-r*Math.abs(Math.sin(o))}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"GetOffsetPointDouble",new g.RendererException("Failed inside GetOffsetPointDouble",e))}return a}static LineOfXPoints(e,t){let i=new Array;try{let a,n,l,r,o,c,T=0,u=0,g=0,L=0,_=t.length,h=s.arraysupport.getScaledSize(5,e.get_LineThickness()),E=4*h;for(T=0;T<_-1;T++)for(g=d.CalcDistanceDouble(t[T],t[T+1]),L=Math.trunc((g-h)/E),g-L*E>E/2&&(L+=1),u=0;u<L;u++)a=d.ExtendAlongLineDouble(t[T],t[T+1],u*E-h),n=d.ExtendAlongLineDouble(t[T],t[T+1],u*E+h),l=d.ExtendDirectedLine(t[T],t[T+1],a,2,h),r=d.ExtendDirectedLine(t[T],t[T+1],a,3,h),o=d.ExtendDirectedLine(t[T],t[T+1],n,2,h),c=d.ExtendDirectedLine(t[T],t[T+1],n,3,h),i.push(l),c.style=5,i.push(c),i.push(o),r.style=5,i.push(r)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"LineOfXPoints",new g.RendererException("Failed inside LineOfXPoints",e))}return i}static CalcDistanceToLineDouble(e,t,i){let a=0;try{let n=1,s=0,o=0,c=new l.POINT2(e),T=0,u=new r.ref;T=d.CalcTrueSlopeDouble(e,t,u),0!==T&&0!==u.value[0]&&(n=-1/u.value[0],s=e.y-u.value[0]*e.x,o=i.y-n*i.x,c=d.CalcTrueIntersectDouble2(u.value[0],s,n,o,1,1,c.x,c.y)),0!==T&&0===u.value[0]&&(c.y=e.y,c.x=i.x),0===T&&(c.y=i.y,c.x=e.x),a=d.CalcDistanceDouble(i,c)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CaclDistanceToLineDouble",new g.RendererException("Failed inside CalcDistanceToLineDouble",e))}return a}static ExtendLineDouble(e,t,i){let a=new l.POINT2;try{let n=d.CalcDistanceDouble(e,t);if(0===n||0===i)return t;a.x=(n+i)/n*(t.x-e.x)+e.x,a.y=(n+i)/n*(t.y-e.y)+e.y}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ExtendLineDouble",new g.RendererException("Failed inside ExtendLineDouble",e))}return a}static ExtendAlongLineDouble(...e){switch(e.length){case 3:{const[t,i,a]=e;let n=new l.POINT2;try{let e=d.CalcDistanceDouble(t,i);if(0===e||0===a)return i;n.x=a/e*(i.x-t.x)+t.x,n.y=a/e*(i.y-t.y)+t.y}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ExtendAlongLineDouble",new g.RendererException("Failed inside ExtendAlongLineDouble",e))}return n}case 4:{const[t,i,a,n]=e;let s=new l.POINT2;try{let e=d.CalcDistanceDouble(t,i);if(0===e||0===a)return i;s.x=a/e*(i.x-t.x)+t.x,s.y=a/e*(i.y-t.y)+t.y,s.style=n}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ExtendAlongLineDouble",new g.RendererException("Failed inside ExtendAlongLineDouble",e))}return s}default:throw Error("Invalid number of arguments")}}static ExtendAlongLineDouble2(...e){if(e[0]instanceof l.POINT2){const[t,i,a]=e;let n=new l.POINT2;try{let e=d.CalcDistanceDouble(t,i);if(0===e||0===a)return t;n.x=a/e*(i.x-t.x)+t.x,n.y=a/e*(i.y-t.y)+t.y}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ExtendAlongLineDouble2",new g.RendererException("Failed inside ExtendAlongLineDouble2",e))}return n}{const[t,i,a]=e;try{let e=d.CalcDistanceDouble(t,i);if(0===e||0===a)return new n.Point2D(t.getX(),t.getY());let s=a/e*(i.getX()-t.getX())+t.getX(),l=a/e*(i.getY()-t.getY())+t.getY();return new n.Point2D(s,l)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ExtendAlongLineDouble2",new g.RendererException("Failed inside ExtendAlongLineDouble2",e))}return new n.Point2D(0,0)}}static ExtendLineAbove(e,t,i,a,n,s,l){try{let o=new r.ref,c=0,T=0,u=0;if(n.value=new Array(1),s.value=new Array(1),u=d.CalcTrueSlopeDouble(e,t,o),0===u)return 0;if(0===o.value[0])return n.value[0]=i.x,s.value[0]=0===l?i.y-Math.abs(a):i.y+Math.abs(a),1;T=0===l?-Math.abs(a/(o.value[0]*Math.sqrt(1+1/(o.value[0]*o.value[0])))):Math.abs(a/(o.value[0]*Math.sqrt(1+1/(o.value[0]*o.value[0])))),c=-o.value[0]*T,n.value[0]=i.x+c,s.value[0]=i.y+T}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ExtendLineAbove",new g.RendererException("Failed inside ExtendLineAbove",e))}return 1}static ExtendLineLeft(e,t,i,a,n,s,l){try{let o=new r.ref,c=0,T=0,u=0;if(n.value=new Array(1),s.value=new Array(1),u=d.CalcTrueSlopeDouble(e,t,o),0!==u&&0===o.value[0])return 0;if(0===u)return s.value[0]=i.y,n.value[0]=0===l?i.x-Math.abs(a):i.x+Math.abs(a),1;c=0===l?-Math.abs(a/Math.sqrt(1+1/(o.value[0]*o.value[0]))):Math.abs(a/Math.sqrt(1+1/(o.value[0]*o.value[0]))),T=-1/o.value[0]*c,n.value[0]=i.x+c,s.value[0]=i.y+T}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ExtendLineLeft",new g.RendererException("Failed inside ExtendLineLeft",e))}return 1}static CalcDirectionFromLine(e,t,i){try{let a=0,n=0,s=0,o=new r.ref,c=new l.POINT2;return e.x===t.x?i.x<e.x?0:1:e.y===t.y?i.y<e.y?2:3:(d.CalcTrueSlopeDouble(e,t,o),a=-1/o.value[0],n=e.y-o.value[0]*e.x,s=i.y-a*i.x,c=d.CalcTrueIntersectDouble2(o.value[0],n,a,s,1,1,0,0),o.value[0]>1?i.x<c.x?0:1:i.y<c.y?2:3)}catch(e){if(!(e instanceof Error))throw e;console.log(e.message)}return-1}static ExtendDirectedLine(...e){switch(e.length){case 5:{const[t,i,a,n,s]=e;let o=new l.POINT2;try{let e=new r.ref,c=new r.ref;switch(o=new l.POINT2(a),n){case 0:d.ExtendLineLeft(t,i,a,s,e,c,0);break;case 1:d.ExtendLineLeft(t,i,a,s,e,c,1);break;case 2:d.ExtendLineAbove(t,i,a,s,e,c,0);break;case 3:d.ExtendLineAbove(t,i,a,s,e,c,1)}o.x=e.value[0],o.y=c.value[0]}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ExtendDirectedLine",new g.RendererException("Failed inside ExtendDirectedLine",e))}return o}case 6:{let[t,i,a,n,s,o]=e,c=new l.POINT2(a);try{let e=new r.ref,l=new r.ref;switch(t.x===i.x&&(2===n&&(n=0),3===n&&(n=1)),t.y===i.y&&(0===n&&(n=2),1===n&&(n=3)),n){case 0:d.ExtendLineLeft(t,i,a,s,e,l,0);break;case 1:d.ExtendLineLeft(t,i,a,s,e,l,1);break;case 2:d.ExtendLineAbove(t,i,a,s,e,l,0);break;case 3:d.ExtendLineAbove(t,i,a,s,e,l,1)}c.x=e.value[0],c.y=l.value[0],c.style=o}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ExtendDirectedLine",new g.RendererException("Failed inside ExtendDirectedLine",e))}return c}default:throw Error("Invalid number of arguments")}}static ExtendDirectedLineText(e,t,i,a,n){let s=new l.POINT2;try{let o=new r.ref,c=new r.ref;if(s=new l.POINT2(i),n<0){switch(a){case 0:a=d.extend_right;break;case 1:a=d.extend_left;break;case 2:a=d.extend_below;break;case 3:a=d.extend_above}n=Math.abs(n)}if(e.y===t.y)switch(a){case 0:a=d.extend_above;break;case 1:a=d.extend_below}if(e.x===t.x)switch(a){case 2:a=d.extend_left;break;case 3:a=d.extend_right}switch(a){case 0:d.ExtendLineLeft(e,t,i,n,o,c,0);break;case 1:d.ExtendLineLeft(e,t,i,n,o,c,1);break;case 2:d.ExtendLineAbove(e,t,i,n,o,c,0);break;case 3:d.ExtendLineAbove(e,t,i,n,o,c,1)}s.x=o.value[0],s.y=c.value[0]}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ExtendDirectedLine",new g.RendererException("Failed inside ExtendDirectedLine",e))}return s}static ExtendLine2Double(e,t,i,a){let n=new l.POINT2;try{let s=d.CalcDistanceDouble(e,t);n.x=t.x,n.y=t.y,s>0&&(n.x=(s+i)/s*(t.x-e.x)+e.x,n.y=(s+i)/s*(t.y-e.y)+e.y,n.style=a)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ExtendLine2Double",new g.RendererException("Failed inside ExtendLine2Double",e))}return n}static ExtendAngledLine(e,t,i,a,n){let s=new l.POINT2;try{let l=Math.atan((t.y-e.y)/(t.x-e.x))+Math.PI*a/180,r=n*Math.cos(l),o=n*Math.sin(l);s.x=i.x+r,s.y=i.y+o}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ExtendAngledLine",new g.RendererException("Failed inside ExtendAngledLine",e))}return s}static GetQuadrantDouble(...e){switch(e.length){case 2:{const[t,i]=e;let a=1;try{i.x>=t.x&&i.y<=t.y&&(a=1),i.x>=t.x&&i.y>=t.y&&(a=2),i.x<=t.x&&i.y>=t.y&&(a=3),i.x<=t.x&&i.y<=t.y&&(a=4)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"GetQuadrantDouble",new g.RendererException("Failed inside GetQuadrantDouble",e))}return a}case 4:{const[t,i,a,n]=e;let s=1;try{a>=t&&n<=i&&(s=1),a>=t&&n>=i&&(s=2),a<=t&&n>=i&&(s=3),a<=t&&n<=i&&(s=4)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"GetQuadrantDouble",new g.RendererException("Failed inside GetQuadrantDouble",e))}return s}default:throw Error("Invalid number of arguments")}}static GetPixelsMin(e,t,i,a){try{let n=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,l=0;for(l=0;l<t;l++)e[l].x<n&&(n=e[l].x),e[l].y<s&&(s=e[l].y);i.value=new Array(1),a.value=new Array(1),i.value[0]=n,a.value[0]=s}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"GetPixelsMin",new g.RendererException("Failed inside GetPixelsMin",e))}}static GetPixelsMax(e,t,i,a){try{let n=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,l=0;for(l=0;l<t;l++)e[l].x>n&&(n=e[l].x),e[l].y>s&&(s=e[l].y);i.value=new Array(1),a.value=new Array(1),i.value[0]=n,a.value[0]=s}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"GetPixelsMax",new g.RendererException("Failed inside GetPixelsMax",e))}}static CalcClockwiseCenterDouble(e){let t=0;try{let i=new l.POINT2(e[0]),a=new l.POINT2(e[1]),n=new l.POINT2(i),s=new l.POINT2(i),o=new l.POINT2(i),c=new l.POINT2(i),T=1,u=0,g=0,L=0,_=0,h=new r.ref,E=0,A=new r.ref,I=new r.ref,S=new Array(2);if(S[0]=new l.POINT2(i),S[1]=new l.POINT2(a),d.GetPixelsMin(S,2,A,I),A.value[0]<0?A.value[0]=A.value[0]-100:A.value[0]=0,s.x=(i.x+a.x)/2,s.y=(i.y+a.y)/2,_=d.CalcDistanceDouble(i,a),t=_/Math.sqrt(2),T=d.GetQuadrantDouble(i,a),E=d.CalcTrueSlopeDouble(i,a,h),0!==E&&0!==h.value[0])switch(u=i.y-h.value[0]*i.x,g=s.y+1/h.value[0]*s.x,L=-1/h.value[0]*A.value[0]+g,c.x=A.value[0],c.y=L,T){case 1:case 4:n=d.ExtendLineDouble(c,s,_/2);break;case 2:case 3:n=d.ExtendLineDouble(c,s,-_/2)}if(0!==E&&0===h.value[0]&&(n.x=s.x,i.x<a.x?n.y=s.y+_/2:n.y=s.y-_/2),0===E)switch(c.x=A.value[0],c.y=s.y,T){case 1:case 4:n=d.ExtendLineDouble(c,s,_/2);break;case 2:case 3:n=d.ExtendLineDouble(c,s,-_/2)}o=d.ExtendLineDouble(n,i,50),e[0]=new l.POINT2(n),e[1]=new l.POINT2(o)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcClockwiseCenterDouble",new g.RendererException("Failed inside CalcClockwiseCenterDouble",e))}return t}static GetArrowHead4Double(e,t,i,a,n,s){try{let r=0,o=t.y-e.y,c=t.x-e.x,T=1,u=0,g=0,L=0,d=0,_=0,h=0,E=0,A=0,I=new l.POINT2(e);switch(E=0===o?c>0?Math.PI:0:Math.atan(c/o)+Math.PI/2,I.style=0,c<=0&&o<=0&&(T=-1),c>=0&&o<=0&&(T=-1),c<=0&&o>=0&&(T=1),c>=0&&o>=0&&(T=1),A=T*i,g=t.x+A*Math.cos(E),u=t.y-A*Math.sin(E),A=T*(a/2),d=g-A*Math.sin(E),L=u-A*Math.cos(E),h=g+A*Math.sin(E),_=u+A*Math.cos(E),I.x=d,I.y=L,n[0]=new l.POINT2(I),n[1]=new l.POINT2(t),I.x=h,I.y=_,n[2]=new l.POINT2(I),s){case 0:for(r=0;r<2;r++)n[r].style=0;n[2].style=5;break;case 9:for(r=0;r<2;r++)n[r].style=9;n[2].style=10;break;case 18:for(r=0;r<2;r++)n[r].style=18;n[2].style=5;break;default:for(r=0;r<2;r++)n[r].style=s;n[2].style=5}}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"GetArrowhead4Double",new g.RendererException("Failed inside GetArrowhead4Double",e))}}static MidPointDouble(e,t,i){let a=new l.POINT2(e);try{a.x=(e.x+t.x)/2,a.y=(e.y+t.y)/2,a.style=i}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"MidPointDouble",new g.RendererException("Failed inside MidPointDouble",e))}return a}static RotateGeometryDoubleOrigin(e,t,i){try{let a=0,n=0,s=0,r=0,o=0,c=0;if(0!==i){let T=new l.POINT2;for(n=i*Math.PI/180,T=new l.POINT2(e[0]),a=0;a<t;a++)r=Math.PI+Math.atan((e[a].y-T.y)/(e[a].x-T.x)),e[a].x>=T.x&&(r+=Math.PI),s=n+r,c=d.CalcDistanceDouble(e[a],T)*Math.sin(s),o=d.CalcDistanceDouble(e[a],T)*Math.cos(s),e[a].y=T.y+c,e[a].x=T.x+o;return e}}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"RotateGeometryDoubleOrigin",new g.RendererException("Failed inside RotateGeometryDoubleOrigin",e))}return e}static ExtendTrueLinePerpDouble(e,t,i,a,n){let s=new l.POINT2(e);try{let o=new l.POINT2(e),c=new r.ref,T=0,u=0,g=0,L=new r.ref,_=new r.ref,h=new Array(3);h[0]=new l.POINT2(e),h[1]=new l.POINT2(t),h[2]=new l.POINT2(i),d.GetPixelsMin(h,3,L,_),L.value[0]<=0?L.value[0]=L.value[0]-100:L.value[0]=0,g=d.CalcTrueSlopeDouble(e,t,c),0===g?e.y<t.y?(s.x=i.x-a,s.y=i.y):(s.x=i.x+a,s.y=i.y):0===c.value[0]?(s.x=i.x,s.y=i.y+a):(T=i.y+1/c.value[0]*i.x,u=-1/c.value[0]*L.value[0]+T,o.x=L.value[0],o.y=u,s=d.ExtendLineDouble(o,i,a)),s.style=n}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ExtendTrueLinePerpDouble",new g.RendererException("Failed inside ExtendTrueLinePerpDouble",e))}return s}static CalcTrueIntersectDouble(e,t,i,a,n,s,l,r,o,c,T){try{let u=Math.abs(r),g=0,L=0,d=0,_=0;if(c.value=new Array(1),T.value=new Array(1),e!==i&&Math.abs(e-i)<=Number.MIN_VALUE&&(e=i),t!==a&&Math.abs(t-a)<=Number.MIN_VALUE&&(t=a),t===a&&e+t===i+a&&(e=i),0===s&&0===l){switch(o){case 0:c.value[0]=n.x-u,T.value[0]=n.y;break;case 3:c.value[0]=n.x+u,T.value[0]=n.y;break;default:c.value[0]=n.x,T.value[0]=n.y}return 1}if(0===s&&0!==l){switch(o){case 0:case 1:c.value[0]=n.x-u,T.value[0]=i*c.value[0]+a;break;case 2:case 3:c.value[0]=n.x+u,T.value[0]=i*c.value[0]+a;break;default:c.value[0]=n.x,T.value[0]=n.y}return 1}if(0===l&&0!==s){switch(o){case 0:case 2:c.value[0]=n.x-u,T.value[0]=e*c.value[0]+t;break;case 1:case 3:c.value[0]=n.x+u,T.value[0]=e*c.value[0]+t;break;default:c.value[0]=n.x,T.value[0]=n.y}return 1}if(e===i&&0!==e)return t===a?(_=-1/e,g=n.y-_*n.x,c.value[0]=(a-g)/(_-i),T.value[0]=e*c.value[0]+t,1):(c.value[0]=n.x,T.value[0]=n.y,1);if(e===i&&0===e){switch(o){case 0:case 1:c.value[0]=n.x,T.value[0]=n.y-u;break;case 3:case 2:c.value[0]=n.x,T.value[0]=n.y+u;break;default:c.value[0]=n.x,T.value[0]=n.y}return 1}if(e===i&&t===a&&0!==s&&0!==l){switch(o){case 0:e<0&&(d=e*r/Math.sqrt(1+e*e),L=d/e,c.value[0]=n.x+L,T.value[0]=n.y+d),e>0&&(d=-e*r/Math.sqrt(1+e*e),L=-d/e,c.value[0]=n.x+L,T.value[0]=n.y+d);break;case 3:e<=0?(d=-e*r/Math.sqrt(1+e*e),L=d/e,c.value[0]=n.x+L,T.value[0]=n.y+d):(d=e*r/Math.sqrt(1+e*e),L=-d/e,c.value[0]=n.x+L,T.value[0]=n.y+d);break;default:c.value[0]=n.x,T.value[0]=n.y}return 1}return c.value[0]=(a-t)/(e-i),T.value[0]=e*c.value[0]+t,1}catch(e){if(!(e instanceof Error))throw e;c.value[0]=n.x,T.value[0]=n.y,u.ErrorLogger.LogException(d._className,"CalcTrueIntersectDouble",new g.RendererException("Failed inside ExtendTrueIntersectDouble",e))}return 1}static CalcDistance2(e,t,i,a){let n=0;try{n=Math.sqrt((e-i)*(e-i)+(t-a)*(t-a));let s=Math.abs(e-i),l=Math.abs(t-a),r=s;l>s&&(r=l),0!==n&&Number.isFinite(n)||r>0&&(n=r)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcDistance2",new g.RendererException("Failed inside CalcDistance2",e))}return n}static GetSAAFRMiddleLine(e){let t;try{let i=0,a=0;for(i=0;i<e.length-1;i++)e[i].style>0&&a++;t=new Array(2*a),a=0;let n,s,r,o=0,c=null;for(i=0;i<e.length;i++)(e[i].style>=0||i===e.length-1)&&(null!=c?(n=new l.POINT2(c),c=new l.POINT2(e[i]),o=n.style,s=d.ExtendLine2Double(c,n,-o,0),r=d.ExtendLine2Double(n,c,-o,5),t[a++]=s,t[a++]=r):c=new l.POINT2(e[i]))}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"GetSAAFRMiddleLine",new g.RendererException("Failed inside GetSAAFRMiddleLine",e))}return t}static GetSAAFRSegment(e,t,i){try{let t=new l.POINT2,a=new l.POINT2,n=new l.POINT2,s=new l.POINT2,o=new l.POINT2,c=new l.POINT2,T=new r.ref,u=d.CalcTrueSlopeDouble(e[0],e[1],T);a=d.ExtendLine2Double(e[0],e[1],-i,5),t=d.ExtendLine2Double(e[1],e[0],-i,0),0!==u&&T.value[0]<1?(n=d.ExtendDirectedLine(e[0],e[1],e[0],2,i),n.style=0,s=d.ExtendDirectedLine(e[0],e[1],e[1],2,i),s.style=5,o=d.ExtendDirectedLine(e[0],e[1],e[0],3,i),o.style=0,c=d.ExtendDirectedLine(e[0],e[1],e[1],3,i),c.style=5):(n=d.ExtendDirectedLine(e[0],e[1],e[0],0,i),n.style=0,s=d.ExtendDirectedLine(e[0],e[1],e[1],0,i),s.style=5,o=d.ExtendDirectedLine(e[0],e[1],e[0],1,i),o.style=0,c=d.ExtendDirectedLine(e[0],e[1],e[1],1,i),c.style=5),e[0]=new l.POINT2(t),e[1]=new l.POINT2(a),e[2]=new l.POINT2(n),e[3]=new l.POINT2(s),e[4]=new l.POINT2(o),e[5]=new l.POINT2(c),e[5].style=5,e[0].style=5}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"GetSAAFRSegment",new g.RendererException("Failed inside GetSAAFRSegment",e))}}static GetSAAFRFillSegment(e,t){try{let i=new l.POINT2,a=new l.POINT2,n=new l.POINT2,s=new l.POINT2,o=new r.ref;0!==d.CalcTrueSlopeDouble(e[0],e[1],o)&&o.value[0]<1?(i=d.ExtendDirectedLine(e[0],e[1],e[0],2,t),a=d.ExtendDirectedLine(e[0],e[1],e[1],2,t),n=d.ExtendDirectedLine(e[0],e[1],e[0],3,t),s=d.ExtendDirectedLine(e[0],e[1],e[1],3,t)):(i=d.ExtendDirectedLine(e[0],e[1],e[0],0,t),a=d.ExtendDirectedLine(e[0],e[1],e[1],0,t),n=d.ExtendDirectedLine(e[0],e[1],e[0],1,t),s=d.ExtendDirectedLine(e[0],e[1],e[1],1,t)),e[0]=new l.POINT2(i),e[1]=new l.POINT2(a),e[2]=new l.POINT2(s),e[3]=new l.POINT2(n)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"GetSAAFRFillSegment",new g.RendererException("Failed inside GetSAAFRFillSegment",e))}}static ArcArrayDouble(e,t,i,a,s){try{let t,o=0,u=0,g=0,L=0,_=0,h=0,E=0,A=0,I=new r.ref,S=new l.POINT2(e[0]),y=new l.POINT2(e[1]),f=new l.POINT2(e[0]);if(A=d.CalcTrueSlopeDouble(y,f,I),_=0!==A?Math.atan(I.value[0]):y.y<f.y?-Math.PI/2:Math.PI/2,null!=s){let t=new n.Point2D(e[0].x,e[0].y),i=new n.Point2D(e[1].x,e[1].y);t=s.PixelsToGeo(t),i=s.PixelsToGeo(i),_=T.mdlGeodesic.GetAzimuth(new l.POINT2(t.getX(),t.getY()),new l.POINT2(i.getX(),i.getY())),_*=Math.PI/180,_<0&&(_+=Math.PI)}if(L=d.CalcDistanceDouble(y,f),null!=s){let t=new n.Point2D(e[0].x,e[0].y),i=new n.Point2D(e[1].x,e[1].y);t=s.PixelsToGeo(t),i=s.PixelsToGeo(i),L=T.mdlGeodesic.geodesic_distance(new l.POINT2(t.getX(),t.getY()),new l.POINT2(i.getX(),i.getY()),null,null)}switch(a){case c.TacticalLines.CLUSTER:o=_-90*Math.PI/180,u=o+180*Math.PI/180;break;case c.TacticalLines.TRIP:o=_-45*Math.PI/180,u=o+90*Math.PI/180;break;case c.TacticalLines.ISOLATE:case c.TacticalLines.CORDONKNOCK:case c.TacticalLines.CORDONSEARCH:o=_,u=o+330*Math.PI/180;break;case c.TacticalLines.TURN:o=_,u=o+90*Math.PI/180;break;case c.TacticalLines.OCCUPY:case c.TacticalLines.RETAIN:case c.TacticalLines.SECURE:o=_,u=o+338*Math.PI/180;break;default:o=0,u=2*Math.PI}if(y.x<f.x)switch(a){case c.TacticalLines.ISOLATE:case c.TacticalLines.CORDONKNOCK:case c.TacticalLines.CORDONSEARCH:o=_-Math.PI,u=o+330*Math.PI/180;break;case c.TacticalLines.OCCUPY:case c.TacticalLines.RETAIN:case c.TacticalLines.SECURE:o=_-Math.PI,u=o+338*Math.PI/180;break;case c.TacticalLines.TURN:o=_-Math.PI,u=o+90*Math.PI/180;break;case c.TacticalLines.CLUSTER:o=_-Math.PI+90*Math.PI/180,u=o-180*Math.PI/180;break;case c.TacticalLines.TRIP:o=_-Math.PI+45*Math.PI/180,u=o-90*Math.PI/180}if(E=26,t=new Array(E),d.InitializePOINT2Array(t),g=(u-o)/(E-1),0!==i&&0!==L?(S.x=f.x-i/L*Math.trunc(y.x-f.x),S.y=f.y-i/L*Math.trunc(y.y-f.y)):(S.x=f.x,S.y=f.y),null!=s){let i=new n.Point2D(e[0].x,e[0].y);i=s.PixelsToGeo(i);let a,r,c,u=0;for(h=0;h<E;h++)u=180*o/Math.PI+h*g*180/Math.PI,r=T.mdlGeodesic.geodesic_coordinate(new l.POINT2(i.getX(),i.getY()),L,u),a=new n.Point2D(r.x,r.y),a=s.GeoToPixels(a),c=new l.POINT2(a.getX(),a.getY()),t[h].x=c.x,t[h].y=c.y}else{for(h=0;h<E;h++)t[h].x=Math.trunc(i*Math.cos(o+h*g)),t[h].y=Math.trunc(i*Math.sin(o+h*g));for(h=0;h<E;h++)t[h].x+=S.x,t[h].y+=S.y}for(h=0;h<E;h++)e[h]=new l.POINT2(t[h])}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"ArcArrayDouble",new g.RendererException("Failed inside ArcArrayDouble",e))}return e}static CalcCircleDouble2(e,t,i,a,s){try{let r=0,o=2*Math.PI/(i-1),c=new n.Point2D(e.x,e.y);c=s.PixelsToGeo(c);let u=new n.Point2D(t.x,t.y);u=s.PixelsToGeo(u),e=new l.POINT2(c.getX(),c.getY()),t=new l.POINT2(u.getX(),u.getY());let g,L,d,_=T.mdlGeodesic.geodesic_distance(e,t,null,null),h=0,E=0;for(Math.PI,r=0;r<i-1;r++)h=180*E/Math.PI+r*o*180/Math.PI,g=T.mdlGeodesic.geodesic_coordinate(e,_,h),d=new n.Point2D(g.x,g.y),d=s.GeoToPixels(d),L=new l.POINT2(d.getX(),d.getY()),a[r].x=L.x,a[r].y=L.y;a[i-1]=new l.POINT2(a[0])}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcCircleDouble2",new g.RendererException("Failed inside CalcCircleDouble2",e))}}static CalcCircleDouble(e,t,i,a,n){try{let s=0,r=2*Math.PI/(i-1),o=0,c=0;for(s=0;s<i-1;s++)o=e.x+t*Math.cos(s*r),c=e.y+t*Math.sin(s*r),a[s]=new l.POINT2(o,c),a[s].style=n;switch(a[i-1]=new l.POINT2(a[0]),n){case 0:a[i-1].style=0;break;case 9:a[i-1].style=10;break;case 11:a[i-1].style=12;break;default:a[i-1].style=5}}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcCircleDouble",new g.RendererException("Failed inside CalcCircleDouble",e))}}static CalcCircleShape(e,t,i,a,n){let s;s=9===n?new o.Shape2(o.Shape2.SHAPE_TYPE_FILL):new o.Shape2(o.Shape2.SHAPE_TYPE_POLYLINE),s.set_Style(n);try{let l=0;for(d.CalcCircleDouble(e,t,i,a,n),s.moveTo(a[0]),l=1;l<i;l++)s.lineTo(a[l])}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcCircleShape",new g.RendererException("Failed inside CalcCircleShape",e))}return s}static GetSquallCurve(e,t,i,a,n,s){try{let r=d.CalcDistanceDouble(e,t),o=new l.POINT2,c=0;for(c=0;c<s;c++)o=d.ExtendLineDouble(t,e,-r*c/s),i[c].x=o.x,i[c].y=o.y+n*a*Math.sin(180*c/s*Math.PI/180)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"GetSquallShape",new g.RendererException("Failed inside GeSquallShape",e))}}static GetSquallSegment(e,t,i,a,n,s,r){let o=0;try{let c,T,u=new Array(s),g=d.CalcDistanceDouble(e,t),L=Math.trunc(g/r),_=0,h=0,E=new l.POINT2,A=Math.atan((e.y-t.y)/(e.x-t.x)),I=Math.trunc(180/Math.PI*A);for(d.InitializePOINT2Array(u),e.x<t.x?E.x=e.x+g:E.x=e.x-g,E.y=e.y,T=e,_=0;_<L;_++){for(c=d.ExtendLineDouble(E,e,-_*r),T=d.ExtendLineDouble(E,e,-(_+1)*r),d.GetSquallCurve(c,T,u,a.value[0],n,s),h=0;h<s;h++)i[o]=new l.POINT2(u[h]),o++;a.value[0]=-a.value[0]}0===L&&(i[o]=new l.POINT2(e),o++,i[o]=new l.POINT2(t),o++),d.RotateGeometryDoubleOrigin(i,o,I)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"GetSquallSegment",new g.RendererException("Failed inside GetSquallSegment",e))}return o}static PointInBounds(e){try{let t=1e5;return Math.abs(e.x)<=t&&Math.abs(e.y)<=t?1:0}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"PointInBounds",new g.RendererException("Failed inside PointInBounds",e))}return 1}static PointInBounds2(e,t,i){try{let a=i.x,n=t.x,s=i.y,l=t.y;return e.x<=a&&e.x>=n&&e.y<=s&&e.y>=l?1:0}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"PointInBounds2",new g.RendererException("Failed inside PointInBounds2",e))}return 1}static intersectSegment(e,t,i,a){let n;try{if(e.x===t.x)return null;let s,r,o,c,T=(t.y-e.y)/(t.x-e.x),u=0,g=0,L=0,d=0,_=!1;if(i.x===a.x?(_=!0,i.y<a.y?(s=i,r=a):(s=a,r=i)):i.x<a.x?(o=i,c=a):(o=a,c=i),_){if(u=s.x-e.x,g=T*u,L=s.x,d=e.y+g,n=new l.POINT2(L,d),e.x<=n.x&&n.x<=t.x){if(s.y<=n.y&&n.y<=r.y)return n}else if(e.x>=n.x&&n.x>=t.x&&s.y<=n.y&&n.y<=r.y)return n}else if(g=o.y-e.y,u=g/T,L=e.x+u,d=o.y,n=new l.POINT2(L,d),e.y<=n.y&&n.y<=t.y){if(o.x<=n.x&&n.x<=c.x)return n}else if(e.y>=n.y&&n.y>=t.y&&o.x<=n.x&&n.x<=c.x)return n}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"intersectSegment",new g.RendererException("Failed inside intersectSegment",e))}return null}static BoundOneSegment(e,t,i,a){let n=new Array(2);try{if(e.y<i.y&&t.y<i.y)return null;if(e.y>a.y&&t.y>a.y)return null;if(e.x<i.x&&t.x<i.x)return null;if(e.x>a.x&&t.x>a.x)return null;let s=!1;if(d.InitializePOINT2Array(n),e.x===t.x&&(s=!0),s)return n[0]=new l.POINT2(e),n[0].y<i.y&&(n[0].y=i.y),n[0].y>a.y&&(n[0].y=a.y),n[1]=new l.POINT2(t),n[1].y<i.y&&(n[1].y=i.y),n[1].y>a.y&&(n[1].y=a.y),n;t.y,e.y,t.x,e.x;let r,o,c=!1,T=!1,u=!1,g=!1,L=new l.POINT2(a.x,i.y),_=new l.POINT2(i.x,a.y);1===d.PointInBounds2(e,i,a)&&(r=e),null==r&&(r=d.intersectSegment(e,t,_,i),c=!0),null==r&&(r=d.intersectSegment(e,t,i,L),T=!0),null==r&&(r=d.intersectSegment(e,t,L,a),u=!0),null==r&&(r=d.intersectSegment(e,t,_,a),g=!0),1===d.PointInBounds2(t,i,a)&&(o=t),null==o&&!1===c&&(o=d.intersectSegment(t,e,_,i)),null==o&&!1===T&&(o=d.intersectSegment(t,e,i,L)),null==o&&!1===u&&(o=d.intersectSegment(t,e,L,a)),null==o&&!1===g&&(o=d.intersectSegment(t,e,_,a)),null!=r&&null!=o?(n[0]=r,n[1]=o):n=null}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"BoundOneSegment",new g.RendererException("Failed inside BoundOneSegment",e))}return n}static DisplayIntersectPixels(e,t,i,a,n,s){let o=-1;try{let c,T,u=0,g=0,L=new r.ref,_=2e3,h=0,E=0,A=d.CalcTrueSlopeDouble(e,t,L),I=e.y-L.value[0]*e.x;if(i.value=new Array(1),a.value=new Array(1),n.value=new Array(1),s.value=new Array(1),c=new l.POINT2(e),T=new l.POINT2(t),e.x<=_&&e.x>=-_&&e.y<=_&&e.y>=-_&&(h=1),t.x<=_&&t.x>=-_&&t.y<=_&&t.y>=-_&&(E=1),1===h&&1===E)return 0;1!==h&&1!==E||(o=1),0!==A&&(u=-_,g=L.value[0]*u+I,e.x<-_&&-_<t.x&&-_<=g&&g<=_&&(c.x=u,c.y=g,o=1),t.x<-_&&-_<e.x&&-_<=g&&g<=_&&(T.x=u,T.y=g,o=1),g=-_,0!==L.value[0]&&(u=(g-I)/L.value[0],e.y<-_&&-_<t.y&&-_<=u&&u<=_&&(c.x=u,c.y=g,o=1),t.y<=-_&&-_<=e.y&&-_<u&&u<_&&(T.x=u,T.y=g,o=1)),u=_,g=L.value[0]*u+I,e.x<_&&_<t.x&&-_<=g&&g<=_&&(T.x=u,T.y=g,o=1),t.x<_&&_<e.x&&-_<=g&&g<=_&&(c.x=u,c.y=g,o=1),g=_,0!==L.value[0]&&(u=(g-I)/L.value[0],e.y<_&&_<t.y&&-_<=u&&u<=_&&(T.x=u,T.y=g,o=1),t.y<_&&_<e.y&&-_<=u&&u<=_&&(c.x=u,c.y=g,o=1))),0===A&&(u=e.x,g=-_,-_<e.x&&e.x<_&&(e.y<=-_&&-_<=t.y&&(c.x=u,c.y=g,o=1),t.y<=-_&&-_<=e.y&&(T.x=u,T.y=g,o=1)),u=e.x,g=_,-_<e.x&&e.x<_&&(e.y<=_&&_<=t.y&&(T.x=u,T.y=g,o=1),t.y<=_&&_<=e.y&&(c.x=u,c.y=g,o=1))),i.value[0]=c.x,a.value[0]=c.y,n.value[0]=T.x,s.value[0]=T.y}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"DisplayIntersectPixels",new g.RendererException("Failed inside DisplayIntersectPixels",e))}return o}static GetDitchSpikeDouble(e,t,i,a){let n=0;try{let o,T=e.get_LineType(),u=0,g=0,L=0,_=0,h=0,E=0,A=1,I=0,S=0,y=0,f=0,D=0,M=0,P=0,R=0,N=0,C=0,O=new r.ref,p=new r.ref,x=new l.POINT2(t[0]),b=new l.POINT2(t[0]),w=new l.POINT2(t[0]),m=new l.POINT2(t[0]),F=new l.POINT2(t[0]),G=new Array(t.length),U=new l.POINT2,v=new l.POINT2;for(o=new Array(i),E=0;E<i;E++)o[E]=new l.POINT2(t[E]);let H=new Array;d.InitializePOINT2Array(G),n=i;let B=s.arraysupport.getScaledSize(12,e.get_LineThickness()),k=1.25*B,Y=2*B;for(h=0;h<i-1;h++)if(T===c.TacticalLines.ATDITCHM&&0===h&&(Y=2.5*B+2*s.arraysupport.getScaledSize(4,e.get_LineThickness())),_=d.CalcTrueLinesDouble(k*A,t[h],t[h+1],O),D=O.value[3],M=O.value[5],R=d.CalcDistanceDouble(t[h],t[h+1]),L=d.CalcTrueSlopeDouble(t[h],t[h+1],p),u=Math.trunc((R-1)/(B*A)),R>Y*A)for(0!==a?(t[h].x<=t[h+1].x&&(P=D),t[h].x>=t[h+1].x&&(P=M)):(t[h].x<=t[h+1].x&&(P=M),t[h].x>=t[h+1].x&&(P=D)),E=1;E<=u;E++)N=E,m=new l.POINT2(t[h]),F=new l.POINT2(t[h+1]),I=E>1?S:t[h].x+(N*B-B)*A/R*(t[h+1].x-t[h].x),y=E>1?f:t[h].y+(N*B-B/2)*A/R*(t[h+1].y-t[h].y),S=t[h].x+(N*B+B/2)*A/R*(t[h+1].x-t[h].x),f=t[h].y+(N*B+B/2)*A/R*(t[h+1].y-t[h].y),0!==p.value[0]&&0!==L&&(C=(y+f)/2+1/p.value[0]*(I+S)/2,x=d.CalcTrueIntersectDouble2(p.value[0],P,-1/p.value[0],C,1,1,t[0].x,t[0].y)),0===L&&(x.y=y<f?y+Math.trunc(R/u/2):y-Math.trunc(R/u/2),t[h].y<t[h+1].y?x.x=I+Math.trunc(R/u):x.x=I-Math.trunc(R/u)),0===p.value[0]&&0!==L&&(x.x=I<S?I+Math.trunc(R/u/2):I-Math.trunc(R/u/2),t[h+1].x<t[h].x?x.y=y+Math.trunc(R/u):x.y=y-Math.trunc(R/u)),b.x=I,b.y=y,w.x=S,w.y=f,t[n]=new l.POINT2(b),T!==c.TacticalLines.ATDITCHC&&T!==c.TacticalLines.ATDITCHM||(t[n].style=9),E%2==1&&T===c.TacticalLines.ATDITCHM&&(t[n].style=5),n++,t[n]=new l.POINT2(x),T!==c.TacticalLines.ATDITCHC&&T!==c.TacticalLines.ATDITCHM||(t[n].style=9),E%2==1&&T===c.TacticalLines.ATDITCHM&&(t[n].style=5),n++,t[n]=new l.POINT2(w),T!==c.TacticalLines.ATDITCHC&&T!==c.TacticalLines.ATDITCHM||(t[n].style=10),E%2==1&&T===c.TacticalLines.ATDITCHM&&(t[n].style=5),n++,T===c.TacticalLines.ATDITCHM&&(E%2==0?(U=d.MidPointDouble(b,w,0),U=d.MidPointDouble(U,x,0)):1===E&&(U=d.ExtendLineDouble(w,b,5),U=d.MidPointDouble(U,x,0))),E>1&&E<u?H.push(new l.POINT2(b)):1===E?H.push(new l.POINT2(t[h])):E===u&&(H.push(new l.POINT2(t[h+1])),H[H.length-1].style=5),T===c.TacticalLines.ATDITCHM&&E>1&&E%2==0&&(G[g]=d.MidPointDouble(U,v,20),g++),E<u&&T===c.TacticalLines.ATDITCHM&&(1!==E&&E%2!=0||(v=new l.POINT2(U)));else t[n].x=t[h].x,t[n].y=t[h].y,t[n].style=0,n++,t[n].x=t[h+1].x,t[n].y=t[h+1].y,t[n].style=5,n++;for(E=0;E<i;E++)t[E]=new l.POINT2(o[i-E-1]),t[E].style=5;0===t[n-1].style&&(t[n-1].style=5);let W=H.length;for(E=n;E<n+W;E++)t[E]=new l.POINT2(H[E-n]),5!==t[E].style&&(t[E].style=0);if(n+=H.length,T===c.TacticalLines.ATDITCHM){for(t[n-1].style=5,E=n;E<n+g;E++)t[E]=new l.POINT2(G[E-n]),t[E].style=20;n+=g}}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"GetDitchSpikeDouble",new g.RendererException("Failed inside GetDitchSpikeDouble",e))}return n}static MoveChannelPixels(e){try{if(null==e||e.length<=0)return;let t,i=new Array(2*e.length),a=0,n=0,s=0,l=0,r=0,o=0,c=e.length;for(a=0;a<c;a++)i[n++]=e[a].x,i[n++]=e[a].y;t=!1;do{for(t=!0,a=0;a<c-1;a++)if(s=i[2*a],l=i[2*a+1],r=i[2*a+2],o=i[2*a+3],s===r&&l===o){t=!1,i[2*a+2]=r+1;break}}while(!1===t);for(n=0,a=0;a<c;a++)e[a].x=i[n++],e[a].y=i[n++]}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"MoveChannelPixels",new g.RendererException("Failed inside MoveChannelPixels",e))}}static moveSingleCPixels(e,t){try{if(e!==c.TacticalLines.SINGLEC)return;t.length>1&&t[1].y===t[0].y&&t[1].y++}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"MoveSingleCPixels",new g.RendererException("Failed inside MoveSingleCPixels",e))}}static RotateGeometryDouble(e,t,i){try{let a=0,n=0,s=0,l=0,r=0,o=0;if(0!==i){let c;for(n=i*Math.PI/180,c=d.CalcCenterPointDouble(e,t),a=0;a<t;a++)l=e[a].x===c.x?e[a].y>c.y?Math.PI+Math.PI/2:Math.PI/2:Math.PI+Math.atan((e[a].y-c.y)/(e[a].x-c.x)),e[a].x>=c.x&&(l+=Math.PI),s=n+l,o=d.CalcDistanceDouble(e[a],c)*Math.sin(s),r=d.CalcDistanceDouble(e[a],c)*Math.cos(s),e[a].y=c.y+o,e[a].x=c.x+r;return}}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"RotateGeometryDouble",new g.RendererException("Failed inside RotateGeometryDouble",e))}}static PointRelativeToLine(...e){switch(e.length){case 3:{const[t,i,a]=e;let n=new l.POINT2(t);try{let e=0,s=new r.ref,l=d.MidPointDouble(t,i,0),o=0,c=0;e=d.CalcTrueSlopeDouble(t,i,s),0===e&&(n.x=a.x,n.y=l.y),0!==e&&0===s.value[0]&&(n.x=l.x,n.y=a.y),0!==e&&0!==s.value[0]&&(o=l.y+1/s.value[0]*l.x,c=a.y-s.value[0]*a.x,n=d.CalcTrueIntersectDouble2(-1/s.value[0],o,s.value[0],c,1,1,0,0))}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"PointRelativeToLine",new g.RendererException("Failed inside PointRelativeToLine",e))}return n}case 4:{const[t,i,a,n]=e;let s=new l.POINT2(t);try{let e=0,l=new r.ref,o=0,c=0;e=d.CalcTrueSlopeDouble(t,i,l),0===e&&(s.x=n.x,s.y=a.y),0!==e&&0===l.value[0]&&(s.x=a.x,s.y=n.y),0!==e&&0!==l.value[0]&&(o=a.y+1/l.value[0]*a.x,c=n.y-l.value[0]*n.x,s=d.CalcTrueIntersectDouble2(-1/l.value[0],o,l.value[0],c,1,1,0,0))}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"PointRelativeToLine",new g.RendererException("Failed inside PointRelativeToLine",e))}return s}default:throw Error("Invalid number of arguments")}}static adjustCATKBYFIREControlPoint(e,t,i){try{if(e!==c.TacticalLines.CATKBYFIRE)return;let a;if(d.CalcDistanceDouble(t[0],t[1])<=i)return;let n=t.length,s=new l.POINT2(t[0]),r=new l.POINT2(t[1]),o=new l.POINT2(t[n-1]),T=d.PointRelativeToLine(s,r,r,o);a=d.ExtendLineDouble(T,o,i),t[n-1]=a}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"adjustCATKBYFIREControlPoint",new g.RendererException("Failed inside adjustCATKBYFIREControlPoint",e))}}static LineRelativeToLine(e,t,i,a,n){try{let s,l,o=0,c=new r.ref,T=0,u=0;o=d.CalcTrueSlopeDouble(e,t,c),0===o&&(a.x=i.x,a.y=e.y,n.x=i.x,n.y=t.y),0!==o&&0===c.value[0]&&(a.x=e.x,a.y=i.y,n.x=t.x,n.y=i.y),0!==o&&0!==c.value[0]&&(T=e.y+1/c.value[0]*e.x,u=i.y-c.value[0]*i.x,s=d.CalcTrueIntersectDouble2(-1/c.value[0],T,c.value[0],u,1,1,0,0),T=t.y+1/c.value[0]*t.x,l=d.CalcTrueIntersectDouble2(-1/c.value[0],T,c.value[0],u,1,1,0,0),a.x=s.x,a.y=s.y,n.x=l.x,n.y=l.y)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"LineRelativeToLine",new g.RendererException("Failed inside LineRelativeToLine",e))}}static CalcMBR(e,t,i,a,n,s){try{let l=0;for(i.value=new Array(1),a.value=new Array(1),n.value=new Array(1),s.value=new Array(1),i.value[0]=Number.MAX_VALUE,a.value[0]=Number.MAX_VALUE,n.value[0]=-Number.MAX_VALUE,s.value[0]=-Number.MAX_VALUE,l=0;l<t;l++)e[l].x>n.value[0]&&(n.value[0]=e[l].x),e[l].y>s.value[0]&&(s.value[0]=e[l].y),e[l].x<i.value[0]&&(i.value[0]=e[l].x),e[l].y<a.value[0]&&(a.value[0]=e[l].y)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcMBR",new g.RendererException("Failed inside CalcMBR",e))}}static CalcMBRPoints(e,t,i,a){try{let n=0;for(i.x=Number.MAX_VALUE,i.y=Number.MAX_VALUE,a.x=-Number.MAX_VALUE,a.y=-Number.MAX_VALUE,n=0;n<t;n++)e[n].x>a.x&&(a.x=e[n].x),e[n].y>a.y&&(a.y=e[n].y),e[n].x<i.x&&(i.x=e[n].x),e[n].y<i.y&&(i.y=e[n].y)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"CalcMBRPoints",new g.RendererException("Failed inside CalcMBRPoints",e))}}static MBRDistance(e,t){let i=0;try{let a=new r.ref,n=new r.ref,s=new r.ref,l=new r.ref;d.CalcMBR(e,t,a,n,s,l),i=Math.sqrt((s.value[0]-a.value[0])*(s.value[0]-a.value[0])+(l.value[0]-n.value[0])*(l.value[0]-n.value[0]));let o=Math.abs(s.value[0]-a.value[0]),c=Math.abs(l.value[0]-n.value[0]),T=o;c>o&&(T=c),0!==i&&Number.isFinite(i)||T>0&&(i=T)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"MBRDistance",new g.RendererException("Failed inside MBRDistance",e))}return i}static Reverse2Points(e,t){try{let i=new l.POINT2;i.x=e.x,i.y=e.y,e.x=t.x,e.y=t.y,t.x=i.x,t.y=i.y}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"Reverse2Points",new g.RendererException("Failed inside Reverse2Points",e))}}static createStrokedShape(e){let t=new a.GeneralPath;try{let i=new Array(6);for(let a=e.getPathIterator(null);!a.isDone();a.next())switch(a.currentSegment(i)){case L.IPathIterator.SEG_MOVETO:t.moveTo(i[0],i[1]);break;case L.IPathIterator.SEG_LINETO:t.lineTo(i[0],i[1]);break;case L.IPathIterator.SEG_QUADTO:t.quadTo(i[0],i[1],i[2],i[3]);break;case L.IPathIterator.SEG_CUBICTO:t.curveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case L.IPathIterator.SEG_CLOSE:t.closePath()}}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"createStrokedShape",new g.RendererException("Failed inside createStrokedShape",e))}return t}static distance(e,t,i){try{let a=e.x,n=t.x,s=i.x,l=e.y,r=t.y,o=i.y;return a*r+s*l+n*o-s*r-n*l-a*o}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"distance",new g.RendererException("Failed inside distance",e))}return 0}static distance2(e,t,i){try{let a=e.x,n=t.x,s=i.x,l=e.y,r=t.y,o=i.y;return a*r+s*l+n*o-s*r-n*l-a*o}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"distance2",new g.RendererException("Failed inside distance2",e))}return 0}static cHull(...e){switch(e.length){case 1:{const[t]=e;let i=t.length;if(i<2)return null;let a=t[0],n=t[i-1],s=new Array;return s.push(a),d.cHull(t,a,n,s),s.push(n),d.cHull(t,n,a,s),s}case 4:{const[t,i,a,n]=e;if(t.length<3)return;let s,l=0,r=0;for(let e of t)e!==i&&e!==a&&(r=d.distance(i,a,e),r>l&&(l=r,s=e));let o=new Array,c=new Array;o.push(i),c.push(s);for(let e of t)d.distance(i,s,e)>0?o.push(e):d.distance(s,a,e)>0&&c.push(e);o.push(s),c.push(a),d.cHull(o,i,s,n),n.push(s),d.cHull(c,s,a,n);break}default:throw Error("Invalid number of arguments")}}static cHull2(...e){switch(e.length){case 1:{const[t]=e;try{let e=t.length;if(e<2)return null;let i=t[0],a=t[e-1],n=new Array;return n.push(i),d.cHull2(t,i,a,n),n.push(a),d.cHull2(t,a,i,n),n}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"cHull2",new g.RendererException("Failed inside cHull2",e))}return null}case 4:{const[t,i,a,n]=e;if(t.length<3)return;let s,l=0,r=0;for(let e of t)e!==i&&e!==a&&(r=d.distance2(i,a,e),r>l&&(l=r,s=e));let o=new Array,c=new Array;o.push(i),c.push(s);for(let e of t)d.distance2(i,s,e)>0?o.push(e):d.distance2(s,a,e)>0&&c.push(e);o.push(s),c.push(a),d.cHull2(o,i,s,n),n.push(s),d.cHull2(c,s,a,n);break}default:throw Error("Invalid number of arguments")}}static getExteriorPoints(e,t,i,a){let n,o,c,T,u=0,g=0,L=new r.ref,_=new r.ref,h=0,E=new Array,A=0,I=0,S=e[0].style;for(u=0;u<t;u++){let r,y,f,D;0===u||u===t-1?(n=new l.POINT2(e[t-2]),o=new l.POINT2(e[0]),c=new l.POINT2(e[1])):(n=new l.POINT2(e[u-1]),o=new l.POINT2(e[u]),c=new l.POINT2(e[u+1])),o.style>0&&(S=o.style),g=u-1,g<0&&(g=t-1);let M=new Array(e.length),P=e.length;for(let t=0;t<P;t++)M[t]=e[t];if(h=s.arraysupport.GetInsideOutsideDouble2(n,o,M,t,g,i),!0===a)switch(h){case 0:h=1;break;case 1:h=0;break;case 2:h=3;break;case 3:h=2}if(r=d.ExtendDirectedLine(n,o,n,h,S),y=d.ExtendDirectedLine(n,o,o,h,S),g=u,u===t-1&&(g=0),h=s.arraysupport.GetInsideOutsideDouble2(o,c,M,t,g,i),!0===a)switch(h){case 0:h=1;break;case 1:h=0;break;case 2:h=3;break;case 3:h=2}f=d.ExtendDirectedLine(o,c,o,h,S),D=d.ExtendDirectedLine(o,c,c,h,S),n.x!==o.x||o.x!==c.x?(d.CalcTrueSlopeDouble2(r,y,L),d.CalcTrueSlopeDouble2(f,D,_),L.value[0]!==_.value[0]?(A=y.y-L.value[0]*y.x,I=D.y-_.value[0]*D.x,T=d.CalcTrueIntersectDouble2(L.value[0],A,_.value[0],I,1,1,0,0),E.push(T)):(T=new l.POINT2(y),E.push(T))):(T=new l.POINT2(y),E.push(T))}let y=E.length;for(u=0;u<y;u++)e[u]=E[u]}static getDeepCopy(e){let t;try{if(null==e||0===e.length)return e;t=new Array;let i,a=0;for(a=0;a<e.length;a++)i=new l.POINT2(e[a].x,e[a].y,e[a].style),t.push(i)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(d._className,"getDeepCopy",new g.RendererException("Failed inside getDeepCopy",e))}return t}}t.lineutility=d},1358:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralPath=void 0;const a=i(5467),n=i(2876),s=i(9441),l=i(7940),r=i(3586),o=i(9909);t.GeneralPath=class{_path;_pathIterator;constructor(){this._path=new r.Path,this._pathIterator=new n.PathIterator(null)}lineTo(e,t){this._path.lineTo(e,t),this._pathIterator.lineTo(e,t)}moveTo(e,t){this._path.moveTo(e,t),this._pathIterator.moveTo(e,t)}quadTo(e,t,i,a){this._path.quadTo(e,t,i,a),this._pathIterator.quadTo(e,t,i,a)}cubicTo(e,t,i,a,n,s){this._path.cubicTo(e,t,i,a,n,s),this._pathIterator.cubicTo(e,t,i,a,n,s)}curveTo(e,t,i,a,n,s){this._path.cubicTo(e,t,i,a,n,s),this._pathIterator.cubicTo(e,t,i,a,n,s)}computeBounds(e){var t=new o.RectF;this._path.computeBounds(t,!0),e.x=t.left,e.y=t.top,e.width=t.bottom-t.top,e.setRect(t.left,t.top,t.width(),t.height())}closePath(){null!=this._path&&this._path.close()}contains(...e){switch(e.length){case 1:if(e[0]instanceof s.Point2D)return!1;{const[t]=e;let i=new l.Rectangle(t.x,t.y,t.width,t.height);return this.getBounds().contains(i.x,i.y,i.width,i.height)}case 2:{const[t,i]=e;return!1}case 4:{const[t,i,a,n]=e;return this.getBounds().contains(t,i,a,n)}default:throw Error("Invalid number of arguments")}}getBounds2D(){return this._pathIterator.getBounds()}getBounds(){let e=this._pathIterator.getBounds();return new l.Rectangle(e.x,e.y,e.width,e.height)}intersects(...e){switch(e.length){case 1:{const[t]=e;return this.getBounds().intersects(t.x,t.y,t.width,t.height)}case 4:{const[t,i,a,n]=e;return this.getBounds().intersects(t,i,a,n)}default:throw Error("Invalid number of arguments")}}append(e,t){let i,n,s,l=e._pathIterator.getPoints(),r=0,o=l.length;for(r=0;r<o;r++)switch(i=l[r],i.style){case a.IPathIterator.SEG_MOVETO:this._path.moveTo(i.x,i.y),this._pathIterator.moveTo(i.x,i.y);break;case a.IPathIterator.SEG_LINETO:this._path.lineTo(i.x,i.y),this._pathIterator.lineTo(i.x,i.y);break;case a.IPathIterator.SEG_CUBICTO:n=l[r+1],r++,s=l[r+2],r++,this._path.cubicTo(i.x,i.y,n.x,n.y,s.x,s.y),this._pathIterator.cubicTo(i.x,i.y,n.x,n.y,s.x,s.y)}}getPath(){return this._path}getPathIterator(e){return this._pathIterator.reset(),this._pathIterator}}},1773:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PointConverter3D=void 0;const a=i(151),n=i(9441),s=i(5588);t.PointConverter3D=class{_controlLat=0;_controlLong=0;_scale=0;_metersPerPixel=0;constructor(e,t,i){try{this._controlLat=t,this._controlLong=e,this._scale=i,this._metersPerPixel=s.GeoPixelConversion3D.metersPerPixel(i)}catch(e){throw Error,e}}PixelsToGeo(...e){if(e[0]instanceof a.Point){const[t]=e;let i;try{let e=s.GeoPixelConversion3D.y2lat(t.getY(),this._scale,this._controlLat,this._metersPerPixel),a=s.GeoPixelConversion3D.x2long(t.getX(),this._scale,this._controlLong,e,this._metersPerPixel);i=new n.Point2D(a,e)}catch(e){throw Error,e}return i}{const[t]=e;let i;try{let e=s.GeoPixelConversion3D.y2lat(t.getY(),this._scale,this._controlLat,this._metersPerPixel),a=s.GeoPixelConversion3D.x2long(t.getX(),this._scale,this._controlLong,e,this._metersPerPixel);i=new n.Point2D(a,e)}catch(e){throw Error,e}return i}}GeoToPixels(...e){if(e[0]instanceof n.Point2D){const[t]=e;let i;try{let e=s.GeoPixelConversion3D.lat2y(t.getY(),this._scale,this._controlLat,this._metersPerPixel),n=s.GeoPixelConversion3D.long2x(t.getX(),this._scale,this._controlLong,t.getY(),this._metersPerPixel);i=new a.Point,i.setLocation(n,e)}catch(e){throw Error,e}return i}{const[t]=e;let i;try{let e=s.GeoPixelConversion3D.lat2y(t.getY(),this._scale,this._controlLat,this._metersPerPixel),a=s.GeoPixelConversion3D.long2x(t.getX(),this._scale,this._controlLong,t.getY(),this._metersPerPixel);i=new n.Point2D(a,e)}catch(e){throw Error,e}return i}}}},2023:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ImageInfo=void 0;const a=i(151),n=i(9441),s=i(3170),l=i(7300),r=i(7232);class o{static FormatPNG="png";static FormatJPG="jpg";_Image;_X=0;_Y=0;_symbolCenterX=0;_symbolCenterY=0;_symbolBounds;constructor(...e){switch(e.length){case 0:break;case 3:if("number"==typeof e[1]){const[t,i,a]=e;this._Image=t,this._X=i,this._Y=a,this._symbolCenterX=t.width/2,this._symbolCenterY=t.height/2}else if(e[1]instanceof n.Point2D){const[t,i,a]=e;this._Image=t,this._symbolCenterX=i.getX(),this._symbolCenterY=i.getY(),this._symbolBounds=a}break;case 5:{const[t,i,a,n,s]=e;this._Image=t,this._X=i,this._Y=a,this._symbolCenterX=n,this._symbolCenterY=s;break}case 6:{const[t,i,a,n,s,l]=e;this._Image=t,this._X=i,this._Y=a,this._symbolCenterX=n,this._symbolCenterY=s,this._symbolBounds=l;break}default:throw Error("Invalid number of arguments")}}getImage(){return this._Image}getX(){return this._X}getY(){return this._Y}getPoint(){return new a.Point(this._X,this._Y)}getSymbolCenterX(){return this._symbolCenterX}getSymbolCenterY(){return this._symbolCenterY}getSymbolCenterPoint(){return new n.Point2D(this._symbolCenterX,this._symbolCenterY)}getSymbolBounds(){return this._symbolBounds}getImageBounds(){return new s.Rectangle2D(0,0,this._Image.width,this._Image.height)}static CenterImageOnPoint(e,t){let i,a,n=0,s=0,r=0,o=0;r=e.height,o=e.width;try{t.getY()>r-t.getY()?(r=2*t.getY(),s=0):(r=2*(r-t.getY()),s=r/2-t.getY()),t.getX()>o-t.getX()?(o=2*t.getX(),n=0):(o=2*(o-t.getX()),n=o/2-t.getX()),a=new OffscreenCanvas(o,r),a.getContext("2d").drawImage(e,n,s),i=a.transferToImageBitmap()}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException("ImageInfo","CenterImageOnPoint",e)}return i}getSquareImageInfo(){let e,t=0,i=0,a=0,s=0,l=this._Image.width,c=this._Image.height;l>c?(t=l,i=l,a=0,s=(i-c)/2):l<c?(t=c,i=c,a=(t-l)/2,s=0):(t=l,i=c,a=0,s=0);let T=new OffscreenCanvas(t,i);T.getContext("2d").drawImage(this._Image,a,s);let u=new n.Point2D(this._symbolCenterX,this._symbolCenterY);u.setLocation(this._symbolCenterX+a,this._symbolCenterY+s);let g=r.RectUtilities.copyRect(this._symbolBounds);return r.RectUtilities.shift(this._symbolBounds,a,s),e=new o(T.transferToImageBitmap(),u,g),e}}t.ImageInfo=o},2051:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MODrawRules=void 0,t.MODrawRules=class{static DONOTDRAW=0;static AREA1=101;static AREA2=102;static POINT1=201;static POINT2=202;static POINT3=203;static POINT4=204;static POINT5=205;static POINT6=206;static POINT7=207;static POINT8=208;static LINE1=301;static LINE2=302;static LINE3=303;static LINE4=304;static LINE5=305;static LINE6=306;static LINE7=307;static LINE8=308}},2421:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SymbolID=void 0;const a=i(6142),n=i(2466);class s{static Version_2525D=10;static Version_2525Dch1=11;static Version_APP6Dch2=12;static Version_2525E=13;static StandardIdentity_Context_Reality=0;static StandardIdentity_Context_Exercise=1;static StandardIdentity_Context_Simulation=2;static StandardIdentity_Affiliation_Pending=0;static StandardIdentity_Affiliation_Unknown=1;static StandardIdentity_Affiliation_AssumedFriend=2;static StandardIdentity_Affiliation_Friend=3;static StandardIdentity_Affiliation_Neutral=4;static StandardIdentity_Affiliation_Suspect_Joker=5;static StandardIdentity_Affiliation_Hostile_Faker=6;static SymbolSet_Unknown=0;static SymbolSet_Air=1;static SymbolSet_AirMissile=2;static SymbolSet_Space=5;static SymbolSet_SpaceMissile=6;static SymbolSet_LandUnit=10;static SymbolSet_LandCivilianUnit_Organization=11;static SymbolSet_LandEquipment=15;static SymbolSet_LandInstallation=20;static SymbolSet_ControlMeasure=25;static SymbolSet_DismountedIndividuals=27;static SymbolSet_SeaSurface=30;static SymbolSet_SeaSubsurface=35;static SymbolSet_MineWarfare=36;static SymbolSet_Activities=40;static SymbolSet_Atmospheric=45;static SymbolSet_Oceanographic=46;static SymbolSet_MeteorologicalSpace=47;static SymbolSet_SignalsIntelligence=50;static SymbolSet_SignalsIntelligence_Space=50;static SymbolSet_SignalsIntelligence_Air=51;static SymbolSet_SignalsIntelligence_Land=52;static SymbolSet_SignalsIntelligence_SeaSurface=53;static SymbolSet_SignalsIntelligence_SeaSubsurface=54;static SymbolSet_CyberSpace=60;static SymbolSet_InvalidSymbol=98;static SymbolSet_VersionExtensionFlag=99;static Status_Present=0;static Status_Planned_Anticipated_Suspect=1;static Status_Present_FullyCapable=2;static Status_Present_Damaged=3;static Status_Present_Destroyed=4;static Status_Present_FullToCapacity=5;static Status_Present_VersionExtensionFlag=9;static HQTFD_Unknown=0;static HQTFD_FeintDummy=1;static HQTFD_Headquarters=2;static HQTFD_FeintDummy_Headquarters=3;static HQTFD_TaskForce=4;static HQTFD_FeintDummy_TaskForce=5;static HQTFD_TaskForce_Headquarters=6;static HQTFD_FeintDummy_TaskForce_Headquarters=7;static HQTFD_VersionExtensionFlag=9;static Echelon_Unknown=0;static Echelon_Team_Crew=11;static Echelon_Squad=12;static Echelon_Section=13;static Echelon_Platoon_Detachment=14;static Echelon_Company_Battery_Troop=15;static Echelon_Battalion_Squadron=16;static Echelon_Regiment_Group=17;static Echelon_Brigade=18;static Echelon_VersionExtensionFlag=19;static Echelon_Division=21;static Echelon_Corps_MEF=22;static Echelon_Army=23;static Echelon_ArmyGroup_Front=24;static Echelon_Region_Theater=25;static Echelon_Region_Command=26;static Echelon_VersionExtensionFlag2=29;static Mobility_Unknown=0;static Mobility_WheeledLimitedCrossCountry=31;static Mobility_WheeledCrossCountry=32;static Mobility_Tracked=33;static Mobility_Wheeled_Tracked=34;static Mobility_Towed=35;static Mobility_Rail=36;static Mobility_PackAnimals=37;static Mobility_OverSnow=41;static Mobility_Sled=42;static Mobility_Barge=51;static Mobility_Amphibious=52;static Mobility_ShortTowedArray=61;static Mobility_LongTowedArray=62;static Leadership_Individual=71;static FrameShape_Unknown="0";static FrameShape_Space="1";static FrameShape_Air="2";static FrameShape_LandUnit="3";static FrameShape_LandEquipment_SeaSurface="4";static FrameShape_LandInstallation="5";static FrameShape_DismountedIndividuals="6";static FrameShape_SeaSubsurface="7";static FrameShape_Activity_Event="8";static FrameShape_Cyberspace="9";static reconcileSymbolID(e){return n.SymbolUtilities.reconcileSymbolID(e)}static getVersion(e){let t=11;return null!=e&&e.length>=20&&(t=parseInt(e.substring(0,2))),t}static setVersion(e,t){let i=t.toString();return null!=e&&e.length>=20?(2!==i.length&&(i="11"),i+e.substring(2)):e}static getStandardIdentity(e){return null!=e&&e.length>=20?parseInt(e.substring(2,4)):0}static setStandardIdentity(e,t){let i=t.toString();return null!=e&&e.length>=20?(i=t<10&&1===i.length?"0"+i:t.toString(),e.substring(0,2)+i+e.substring(4)):e}static getContext(e){return null!=e&&e.length>=20?parseInt(e.substring(2,3)):0}static setContext(e,t){return null!=e&&e.length>=20&&t<4?e.substring(0,2)+t.toString()+e.substring(3):e}static getAffiliation(e){return null!=e&&e.length>=20?parseInt(e.substring(3,4)):0}static setAffiliation(e,t){return null!=e&&e.length>=20?e.substring(0,3)+t.toString()+e.substring(4):e}static getSymbolSet(e){return null!=e&&e.length>=20?parseInt(e.substring(4,6)):0}static setSymbolSet(e,t){let i=t.toString();return t<10&&1===i.length&&(i="0"+i),null!=e&&e.length>=20?e.substring(0,4)+i+e.substring(6):e}static getStatus(e){return null!=e&&e.length>=20?parseInt(e.substring(6,7)):0}static setStatus(e,t){let i=t.toString();return null!=e&&e.length>=20&&1===i.length?e.substring(0,6)+i+e.substring(7):e}static getHQTFD(e){return null!=e&&e.length>=20?parseInt(e.substring(7,8)):0}static setHQTFD(e,t){let i=t.toString();return null!=e&&e.length>=20&&1===i.length?e.substring(0,7)+i+e.substring(8):e}static getAmplifierDescriptor(e){return null!=e&&e.length>=20?parseInt(e.substring(8,10)):0}static setAmplifierDescriptor(e,t){let i=t.toString();return t<10&&1===i.length&&(i="0"+i),null!=e&&e.length>=20&&2===i.length?e.substring(0,8)+i+e.substring(10):e}static getEntityCode(e){return null!=e&&e.length>=20?parseInt(e.substring(10,16)):0}static setEntityCode(e,t){let i=t.toString();for(;i.length<6;)i="0"+i;return null!=e&&e.length>=20?e.substring(0,10)+i+e.substring(16):e}static getEntity(e){return null!=e&&e.length>=20?parseInt(e.substring(10,12)):0}static getEntityType(e){return null!=e&&e.length>=20?parseInt(e.substring(12,14)):0}static getEntitySubtype(e){return null!=e&&e.length>=20?parseInt(e.substring(14,16)):0}static getModifier1(e){return null!=e&&e.length>=20?parseInt(e.substring(16,18)):0}static setModifier1(e,t){let i=e.toString(),a=t.toString();return 1===a.length&&(a="0"+a),null!=e&&e.length>=20&&(i=i.substring(0,16)+a+i.substring(18)),i}static getCommonModifier1(e){let t="";return null!=e&&30===e.length?(t+=e.substring(20,21),parseInt(t)):0}static setCommonModifier1(e,t){let i=e.toString(),a=t.toString();return null!=e&&30===e.length&&(i=i.substring(0,20)+a+i.substring(21)),i}static getModifier2(e){return null!=e&&e.length>=20?parseInt(e.substring(18,20)):0}static setModifier2(e,t){let i=e.toString(),a=t.toString();return 1===a.length&&(a="0"+a),null!=e&&e.length>=20&&(i=i.substring(0,18)+a+i.substring(20)),i}static getCommonModifier2(e){let t="";return null!=e&&30===e.length?(t+=e.substring(21,22),parseInt(t)):0}static setCommonModifier2(e,t){let i=e.toString(),a=t.toString();return null!=e&&30===e.length&&(i=i.substring(0,21)+a+i.substring(22)),i}static isMETOC(e){return n.SymbolUtilities.isWeather(e)}static getFrameID(e){return a.SVGLookup.getFrameID(e)}static getMainIconID(e){return a.SVGLookup.getMainIconID(e)}static getMod2ID(e){return a.SVGLookup.getMod2ID(e)}static getMod1ID(e){return a.SVGLookup.getMod1ID(e)}static getCountryCode(e){let t="0";return 30===e.length&&(t=e.substring(27,30)),parseInt(t)}static getDefaultFrameShape(e){let t=s.getSymbolSet(e);switch(t){case s.SymbolSet_Air:case s.SymbolSet_AirMissile:case s.SymbolSet_SignalsIntelligence_Air:return s.FrameShape_Air;case s.SymbolSet_Space:case s.SymbolSet_SpaceMissile:case s.SymbolSet_SignalsIntelligence_Space:return t===s.SymbolSet_SignalsIntelligence&&s.getVersion(e)>=s.Version_2525E?s.FrameShape_LandEquipment_SeaSurface:s.FrameShape_Space;case s.SymbolSet_LandUnit:case s.SymbolSet_LandCivilianUnit_Organization:case s.SymbolSet_SignalsIntelligence_Land:return s.FrameShape_LandUnit;case s.SymbolSet_LandEquipment:case s.SymbolSet_SeaSurface:case s.SymbolSet_SignalsIntelligence_SeaSurface:return s.FrameShape_LandEquipment_SeaSurface;case s.SymbolSet_LandInstallation:return s.FrameShape_LandInstallation;case s.SymbolSet_SeaSubsurface:case s.SymbolSet_SignalsIntelligence_SeaSubsurface:case s.SymbolSet_MineWarfare:return s.FrameShape_SeaSubsurface;case s.SymbolSet_DismountedIndividuals:return s.FrameShape_DismountedIndividuals;case s.SymbolSet_Activities:return s.FrameShape_Activity_Event;case s.SymbolSet_CyberSpace:return s.FrameShape_Cyberspace;default:return s.FrameShape_Unknown}}static getFrameShape(e){return null!=e&&e.length>=23?e.charAt(22):"0"}}t.SymbolID=s},2466:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SymbolUtilities=void 0;const a=i(151),n=i(6940),s=i(8113),l=i(3247),r=i(7300),o=i(6932),c=i(3874),T=i(3254),u=i(6142),g=i(2421);class L{static Digits="(\\p{Digit}+)";static HexDigits="(\\p{XDigit}+)";static Exp="[eE][+-]?"+L.Digits;static fpRegex="[\\x00-\\x20]*[+-]?(NaN|Infinity|((("+L.Digits+"(\\.)?("+L.Digits+"?)("+L.Exp+")?)|(\\.("+L.Digits+")("+L.Exp+")?)|(((0[xX]"+L.HexDigits+"(\\.)?)|(0[xX]"+L.HexDigits+"?(\\.)"+L.HexDigits+"))[pP][+-]?"+L.Digits+"))[fFdD]?))[\\x00-\\x20]*";static pIsNumber=RegExp(L.fpRegex);static isNumber(e){return!isNaN(parseFloat(e))||!isNaN(parseInt(e))}static getDateLabel(e){let t="";return t+=String(e.getDate()).padStart(2,"0"),t+=String(e.getHours()).padStart(2,"0"),t+=String(e.getMinutes()).padStart(2,"0"),t+=String(e.getSeconds()).padStart(2,"0"),t+=L.getZuluCharFromTimeZoneOffset(e),t+=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getUTCMonth()],t+=e.getUTCFullYear(),t.toUpperCase()}static getZuluCharFromTimeZoneOffset(e){let t=e.getTimezoneOffset()/60;return-1===t?"A":-2===t?"B":-3===t?"C":-4===t?"D":-5===t?"E":-6===t?"F":-7===t?"G":-8===t?"H":-9===t?"I":-10===t?"K":-11===t?"L":-12===t?"M":1===t||-13===t?"N":2===t?"O":3===t?"P":4===t?"Q":5===t?"R":6===t?"S":7===t?"T":8===t?"U":9===t?"V":10===t?"W":11===t?"X":12===t?"Y":0===t?"Z":"-"}static hasModifier(e,t){let i=c.MSLookup.getInstance().getMSLInfo(e);if(null!=i&&i.getDrawRule()!==l.DrawRules.DONOTDRAW){let e=i.getModifiers();return!(null==e||!e.includes(t))||i.getSymbolSet()===g.SymbolID.SymbolSet_ControlMeasure&&t===o.Modifiers.AB_FEINT_DUMMY_INDICATOR}return!1}static getBasicSymbolID(e){return 8===e.length||e.startsWith("B")||"octagon"===e?e:e.length>=20&&e.length<=30?e.substring(4,6)+e.substring(10,16):15===e.length?L.getBasicSymbolID2525C(e):e}static getBasicSymbolID2525C(e){if(null!=e&&15===e.length){let t="",i=e.charAt(0);if("G"===i)t+=e.charAt(0),t+="*",t+=e.charAt(2),t+="*",t+=e.substring(4,10),t+="****X";else{if("W"===i||"B"===i||"P"===i)return e;t+=e.charAt(0),t+="*",t+=e.charAt(2),t+="*",t+=e.substring(4,10),t+="*****"}return t}return e}static reconcileSymbolID(e){let t="";try{let i=g.SymbolID.getVersion(e);t=i<g.SymbolID.Version_2525E?g.SymbolID.Version_2525Dch1.toString():g.SymbolID.Version_2525E.toString();let a=g.SymbolID.getContext(e);t+=a>2?g.SymbolID.StandardIdentity_Context_Reality.toString():a.toString();let n=g.SymbolID.getAffiliation(e);t+=n>6?g.SymbolID.StandardIdentity_Affiliation_Unknown.toString():n.toString();let s=g.SymbolID.getSymbolSet(e);switch(s){case g.SymbolID.SymbolSet_Unknown:case g.SymbolID.SymbolSet_Air:case g.SymbolID.SymbolSet_AirMissile:case g.SymbolID.SymbolSet_SignalsIntelligence_Air:case g.SymbolID.SymbolSet_Space:case g.SymbolID.SymbolSet_SpaceMissile:case g.SymbolID.SymbolSet_SignalsIntelligence_Space:case g.SymbolID.SymbolSet_LandUnit:case g.SymbolID.SymbolSet_LandCivilianUnit_Organization:case g.SymbolID.SymbolSet_LandEquipment:case g.SymbolID.SymbolSet_SignalsIntelligence_Land:case g.SymbolID.SymbolSet_LandInstallation:case g.SymbolID.SymbolSet_DismountedIndividuals:case g.SymbolID.SymbolSet_SeaSurface:case g.SymbolID.SymbolSet_SignalsIntelligence_SeaSurface:case g.SymbolID.SymbolSet_SeaSubsurface:case g.SymbolID.SymbolSet_MineWarfare:case g.SymbolID.SymbolSet_SignalsIntelligence_SeaSubsurface:case g.SymbolID.SymbolSet_Activities:case g.SymbolID.SymbolSet_ControlMeasure:case g.SymbolID.SymbolSet_Atmospheric:case g.SymbolID.SymbolSet_Oceanographic:case g.SymbolID.SymbolSet_MeteorologicalSpace:case g.SymbolID.SymbolSet_CyberSpace:t+=String(s).padStart(2,"0");break;default:t+=String(g.SymbolID.SymbolSet_Unknown).padStart(2,"0")}let l=g.SymbolID.getStatus(e);l>g.SymbolID.Status_Present_FullToCapacity?t+=g.SymbolID.Status_Present.toString():t+=l.toString(),t+=g.SymbolID.getHQTFD(e).toString(),t+=String(g.SymbolID.getAmplifierDescriptor(e)).padStart(2,"0");let r=g.SymbolID.getEntityCode(e);0===r?t+="000000":null==u.SVGLookup.getInstance().getSVGLInfo(u.SVGLookup.getMainIconID(t+r+"0000"),i)?(t=g.SymbolID.setSymbolSet(t,98),t+=1e5):t+=String(r).padStart(6,"0"),t+=e.substring(16)}catch(e){if(!(e instanceof Error))throw e;t="110098000010000000000000000000"}return t}static getLineColorOfAffiliation(e){let t=null,i=g.SymbolID.getSymbolSet(e),a=g.SymbolID.getSymbolSet(e),l=g.SymbolID.getAffiliation(e),o=g.SymbolID.getVersion(e),c=g.SymbolID.getEntityCode(e);try{if(null==e||""===e)return t;if(i===g.SymbolID.SymbolSet_ControlMeasure){let i=g.SymbolID.getEntity(e),a=g.SymbolID.getEntityType(e),s=g.SymbolID.getEntitySubtype(e);if(L.isGreenProtectionGraphic(i,a,s)&&(t=n.AffiliationColors.ObstacleGreen),null==t)switch(l){case g.SymbolID.StandardIdentity_Affiliation_Friend:case g.SymbolID.StandardIdentity_Affiliation_AssumedFriend:t=n.AffiliationColors.FriendlyGraphicLineColor;break;case g.SymbolID.StandardIdentity_Affiliation_Hostile_Faker:t=n.AffiliationColors.HostileGraphicLineColor;break;case g.SymbolID.StandardIdentity_Affiliation_Suspect_Joker:t=o>=g.SymbolID.Version_2525E?n.AffiliationColors.SuspectGraphicLineColor:n.AffiliationColors.HostileGraphicLineColor;break;case g.SymbolID.StandardIdentity_Affiliation_Neutral:t=n.AffiliationColors.NeutralGraphicLineColor;break;default:t=n.AffiliationColors.UnknownGraphicLineColor}}else if(a>=45&&a<=47)t=s.Color.BLACK;else if(a===g.SymbolID.SymbolSet_MineWarfare&&T.RendererSettings.getInstance().getSeaMineRenderMethod()===T.RendererSettings.SeaMineRenderMethod_MEDAL)if(110600!==c&&110700!==c)switch(l){case g.SymbolID.StandardIdentity_Affiliation_Friend:case g.SymbolID.StandardIdentity_Affiliation_AssumedFriend:t=n.AffiliationColors.FriendlyUnitFillColor;break;case g.SymbolID.StandardIdentity_Affiliation_Hostile_Faker:t=n.AffiliationColors.HostileGraphicLineColor;break;case g.SymbolID.StandardIdentity_Affiliation_Suspect_Joker:t=o>=g.SymbolID.Version_2525E?n.AffiliationColors.SuspectGraphicLineColor:n.AffiliationColors.HostileGraphicLineColor;break;case g.SymbolID.StandardIdentity_Affiliation_Neutral:t=n.AffiliationColors.NeutralUnitFillColor;break;default:t=n.AffiliationColors.UnknownUnitFillColor}else t=s.Color.BLACK;else t=s.Color.BLACK}catch(e){if(!(e instanceof Error))throw e;r.ErrorLogger.LogException("SymbolUtilities","getLineColorOfAffiliation",e)}return t}static getDefaultLineColor(e){try{if(null==e||""===e)return null;let t=g.SymbolID.getSymbolSet(e),i=g.SymbolID.getEntityCode(e),a=g.SymbolID.getVersion(e);if(t===g.SymbolID.SymbolSet_ControlMeasure){if(200600===i)return s.Color.WHITE;if(200700===i)return new s.Color(51,136,136);if(200101===i)return new s.Color(255,155,0);if(200201===i||200202===i)return new s.Color(85,119,136);if(a>=g.SymbolID.Version_2525E&&(132100===i||282001===i||282002===i||282003===i))return new s.Color(128,0,128)}}catch(e){if(!(e instanceof Error))throw e;r.ErrorLogger.LogException("SymbolUtilities","getDefaultLineColor",e)}return L.getLineColorOfAffiliation(e)}static hasDefaultFill(e){switch(g.SymbolID.getEntityCode(e)){case 200101:case 200201:case 200202:case 200600:case 200700:return!0;default:return!L.isTacticalGraphic(e)}}static isTacticalGraphic(e){try{if(g.SymbolID.getSymbolSet(e)===g.SymbolID.SymbolSet_ControlMeasure||L.isWeather(e))return!0}catch(e){if(!(e instanceof Error))throw e;r.ErrorLogger.LogException("SymbolUtilities","getFillColorOfAffiliation",e)}return!1}static isMultiPoint(e){let t=c.MSLookup.getInstance().getMSLInfo(e);if(null==t)return!1;let i=t.getDrawRule(),a=t.getSymbolSet();return(a===g.SymbolID.SymbolSet_ControlMeasure||a===g.SymbolID.SymbolSet_Oceanographic||a===g.SymbolID.SymbolSet_Atmospheric||a===g.SymbolID.SymbolSet_MeteorologicalSpace)&&(a===g.SymbolID.SymbolSet_ControlMeasure?t.getMaxPointCount()>1||(i<l.DrawRules.POINT1||i>l.DrawRules.POINT16||i===l.DrawRules.POINT12)&&i!==l.DrawRules.DONOTDRAW&&i!==l.DrawRules.AREA22:(a===g.SymbolID.SymbolSet_Oceanographic||a===g.SymbolID.SymbolSet_Atmospheric||a===g.SymbolID.SymbolSet_MeteorologicalSpace)&&t.getMaxPointCount()>1)}static isActionPoint(e){if(c.MSLookup.getInstance().getMSLInfo(e).getDrawRule()===l.DrawRules.POINT1){let t=g.SymbolID.getEntityCode(e);if(131300!==t&&131301!==t&&182600!==t&&212800!==t)return!0}return!1}static isTGSPWithSpecialModifierLayout(e){try{let t=g.SymbolID.getSymbolSet(e),i=g.SymbolID.getEntityCode(e);if(t===g.SymbolID.SymbolSet_ControlMeasure){if(L.isCBRNEvent(e))return!0;if(L.isSonobuoy(e))return!0;switch(i){case 130500:case 130700:case 212800:case 131300:case 131800:case 240900:case 180100:case 180200:case 160300:case 240601:case 240602:case 270701:case 282001:case 282002:return!0;default:return!1}}else if(t===g.SymbolID.SymbolSet_Atmospheric)switch(i){case 162300:case 162200:case 110102:case 110202:return!0;default:return!1}}catch(e){if(!(e instanceof Error))throw e;r.ErrorLogger.LogException("SymbolUtilities","isTGSPWithSpecialModifierLayout",e)}return!1}static getFillColorOfAffiliation(e){let t=null,i=g.SymbolID.getEntityCode(e),a=(g.SymbolID.getEntity(e),g.SymbolID.getEntityType(e),g.SymbolID.getEntitySubtype(e),g.SymbolID.getAffiliation(e));try{if(null==e||""===e)return null;if(g.SymbolID.getSymbolSet(e)===g.SymbolID.SymbolSet_ControlMeasure)switch(i){case 200101:t=new s.Color(255,155,0,63.75);break;case 200201:case 200202:case 200600:t=new s.Color(85,119,136,63.75);break;case 200700:t=new s.Color(51,136,136,63.75)}else g.SymbolID.getSymbolSet(e)===g.SymbolID.SymbolSet_MineWarfare&&T.RendererSettings.getInstance().getSeaMineRenderMethod()===T.RendererSettings.SeaMineRenderMethod_MEDAL&&110600!==i&&110700!==i&&(t=new s.Color(0,0,0,0));if(null==t)switch(a){case g.SymbolID.StandardIdentity_Affiliation_Friend:case g.SymbolID.StandardIdentity_Affiliation_AssumedFriend:t=n.AffiliationColors.FriendlyUnitFillColor;break;case g.SymbolID.StandardIdentity_Affiliation_Hostile_Faker:t=n.AffiliationColors.HostileUnitFillColor;break;case g.SymbolID.StandardIdentity_Affiliation_Suspect_Joker:t=g.SymbolID.getVersion(e)>=g.SymbolID.Version_2525E?n.AffiliationColors.SuspectGraphicFillColor:n.AffiliationColors.HostileGraphicFillColor;break;case g.SymbolID.StandardIdentity_Affiliation_Neutral:t=n.AffiliationColors.NeutralUnitFillColor;break;default:t=n.AffiliationColors.UnknownUnitFillColor}}catch(e){if(!(e instanceof Error))throw e;r.ErrorLogger.LogException("SymbolUtilities","getFillColorOfAffiliation",e)}return t}static canSymbolHaveModifier(e,t){return L.hasModifier(e,t)}static hasFDI(e){let t=g.SymbolID.getHQTFD(e);return t===g.SymbolID.HQTFD_FeintDummy||t===g.SymbolID.HQTFD_FeintDummy_TaskForce||t===g.SymbolID.HQTFD_FeintDummy_Headquarters||t===g.SymbolID.HQTFD_FeintDummy_TaskForce_Headquarters}static isGreenProtectionGraphic(...e){switch(e.length){case 1:{const[t]=e;return g.SymbolID.getSymbolSet(t)===g.SymbolID.SymbolSet_ControlMeasure&&L.isGreenProtectionGraphic(g.SymbolID.getEntity(t),g.SymbolID.getEntityType(t),g.SymbolID.getEntitySubtype(t))}case 3:{const[t,i,a]=e;return t>=27&&t<=29&&(27===t?i>0&&i<=5||7===i||8===i||10===i||12===i:28===t?i>0&&i<=7||19===i:29===t&&i>=1&&i<=5)}default:throw Error("Invalid number of arguments")}}static isCBRNEvent(e){let t=g.SymbolID.getSymbolSet(e),i=g.SymbolID.getEntityCode(e);if(t===g.SymbolID.SymbolSet_ControlMeasure)switch(i){case 281300:case 281400:case 281500:case 281600:case 281700:return!0}return!1}static isSonobuoy(e){let t=g.SymbolID.getSymbolSet(e),i=g.SymbolID.getEntity(e),a=g.SymbolID.getEntityType(e);return 25===t&&21===i&&35===a}static isObstacle(e){return g.SymbolID.getSymbolSet(e)===g.SymbolID.SymbolSet_ControlMeasure&&27===g.SymbolID.getEntity(e)}static isWeather(e){let t=g.SymbolID.getSymbolSet(e);return t>=g.SymbolID.SymbolSet_Atmospheric&&t<=g.SymbolID.SymbolSet_MeteorologicalSpace}static isHQ(e){let t=g.SymbolID.getHQTFD(e);return!(!L.hasModifier(e,o.Modifiers.S_HQ_STAFF_INDICATOR)||t!==g.SymbolID.HQTFD_FeintDummy_Headquarters&&t!==g.SymbolID.HQTFD_Headquarters&&t!==g.SymbolID.HQTFD_FeintDummy_TaskForce_Headquarters&&t!==g.SymbolID.HQTFD_TaskForce_Headquarters)}static isSPWithSpecialModifierLayout(e){let t=g.SymbolID.getSymbolSet(e),i=g.SymbolID.getEntityCode(e);if(t===g.SymbolID.SymbolSet_ControlMeasure)switch(i){case 130500:case 130700:case 131300:case 131800:case 131900:case 132e3:case 132100:case 160300:case 180100:case 180200:case 180600:case 210300:case 210600:case 210800:case 211e3:case 212800:case 213500:case 213501:case 213502:case 213503:case 213504:case 213505:case 213506:case 213507:case 213508:case 213509:case 213510:case 213511:case 213512:case 213513:case 213514:case 213515:case 214900:case 215600:case 217e3:case 240601:case 240602:case 240900:case 250600:case 270701:case 282001:case 282002:case 281300:case 281400:case 281500:case 281600:case 281700:return!0;default:return!1}else if(t===g.SymbolID.SymbolSet_Atmospheric)switch(i){case 162300:case 162200:case 110102:case 110202:return!0;default:return!1}return!1}static getCMSymbolAnchorPoint(e,t){let i=t.getWidth()/2,n=t.getHeight()/2,s=g.SymbolID.getSymbolSet(e),r=g.SymbolID.getEntityCode(e),o=0;if(s===g.SymbolID.SymbolSet_ControlMeasure){switch(o=c.MSLookup.getInstance().getMSLInfo(e).getDrawRule(),o){case l.DrawRules.POINT1:case l.DrawRules.POINT5:case l.DrawRules.POINT6:case l.DrawRules.POINT7:n=t.getHeight();break;case l.DrawRules.POINT4:n=.8*t.getHeight();break;case l.DrawRules.POINT10:n=.75*t.getHeight();break;case l.DrawRules.POINT13:n=.74*t.getHeight();break;case l.DrawRules.POINT15:i=0;break;case l.DrawRules.POINT16:n=.87*t.getHeight();break;case l.DrawRules.POINT2:280500===r?n=.35*t.getHeight():280400===r?n=.33*t.getHeight():280200===r?n=.7*t.getHeight():280201===r?n=.65*t.getHeight():219e3===r?n=.7*t.getHeight():212500===r&&(n=.4*t.getHeight())}switch(r){case 180400:i=.3341*t.getWidth();break;case 240900:i=.38*t.getWidth();break;case 280201:i=.43*t.getWidth()}}return new a.Point(Math.round(i),Math.round(n))}static isInstallation(e){let t=g.SymbolID.getSymbolSet(e),i=g.SymbolID.getEntity(e);return t===g.SymbolID.SymbolSet_LandInstallation&&11===i}static isAir(e){let t=g.SymbolID.getSymbolSet(e);return g.SymbolID.getEntity(e),t===g.SymbolID.SymbolSet_Air||t===g.SymbolID.SymbolSet_AirMissile||t===g.SymbolID.SymbolSet_SignalsIntelligence_Air}static isSpace(e){let t=g.SymbolID.getSymbolSet(e);return g.SymbolID.getEntity(e),t===g.SymbolID.SymbolSet_Space||t===g.SymbolID.SymbolSet_SpaceMissile||t===g.SymbolID.SymbolSet_SignalsIntelligence_Space}static isLand(e){let t=g.SymbolID.getSymbolSet(e);return g.SymbolID.getEntity(e),t===g.SymbolID.SymbolSet_LandUnit||t===g.SymbolID.SymbolSet_LandCivilianUnit_Organization||t===g.SymbolID.SymbolSet_LandEquipment||t===g.SymbolID.SymbolSet_LandInstallation||t===g.SymbolID.SymbolSet_SignalsIntelligence_Land}static isTaskForce(e){let t=g.SymbolID.getHQTFD(e);return!(t!==g.SymbolID.HQTFD_TaskForce&&t!==g.SymbolID.HQTFD_TaskForce_Headquarters&&t!==g.SymbolID.HQTFD_FeintDummy_TaskForce&&t!==g.SymbolID.HQTFD_FeintDummy_TaskForce_Headquarters||!L.canSymbolHaveModifier(e,o.Modifiers.B_ECHELON))}static isReality(e){let t=g.SymbolID.getContext(e);return t===g.SymbolID.StandardIdentity_Context_Reality||3===t||4===t}static isExercise(e){let t=g.SymbolID.getContext(e);return t===g.SymbolID.StandardIdentity_Context_Exercise||5===t||6===t}static isSimulation(e){let t=g.SymbolID.getContext(e);return t===g.SymbolID.StandardIdentity_Context_Simulation||7===t||8===t}static getEchelonText(e){let t;return e===g.SymbolID.Echelon_Team_Crew?t="":e===g.SymbolID.Echelon_Squad?t="":e===g.SymbolID.Echelon_Section?t="":e===g.SymbolID.Echelon_Platoon_Detachment?t="":e===g.SymbolID.Echelon_Company_Battery_Troop?t="I":e===g.SymbolID.Echelon_Battalion_Squadron?t="II":e===g.SymbolID.Echelon_Regiment_Group?t="III":e===g.SymbolID.Echelon_Brigade?t="X":e===g.SymbolID.Echelon_Division?t="XX":e===g.SymbolID.Echelon_Corps_MEF?t="XXX":e===g.SymbolID.Echelon_Army?t="XXXX":e===g.SymbolID.Echelon_ArmyGroup_Front?t="XXXXX":e===g.SymbolID.Echelon_Region_Theater?t="XXXXXX":e===g.SymbolID.Echelon_Region_Command&&(t="++"),t}static getStandardIdentityModifier(e){g.SymbolID.getStandardIdentity(e);let t,i=g.SymbolID.getContext(e),a=g.SymbolID.getAffiliation(e);return i===g.SymbolID.StandardIdentity_Context_Simulation?t="S":i===g.SymbolID.StandardIdentity_Context_Exercise&&(a===g.SymbolID.StandardIdentity_Affiliation_Suspect_Joker?t="J":a===g.SymbolID.StandardIdentity_Affiliation_Hostile_Faker?t="K":i===g.SymbolID.StandardIdentity_Context_Exercise&&(t="X")),t}static hasRectangleFrame(e){let t=g.SymbolID.getAffiliation(e);return g.SymbolID.getSymbolSet(e)!==g.SymbolID.SymbolSet_ControlMeasure&&(t===g.SymbolID.StandardIdentity_Affiliation_Friend||t===g.SymbolID.StandardIdentity_Affiliation_AssumedFriend||g.SymbolID.getContext(e)===g.SymbolID.StandardIdentity_Context_Exercise&&(t===g.SymbolID.StandardIdentity_Affiliation_Hostile_Faker||t===g.SymbolID.StandardIdentity_Affiliation_Suspect_Joker))}static getUnitRatioHeight(e){let t=g.SymbolID.getVersion(e),i=g.SymbolID.getAffiliation(e),a=0;if(t<g.SymbolID.Version_2525E){let t=g.SymbolID.getSymbolSet(e);if(i===g.SymbolID.StandardIdentity_Affiliation_Hostile_Faker||i===g.SymbolID.StandardIdentity_Affiliation_Suspect_Joker)switch(t){case g.SymbolID.SymbolSet_LandCivilianUnit_Organization:case g.SymbolID.SymbolSet_LandUnit:case g.SymbolID.SymbolSet_LandInstallation:case g.SymbolID.SymbolSet_LandEquipment:case g.SymbolID.SymbolSet_SignalsIntelligence_Land:case g.SymbolID.SymbolSet_Activities:case g.SymbolID.SymbolSet_CyberSpace:a=1.44;break;default:a=1.3}else if(i===g.SymbolID.StandardIdentity_Affiliation_Friend||i===g.SymbolID.StandardIdentity_Affiliation_AssumedFriend)switch(t){case g.SymbolID.SymbolSet_LandCivilianUnit_Organization:case g.SymbolID.SymbolSet_LandUnit:case g.SymbolID.SymbolSet_LandInstallation:case g.SymbolID.SymbolSet_SignalsIntelligence_Land:case g.SymbolID.SymbolSet_Activities:case g.SymbolID.SymbolSet_CyberSpace:a=1;break;default:a=1.2}else if(i===g.SymbolID.StandardIdentity_Affiliation_Neutral)switch(t){case g.SymbolID.SymbolSet_LandCivilianUnit_Organization:case g.SymbolID.SymbolSet_LandUnit:case g.SymbolID.SymbolSet_LandInstallation:case g.SymbolID.SymbolSet_LandEquipment:case g.SymbolID.SymbolSet_SignalsIntelligence_Land:case g.SymbolID.SymbolSet_Activities:case g.SymbolID.SymbolSet_CyberSpace:a=1.1;break;default:a=1.2}else switch(t){case g.SymbolID.SymbolSet_LandCivilianUnit_Organization:case g.SymbolID.SymbolSet_LandUnit:case g.SymbolID.SymbolSet_LandInstallation:case g.SymbolID.SymbolSet_LandEquipment:case g.SymbolID.SymbolSet_SignalsIntelligence_Land:case g.SymbolID.SymbolSet_Activities:case g.SymbolID.SymbolSet_CyberSpace:a=1.44;break;default:a=1.3}}else{let t=u.SVGLookup.getFrameID(e);if(6!==t.length)return 1;i=parseInt(t.substring(2,3));let n=t.charAt(3);if(i===g.SymbolID.StandardIdentity_Affiliation_Hostile_Faker||i===g.SymbolID.StandardIdentity_Affiliation_Suspect_Joker)switch(n){case g.SymbolID.FrameShape_LandUnit:case g.SymbolID.FrameShape_LandInstallation:case g.SymbolID.FrameShape_LandEquipment_SeaSurface:case g.SymbolID.FrameShape_Activity_Event:case g.SymbolID.FrameShape_Cyberspace:a=1.44;break;default:a=1.3}else if(i===g.SymbolID.StandardIdentity_Affiliation_Friend||i===g.SymbolID.StandardIdentity_Affiliation_AssumedFriend)switch(n){case g.SymbolID.FrameShape_LandUnit:case g.SymbolID.FrameShape_LandInstallation:case g.SymbolID.FrameShape_Activity_Event:case g.SymbolID.FrameShape_Cyberspace:a=1;break;default:a=1.2}else if(i===g.SymbolID.StandardIdentity_Affiliation_Neutral)switch(n){case g.SymbolID.FrameShape_LandUnit:case g.SymbolID.FrameShape_LandInstallation:case g.SymbolID.FrameShape_LandEquipment_SeaSurface:case g.SymbolID.FrameShape_Activity_Event:case g.SymbolID.FrameShape_Cyberspace:a=1.1;break;default:a=1.2}else switch(n){case g.SymbolID.FrameShape_LandUnit:case g.SymbolID.FrameShape_LandInstallation:case g.SymbolID.FrameShape_LandEquipment_SeaSurface:case g.SymbolID.FrameShape_Activity_Event:case g.SymbolID.FrameShape_Cyberspace:a=1.44;break;default:a=1.3}}return a}static getUnitRatioWidth(e){let t=g.SymbolID.getVersion(e),i=g.SymbolID.getAffiliation(e),a=0;if(t<g.SymbolID.Version_2525E){let t=g.SymbolID.getSymbolSet(e);if(i===g.SymbolID.StandardIdentity_Affiliation_Hostile_Faker||i===g.SymbolID.StandardIdentity_Affiliation_Suspect_Joker)switch(t){case g.SymbolID.SymbolSet_LandCivilianUnit_Organization:case g.SymbolID.SymbolSet_LandUnit:case g.SymbolID.SymbolSet_LandInstallation:case g.SymbolID.SymbolSet_LandEquipment:case g.SymbolID.SymbolSet_SignalsIntelligence_Land:case g.SymbolID.SymbolSet_Activities:case g.SymbolID.SymbolSet_CyberSpace:a=1.44;break;default:a=1.1}else if(i===g.SymbolID.StandardIdentity_Affiliation_Friend||i===g.SymbolID.StandardIdentity_Affiliation_AssumedFriend)switch(t){case g.SymbolID.SymbolSet_LandCivilianUnit_Organization:case g.SymbolID.SymbolSet_LandUnit:case g.SymbolID.SymbolSet_LandInstallation:case g.SymbolID.SymbolSet_SignalsIntelligence_Land:case g.SymbolID.SymbolSet_Activities:case g.SymbolID.SymbolSet_CyberSpace:a=1.5;break;case g.SymbolID.SymbolSet_LandEquipment:a=1.2;break;default:a=1.1}else if(i===g.SymbolID.StandardIdentity_Affiliation_Neutral)a=1.1;else switch(t){case g.SymbolID.SymbolSet_LandCivilianUnit_Organization:case g.SymbolID.SymbolSet_LandUnit:case g.SymbolID.SymbolSet_LandInstallation:case g.SymbolID.SymbolSet_LandEquipment:case g.SymbolID.SymbolSet_SignalsIntelligence_Land:case g.SymbolID.SymbolSet_Activities:case g.SymbolID.SymbolSet_CyberSpace:a=1.44;break;default:a=1.5}}else{let t=u.SVGLookup.getFrameID(e);if(6!==t.length)return 1;i=parseInt(t.substring(2,3));let n=t.charAt(3);if(i===g.SymbolID.StandardIdentity_Affiliation_Hostile_Faker||i===g.SymbolID.StandardIdentity_Affiliation_Suspect_Joker)switch(n){case g.SymbolID.FrameShape_LandUnit:case g.SymbolID.FrameShape_LandInstallation:case g.SymbolID.FrameShape_LandEquipment_SeaSurface:case g.SymbolID.FrameShape_Activity_Event:case g.SymbolID.FrameShape_Cyberspace:a=1.44;break;default:a=1.1}else if(i===g.SymbolID.StandardIdentity_Affiliation_Friend||i===g.SymbolID.StandardIdentity_Affiliation_AssumedFriend)switch(n){case g.SymbolID.FrameShape_LandUnit:case g.SymbolID.FrameShape_LandInstallation:case g.SymbolID.FrameShape_Activity_Event:case g.SymbolID.FrameShape_Cyberspace:a=1.5;break;case g.SymbolID.FrameShape_LandEquipment_SeaSurface:a=1.2;break;default:a=1.1}else if(i===g.SymbolID.StandardIdentity_Affiliation_Neutral)a=1.1;else switch(n){case g.SymbolID.FrameShape_LandUnit:case g.SymbolID.FrameShape_LandInstallation:case g.SymbolID.FrameShape_LandEquipment_SeaSurface:case g.SymbolID.FrameShape_Activity_Event:case g.SymbolID.FrameShape_Cyberspace:a=1.44;break;default:a=1.5}}return a}}t.SymbolUtilities=L},2493:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Modifier2=void 0;const a=i(8087),n=i(9303),s=i(151),l=i(9441),r=i(6967),o=i(3170),c=i(8276),T=i(4305),u=i(8485),g=i(1207),L=i(7389),d=i(5772),_=i(8101),h=i(960),E=i(8113),A=i(7950),I=i(7300),S=i(9866),y=i(106),f=i(3254),D=i(1059),M=i(8795),P=i(2421),R=i(8678),N=i(5467),C=i(7334);class O{textPath;textID;featureID;text;image;iteration=0;justify=0;type=0;lineFactor=0;static _className="Modifier2";isIntegral=!1;fitsMBR=!0;constructor(){this.textPath=new Array(2)}static toEnd=1;static aboveMiddle=2;static area=3;static screen=4;static aboveEnd=5;static aboveMiddlePerpendicular=6;static aboveStartInside=7;static aboveEndInside=8;static areaImage=9;static fillAlphaCanObscureText=50;static DoublesBack(e,t,i){let a=!0;try{let n=Math.atan2(i.y-t.y,i.x-t.x),s=Math.atan2(e.y-t.y,e.x-t.x);Math.abs(s-n)>.1&&(a=!1)}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"DoublesBack",new y.RendererException("Failed inside DoublesBack",e))}return a}static GetCenterLabel(e){let t="";try{switch(e.get_LineType()){case _.TacticalLines.SHIP_AOI_RECTANGULAR:case _.TacticalLines.SHIP_AOI_CIRCULAR:t="AOI";break;case _.TacticalLines.DEFENDED_AREA_RECTANGULAR:case _.TacticalLines.DEFENDED_AREA_CIRCULAR:t="DA";break;case _.TacticalLines.NOTACK:t="N";break;case _.TacticalLines.LAUNCH_AREA:t="LA";break;case _.TacticalLines.SL:t="SL";break;case _.TacticalLines.TC:t="TC";break;case _.TacticalLines.AARROZ:t="AARROZ";break;case _.TacticalLines.UAROZ:t="UAROZ";break;case _.TacticalLines.WEZ:t="WEZ";break;case _.TacticalLines.FEZ:t="FEZ";break;case _.TacticalLines.JEZ:t="JEZ";break;case _.TacticalLines.IFF_OFF:t="IFF OFF";break;case _.TacticalLines.IFF_ON:t="IFF ON";break;case _.TacticalLines.BCL_REVD:case _.TacticalLines.BCL:t="BCL";break;case _.TacticalLines.ICL:t="ICL";break;case _.TacticalLines.FEBA:t="FEBA";break;case _.TacticalLines.BDZ:t="BDZ";break;case _.TacticalLines.JTAA:t="JTAA";break;case _.TacticalLines.SAA:t="SAA";break;case _.TacticalLines.SGAA:t="SGAA";break;case _.TacticalLines.ASSAULT:t="ASLT";break;case _.TacticalLines.SAAFR:t="SAAFR";break;case _.TacticalLines.AC:t="AC";break;case _.TacticalLines.SECURE:case _.TacticalLines.SEIZE:t="S";break;case _.TacticalLines.RETAIN:t="R";break;case _.TacticalLines.PENETRATE:t="P";break;case _.TacticalLines.OCCUPY:t="O";break;case _.TacticalLines.ISOLATE:t="I";break;case _.TacticalLines.FIX:t="F";break;case _.TacticalLines.DISRUPT:t="D";break;case _.TacticalLines.CANALIZE:case _.TacticalLines.CLEAR:t="C";break;case _.TacticalLines.BREACH:case _.TacticalLines.BYPASS:t="B";break;case _.TacticalLines.CORDONKNOCK:t="C/K";break;case _.TacticalLines.CORDONSEARCH:t="C/S";break;case _.TacticalLines.UXO:t="UXO";break;case _.TacticalLines.RETIRE:t="R";break;case _.TacticalLines.FPOL:t="P(F)";break;case _.TacticalLines.RPOL:t="P(R)";break;case _.TacticalLines.BRDGHD:case _.TacticalLines.BRDGHD_GE:t=P.SymbolID.getVersion(e.get_SymbolId())>=P.SymbolID.Version_2525E?"BL":"B";break;case _.TacticalLines.HOLD:case _.TacticalLines.HOLD_GE:t="HL";break;case _.TacticalLines.PL:t="PL";break;case _.TacticalLines.LL:t="LL";break;case _.TacticalLines.EWL:t="EWL";break;case _.TacticalLines.SCREEN:t="S";break;case _.TacticalLines.COVER:t="C";break;case _.TacticalLines.GUARD:t="G";break;case _.TacticalLines.RIP:t="RIP";break;case _.TacticalLines.WITHDRAW:t="W";break;case _.TacticalLines.WDRAWUP:t="WP";break;case _.TacticalLines.CATK:case _.TacticalLines.CATKBYFIRE:t="CATK";break;case _.TacticalLines.FLOT:t="FLOT";break;case _.TacticalLines.LC:t="LC";break;case _.TacticalLines.ASSY:t="AA";break;case _.TacticalLines.EA:t="EA";break;case _.TacticalLines.DZ:t="DZ";break;case _.TacticalLines.EZ:t="EZ";break;case _.TacticalLines.LZ:t="LZ";break;case _.TacticalLines.LAA:t="LAA";break;case _.TacticalLines.PZ:t="PZ";break;case _.TacticalLines.MRR:t="MRR";break;case _.TacticalLines.SC:t="SC";break;case _.TacticalLines.LLTR:t="LLTR";break;case _.TacticalLines.ROZ:t="ROZ";break;case _.TacticalLines.FAADZ:t="SHORADEZ";break;case _.TacticalLines.HIDACZ:t="HIDACZ";break;case _.TacticalLines.MEZ:t="MEZ";break;case _.TacticalLines.LOMEZ:t="LOMEZ";break;case _.TacticalLines.HIMEZ:t="HIMEZ";break;case _.TacticalLines.WFZ:t="WFZ";break;case _.TacticalLines.MINED:case _.TacticalLines.FENCED:t="M";break;case _.TacticalLines.PNO:t="(P)";break;case _.TacticalLines.OBJ:t="OBJ";break;case _.TacticalLines.NAI:t="NAI";break;case _.TacticalLines.TAI:t="TAI";break;case _.TacticalLines.BASE_CAMP_REVD:case _.TacticalLines.BASE_CAMP:t="BC";break;case _.TacticalLines.GUERILLA_BASE_REVD:case _.TacticalLines.GUERILLA_BASE:t="GB";break;case _.TacticalLines.LINTGTS:t="SMOKE";break;case _.TacticalLines.FPF:t="FPF";break;case _.TacticalLines.ATKPOS:t="ATK";break;case _.TacticalLines.FCL:t="FCL";break;case _.TacticalLines.LOA:t="LOA";break;case _.TacticalLines.LOD:t="LD";break;case _.TacticalLines.PLD:t="PLD";break;case _.TacticalLines.DELAY:t="D";break;case _.TacticalLines.RELEASE:t="RL";break;case _.TacticalLines.HOL:t="HOL";break;case _.TacticalLines.BHL:t="BHL";break;case _.TacticalLines.SMOKE:t="SMOKE";break;case _.TacticalLines.NFL:t="NFL";break;case _.TacticalLines.MFP:t="MFP";break;case _.TacticalLines.FSCL:t="FSCL";break;case _.TacticalLines.CFL:t="CFL";break;case _.TacticalLines.RFL:t="RFL";break;case _.TacticalLines.AO:t="AO";break;case _.TacticalLines.BOMB:t="BOMB";break;case _.TacticalLines.TGMF:t="TGMF";break;case _.TacticalLines.FSA:case _.TacticalLines.FSA_CIRCULAR:case _.TacticalLines.FSA_RECTANGULAR:t="FSA";break;case _.TacticalLines.ACA:case _.TacticalLines.ACA_CIRCULAR:case _.TacticalLines.ACA_RECTANGULAR:t="ACA";break;case _.TacticalLines.FFA:case _.TacticalLines.FFA_CIRCULAR:case _.TacticalLines.FFA_RECTANGULAR:t="FFA";break;case _.TacticalLines.NFA:case _.TacticalLines.NFA_CIRCULAR:case _.TacticalLines.NFA_RECTANGULAR:t="NFA";break;case _.TacticalLines.RFA:case _.TacticalLines.RFA_CIRCULAR:case _.TacticalLines.RFA_RECTANGULAR:t="RFA";break;case _.TacticalLines.ATI:case _.TacticalLines.ATI_CIRCULAR:case _.TacticalLines.ATI_RECTANGULAR:t="ATI ZONE";break;case _.TacticalLines.PAA:case _.TacticalLines.PAA_CIRCULAR:case _.TacticalLines.PAA_RECTANGULAR:t="PAA";break;case _.TacticalLines.CFFZ:case _.TacticalLines.CFFZ_CIRCULAR:case _.TacticalLines.CFFZ_RECTANGULAR:t="CFF ZONE";break;case _.TacticalLines.CFZ:case _.TacticalLines.CFZ_CIRCULAR:case _.TacticalLines.CFZ_RECTANGULAR:t="CF ZONE";break;case _.TacticalLines.SENSOR:case _.TacticalLines.SENSOR_CIRCULAR:case _.TacticalLines.SENSOR_RECTANGULAR:t="SENSOR ZONE";break;case _.TacticalLines.CENSOR:case _.TacticalLines.CENSOR_CIRCULAR:case _.TacticalLines.CENSOR_RECTANGULAR:t="CENSOR ZONE";break;case _.TacticalLines.DA:case _.TacticalLines.DA_CIRCULAR:case _.TacticalLines.DA_RECTANGULAR:t="DA";break;case _.TacticalLines.ZOR:case _.TacticalLines.ZOR_CIRCULAR:case _.TacticalLines.ZOR_RECTANGULAR:t="ZOR";break;case _.TacticalLines.TBA:case _.TacticalLines.TBA_CIRCULAR:case _.TacticalLines.TBA_RECTANGULAR:t="TBA";break;case _.TacticalLines.TVAR:case _.TacticalLines.TVAR_CIRCULAR:case _.TacticalLines.TVAR_RECTANGULAR:t="TVAR";break;case _.TacticalLines.KILLBOXBLUE:case _.TacticalLines.KILLBOXBLUE_CIRCULAR:case _.TacticalLines.KILLBOXBLUE_RECTANGULAR:t="BKB";break;case _.TacticalLines.KILLBOXPURPLE:case _.TacticalLines.KILLBOXPURPLE_CIRCULAR:case _.TacticalLines.KILLBOXPURPLE_RECTANGULAR:t="PKB";break;case _.TacticalLines.MSR:case _.TacticalLines.MSR_ONEWAY:case _.TacticalLines.MSR_TWOWAY:case _.TacticalLines.MSR_ALT:t="MSR";break;case _.TacticalLines.ASR:case _.TacticalLines.ASR_ONEWAY:case _.TacticalLines.ASR_TWOWAY:case _.TacticalLines.ASR_ALT:t="ASR";break;case _.TacticalLines.ROUTE:case _.TacticalLines.ROUTE_ONEWAY:case _.TacticalLines.ROUTE_ALT:t="ROUTE";break;case _.TacticalLines.LDLC:t="LD/LC";break;case _.TacticalLines.AIRHEAD:t="AIRHEAD LINE";break;case _.TacticalLines.BLOCK:case _.TacticalLines.BEARING:t="B";break;case _.TacticalLines.BEARING_J:t="J";break;case _.TacticalLines.BEARING_RDF:t="RDF";break;case _.TacticalLines.ELECTRO:t="E";break;case _.TacticalLines.BEARING_EW:t="EW";break;case _.TacticalLines.ACOUSTIC:case _.TacticalLines.ACOUSTIC_AMB:t="A";break;case _.TacticalLines.TORPEDO:t="T";break;case _.TacticalLines.OPTICAL:t="O";break;case _.TacticalLines.DHA:t="DHA";break;case _.TacticalLines.FARP:t="FARP";break;case _.TacticalLines.BSA:t="BSA";break;case _.TacticalLines.DSA:t="DSA";break;case _.TacticalLines.CSA:t="CSA";break;case _.TacticalLines.RSA:t="RSA";break;case _.TacticalLines.CONTAIN:t="C";break;case _.TacticalLines.OBSFAREA:t="FREE"}}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"GetCenterLabel",new y.RendererException("Failed inside GetCenterLabel",e))}return t}get_TextPath(){return this.textPath}set_TextPath(e){this.textPath=e}set_IsIntegral(e){this.isIntegral=e}get_IsIntegral(){return this.isIntegral}static AddOffsetModifier(e,t,i,a,n,s,l,r){if(null==r||null==e.Pixels||e.Pixels.length<2||s>=e.Pixels.length)return;let o=e.Pixels[n],c=e.Pixels[s];"left"===r?(o.x-=l,c.x-=l):(o.x+=l,c.x+=l),O.AddModifier2(e,t,i,a,o,c,!1)}static AddModifier(e,t,i,a,n,s){null==e.Pixels||e.Pixels.length<2||O.AddModifier2(e,t,i,a,n,s,!1)}static AddModifier2(e,t,i,a,n,s,l=!1,r){try{if(null==t||""===t)return;let o=new O;o.set_IsIntegral(l),o.text=t,o.type=i,o.lineFactor=a,o.textPath[0]=n,o.textPath[1]=s,o.textID=r,e.modifiers.push(o)}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"AddModifier",new y.RendererException("Failed inside AddModifier",e))}}static AddIntegralModifier(e,t,i,a,n,s,l=!0,r=null){null==e.Pixels||0===e.Pixels.length||s>=e.Pixels.length||O.AddIntegralAreaModifier(e,t,i,a,e.Pixels[Math.trunc(n)],e.Pixels[Math.trunc(s)],l,r)}static AddAreaModifier(e,t,i,a,n,s,l){l?O.AddIntegralAreaModifier(e,t,i,a,n,s,!0,l):O.AddIntegralAreaModifier(e,t,i,a,n,s,!0)}static AddIntegralAreaModifier(e,t,i,a,n,s,l,r){void 0!==n&&void 0!==s&&O.AddModifier2(e,t,i,a,n,s,l,r)}static AddImageModifier(e,t,i,a,n,s){try{if(null==a||null==n)return;let l,r=e.get_SymbolId(),o=new Map,c=new Map;c.set(S.MilStdAttributes.PixelSize,e.getIconSize().toString());let T=A.EntityCode.getSymbolForContaminationArea(P.SymbolID.getEntityCode(r)),u=P.SymbolID.getModifier1(r),g=R.clsUtility.GetLinetypeFromString(r);if(T>0){c.set(S.MilStdAttributes.OutlineSymbol,"true"),c.set(S.MilStdAttributes.FillColor,D.RendererUtilities.colorToHexString(e.get_FillColor(),!0)),c.set(S.MilStdAttributes.LineColor,D.RendererUtilities.colorToHexString(e.get_LineColor(),!0));let t=P.SymbolID.setEntityCode(r,T);t=P.SymbolID.setHQTFD(t,0),l=C.SinglePointSVGRenderer.getInstance().RenderSP(t,o,c)}else if(g===_.TacticalLines.DEPICT||g===_.TacticalLines.MINED||g===_.TacticalLines.FENCED||g===_.TacticalLines.MINE_LINE)(u<13||u>50)&&(u=13,r=P.SymbolID.setModifier1(r,u)),e.get_KeepUnitRation()&&c.set(S.MilStdAttributes.PixelSize,(1.5*e.getIconSize()).toString()),c.set(S.MilStdAttributes.OutlineSymbol,"true"),l=C.SinglePointSVGRenderer.getInstance().RenderModifier(r,c);else if(g===_.TacticalLines.LAA&&u>0)c.set(S.MilStdAttributes.OutlineSymbol,"true"),c.set(S.MilStdAttributes.FillColor,D.RendererUtilities.colorToHexString(e.get_FillColor(),!0)),c.set(S.MilStdAttributes.LineColor,D.RendererUtilities.colorToHexString(e.get_LineColor(),!0)),e.get_KeepUnitRation()&&c.set(S.MilStdAttributes.PixelSize,(1.5*e.getIconSize()).toString()),l=C.SinglePointSVGRenderer.getInstance().RenderModifier(r,c);else if(g===_.TacticalLines.ANCHORAGE_LINE||g===_.TacticalLines.ANCHORAGE_AREA){c.set(S.MilStdAttributes.OutlineSymbol,"false");let e=P.SymbolID.setEntityCode(r,A.EntityCode.EntityCode_AnchoragePoint);l=C.SinglePointSVGRenderer.getInstance().RenderSP(e,o,c)}if(null==l)return;let L=new O;L.set_IsIntegral(s),L.image=l,L.type=t,L.lineFactor=i,L.textPath[0]=a,L.textPath[1]=n,e.modifiers.push(L)}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"AddAreaModifier",new y.RendererException("Failed inside AddAreaModifier",e))}}static GetMBR(e,t,i,a,n){try{let s=0,l=0,r=0;t.x=e.Pixels[0].x,t.y=e.Pixels[0].y,i.x=e.Pixels[0].x,i.y=e.Pixels[0].y,n.x=e.Pixels[0].x,n.y=e.Pixels[0].y,a.x=e.Pixels[0].x,a.y=e.Pixels[0].y;let o=e.Pixels.length;for(s=1;s<o;s++)l=e.Pixels[s].x,r=e.Pixels[s].y,l<n.x&&(n.x=l,t.x=l),l>a.x&&(a.x=l,i.x=l),r>n.y&&(n.y=r,a.y=r),r<t.y&&(t.y=r,i.y=r)}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"GetMBR",new y.RendererException("Failed inside GetMBR",e))}}static GetBoundarySegmentTooShort(e,t,i){let a=!1;try{t.setFont(e.get_Font());let n,s=t.getFontMetrics(),l=0,r=e.Pixels[i],o=e.Pixels[i+1],c=g.lineutility.CalcDistanceDouble(r,o);n=e.get_EchelonSymbol(),null!=n&&(l=s.stringWidth(n));let T=0,u=0;null!=e.get_Name()&&e.get_Name().length>0&&(T=s.stringWidth(e.get_Name())),null!=e.get_T1()&&e.get_T1().length>0&&(u=s.stringWidth(e.get_T1()));let L=l;L<T&&(L=T),L<u&&(L=u),e.get_LineType()===_.TacticalLines.BOUNDARY&&c<1.25*L&&(a=!0)}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"GetBoundaryLineTooShort",new y.RendererException("Failed inside GetBoundaryLineTooShort",e))}return a}static AddBoundaryModifiers(e,t,i){try{let a,n,s=0,l=1,r=!1,o=0,c=0,T=!1,u="";""!==e.get_AS()&&(u=" ("+e.get_AS()+")"),"cpof3d"===e.get_Client()&&(l=.85);let d=O.getVisibleMiddleSegment(e,i);for(s=d;s===d;s++)a=e.Pixels[s],n=e.Pixels[s+1],a.x<n.x?(o=-1.3,c=1):a.x===n.x?n.y<a.y?(o=-1,c=1):(o=1,c=-1):(o=1,c=-1.3),T=O.GetBoundarySegmentTooShort(e,t,s),!1===T&&(r=!0,O.AddIntegralModifier(e,e.get_Name()+u,O.aboveMiddle,o*l,s,s+1,!0),null!=e.get_EchelonSymbol()&&""!==e.get_EchelonSymbol()&&O.AddIntegralModifier(e,e.get_EchelonSymbol(),O.aboveMiddle,-.2*l,s,s+1,!0),O.AddIntegralModifier(e,e.get_T1(),O.aboveMiddle,c*l,s,s+1,!0));if(!1===r){a=new L.POINT2,n=new L.POINT2;let i=e.get_EchelonSymbol(),s=t.getFontMetrics(),r=0;null!=i&&(r=1.5*s.stringWidth(i));let T=g.lineutility.CalcDistanceDouble(e.Pixels[d],e.Pixels[d+1]);t.setFont(e.get_Font());let _,h=g.lineutility.MidPointDouble(e.Pixels[d],e.Pixels[d+1],0);T<r?(_=g.lineutility.ExtendAlongLineDouble(h,e.Pixels[d],r/2),a.x=_.x,a.y=_.y,_=g.lineutility.ExtendAlongLineDouble(h,e.Pixels[d+1],r/2)):(_=e.Pixels[d],a.x=_.x,a.y=_.y,_=e.Pixels[d+1]),n.x=_.x,n.y=_.y,O.AddIntegralModifier(e,e.get_Name()+u,O.aboveMiddle,o*l,d,d+1,!0),null!=i&&""!==i&&O.AddIntegralModifier(e,i,O.aboveMiddle,-.202*l,d,d+1,!0),O.AddIntegralModifier(e,e.get_T1(),O.aboveMiddle,c*l,d,d+1,!0)}}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"AddBoundaryModifiers",new y.RendererException("Failed inside AddBoundaryModifiers",e))}}static AddNameAboveDTG(e,t){try{let i=1;"cpof3d"===e.get_Client()&&(i=.667);let a=O.GetCenterLabel(e),n=new L.POINT2(e.Pixels[0]),s=new L.POINT2(e.Pixels[1]),l=e.Pixels.length-1,r=e.Pixels.length-2,o=new L.POINT2(e.Pixels[l]),c=new L.POINT2(e.Pixels[r]);O.shiftModifierPath(e,n,s,o,c);let T=t.stringWidth(a+" "+e.get_Name());O.AddIntegralAreaModifier(e,a+" "+e.get_Name(),O.toEnd,0,n,s,!1),s=g.lineutility.ExtendAlongLineDouble(e.Pixels[0],e.Pixels[1],-1.5*T),O.AddModifier2(e,e.get_DTG(),O.aboveMiddle,.7*i,n,s,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*i,n,s,!1),O.AddIntegralAreaModifier(e,a+" "+e.get_Name(),O.toEnd,0,o,c,!1),n=e.Pixels[l],s=g.lineutility.ExtendAlongLineDouble(e.Pixels[l],e.Pixels[r],-1.5*T),O.AddModifier2(e,e.get_DTG(),O.aboveMiddle,.7*i,n,s,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*i,n,s,!1)}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"AddNameAboveDTG",new y.RendererException("Failed inside AddNameAboveDTG",e))}}static shiftModifierPath(e,t,i,a,n){try{let s,l,r=-1;switch(e.get_LineType()){case _.TacticalLines.BOUNDARY:for(let t=0;t<e.Pixels.length-1;t++)s=e.Pixels[t],l=e.Pixels[t+1],Math.abs(s.x-l.x)<1&&(l.x+=r,r=-r);break;case _.TacticalLines.PDF:case _.TacticalLines.PL:case _.TacticalLines.FEBA:case _.TacticalLines.LOA:case _.TacticalLines.LOD:case _.TacticalLines.RELEASE:case _.TacticalLines.HOL:case _.TacticalLines.BHL:case _.TacticalLines.LDLC:case _.TacticalLines.LL:case _.TacticalLines.EWL:case _.TacticalLines.FCL:case _.TacticalLines.PLD:case _.TacticalLines.NFL:case _.TacticalLines.FLOT:case _.TacticalLines.LC:case _.TacticalLines.HOLD:case _.TacticalLines.BRDGHD:case _.TacticalLines.HOLD_GE:case _.TacticalLines.BRDGHD_GE:null!=t&&null!=i&&Math.abs(t.x-i.x)<1&&(i.x+=1),null!=a&&null!=n&&Math.abs(n.x-a.x)<1&&(n.x+=1);break;default:return}}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"shiftModifierPath",new y.RendererException("Failed inside shiftModifierPath",e))}}static addModifierOnLine(e,t,i,a=!1){if(null!=e&&0!==e.length)try{if(f.RendererSettings.getInstance().getTwoLabelOnly()||a){if(t.Pixels.length>0){let i=g.lineutility.MidPointDouble(t.Pixels[0],t.Pixels[1],0),a=g.lineutility.MidPointDouble(t.Pixels[0],t.Pixels[1],0);for(let e=1;e<t.Pixels.length-1;e++){let n=g.lineutility.MidPointDouble(t.Pixels[e],t.Pixels[e+1],0);n.x<=i.x&&(i=n),n.x>=a.x&&(a=n)}i!==a&&O.AddAreaModifier(t,e,O.aboveMiddle,0,i,i),O.AddAreaModifier(t,e,O.aboveMiddle,0,a,a)}}else{let a=i.getFontMetrics().stringWidth(e),n=!1;for(let i=0;i<t.Pixels.length-1;i++){let s=t.Pixels[i],l=t.Pixels[i+1];g.lineutility.CalcDistanceDouble(s,l)>1.5*a&&(n=!0,O.AddIntegralAreaModifier(t,e,O.aboveMiddle,0,s,l,!1))}if(!n){let i=t.Pixels.length/2-1,a=t.Pixels.length-2;t.Pixels.length>3&&(i=t.Pixels.length/4,a=3*t.Pixels.length/4),0!==i&&O.AddIntegralModifier(t,e,O.aboveMiddle,0,i,i+1,!1),O.AddIntegralModifier(t,e,O.aboveMiddle,0,a,a+1,!1)}}}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"addModifierOnLine",new y.RendererException("Failed inside addModifierOnLine",e))}}static addNModifier(e,t){e.isHostile()&&O.addModifierOnLine(e.get_N(),e,t,!0)}static addModifierBottomSegment(e,t){let i=0,a=e.Pixels[i].y+e.Pixels[i+1].y;for(let t=1;t<e.Pixels.length-1;t++)e.Pixels[t].y+e.Pixels[t+1].y>a&&(i=t,a=e.Pixels[i].y+e.Pixels[i+1].y);O.AddIntegralModifier(e,t,O.aboveMiddle,0,i,i+1,!1)}static addModifierTopSegment(e,t){let i=0,a=e.Pixels[i].y+e.Pixels[i+1].y;for(let t=1;t<e.Pixels.length-1;t++)e.Pixels[t].y+e.Pixels[t+1].y<a&&(i=t,a=e.Pixels[i].y+e.Pixels[i+1].y);O.AddIntegralModifier(e,t,O.aboveMiddle,0,i,i+1,!1)}static addDTG(e,t,i,a,n,s,l){if(null==n||null==s)return;let r=0;if(n.x===s.x&&n.y===s.y){let t=new L.POINT2,i=new L.POINT2,a=new L.POINT2,n=new L.POINT2;O.GetMBR(e,t,i,a,n),r=g.lineutility.CalcDistanceDouble(t,i)}else r=g.lineutility.CalcDistanceDouble(n,s);let o="";null!=e.get_DTG()&&null!=e.get_DTG1()&&e.get_DTG().length>0&&e.get_DTG1().length>0&&(o=" - ");let c=e.get_DTG()+o+e.get_DTG1();l.stringWidth(c)<r?O.AddModifier(e,c,t,i,n,s):(O.AddModifier(e,e.get_DTG()+o,t,Math.min(i,a),n,s),O.AddModifier(e,e.get_DTG1(),t,Math.max(i,a),n,s))}static getVisibleMiddleSegment(e,t){let i=-1;try{let a,n,s,l,c,T,u=0,L=e.get_LineType();i=Math.trunc((e.Pixels.length+1)/2-1);let d=!1;if(null==t)return i;if(t instanceof Array){s=!1,a=new r.Polygon;let e=t;for(let t=0;t<e.length;t++){let i=e[t].getX(),n=e[t].getY();a.addPoint(i,n)}}else{if(!(t instanceof o.Rectangle2D))return i;s=!0,n=t}for(let t=i;t<e.Pixels.length-1;t++)if(l=e.Pixels[t],c=e.Pixels[t+1],u=g.lineutility.CalcDistanceDouble(l,c),!(u<5)){if(t>0&&L===_.TacticalLines.BOUNDARY){if(null==T&&(T=e.Pixels[t-1]),O.DoublesBack(T,l,c))continue;T=null}if(s){if(n.contains(l.x,l.y)||n.contains(c.x,c.y)){i=t,d=!0;break}}else if(a.contains(l.x,l.y)||a.contains(c.x,c.y)){i=t,d=!0;break}}if(!d)for(let t=i;t>0;t--)if(l=e.Pixels[t],c=e.Pixels[t-1],u=g.lineutility.CalcDistanceDouble(l,c),!(u<5)){if(L===_.TacticalLines.BOUNDARY){if(null==T&&(T=e.Pixels[t-1]),O.DoublesBack(T,l,c))continue;T=null}if(s){if(n.contains(l.x,l.y)||n.contains(c.x,c.y)){i=t-1,d=!0;break}}else if(a.contains(l.x,l.y)||a.contains(c.x,c.y)){i=t-1,d=!0;break}}d||(i=Math.trunc(e.Pixels.length/2-1))}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"getMiddleSegment",new y.RendererException("Failed inside getMiddleSegment",e))}return i}static removeModifier(e,t){try{let i,a=0,n=e.Pixels.length;for(a=0;a<n;a++)if(i=e.modifiers[a],null!=i.textID&&i.textID.toUpperCase()===t.toUpperCase()){e.modifiers.splice(a,1);break}}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"removeModifier",new y.RendererException("Failed inside removeModifier",e))}}static RemoveModifiers(e,t,i,a){try{if("cpof2d"!==e.get_Client().toLowerCase()&&"cpof3d"!==e.get_Client().toLowerCase())return;let n,s,l=0;switch(e.get_LineType()){case _.TacticalLines.RECTANGULAR:case _.TacticalLines.CUED_ACQUISITION:case _.TacticalLines.ACA_RECTANGULAR:case _.TacticalLines.FFA_RECTANGULAR:case _.TacticalLines.NFA_RECTANGULAR:case _.TacticalLines.RFA_RECTANGULAR:case _.TacticalLines.KILLBOXBLUE_RECTANGULAR:case _.TacticalLines.KILLBOXPURPLE_RECTANGULAR:case _.TacticalLines.FSA_RECTANGULAR:case _.TacticalLines.SHIP_AOI_RECTANGULAR:case _.TacticalLines.DEFENDED_AREA_RECTANGULAR:case _.TacticalLines.ATI_RECTANGULAR:case _.TacticalLines.CFFZ_RECTANGULAR:case _.TacticalLines.SENSOR_RECTANGULAR:case _.TacticalLines.CENSOR_RECTANGULAR:case _.TacticalLines.DA_RECTANGULAR:case _.TacticalLines.CFZ_RECTANGULAR:case _.TacticalLines.ZOR_RECTANGULAR:case _.TacticalLines.TBA_RECTANGULAR:case _.TacticalLines.TVAR_RECTANGULAR:case _.TacticalLines.ACA_CIRCULAR:case _.TacticalLines.CIRCULAR:case _.TacticalLines.BDZ:case _.TacticalLines.FSA_CIRCULAR:case _.TacticalLines.NOTACK:case _.TacticalLines.ATI_CIRCULAR:case _.TacticalLines.CFFZ_CIRCULAR:case _.TacticalLines.SENSOR_CIRCULAR:case _.TacticalLines.CENSOR_CIRCULAR:case _.TacticalLines.DA_CIRCULAR:case _.TacticalLines.CFZ_CIRCULAR:case _.TacticalLines.ZOR_CIRCULAR:case _.TacticalLines.TBA_CIRCULAR:case _.TacticalLines.TVAR_CIRCULAR:case _.TacticalLines.FFA_CIRCULAR:case _.TacticalLines.NFA_CIRCULAR:case _.TacticalLines.RFA_CIRCULAR:case _.TacticalLines.KILLBOXBLUE_CIRCULAR:case _.TacticalLines.KILLBOXPURPLE_CIRCULAR:{if(null==e.modifiers||0===e.modifiers.length||1!==a)return;n=new r.Polygon;let t=e.Pixels.length;for(l=0;l<t;l++)n.addPoint(e.Pixels[l].x,e.Pixels[l].y);break}default:{if(!1===R.clsUtility.isClosedPolygon(e.get_LineType())||0!==a)return;if(null==e.modifiers||0===e.modifiers.length)return;n=new r.Polygon;let t=e.Pixels.length;for(l=0;l<t;l++)n.addPoint(e.Pixels[l].x,e.Pixels[l].y)}}s=e.get_Font(),null==s&&(s=t.getFont()),t.setFont(s);let o,c,T,u,L,d=t.getFontMetrics(),h=0,E=0,A=!0,I=!0,S=!0,y=!0,f=!0,D=!0,M="",P="",N=0,C=0,p=0,x=0,b=0,w=0,m=0,F=e.modifiers.length;for(l=0;l<F;l++)if(o=e.modifiers[l],null!=o.textID&&0!==o.textID.length&&(M=o.textID,N=o.lineFactor,i&&(N=-N),P=o.text,null!=P&&""!==P))if(h=d.stringWidth(P)+1,E=s.getSize(),o.type===O.area)c=o.textPath[0],x=c.x,b=c.y,C=x-Math.trunc(h/2),p=b+Math.trunc(E/2)+Math.trunc(1.25*N*E),w=x+Math.trunc(h/2),m=b+Math.trunc(E/2)+Math.trunc(1.25*N*E),n.contains(C,p)&&n.contains(w,m)?o.fitsMBR=!0:o.fitsMBR=!1;else if(o.type===O.aboveMiddle){c=o.textPath[0],T=o.textPath[1];let e=g.lineutility.MidPointDouble(c,T,0);c=g.lineutility.ExtendAlongLineDouble(e,c,h/2),T=g.lineutility.ExtendAlongLineDouble(e,T,h/2),u=N>=0?g.lineutility.ExtendDirectedLine(e,c,c,3,Math.abs(N*E)):g.lineutility.ExtendDirectedLine(e,c,c,2,Math.abs(N*E)),L=N>=0?g.lineutility.ExtendDirectedLine(e,T,T,3,Math.abs(N*E)):g.lineutility.ExtendDirectedLine(e,T,T,2,Math.abs(N*E)),x=u.x,b=u.y,w=L.x,m=L.y,n.contains(x,b)&&n.contains(w,m)?o.fitsMBR=!0:o.fitsMBR=!1}else o.fitsMBR=!0;for(F=e.modifiers.length,l=0;l<F;l++)o=e.modifiers[l],null!=o.textID&&0!==o.textID.length&&!1===o.fitsMBR&&("W"===o.textID.toUpperCase()?A=!1:"W1"===o.textID.toUpperCase()?I=!1:"W+W1"===o.textID.toUpperCase()?S=!1:"H"===o.textID.toUpperCase()?y=!1:"H1"===o.textID.toUpperCase()?f=!1:"H2"===o.textID.toUpperCase()&&(D=!1));!1!==A&&!1!==I||(O.removeModifier(e,"W"),O.removeModifier(e,"W1")),!1===S&&O.removeModifier(e,"W+W1"),!1!==y&&!1!==f&&!1!==D||(O.removeModifier(e,"H"),O.removeModifier(e,"H1"),O.removeModifier(e,"H2"))}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"RemoveModifeirs",new y.RendererException("Failed inside RemoveModifiers",e))}}static getPixelsMiddleSegment(e,t,i,a){try{if(e.get_LineType()!==_.TacticalLines.CFL)return;let n,s,l,r,o,c=0,T=0,u=0,L=0,d=0,h=e.Pixels.length;for(T=0;T<h-1;T++)u=g.lineutility.CalcDistanceDouble(e.Pixels[T],e.Pixels[T+1]),c+=u;for(L=c/2,c=0,T=0;T<h-1;T++)if(u=g.lineutility.CalcDistanceDouble(e.Pixels[T],e.Pixels[T+1]),c+=u,c>=L){d=c-L,n=e.Pixels[T],s=e.Pixels[T+1],o=g.lineutility.ExtendAlongLineDouble2(s,n,d),l=g.lineutility.ExtendAlongLineDouble2(o,n,t/2),r=g.lineutility.ExtendAlongLineDouble2(o,s,t/2),i.x=l.x,i.y=l.y,a.x=r.x,a.y=r.y;break}}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"getPixelsMidpoint",new y.RendererException("Failed inside getPixelsMidpoint",e))}}static getChange1Height(e){let t=0;try{switch(e.get_LineType()){case _.TacticalLines.FSA_RECTANGULAR:case _.TacticalLines.SHIP_AOI_RECTANGULAR:case _.TacticalLines.DEFENDED_AREA_RECTANGULAR:case _.TacticalLines.FFA_RECTANGULAR:case _.TacticalLines.ACA_RECTANGULAR:case _.TacticalLines.NFA_RECTANGULAR:case _.TacticalLines.RFA_RECTANGULAR:case _.TacticalLines.ATI_RECTANGULAR:case _.TacticalLines.CFFZ_RECTANGULAR:case _.TacticalLines.SENSOR_RECTANGULAR:case _.TacticalLines.CENSOR_RECTANGULAR:case _.TacticalLines.DA_RECTANGULAR:case _.TacticalLines.CFZ_RECTANGULAR:case _.TacticalLines.ZOR_RECTANGULAR:case _.TacticalLines.TBA_RECTANGULAR:case _.TacticalLines.TVAR_RECTANGULAR:case _.TacticalLines.KILLBOXBLUE_RECTANGULAR:case _.TacticalLines.KILLBOXPURPLE_RECTANGULAR:break;default:return 0}let i=e.Pixels[0].x,a=e.Pixels[0].y,n=e.Pixels[1].x,s=e.Pixels[1].y,l=n-i,r=s-a;t=Math.sqrt(l*l+r*r)}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"getChange1Height",new y.RendererException("Failed inside getChange1Height",e))}return t}static scaleModifiers(e){try{if(!1===f.RendererSettings.getInstance().getAutoCollapseModifiers())return;if("ge"!==e.get_Client().toLowerCase())return;if(null==e.modifiers||0===e.modifiers.length)return;let t=e.get_LineType(),i=R.clsUtility.isClosedPolygon(t),a=R.clsUtility.IsChange1Area(t);if(!i&&!a)return;switch(t){case _.TacticalLines.PAA_CIRCULAR:case _.TacticalLines.PAA_RECTANGULAR:case _.TacticalLines.RECTANGULAR_TARGET:case _.TacticalLines.RANGE_FAN:case _.TacticalLines.RANGE_FAN_SECTOR:case _.TacticalLines.RADAR_SEARCH:return}let n=new L.POINT2,s=new L.POINT2,l=new L.POINT2,r=new L.POINT2;O.GetMBR(e,n,s,l,r);let o=e.get_Font().getSize(),c=0,T=O.getChange1Height(e);c=T<=0?Math.abs(l.y-s.y)/2:T;let u,g=0,d=e.modifiers,h=Number.MAX_VALUE,E=0,A=!1;for(E=0;E<d.length;E++)u=d[E],u.type!==O.toEnd&&(u.type===O.aboveMiddle&&!1===a||(u.lineFactor<h&&(h=u.lineFactor),A=!0));if(!A)return;g=Math.abs(h)*o;let I=!1,S=!1;g>c?S=!0:g<.5*c&&(I=!0);let y=!1,D=new O;if(I){let e=c/g;for(e=1+(e-1)/4,e>2&&(e=2),E=0;E<d.length;E++){if(u=d[E],u.type===O.aboveMiddle){if(!1===a)continue}else if(u.type!==O.area)continue;u.lineFactor*=e}}else if(S){let t=(g-c)/o,i=0,n=0;for(E=0;E<d.length;E++){if(u=d[E],u.type===O.aboveMiddle){if(!1===a)continue}else if(u.type!==O.area)continue;i=u.lineFactor+t,Math.abs(i*o)>=c?(u.lineFactor>h&&(D.type=u.type,u.type=7,u.text.length>0&&(y=!0)),u.lineFactor=i,D.textPath=u.textPath):u.lineFactor=i}let s=new Array;for(E=0;E<d.length;E++)u=d[E],7!==u.type&&(u.lineFactor>n&&(n=u.lineFactor),s.push(u));if(y){let e="";D.text=e,D.lineFactor=n+1,s.push(D)}e.modifiers=s}}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"scaleModifiers",new y.RendererException("Failed inside scaleModifiers",e))}}static AddModifiersGeo(e,t,i,a){try{if(null==e.Pixels||0===e.Pixels.length)return;let n,s=e.get_Font();null==s&&(s=t.getFont()),t.setFont(s);let r,c,d,E,A,I=u.Channels.getShiftLines(),S=!1,y=1,D=0,M=0,P=0,R=0;null!=i&&i instanceof Array&&(A=i),null!=i&&i instanceof o.Rectangle2D&&(E=i);let N=t.getFontMetrics(),C=0,p=0,x="",b="",w="";switch(null!=e.get_DTG()&&null!=e.get_DTG1()&&e.get_DTG().length>0&&e.get_DTG1().length>0&&(x=" - "),null!=e.get_Name()&&e.get_Name().length>0&&(b=" ",w=" - "),"cpof3d"===e.get_Client()&&(y=.9),e.get_LineType()){case _.TacticalLines.SERIES:case _.TacticalLines.STRIKWARN:case _.TacticalLines.MSR:case _.TacticalLines.MSR_ONEWAY:case _.TacticalLines.MSR_TWOWAY:case _.TacticalLines.MSR_ALT:case _.TacticalLines.ASR:case _.TacticalLines.ASR_ONEWAY:case _.TacticalLines.ASR_TWOWAY:case _.TacticalLines.ASR_ALT:case _.TacticalLines.ROUTE:case _.TacticalLines.ROUTE_ONEWAY:case _.TacticalLines.ROUTE_ALT:case _.TacticalLines.DHA_REVD:case _.TacticalLines.DHA:case _.TacticalLines.EPW:case _.TacticalLines.UXO:case _.TacticalLines.FARP:case _.TacticalLines.BSA:case _.TacticalLines.DSA:case _.TacticalLines.CSA:case _.TacticalLines.RSA:case _.TacticalLines.THUNDERSTORMS:case _.TacticalLines.ICING:case _.TacticalLines.FREEFORM:case _.TacticalLines.RHA:case _.TacticalLines.LINTGT:case _.TacticalLines.LINTGTS:case _.TacticalLines.FPF:case _.TacticalLines.GAP:case _.TacticalLines.DEPICT:case _.TacticalLines.AIRHEAD:case _.TacticalLines.FSA:case _.TacticalLines.DIRATKAIR:case _.TacticalLines.OBJ:case _.TacticalLines.AO:case _.TacticalLines.ACA:case _.TacticalLines.FFA:case _.TacticalLines.PAA:case _.TacticalLines.NFA:case _.TacticalLines.RFA:case _.TacticalLines.ATI:case _.TacticalLines.CFFZ:case _.TacticalLines.CFZ:case _.TacticalLines.TBA:case _.TacticalLines.TVAR:case _.TacticalLines.KILLBOXBLUE:case _.TacticalLines.KILLBOXPURPLE:case _.TacticalLines.ZOR:case _.TacticalLines.DA:case _.TacticalLines.SENSOR:case _.TacticalLines.CENSOR:case _.TacticalLines.SMOKE:case _.TacticalLines.BATTLE:case _.TacticalLines.PNO:case _.TacticalLines.PDF:case _.TacticalLines.NAI:case _.TacticalLines.TAI:case _.TacticalLines.BASE_CAMP_REVD:case _.TacticalLines.BASE_CAMP:case _.TacticalLines.GUERILLA_BASE_REVD:case _.TacticalLines.GUERILLA_BASE:case _.TacticalLines.GENERIC_AREA:case _.TacticalLines.ATKPOS:case _.TacticalLines.ASSAULT:case _.TacticalLines.WFZ:case _.TacticalLines.OBSFAREA:case _.TacticalLines.OBSAREA:case _.TacticalLines.ROZ:case _.TacticalLines.AARROZ:case _.TacticalLines.UAROZ:case _.TacticalLines.WEZ:case _.TacticalLines.FEZ:case _.TacticalLines.JEZ:case _.TacticalLines.FAADZ:case _.TacticalLines.HIDACZ:case _.TacticalLines.MEZ:case _.TacticalLines.LOMEZ:case _.TacticalLines.HIMEZ:case _.TacticalLines.SAAFR:case _.TacticalLines.AC:case _.TacticalLines.MRR:case _.TacticalLines.SL:case _.TacticalLines.TC:case _.TacticalLines.SC:case _.TacticalLines.LLTR:case _.TacticalLines.AIRFIELD:case _.TacticalLines.GENERAL:case _.TacticalLines.JTAA:case _.TacticalLines.SAA:case _.TacticalLines.SGAA:case _.TacticalLines.FORT_REVD:case _.TacticalLines.FORT:case _.TacticalLines.ENCIRCLE:case _.TacticalLines.ASSY:case _.TacticalLines.EA:case _.TacticalLines.DZ:case _.TacticalLines.EZ:case _.TacticalLines.LZ:case _.TacticalLines.PZ:case _.TacticalLines.LAA:case _.TacticalLines.BOUNDARY:case _.TacticalLines.MINED:case _.TacticalLines.FENCED:case _.TacticalLines.PL:case _.TacticalLines.FEBA:case _.TacticalLines.FCL:case _.TacticalLines.HOLD:case _.TacticalLines.BRDGHD:case _.TacticalLines.HOLD_GE:case _.TacticalLines.BRDGHD_GE:case _.TacticalLines.LOA:case _.TacticalLines.LOD:case _.TacticalLines.LL:case _.TacticalLines.EWL:case _.TacticalLines.RELEASE:case _.TacticalLines.HOL:case _.TacticalLines.BHL:case _.TacticalLines.LDLC:case _.TacticalLines.PLD:case _.TacticalLines.NFL:case _.TacticalLines.MFP:case _.TacticalLines.FSCL:case _.TacticalLines.BCL_REVD:case _.TacticalLines.BCL:case _.TacticalLines.ICL:case _.TacticalLines.IFF_OFF:case _.TacticalLines.IFF_ON:case _.TacticalLines.GENERIC_LINE:case _.TacticalLines.CFL:case _.TacticalLines.RFL:case _.TacticalLines.FLOT:case _.TacticalLines.LC:case _.TacticalLines.CATK:case _.TacticalLines.CATKBYFIRE:case _.TacticalLines.IL:case _.TacticalLines.DRCL:case _.TacticalLines.RETIRE:case _.TacticalLines.FPOL:case _.TacticalLines.RPOL:case _.TacticalLines.WITHDRAW:case _.TacticalLines.WDRAWUP:case _.TacticalLines.BEARING:case _.TacticalLines.BEARING_J:case _.TacticalLines.BEARING_RDF:case _.TacticalLines.ELECTRO:case _.TacticalLines.BEARING_EW:case _.TacticalLines.ACOUSTIC:case _.TacticalLines.ACOUSTIC_AMB:case _.TacticalLines.TORPEDO:case _.TacticalLines.OPTICAL:case _.TacticalLines.RIP:case _.TacticalLines.BOMB:case _.TacticalLines.ZONE:case _.TacticalLines.AT:case _.TacticalLines.STRONG:case _.TacticalLines.MSDZ:case _.TacticalLines.SCREEN:case _.TacticalLines.COVER:case _.TacticalLines.GUARD:case _.TacticalLines.DELAY:case _.TacticalLines.TGMF:case _.TacticalLines.BIO:case _.TacticalLines.CHEM:case _.TacticalLines.NUC:case _.TacticalLines.RAD:case _.TacticalLines.MINE_LINE:case _.TacticalLines.ANCHORAGE_LINE:case _.TacticalLines.ANCHORAGE_AREA:case _.TacticalLines.SPT:case _.TacticalLines.AIRAOA:case _.TacticalLines.AAAAA:case _.TacticalLines.MAIN:case _.TacticalLines.DIRATKSPT:case _.TacticalLines.DIRATKGND:case _.TacticalLines.LAUNCH_AREA:case _.TacticalLines.DEFENDED_AREA_CIRCULAR:case _.TacticalLines.RECTANGULAR:case _.TacticalLines.CIRCULAR:case _.TacticalLines.RECTANGULAR_TARGET:case _.TacticalLines.LINE:case _.TacticalLines.ASLTXING:n=g.lineutility.getDeepCopy(e.Pixels);break;default:return}let m,F,G,U,v=e.get_LineType(),H=0,B=0,k=e.Pixels.length-1,Y=e.Pixels.length-2,W=new L.POINT2(e.Pixels[0]),X=new L.POINT2(e.Pixels[k]),V=f.RendererSettings.getInstance().getDeviceDPI()/96;k>0&&(U=new L.POINT2(e.Pixels[Y])),e.Pixels.length>1&&(m=new L.POINT2(e.Pixels[1])),O.shiftModifierPath(e,W,m,X,U);let z,K=O.GetCenterLabel(e),Q=e.get_V(),Z=e.get_AP(),J=e.Pixels;if(null!=a)if(z=h.mdlGeodesic.geodesic_center(e.LatLongs),null!=z){let e=a.GeoToPixels(new l.Point2D(z.x,z.y));z.x=e.getX(),z.y=e.getY()}else z=g.lineutility.CalcCenterPointDouble2(J,J.length);else z=g.lineutility.CalcCenterPointDouble2(J,J.length);let j=Math.trunc((e.Pixels.length+1)/2-1),q=0;null!=E?j=O.getVisibleMiddleSegment(e,E):null!=A&&(j=O.getVisibleMiddleSegment(e,A)),e.Pixels.length>2&&(F=e.Pixels[2]),e.Pixels.length>3&&(G=e.Pixels[3]);let $=0,ee=0,te=new L.POINT2(e.Pixels[0]),ie=new L.POINT2(e.Pixels[0]),ae=new L.POINT2(e.Pixels[0]),ne=new L.POINT2(e.Pixels[0]),se=0,le=e.Pixels.length,re=0,oe=0,ce=0;switch(v){case _.TacticalLines.PL:O.AddIntegralAreaModifier(e,K+b+e.get_Name(),O.toEnd,ee,W,m,!1),O.AddIntegralAreaModifier(e,K+b+e.get_Name(),O.toEnd,ee,X,U,!1);break;case _.TacticalLines.FEBA:O.AddIntegralAreaModifier(e,K,O.toEnd,0,W,m,!1),O.AddIntegralAreaModifier(e,K,O.toEnd,0,X,U,!1);break;case _.TacticalLines.FSCL:if(W=e.Pixels[0],m=e.Pixels[1],F=e.Pixels[e.Pixels.length-1],G=e.Pixels[e.Pixels.length-2],D=g.lineutility.CalcDistanceDouble(W,m),M=g.lineutility.CalcDistanceDouble(F,G),C=N.stringWidth(e.get_Name()+" "+K),p=N.stringWidth(e.get_DTG()),p>C&&(C=p),2===e.Pixels.length)m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,e.get_Name()+" "+K,O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1),D>3.5*C&&(W=e.Pixels[e.Pixels.length-1],m=e.Pixels[e.Pixels.length-2],m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,e.get_Name()+" "+K,O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1));else{let t=g.lineutility.CalcDistanceDouble(W,F);(D>C+5||D>=M||t>C+5)&&(m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,e.get_Name()+" "+K,O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1)),(M>C+5||M>D||t>C+5)&&(W=e.Pixels[e.Pixels.length-1],m=e.Pixels[e.Pixels.length-2],m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,e.get_Name()+" "+K,O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1))}break;case _.TacticalLines.ICL:case _.TacticalLines.NFL:case _.TacticalLines.BCL_REVD:case _.TacticalLines.RFL:if(W=e.Pixels[0],m=e.Pixels[1],F=e.Pixels[e.Pixels.length-1],G=e.Pixels[e.Pixels.length-2],D=g.lineutility.CalcDistanceDouble(W,m),M=g.lineutility.CalcDistanceDouble(F,G),C=N.stringWidth(e.get_Name()+" "+K),p=N.stringWidth(e.get_DTG()),p>C&&(C=p),2===e.Pixels.length)m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,K+b+e.get_Name(),O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1),D>3.5*C&&(W=e.Pixels[e.Pixels.length-1],m=e.Pixels[e.Pixels.length-2],m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,K+b+e.get_Name(),O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1));else{let t=g.lineutility.CalcDistanceDouble(W,F);(D>C+5||D>=M||t>C+5)&&(m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,K+b+e.get_Name(),O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1)),(M>C+5||M>D||t>C+5)&&(W=e.Pixels[e.Pixels.length-1],m=e.Pixels[e.Pixels.length-2],m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,K+b+e.get_Name(),O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1))}break;case _.TacticalLines.BCL:{W=e.Pixels[0],m=e.Pixels[1],F=e.Pixels[e.Pixels.length-1],G=e.Pixels[e.Pixels.length-2],D=g.lineutility.CalcDistanceDouble(W,m),M=g.lineutility.CalcDistanceDouble(F,G);let t="";if(null!=e.get_Name()&&e.get_Name().length>0&&(t=" ("+e.get_Name()+")"),C=N.stringWidth(K+t),p=N.stringWidth(e.get_DTG()),p>C&&(C=p),2===e.Pixels.length)m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,K+t,O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1),D>3.5*C&&(W=e.Pixels[e.Pixels.length-1],m=e.Pixels[e.Pixels.length-2],m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,K+t,O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1));else{let i=g.lineutility.CalcDistanceDouble(W,F);(D>C+5||D>=M||i>C+5)&&(m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,K+t,O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1)),(M>C+5||M>D||i>C+5)&&(W=e.Pixels[e.Pixels.length-1],m=e.Pixels[e.Pixels.length-2],m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,K+t,O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1))}break}case _.TacticalLines.DIRATKSPT:case _.TacticalLines.DIRATKAIR:case _.TacticalLines.DIRATKGND:r=g.lineutility.MidPointDouble(W,m,0),O.AddIntegralAreaModifier(e,e.get_Name(),O.aboveMiddle,0,W,r,!1),O.addDTG(e,O.aboveMiddle,y,2*y,W,m,N);break;case _.TacticalLines.SPT:case _.TacticalLines.AIRAOA:case _.TacticalLines.AAAAA:case _.TacticalLines.MAIN:3===e.Pixels.length?(r=g.lineutility.MidPointDouble(W,m,0),O.AddIntegralAreaModifier(e,e.get_DTG()+x,O.aboveMiddle,0,r,r,!1),O.AddIntegralAreaModifier(e,e.get_DTG1(),O.aboveMiddle,y,r,r,!1),O.AddIntegralAreaModifier(e,e.get_Name(),O.aboveMiddle,2*y,r,r,!1)):4===e.Pixels.length?(r=g.lineutility.MidPointDouble(m,F,0),O.AddIntegralAreaModifier(e,e.get_DTG()+x,O.aboveMiddle,0,r,r,!1),O.AddIntegralAreaModifier(e,e.get_DTG1(),O.aboveMiddle,y,r,r,!1),O.AddIntegralAreaModifier(e,e.get_Name(),O.aboveMiddle,2*y,r,r,!1)):(r=g.lineutility.MidPointDouble(m,F,0),O.AddIntegralAreaModifier(e,e.get_DTG()+x,O.aboveMiddle,-y/2,r,r,!1),O.AddIntegralAreaModifier(e,e.get_DTG1(),O.aboveMiddle,y/2,r,r,!1),r=g.lineutility.MidPointDouble(F,G,0),O.AddIntegralAreaModifier(e,e.get_Name(),O.aboveMiddle,-y/2,r,r,!1));break;case _.TacticalLines.LL:case _.TacticalLines.LOD:case _.TacticalLines.LDLC:case _.TacticalLines.PLD:case _.TacticalLines.RELEASE:case _.TacticalLines.HOL:case _.TacticalLines.BHL:case _.TacticalLines.FCL:case _.TacticalLines.HOLD:case _.TacticalLines.BRDGHD:case _.TacticalLines.HOLD_GE:case _.TacticalLines.BRDGHD_GE:case _.TacticalLines.LOA:case _.TacticalLines.IFF_OFF:case _.TacticalLines.IFF_ON:O.AddIntegralAreaModifier(e,K,O.aboveEnd,-y,W,m,!1),O.AddIntegralAreaModifier(e,K,O.aboveEnd,-y,X,U,!1);break;case _.TacticalLines.EWL:O.AddIntegralAreaModifier(e,K,O.aboveEnd,-y,W,m,!1),O.AddIntegralAreaModifier(e,K,O.aboveEnd,-y,X,U,!1),e.set_EchelonSymbol(""),null!=E?O.AddBoundaryModifiers(e,t,E):O.AddBoundaryModifiers(e,t,A);break;case _.TacticalLines.AIRFIELD:ne=new L.POINT2,ae=new L.POINT2,ie=new L.POINT2,te=new L.POINT2,O.GetMBR(e,ae,ne,te,ie),C=N.stringWidth(e.get_H()),W.x=ne.x+C/2+1,W.y=(ne.y+te.y)/2-s.getSize(),O.AddIntegralAreaModifier(e,e.get_H(),O.area,y,W,W,!1);break;case _.TacticalLines.LAUNCH_AREA:case _.TacticalLines.DEFENDED_AREA_CIRCULAR:O.AddIntegralAreaModifier(e,K+w+e.get_Name(),O.area,0,z,z,!1);break;case _.TacticalLines.JTAA:case _.TacticalLines.SAA:case _.TacticalLines.SGAA:O.addNModifier(e,t),O.AddIntegralAreaModifier(e,K+w+e.get_Name(),O.area,0,z,z,!1),O.addDTG(e,O.area,y,2*y,z,z,N);break;case _.TacticalLines.FORT:case _.TacticalLines.ZONE:O.AddIntegralAreaModifier(e,e.get_Name(),O.area,0,z,z,!1);break;case _.TacticalLines.BDZ:O.AddIntegralAreaModifier(e,K,O.area,0,W,W,!1);break;case _.TacticalLines.ASSAULT:case _.TacticalLines.ATKPOS:case _.TacticalLines.OBJ:case _.TacticalLines.NAI:case _.TacticalLines.TAI:case _.TacticalLines.BASE_CAMP_REVD:case _.TacticalLines.GUERILLA_BASE_REVD:case _.TacticalLines.ASSY:case _.TacticalLines.EA:case _.TacticalLines.DZ:case _.TacticalLines.EZ:case _.TacticalLines.LZ:case _.TacticalLines.PZ:case _.TacticalLines.AO:O.AddIntegralAreaModifier(e,K+b+e.get_Name(),O.area,0,z,z,!1);break;case _.TacticalLines.BASE_CAMP:case _.TacticalLines.GUERILLA_BASE:O.AddIntegralAreaModifier(e,K+b+e.get_Name(),O.area,-1*y,z,z,!1),O.AddModifier(e,e.get_H(),O.area,0,z,z),O.addDTG(e,O.area,1*y,2*y,z,z,N),O.addNModifier(e,t),O.addModifierBottomSegment(e,e.get_EchelonSymbol());break;case _.TacticalLines.GENERIC_AREA:O.AddIntegralAreaModifier(e,e.get_H()+" "+e.get_Name(),O.area,-.5*y,z,z,!1),O.addDTG(e,O.area,.5*y,1.5*y,z,z,N),O.addNModifier(e,t);break;case _.TacticalLines.AIRHEAD:O.GetMBR(e,ae,ne,te,ie),O.AddIntegralAreaModifier(e,K,O.aboveMiddle,y,ie,te,!1);break;case _.TacticalLines.AC:case _.TacticalLines.LLTR:case _.TacticalLines.MRR:case _.TacticalLines.SL:case _.TacticalLines.TC:case _.TacticalLines.SAAFR:case _.TacticalLines.SC:O.AddIntegralModifier(e,"Name: "+e.get_Name(),O.aboveMiddle,-7*y,j,j+1,!1),O.AddIntegralModifier(e,"Width: "+e.get_AM(),O.aboveMiddle,-6*y,j,j+1,!1),O.AddIntegralModifier(e,"Min Alt: "+e.get_X(),O.aboveMiddle,-5*y,j,j+1,!1),O.AddIntegralModifier(e,"Max Alt: "+e.get_X1(),O.aboveMiddle,-4*y,j,j+1,!1),O.AddIntegralModifier(e,"DTG Start: "+e.get_DTG(),O.aboveMiddle,-3*y,j,j+1,!1),O.AddIntegralModifier(e,"DTG End: "+e.get_DTG1(),O.aboveMiddle,-2*y,j,j+1,!1),O.AddIntegralModifier(e,K+b+e.get_Name(),O.aboveMiddle,0,j,j+1,!1);break;case _.TacticalLines.BEARING_J:case _.TacticalLines.BEARING_RDF:case _.TacticalLines.BEARING:case _.TacticalLines.ELECTRO:case _.TacticalLines.BEARING_EW:case _.TacticalLines.ACOUSTIC:case _.TacticalLines.ACOUSTIC_AMB:case _.TacticalLines.TORPEDO:case _.TacticalLines.OPTICAL:r=g.lineutility.MidPointDouble(W,m,0),O.AddIntegralAreaModifier(e,K,O.aboveMiddle,0,r,r,!0),G=g.lineutility.ExtendDirectedLine(W,m,m,3,s.getSize()/2),O.AddIntegralAreaModifier(e,e.get_H(),O.aboveMiddle,1,G,G,!0);break;case _.TacticalLines.ACA:O.AddIntegralAreaModifier(e,K+b+e.get_Name(),O.area,-3*y,z,z,!1),O.AddIntegralAreaModifier(e,e.get_T1(),O.area,-2*y,z,z,!1),O.AddIntegralAreaModifier(e,"MIN ALT: "+e.get_X(),O.area,-1*y,z,z,!1,"H"),O.AddIntegralAreaModifier(e,"MAX ALT: "+e.get_X1(),O.area,0,z,z,!1,"H1"),O.AddIntegralAreaModifier(e,e.get_Location(),O.area,1*y,z,z,!1,"H2"),O.addDTG(e,O.area,2*y,3*y,z,z,N);break;case _.TacticalLines.MFP:W=e.Pixels[j],m=e.Pixels[j+1],O.AddIntegralModifier(e,K,O.aboveMiddle,0,j,j+1,!0),O.AddIntegralModifier(e,e.get_DTG()+x,O.aboveEnd,1*y,0,1,!1),O.AddIntegralModifier(e,e.get_DTG1(),O.aboveEnd,2*y,0,1,!1);break;case _.TacticalLines.LINTGT:O.AddIntegralModifier(e,Z,O.aboveMiddle,-.7*y,j,j+1,!1);break;case _.TacticalLines.LINTGTS:O.AddIntegralModifier(e,Z,O.aboveMiddle,-.7*y,j,j+1,!1),O.AddIntegralModifier(e,K,O.aboveMiddle,.7*y,j,j+1,!1);break;case _.TacticalLines.FPF:O.AddIntegralModifier(e,Z,O.aboveMiddle,-.7*y,0,1,!1),O.AddIntegralModifier(e,K,O.aboveMiddle,.7*y,0,1,!1),O.AddIntegralModifier(e,e.get_T1(),O.aboveMiddle,1.7*y,0,1,!1),O.AddIntegralModifier(e,Q,O.aboveMiddle,2.7*y,0,1,!1);break;case _.TacticalLines.AT:O.AddIntegralAreaModifier(e,Z,O.area,0,z,z,!1);break;case _.TacticalLines.RECTANGULAR:case _.TacticalLines.CIRCULAR:O.AddIntegralAreaModifier(e,Z,O.area,0,W,W,!1);break;case _.TacticalLines.RECTANGULAR_TARGET:{C=N.stringWidth(e.get_Name());let t=new L.POINT2(z.x+C/2,z.y);O.AddIntegralAreaModifier(e,e.get_Name(),O.area,-1*y,t,t,!1);break}case _.TacticalLines.SMOKE:O.AddIntegralAreaModifier(e,Z,O.area,-y,z,z,!1),O.AddIntegralAreaModifier(e,K,O.area,0,z,z,!1),O.addDTG(e,O.area,1*y,2*y,z,z,N);break;case _.TacticalLines.LINE:O.AddIntegralModifier(e,e.get_Name(),O.aboveMiddle,y,j,j+1,!1);break;case _.TacticalLines.MINED:e.isHostile()&&(m=g.lineutility.MidPointDouble(W,m,0),O.AddIntegralAreaModifier(e,e.get_N(),O.aboveMiddle,0,W,m,!0),0!==j&&(W=e.Pixels[j],m=e.Pixels[j+1],m=g.lineutility.MidPointDouble(W,m,0),O.AddIntegralAreaModifier(e,e.get_N(),O.aboveMiddle,0,W,m,!0))),O.GetMBR(e,ae,ne,te,ie),O.AddIntegralAreaModifier(e,e.get_H(),O.aboveMiddle,-1.5*y,ae,ne,!1),O.AddIntegralAreaModifier(e,e.get_DTG(),O.aboveMiddle,1.5*y,ie,te,!1),O.addModifierOnLine("M",e,t),O.AddImageModifier(e,O.areaImage,0,z,z,!1);break;case _.TacticalLines.FENCED:e.isHostile()&&(m=g.lineutility.MidPointDouble(W,m,0),O.AddIntegralAreaModifier(e,e.get_N(),O.aboveMiddle,0,W,m,!0),0!==j&&(W=e.Pixels[j],m=e.Pixels[j+1],m=g.lineutility.MidPointDouble(W,m,0),O.AddIntegralAreaModifier(e,e.get_N(),O.aboveMiddle,0,W,m,!0))),O.addModifierOnLine("M",e,t),O.AddImageModifier(e,O.areaImage,0,z,z,!1);break;case _.TacticalLines.ASLTXING:e.Pixels[1].y>e.Pixels[0].y?(W=e.Pixels[1],m=e.Pixels[3],F=e.Pixels[0],G=e.Pixels[2]):(W=e.Pixels[0],m=e.Pixels[2],F=e.Pixels[1],G=e.Pixels[3]),F=g.lineutility.ExtendAlongLineDouble2(W,F,-20),G=g.lineutility.ExtendAlongLineDouble2(m,G,-20),O.addDTG(e,O.aboveMiddle,0,y,F,G,N);break;case _.TacticalLines.SERIES:case _.TacticalLines.DRCL:O.addModifierTopSegment(e,e.get_Name());break;case _.TacticalLines.STRIKWARN:O.AddIntegralModifier(e,"1",O.aboveMiddle,0,se,se+1,!0),O.AddIntegralModifier(e,"2",O.aboveMiddle,0,Math.trunc(le/2),Math.trunc(le/2)+1,!0);break;case _.TacticalLines.SCREEN:case _.TacticalLines.COVER:case _.TacticalLines.GUARD:4===e.Pixels.length?(m=new L.POINT2(e.Pixels[1]),F=new L.POINT2(e.Pixels[2]),O.AddIntegralAreaModifier(e,K,O.area,0,m,m,!0),O.AddIntegralAreaModifier(e,K,O.area,0,F,F,!0)):(ce=Math.trunc(.5*s.getSize()),re=Math.atan2(e.Pixels[0].y-e.Pixels[1].y,e.Pixels[0].x-e.Pixels[1].x),oe=Math.atan2(e.Pixels[0].y-e.Pixels[2].y,e.Pixels[0].x-e.Pixels[2].x),W=new L.POINT2(e.Pixels[0]),W.x-=30*Math.cos(re),W.y-=30*Math.sin(re)+ce,m=new L.POINT2(e.Pixels[0]),m.x-=30*Math.cos(oe),m.y-=30*Math.sin(oe)+ce,O.AddIntegralAreaModifier(e,K,O.area,0,W,W,!0),O.AddIntegralAreaModifier(e,K,O.area,0,m,m,!0));break;case _.TacticalLines.MSR_ONEWAY:case _.TacticalLines.ASR_ONEWAY:case _.TacticalLines.ROUTE_ONEWAY:case _.TacticalLines.MSR_TWOWAY:case _.TacticalLines.ASR_TWOWAY:case _.TacticalLines.MSR_ALT:case _.TacticalLines.ASR_ALT:case _.TacticalLines.ROUTE_ALT:{C=1.5*N.stringWidth(K+b+e.get_Name());let t=10*V;v!==_.TacticalLines.MSR_TWOWAY&&v!==_.TacticalLines.ASR_TWOWAY||(t=25*V);let i=v===_.TacticalLines.MSR_ALT||v===_.TacticalLines.ASR_ALT||v===_.TacticalLines.ROUTE_ALT;if(i&&(p=1.5*N.stringWidth("ALT"),p>C&&(C=p)),S=!1,!1===f.RendererSettings.getInstance().getTwoLabelOnly()){for(H=0;H<e.Pixels.length-1;H++){W=e.Pixels[H],m=e.Pixels[H+1],D=g.lineutility.CalcDistanceDouble(W,m);let a=T.arraysupport.SupplyRouteArrowSide(W,m);D<C||(1===a||2===a?(W=g.lineutility.ExtendDirectedLine(m,W,W,a,t),m=g.lineutility.ExtendDirectedLine(m,W,m,a,t),O.AddModifier(e,K+b+e.get_Name(),O.aboveMiddle,-1.7*y,W,m),i&&O.AddModifier(e,"ALT",O.aboveMiddle,0,W,m)):(O.AddModifier(e,K+b+e.get_Name(),O.aboveMiddle,-.7*y,W,m),i&&(W=g.lineutility.ExtendDirectedLine(m,W,W,a,t),m=g.lineutility.ExtendDirectedLine(m,W,m,a,t),O.AddModifier(e,"ALT",O.aboveMiddle,0,W,m))),S=!0)}if(!1===S){W=e.Pixels[j],m=e.Pixels[j+1];let a=T.arraysupport.SupplyRouteArrowSide(W,m);1===a||2===a?(W=g.lineutility.ExtendDirectedLine(m,W,W,a,t),m=g.lineutility.ExtendDirectedLine(m,W,m,a,t),O.AddModifier(e,K+b+e.get_Name(),O.aboveMiddle,-1.7*y,W,m),i&&O.AddModifier(e,"ALT",O.aboveMiddle,0,W,m)):(O.AddModifier(e,K+b+e.get_Name(),O.aboveMiddle,-.7*y,W,m),i&&(W=g.lineutility.ExtendDirectedLine(m,W,W,a,t),m=g.lineutility.ExtendDirectedLine(m,W,m,a,t),O.AddModifier(e,"ALT",O.aboveMiddle,0,W,m)))}}else{for(P=0,c=e.Pixels[P],R=0,d=e.Pixels[R],H=0;H<e.Pixels.length-1;H++)W=e.Pixels[H],W.y>=c.y&&(c=W,P=H),W.y<=d.y&&(d=W,R=H);O.AddIntegralModifier(e,K+b+e.get_Name(),O.aboveMiddle,-1.7*y,P,P+1,!1),i&&O.AddIntegralModifier(e,"ALT",O.aboveMiddle,-.7*y,P,P+1,!1),P!==R&&(O.AddIntegralModifier(e,K+b+e.get_Name(),O.aboveMiddle,-1.7*y,R,R+1,!1),i&&O.AddIntegralModifier(e,"ALT",O.aboveMiddle,-.7*y,R,R+1,!1))}break}case _.TacticalLines.DHA_REVD:O.AddIntegralAreaModifier(e,"DETAINEE",O.area,-1.5*y,z,z,!1),O.AddIntegralAreaModifier(e,"HOLDING",O.area,-.5*y,z,z,!1),O.AddIntegralAreaModifier(e,"AREA",O.area,.5*y,z,z,!1),O.AddIntegralAreaModifier(e,e.get_Name(),O.area,1.5*y,z,z,!1);break;case _.TacticalLines.EPW:O.AddIntegralAreaModifier(e,"EPW",O.area,-1.5*y,z,z,!1),O.AddIntegralAreaModifier(e,"HOLDING",O.area,-.5*y,z,z,!1),O.AddIntegralAreaModifier(e,"AREA",O.area,.5*y,z,z,!1),O.AddIntegralAreaModifier(e,e.get_Name(),O.area,1.5*y,z,z,!1);break;case _.TacticalLines.UXO:O.addModifierOnLine("UXO",e,t);break;case _.TacticalLines.GENERAL:O.addNModifier(e,t);break;case _.TacticalLines.DHA:case _.TacticalLines.FARP:O.AddIntegralAreaModifier(e,K,O.area,-.5*y,z,z,!1),O.AddIntegralAreaModifier(e,e.get_Name(),O.area,.5*y,z,z,!1);break;case _.TacticalLines.BSA:case _.TacticalLines.DSA:case _.TacticalLines.CSA:case _.TacticalLines.RSA:O.AddIntegralAreaModifier(e,K,O.area,0,z,z,!1);break;case _.TacticalLines.RHA:O.AddIntegralAreaModifier(e,"REFUGEE",O.area,-1.5*y,z,z,!1),O.AddIntegralAreaModifier(e,"HOLDING",O.area,-.5*y,z,z,!1),O.AddIntegralAreaModifier(e,"AREA",O.area,.5*y,z,z,!1),O.AddIntegralAreaModifier(e,e.get_Name(),O.area,1.5*y,z,z,!1);break;case _.TacticalLines.MSR:case _.TacticalLines.ASR:case _.TacticalLines.ROUTE:if(S=!1,!1===f.RendererSettings.getInstance().getTwoLabelOnly()){for(H=0;H<e.Pixels.length-1;H++)W=e.Pixels[H],m=e.Pixels[H+1],C=1.5*N.stringWidth(K+b+e.get_Name()),D=g.lineutility.CalcDistanceDouble(W,m),D<C||(O.AddIntegralModifier(e,K+b+e.get_Name(),O.aboveMiddle,-1*y,H,H+1,!1),S=!0);!1===S&&O.AddIntegralModifier(e,K+b+e.get_Name(),O.aboveMiddle,-1*y,j,j+1,!1)}else{for(H=0;H<e.Pixels.length;H++)W=e.Pixels[H],null==c&&(c=W,P=H),null==d&&(d=W,R=H),W.y>=c.y&&(c=W,P=H),W.y<=d.y&&(d=W,R=H);j=P,q=R,j===e.Pixels.length-1&&(j-=1),q===e.Pixels.length-1&&(q-=1),j===q&&(q-=1),O.AddIntegralModifier(e,K+b+e.get_Name(),O.aboveMiddle,0,j,j+1,!1),O.AddIntegralModifier(e,K+b+e.get_Name(),O.aboveMiddle,0,q,q+1,!1)}break;case _.TacticalLines.GAP:e.Pixels[1].y>e.Pixels[0].y?(W=e.Pixels[1],m=e.Pixels[3],F=e.Pixels[0],G=e.Pixels[2]):(W=e.Pixels[0],m=e.Pixels[2],F=e.Pixels[1],G=e.Pixels[3]),F=g.lineutility.ExtendAlongLineDouble2(W,F,-20),G=g.lineutility.ExtendAlongLineDouble2(m,G,-20),O.AddIntegralAreaModifier(e,e.get_Name(),O.aboveMiddle,0,W,m,!1),O.addDTG(e,O.aboveMiddle,0,y,F,G,N);break;case _.TacticalLines.BIO:case _.TacticalLines.CHEM:case _.TacticalLines.NUC:case _.TacticalLines.RAD:O.AddImageModifier(e,O.areaImage,0,z,z,!1);break;case _.TacticalLines.ANCHORAGE_LINE:O.AddImageModifier(e,O.aboveMiddle,-.15*y,e.Pixels[j],e.Pixels[j+1],!1);break;case _.TacticalLines.ANCHORAGE_AREA:for(B=W.y+m.y,se=0,H=1;H<le-1;H++)B<e.Pixels[H].y+e.Pixels[H+1].y&&(se=H,B=e.Pixels[se].y+e.Pixels[se+1].y);O.AddImageModifier(e,O.aboveMiddle,-.25*y,e.Pixels[se],e.Pixels[se+1],!1);break;case _.TacticalLines.MINE_LINE:O.AddImageModifier(e,O.aboveMiddle,-.2*y,e.Pixels[j],e.Pixels[j+1],!1),e.isHostile()&&(O.AddIntegralAreaModifier(e,e.get_N(),O.toEnd,0,W,m,!1),O.AddIntegralAreaModifier(e,e.get_N(),O.toEnd,0,X,U,!1));break;case _.TacticalLines.DEPICT:O.GetMBR(e,ae,ne,te,ie),O.addNModifier(e,t),O.AddImageModifier(e,O.areaImage,0,z,z,!1);break;case _.TacticalLines.FFA:case _.TacticalLines.RFA:case _.TacticalLines.NFA:O.AddIntegralAreaModifier(e,K,O.area,-1*y,z,z,!1),O.AddIntegralAreaModifier(e,e.get_Name(),O.area,0,z,z,!1),O.addDTG(e,O.area,1*y,2*y,z,z,N);break;case _.TacticalLines.PAA:O.addModifierOnLine("PAA",e,t),O.AddIntegralAreaModifier(e,e.get_Name(),O.area,-.5*y,z,z,!1),O.addDTG(e,O.area,.5*y,1.5*y,z,z,N);break;case _.TacticalLines.FSA:O.AddIntegralAreaModifier(e,K+b+e.get_Name(),O.area,-.5*y,z,z,!1),O.addDTG(e,O.area,.5*y,1.5*y,z,z,N);break;case _.TacticalLines.ATI:case _.TacticalLines.CFFZ:case _.TacticalLines.CFZ:case _.TacticalLines.TBA:case _.TacticalLines.TVAR:case _.TacticalLines.ZOR:case _.TacticalLines.DA:case _.TacticalLines.SENSOR:case _.TacticalLines.CENSOR:case _.TacticalLines.KILLBOXBLUE:case _.TacticalLines.KILLBOXPURPLE:{O.AddIntegralAreaModifier(e,K,O.area,-.5*y,z,z,!1),O.AddIntegralAreaModifier(e,e.get_Name(),O.area,.5*y,z,z,!1),O.GetMBR(e,ae,ne,te,ie);let t=ae,i=ne;"ge"==e.get_Client().toLowerCase()&&(t.x-=s.getSize()/2,i.x-=s.getSize()/2),O.AddIntegralAreaModifier(e,e.get_DTG()+x,O.toEnd,.5*y,t,i,!1,"W"),O.AddIntegralAreaModifier(e,e.get_DTG1(),O.toEnd,1.5*y,t,i,!1,"W1");break}case _.TacticalLines.BATTLE:case _.TacticalLines.STRONG:O.AddIntegralAreaModifier(e,e.get_Name(),O.area,0,z,z,!1),O.addModifierBottomSegment(e,e.get_EchelonSymbol());break;case _.TacticalLines.PNO:O.AddIntegralAreaModifier(e,K+b+e.get_Name(),O.area,0,z,z,!1),O.addModifierBottomSegment(e,e.get_EchelonSymbol()),O.addNModifier(e,t);break;case _.TacticalLines.WFZ:O.AddIntegralAreaModifier(e,K,O.area,-1.5*y,z,z,!0),O.AddIntegralAreaModifier(e,e.get_Name(),O.area,-.5*y,z,z,!0),O.AddIntegralAreaModifier(e,"TIME FROM: "+e.get_DTG(),O.area,.5*y,z,z,!0,"W"),O.AddIntegralAreaModifier(e,"TIME TO: "+e.get_DTG1(),O.area,1.5*y,z,z,!0,"W1");break;case _.TacticalLines.OBSFAREA:O.AddIntegralAreaModifier(e,K,O.area,-1.5*y,z,z,!1),O.AddIntegralAreaModifier(e,e.get_Name(),O.area,-.5*y,z,z,!1),O.AddIntegralAreaModifier(e,e.get_DTG()+x,O.area,.5*y,z,z,!1,"W"),O.AddIntegralAreaModifier(e,e.get_DTG1(),O.area,1.5*y,z,z,!1,"W1");break;case _.TacticalLines.OBSAREA:O.AddIntegralAreaModifier(e,e.get_Name(),O.area,-1*y,z,z,!0),O.AddIntegralAreaModifier(e,e.get_DTG()+x,O.area,0,z,z,!0,"W"),O.AddIntegralAreaModifier(e,e.get_DTG1(),O.area,1*y,z,z,!0,"W1");break;case _.TacticalLines.ROZ:case _.TacticalLines.AARROZ:case _.TacticalLines.UAROZ:case _.TacticalLines.WEZ:case _.TacticalLines.FEZ:case _.TacticalLines.JEZ:case _.TacticalLines.FAADZ:case _.TacticalLines.HIDACZ:case _.TacticalLines.MEZ:case _.TacticalLines.LOMEZ:case _.TacticalLines.HIMEZ:O.AddIntegralAreaModifier(e,K,O.area,-2.5,z,z,!1,""),O.AddIntegralAreaModifier(e,e.get_Name(),O.area,-1.5,z,z,!1,"T"),O.AddIntegralAreaModifier(e,"MIN ALT: "+e.get_X(),O.area,-.5,z,z,!1,"H"),O.AddIntegralAreaModifier(e,"MAX ALT: "+e.get_X1(),O.area,.5,z,z,!1,"H1"),O.AddIntegralAreaModifier(e,"TIME FROM: "+e.get_DTG(),O.area,1.5,z,z,!1,"W"),O.AddIntegralAreaModifier(e,"TIME TO: "+e.get_DTG1(),O.area,2.5,z,z,!1,"W1");break;case _.TacticalLines.ENCIRCLE:e.isHostile()&&(O.AddIntegralModifier(e,e.get_N(),O.aboveMiddle,0,0,1,!0),O.AddIntegralModifier(e,e.get_N(),O.aboveMiddle,0,j,j+1,!0));break;case _.TacticalLines.LAA:O.AddImageModifier(e,O.areaImage,0,z,z,!1),O.AddIntegralAreaModifier(e,K,O.area,-1*y,z,z,!1);break;case _.TacticalLines.BOUNDARY:null!=E?O.AddBoundaryModifiers(e,t,E):O.AddBoundaryModifiers(e,t,A);break;case _.TacticalLines.CFL:C=N.stringWidth(K+b+e.get_Name()),p=N.stringWidth(e.get_DTG()+x+e.get_DTG1()),p>C&&(C=p),W=new L.POINT2(e.Pixels[j]),m=new L.POINT2(e.Pixels[j+1]),O.getPixelsMiddleSegment(e,C,W,m),O.AddModifier2(e,K+b+e.get_Name(),O.aboveMiddle,-.7*y,W,m,!1),O.addDTG(e,O.aboveMiddle,.7*y,1.7*y,W,m,N);break;case _.TacticalLines.FLOT:"1"===e.get_H()?K="LC":"2"===e.get_H()&&(K=""),O.AddIntegralAreaModifier(e,K,O.toEnd,0,W,m,!1),O.AddIntegralAreaModifier(e,K,O.toEnd,0,X,U,!1),e.isHostile()&&(O.AddIntegralAreaModifier(e,e.get_N(),O.toEnd,-1*y,W,m,!1),O.AddIntegralAreaModifier(e,e.get_N(),O.toEnd,-1*y,X,U,!1));break;case _.TacticalLines.LC:{let t=1;I&&(t=.5),e.isHostile()&&($=W.x<m.x?-t:t,O.AddIntegralAreaModifier(e,e.get_N(),O.toEnd,$,W,m,!1),$=U.x<X.x?-t:t,O.AddIntegralAreaModifier(e,e.get_N(),O.toEnd,$,X,U,!1)),O.AddIntegralAreaModifier(e,K,O.toEnd,0,W,m,!1),O.AddIntegralAreaModifier(e,K,O.toEnd,0,X,U,!1);break}case _.TacticalLines.CATK:O.AddIntegralModifier(e,K,O.aboveMiddle,0,1,0,!1);break;case _.TacticalLines.CATKBYFIRE:C=1.5*N.stringWidth(K),F=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,K,O.aboveMiddle,0,m,F,!1);break;case _.TacticalLines.IL:O.AddIntegralModifier(e,e.get_Name(),O.aboveMiddle,0,1,0,!1);break;case _.TacticalLines.RETIRE:case _.TacticalLines.FPOL:case _.TacticalLines.RPOL:case _.TacticalLines.WITHDRAW:case _.TacticalLines.WDRAWUP:O.AddIntegralModifier(e,K,O.aboveMiddle,0,0,1,!0);break;case _.TacticalLines.RIP:case _.TacticalLines.BOMB:case _.TacticalLines.TGMF:O.AddIntegralAreaModifier(e,K,O.area,0,z,z,!0);break;case _.TacticalLines.MSDZ:O.AddIntegralAreaModifier(e,"1",O.area,0,m,m,!0),O.AddIntegralAreaModifier(e,"2",O.area,0,F,F,!0),O.AddIntegralAreaModifier(e,"3",O.area,0,G,G,!0);break;case _.TacticalLines.DELAY:O.AddIntegralModifier(e,e.get_DTG(),O.aboveMiddle,-1*y,0,1,!1),O.AddIntegralModifier(e,K,O.aboveMiddle,0,0,1,!0);break;case _.TacticalLines.GENERIC_LINE:if(W=e.Pixels[0],m=e.Pixels[1],F=e.Pixels[e.Pixels.length-1],G=e.Pixels[e.Pixels.length-2],D=g.lineutility.CalcDistanceDouble(W,m),M=g.lineutility.CalcDistanceDouble(F,G),C=N.stringWidth(e.get_H()+" "+e.get_Name()),p=N.stringWidth(e.get_DTG()),p>C&&(C=p),2===e.Pixels.length)m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,e.get_H()+" "+e.get_Name(),O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1),D>3.5*C&&(W=e.Pixels[e.Pixels.length-1],m=e.Pixels[e.Pixels.length-2],m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,e.get_H()+" "+e.get_Name(),O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1));else{let t=g.lineutility.CalcDistanceDouble(W,F);(D>C+5||D>=M||t>C+5)&&(m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,e.get_H()+" "+e.get_Name(),O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1)),(M>C+5||M>D||t>C+5)&&(W=e.Pixels[e.Pixels.length-1],m=e.Pixels[e.Pixels.length-2],m=g.lineutility.ExtendAlongLineDouble(W,m,C),O.AddModifier2(e,e.get_H()+" "+e.get_Name(),O.aboveMiddle,-.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG()+x,O.aboveMiddle,.7*y,W,m,!1),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,1.7*y,W,m,!1))}}O.scaleModifiers(e),e.Pixels=n}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"AddModifiersGeo",new y.RendererException("Failed inside AddModifiersGeo",e))}}static getRFALines(e){let t=1;try{null!=e.get_Name()&&e.get_Name().length>0&&t++,(null!=e.get_DTG()&&e.get_DTG().length>0||null!=e.get_DTG1()&&e.get_DTG1().length>0)&&t++}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"AddModifiers",new y.RendererException("Failed inside AddModifiers",e))}return t}static addSectorModifiers(e,t){try{if(e.get_LineType()===_.TacticalLines.RANGE_FAN_SECTOR){let i,a=new Array,n=new Array,s=e.get_X(),r=e.get_AM().split(","),o=e.get_AN().split(","),c=o.length/2;if(c<1)return;s.length>0&&(i=s.split(","));for(let e of r)a.push(parseFloat(e));for(let e of o)n.push(parseFloat(e));c+1>a.length&&0!==parseFloat(r[0])&&a.splice(0,0,0);let T=e.Pixels.length,u=e.Pixels[T-5],g=e.Pixels[T-4],L=new l.Point2D(u.x,u.y),d=new l.Point2D(g.x,g.y);L=t.PixelsToGeo(L),d=t.PixelsToGeo(d),u.x=L.getX(),u.y=L.getY(),g.x=d.getX(),g.y=d.getY();let _,E,A,I,S=h.mdlGeodesic.GetAzimuth(u,g),y=new Array,f=new Array,D=0;for(let i=0;i<c&&!(a.length<i+2);i++)D=(a[i]+a[i+1])/2,_=h.mdlGeodesic.geodesic_coordinate(u,D,S),I=new l.Point2D(_.x,_.y),I=t.GeoToPixels(I),_.x=I.getX(),_.y=I.getY(),y.push(_),e.get_HideOptionalLabels()||(E=h.mdlGeodesic.geodesic_coordinate(u,D,n[2*i]),I=new l.Point2D(E.x,E.y),I=t.GeoToPixels(I),E.x=I.getX(),E.y=I.getY(),A=h.mdlGeodesic.geodesic_coordinate(u,D,n[2*i+1]),I=new l.Point2D(A.x,A.y),I=t.GeoToPixels(I),A.x=I.getX(),A.y=I.getY(),f.push(E),f.push(A));if(null!=i)for(let t=0;t<i.length&&!(t>=y.length);t++)u=y[t],O.AddAreaModifier(e,"ALT "+i[t],O.area,0,u,u);if(!e.get_HideOptionalLabels())for(let t=0;t<c;t++)u=y[t],O.AddAreaModifier(e,"RG "+a[t+1],O.area,-1,u,u),E=f[2*t],A=f[2*t+1],O.AddAreaModifier(e,o[2*t],O.area,0,E,E),O.AddAreaModifier(e,o[2*t+1],O.area,0,A,A)}else if(e.get_LineType()===_.TacticalLines.RADAR_SEARCH){let i=e.get_LRMM().split(","),a=parseFloat(i[0]),n=parseFloat(i[1]);for(;a>360;)a-=360;for(;n>360;)n-=360;for(;a<0;)a+=360;for(;n<0;)n+=360;let s=0;s=a>n?(a-360+n)/2:(a+n)/2;let r=parseFloat(i[3]),o=1.1*r,c=e.LatLongs[0],T=t.GeoToPixels(new l.Point2D(c.x,c.y)),u=new L.POINT2;u.x=T.getX(),u.y=T.getY(),u.style=c.style;let d=h.mdlGeodesic.geodesic_coordinate(c,o,s);T=t.GeoToPixels(new l.Point2D(d.x,d.y));let _=new L.POINT2;_.x=T.getX(),_.y=T.getY(),_.style=d.style,r=g.lineutility.CalcDistanceDouble(u,_);let E=10;r<100&&(E=r/10),E<5&&(E=5);let A=2*E,I=g.lineutility.ExtendAlongLineDouble(u,_,r+A);c=u,d=I;let S=new Array,y=e.get_AM().split(",");for(let e of y)S.push(parseFloat(e));if(S.length<2){if(0===parseFloat(y[0]))return;S.splice(0,0,0)}let f=new l.Point2D(c.x,c.y),D=new l.Point2D(d.x,d.y);f=t.PixelsToGeo(f),D=t.PixelsToGeo(D),c.x=f.getX(),c.y=f.getY(),d.x=D.getX(),d.y=D.getY();let M,P=h.mdlGeodesic.GetAzimuth(c,d);o=(S[0]+S[1])/2;let R=h.mdlGeodesic.geodesic_coordinate(c,o,P);M=new l.Point2D(R.x,R.y),M=t.GeoToPixels(M),R.x=M.getX(),R.y=M.getY(),O.AddAreaModifier(e,e.get_Name(),O.area,-1,R,R)}}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"addSectorModifiers",new y.RendererException("Failed inside addSectorModifiers",e))}}static AddModifiers2(e,t){try{if(null==e.Pixels||0===e.Pixels.length)return;switch(e.get_LineType()){case _.TacticalLines.CONVOY:case _.TacticalLines.HCONVOY:case _.TacticalLines.BREACH:case _.TacticalLines.BYPASS:case _.TacticalLines.CANALIZE:case _.TacticalLines.PENETRATE:case _.TacticalLines.CLEAR:case _.TacticalLines.DISRUPT:case _.TacticalLines.FIX:case _.TacticalLines.ISOLATE:case _.TacticalLines.OCCUPY:case _.TacticalLines.RETAIN:case _.TacticalLines.SECURE:case _.TacticalLines.CONTAIN:case _.TacticalLines.SEIZE:case _.TacticalLines.CORDONKNOCK:case _.TacticalLines.CORDONSEARCH:case _.TacticalLines.FOLLA:case _.TacticalLines.FOLSP:case _.TacticalLines.ACA_RECTANGULAR:case _.TacticalLines.ACA_CIRCULAR:case _.TacticalLines.RECTANGULAR:case _.TacticalLines.CUED_ACQUISITION:case _.TacticalLines.CIRCULAR:case _.TacticalLines.BDZ:case _.TacticalLines.FSA_CIRCULAR:case _.TacticalLines.NOTACK:case _.TacticalLines.ATI_CIRCULAR:case _.TacticalLines.CFFZ_CIRCULAR:case _.TacticalLines.SENSOR_CIRCULAR:case _.TacticalLines.CENSOR_CIRCULAR:case _.TacticalLines.DA_CIRCULAR:case _.TacticalLines.CFZ_CIRCULAR:case _.TacticalLines.ZOR_CIRCULAR:case _.TacticalLines.TBA_CIRCULAR:case _.TacticalLines.TVAR_CIRCULAR:case _.TacticalLines.FFA_CIRCULAR:case _.TacticalLines.NFA_CIRCULAR:case _.TacticalLines.RFA_CIRCULAR:case _.TacticalLines.KILLBOXBLUE_CIRCULAR:case _.TacticalLines.KILLBOXPURPLE_CIRCULAR:case _.TacticalLines.BLOCK:case _.TacticalLines.FFA_RECTANGULAR:case _.TacticalLines.NFA_RECTANGULAR:case _.TacticalLines.RFA_RECTANGULAR:case _.TacticalLines.KILLBOXBLUE_RECTANGULAR:case _.TacticalLines.KILLBOXPURPLE_RECTANGULAR:case _.TacticalLines.FSA_RECTANGULAR:case _.TacticalLines.SHIP_AOI_RECTANGULAR:case _.TacticalLines.DEFENDED_AREA_RECTANGULAR:case _.TacticalLines.ATI_RECTANGULAR:case _.TacticalLines.CFFZ_RECTANGULAR:case _.TacticalLines.SENSOR_RECTANGULAR:case _.TacticalLines.CENSOR_RECTANGULAR:case _.TacticalLines.DA_RECTANGULAR:case _.TacticalLines.CFZ_RECTANGULAR:case _.TacticalLines.ZOR_RECTANGULAR:case _.TacticalLines.TBA_RECTANGULAR:case _.TacticalLines.TVAR_RECTANGULAR:case _.TacticalLines.PAA:case _.TacticalLines.PAA_RECTANGULAR:case _.TacticalLines.RECTANGULAR_TARGET:case _.TacticalLines.PAA_CIRCULAR:case _.TacticalLines.RANGE_FAN:case _.TacticalLines.RANGE_FAN_SECTOR:case _.TacticalLines.RADAR_SEARCH:case _.TacticalLines.SHIP_AOI_CIRCULAR:case _.TacticalLines.MFLANE:break;default:return}let i=g.lineutility.getDeepCopy(e.Pixels),a=e.Pixels.length;null==e.modifiers&&(e.modifiers=new Array);let s,l,r,o,c,T,u=e.get_Font(),d=1,h=e.get_LineType(),E=0,A=O.GetCenterLabel(e),I=e.Pixels.length-1,S=0;e.Pixels.length>1&&(S=e.Pixels.length-2);let y,f=new L.POINT2(e.Pixels[I]);e.Pixels.length>1&&(y=new L.POINT2(e.Pixels[S]));let D,M,P="",N="",C="";null!=e.get_DTG()&&null!=e.get_DTG1()&&e.get_DTG().length>0&&e.get_DTG1().length>0&&(P=" - "),null!=e.get_Name()&&e.get_Name().length>0&&(N=" ",C=" - ");let p=new n.FontMetrics(e.get_Font()),x=0,b=0;switch(l=new L.POINT2(e.Pixels[0]),e.Pixels.length>1&&(r=new L.POINT2(e.Pixels[1])),"cpof3d"===e.get_Client()&&(d=.9),O.shiftModifierPath(e,l,r,f,y),h){case _.TacticalLines.CONVOY:case _.TacticalLines.HCONVOY:o=g.lineutility.MidPointDouble(e.Pixels[0],e.Pixels[3],0),c=g.lineutility.MidPointDouble(e.Pixels[1],e.Pixels[2],0),O.AddIntegralAreaModifier(e,e.get_V(),O.aboveEndInside,0,o,c,!1),O.AddIntegralAreaModifier(e,e.get_H(),O.aboveStartInside,0,o,c,!1),O.addDTG(e,O.aboveMiddle,1.2*d,2.2*d,o,c,p);break;case _.TacticalLines.BREACH:case _.TacticalLines.BYPASS:case _.TacticalLines.CANALIZE:l=e.Pixels[1],r=e.Pixels[2],O.AddIntegralAreaModifier(e,A,O.aboveMiddlePerpendicular,-.125*d,l,r,!0);break;case _.TacticalLines.PENETRATE:case _.TacticalLines.CLEAR:l=e.Pixels[2],r=e.Pixels[3],O.AddIntegralAreaModifier(e,A,O.aboveMiddle,-.125*d,l,r,!0);break;case _.TacticalLines.DISRUPT:l=e.Pixels[4],r=e.Pixels[5],O.AddIntegralAreaModifier(e,A,O.aboveMiddle,-.125*d,l,r,!0);break;case _.TacticalLines.FIX:l=e.Pixels[0],r=e.Pixels[1],O.AddIntegralAreaModifier(e,A,O.aboveMiddle,-.125*d,l,r,!0);break;case _.TacticalLines.ISOLATE:case _.TacticalLines.OCCUPY:case _.TacticalLines.RETAIN:case _.TacticalLines.SECURE:l=e.Pixels[13],r=e.Pixels[14],O.AddIntegralAreaModifier(e,A,O.aboveMiddle,-.125*d,l,r,!0);break;case _.TacticalLines.CONTAIN:for(l=e.Pixels[13],r=e.Pixels[14],O.AddIntegralAreaModifier(e,A,O.aboveMiddle,-.125*d,l,r,!0),E=0;E<a;E++)if(14===e.Pixels[E].style){l=e.Pixels[E],r=e.Pixels[E+1],O.AddIntegralAreaModifier(e,"ENY",O.aboveMiddle,0,l,r,!0);break}break;case _.TacticalLines.SEIZE:l=e.Pixels[26],r=e.Pixels[27],O.AddIntegralAreaModifier(e,A,O.aboveMiddle,-.125*d,l,r,!0);break;case _.TacticalLines.DEFENDED_AREA_RECTANGULAR:D=g.lineutility.MidPointDouble(e.Pixels[0],e.Pixels[1],0),M=g.lineutility.MidPointDouble(e.Pixels[2],e.Pixels[3],0),O.AddIntegralAreaModifier(e,A+C+e.get_Name(),O.aboveMiddle,0,D,M,!1);break;case _.TacticalLines.SHIP_AOI_RECTANGULAR:e.Pixels[0].x>e.Pixels[3].x?O.AddIntegralAreaModifier(e,A,O.aboveMiddle,d,e.Pixels[0],e.Pixels[3],!1):O.AddIntegralAreaModifier(e,A,O.aboveMiddle,d,e.Pixels[1],e.Pixels[2],!1);break;case _.TacticalLines.NOTACK:s=g.lineutility.MidPointDouble(e.Pixels[0],e.Pixels[Math.trunc(e.Pixels.length/2)],0),O.AddIntegralAreaModifier(e,A,O.area,-1,s,s,!1),O.addDTG(e,O.area,d,2*d,s,s,p);break;case _.TacticalLines.SHIP_AOI_CIRCULAR:{let t=new L.POINT2(e.Pixels[0]),i=new L.POINT2(e.Pixels[0]),a=new L.POINT2(e.Pixels[0]),n=new L.POINT2(e.Pixels[0]);O.GetMBR(e,a,n,t,i),O.AddIntegralAreaModifier(e,A,O.aboveMiddle,d,i,t,!1);break}case _.TacticalLines.MFLANE:l=e.Pixels[4],r=e.Pixels[2],e.Pixels[0].y<e.Pixels[1].y?O.addDTG(e,O.aboveMiddle,.5*d,1.5*d,l,r,p):O.addDTG(e,O.aboveMiddle,-.5*d,-1.5*d,l,r,p);break;case _.TacticalLines.CORDONKNOCK:case _.TacticalLines.CORDONSEARCH:l=e.Pixels[13],r=e.Pixels[0],x=p.stringWidth(A),l.x<r.x&&(x=-x),r=g.lineutility.ExtendAlongLineDouble2(l,r,.75*x),O.AddIntegralAreaModifier(e,A,O.aboveMiddle,0,l,r,!0);break;case _.TacticalLines.FOLLA:l=e.Pixels[0],r=g.lineutility.MidPointDouble(e.Pixels[5],e.Pixels[6],0),r=g.lineutility.ExtendAlongLineDouble(r,l,-10),O.AddIntegralAreaModifier(e,e.get_Name(),O.aboveMiddle,0,l,r,!0);break;case _.TacticalLines.FOLSP:l=e.Pixels[3],r=e.Pixels[6],r=g.lineutility.ExtendAlongLineDouble(r,l,-10),O.AddIntegralAreaModifier(e,e.get_Name(),O.aboveMiddle,0,l,r,!0);break;case _.TacticalLines.ACA_RECTANGULAR:D=g.lineutility.MidPointDouble(e.Pixels[0],e.Pixels[1],0),M=g.lineutility.MidPointDouble(e.Pixels[2],e.Pixels[3],0),O.AddModifier2(e,A+N+e.get_Name(),O.aboveMiddle,-3*d,D,M,!1),O.AddModifier2(e,e.get_T1(),O.aboveMiddle,-2*d,D,M,!1,"T1"),O.AddModifier2(e,"MIN ALT: "+e.get_X(),O.aboveMiddle,-1*d,D,M,!1,"H"),O.AddModifier2(e,"MAX ALT: "+e.get_X1(),O.aboveMiddle,0,D,M,!1,"H1"),O.AddModifier2(e,"Grids: "+e.get_H(),O.aboveMiddle,1*d,D,M,!1,"H2"),O.AddModifier2(e,"EFF: "+e.get_DTG()+P,O.aboveMiddle,2*d,D,M,!1,"W"),O.AddModifier2(e,e.get_DTG1(),O.aboveMiddle,3*d,D,M,!1,"W1");break;case _.TacticalLines.ACA_CIRCULAR:s=g.lineutility.CalcCenterPointDouble2(e.Pixels,e.Pixels.length),O.AddIntegralAreaModifier(e,A+N+e.get_Name(),O.area,-3*d,s,s,!1),O.AddModifier2(e,e.get_T1(),O.area,-2*d,s,s,!1,"T1"),O.AddIntegralAreaModifier(e,"MIN ALT: "+e.get_X(),O.area,-1*d,s,s,!1,"H"),O.AddIntegralAreaModifier(e,"MAX ALT: "+e.get_X1(),O.area,0,s,s,!1,"H1"),O.AddIntegralAreaModifier(e,"Grids: "+e.get_H(),O.area,1*d,s,s,!1,"H2"),O.AddIntegralAreaModifier(e,"EFF: "+e.get_DTG()+P,O.area,2*d,s,s,!1,"W"),O.AddIntegralAreaModifier(e,e.get_DTG1(),O.area,3*d,s,s,!1,"W1");break;case _.TacticalLines.FSA_CIRCULAR:case _.TacticalLines.ATI_CIRCULAR:case _.TacticalLines.CFFZ_CIRCULAR:case _.TacticalLines.SENSOR_CIRCULAR:case _.TacticalLines.CENSOR_CIRCULAR:case _.TacticalLines.DA_CIRCULAR:case _.TacticalLines.CFZ_CIRCULAR:case _.TacticalLines.ZOR_CIRCULAR:case _.TacticalLines.TBA_CIRCULAR:case _.TacticalLines.TVAR_CIRCULAR:case _.TacticalLines.KILLBOXBLUE_CIRCULAR:case _.TacticalLines.KILLBOXPURPLE_CIRCULAR:s=g.lineutility.MidPointDouble(e.Pixels[0],e.Pixels[Math.trunc(e.Pixels.length/2)],0),O.AddIntegralAreaModifier(e,A,O.area,-.5*d,s,s,!1),O.AddIntegralAreaModifier(e,e.get_Name(),O.area,.5*d,s,s,!1),O.AddOffsetModifier(e,e.get_DTG()+P,O.toEnd,-1*d,e.Pixels.length/2,0,4,"left"),O.AddOffsetModifier(e,e.get_DTG1(),O.toEnd,0,e.Pixels.length/2,0,4,"left");break;case _.TacticalLines.FFA_CIRCULAR:case _.TacticalLines.NFA_CIRCULAR:case _.TacticalLines.RFA_CIRCULAR:switch(b=O.getRFALines(e),s=g.lineutility.MidPointDouble(e.Pixels[0],e.Pixels[51],0),b){case 3:O.AddIntegralAreaModifier(e,A,O.area,-1*d,s,s,!0),O.AddIntegralAreaModifier(e,e.get_Name(),O.area,0,s,s,!0),O.addDTG(e,O.area,1*d,2*d,s,s,p);break;case 2:O.AddIntegralAreaModifier(e,A,O.area,-.5*d,s,s,!0),null!=e.get_Name()&&e.get_Name().length>0?O.AddIntegralAreaModifier(e,e.get_Name(),O.area,.5*d,s,s,!0):O.addDTG(e,O.area,.5*d,1.5*d,s,s,p);break;default:O.AddIntegralAreaModifier(e,A,O.area,0,s,s,!0)}break;case _.TacticalLines.BLOCK:for(E=0;E<a;E++)if(14===e.Pixels[E].style){O.AddIntegralModifier(e,A,O.aboveMiddle,0,E,E+1);break}break;case _.TacticalLines.FFA_RECTANGULAR:case _.TacticalLines.NFA_RECTANGULAR:case _.TacticalLines.RFA_RECTANGULAR:switch(b=O.getRFALines(e),l=g.lineutility.MidPointDouble(e.Pixels[0],e.Pixels[1],0),r=g.lineutility.MidPointDouble(e.Pixels[2],e.Pixels[3],0),b){case 3:O.AddModifier2(e,A,O.aboveMiddle,-1*d,l,r,!1),O.AddModifier2(e,e.get_Name(),O.aboveMiddle,0,l,r,!1),O.addDTG(e,O.aboveMiddle,1*d,2*d,l,r,p);break;case 2:O.AddModifier2(e,A,O.aboveMiddle,-.5*d,l,r,!1),null!=e.get_Name()&&e.get_Name().length>0?O.AddModifier2(e,e.get_Name(),O.aboveMiddle,.5*d,l,r,!1):O.addDTG(e,O.aboveMiddle,.5*d,1.5*d,l,r,p);break;default:O.AddModifier2(e,A,O.aboveMiddle,0,l,r,!1)}break;case _.TacticalLines.KILLBOXBLUE_RECTANGULAR:case _.TacticalLines.KILLBOXPURPLE_RECTANGULAR:case _.TacticalLines.FSA_RECTANGULAR:case _.TacticalLines.ATI_RECTANGULAR:case _.TacticalLines.CFFZ_RECTANGULAR:case _.TacticalLines.SENSOR_RECTANGULAR:case _.TacticalLines.CENSOR_RECTANGULAR:case _.TacticalLines.DA_RECTANGULAR:case _.TacticalLines.CFZ_RECTANGULAR:case _.TacticalLines.ZOR_RECTANGULAR:case _.TacticalLines.TBA_RECTANGULAR:case _.TacticalLines.TVAR_RECTANGULAR:D=g.lineutility.MidPointDouble(e.Pixels[0],e.Pixels[1],0),M=g.lineutility.MidPointDouble(e.Pixels[2],e.Pixels[3],0),O.AddModifier2(e,A,O.aboveMiddle,-.5*d,D,M,!1),O.AddModifier2(e,e.get_Name(),O.aboveMiddle,.5*d,D,M,!1),l=e.Pixels[0],r=e.Pixels[1],o=e.Pixels[2],c=e.Pixels[3],"ge"==e.get_Client().toLowerCase()&&(l.x-=u.getSize()/2,o.x-=u.getSize()/2),"ge"!==e.get_Client().toLowerCase()&&(R.clsUtility.shiftModifiersLeft(l,c,12.5),R.clsUtility.shiftModifiersLeft(r,o,12.5)),D.x===M.x&&(M.x+=1),D.x<M.x?(O.AddModifier(e,e.get_DTG()+P,O.toEnd,0,l,c),O.AddModifier(e,e.get_DTG1(),O.toEnd,1*d,l,c)):(O.AddModifier(e,e.get_DTG()+P,O.toEnd,0,o,r),O.AddModifier(e,e.get_DTG1(),O.toEnd,1*d,o,r));break;case _.TacticalLines.PAA_RECTANGULAR:switch(O.AddIntegralModifier(e,A,O.aboveMiddlePerpendicular,0,0,1,!0),O.AddIntegralModifier(e,A,O.aboveMiddle,0,1,2,!0),O.AddIntegralModifier(e,A,O.aboveMiddlePerpendicular,0,2,3,!0),O.AddIntegralModifier(e,A,O.aboveMiddle,0,3,0,!0),b=O.getRFALines(e),l=g.lineutility.MidPointDouble(e.Pixels[0],e.Pixels[1],0),r=g.lineutility.MidPointDouble(e.Pixels[2],e.Pixels[3],0),b){case 3:O.AddModifier2(e,e.get_Name(),O.aboveMiddle,-.5,l,r,!1),O.addDTG(e,O.aboveMiddle,.5*d,1.5*d,l,r,p);break;case 2:null!=e.get_Name()&&e.get_Name().length>0?O.AddModifier2(e,e.get_Name(),O.aboveMiddle,0,l,r,!1):O.addDTG(e,O.aboveMiddle,0,d,l,r,p)}break;case _.TacticalLines.PAA_CIRCULAR:for(let t=0;t<4;t++)O.AddIntegralModifier(e,A,O.area,-.5*d,a/4*t,a/4*t,!1);switch(b=O.getRFALines(e),s=g.lineutility.MidPointDouble(e.Pixels[0],e.Pixels[Math.trunc(a/2+.5)],0),b){case 3:O.AddIntegralAreaModifier(e,e.get_Name(),O.area,-.5,s,s,!1),O.addDTG(e,O.area,.5*d,1.5*d,s,s,p);break;case 2:null!=e.get_Name()&&e.get_Name().length>0?O.AddIntegralAreaModifier(e,e.get_Name(),O.area,0,s,s,!1):O.addDTG(e,O.area,0,d,s,s,p)}break;case _.TacticalLines.RANGE_FAN:if(null!=e.get_X())for(T=e.get_X().split(","),E=0;E<T.length;E++)e.Pixels.length>102*E+25&&(l=e.Pixels[102*E+25],O.AddAreaModifier(e,"ALT "+T[E],O.area,0,l,l));if(!e.get_HideOptionalLabels()){let t=e.get_AM().split(",");for(E=0;E<t.length;E++)e.Pixels.length>102*E+25&&(l=e.Pixels[102*E+25],0===E?O.AddAreaModifier(e,"MIN RG "+t[E],3,-1,l,l):O.AddAreaModifier(e,"MAX RG ("+E.toString()+") "+t[E],3,-1,l,l))}break;case _.TacticalLines.RANGE_FAN_SECTOR:case _.TacticalLines.RADAR_SEARCH:O.addSectorModifiers(e,t)}O.scaleModifiers(e),e.Pixels=i}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"AddModifiers2",new y.RendererException("Failed inside AddModifiers2",e))}}static DisplayModifiers(e,t){try{let i,a,n=t.getFont(),s=0;t.setBackground(E.Color.white);let l,r,o=0,c=0,T=0,u=t.getFontMetrics(),d="",_=0,h=0,A=-1,I=e.Pixels.length;for(s=0;s<I;s++){i=e.modifiers[s];let E=i.lineFactor;d=i.text;let I,S=0,y=0,f=0,D=0;switch(a=i.textPath[0],S=a.x,y=a.y,a=i.textPath[1],f=a.x,D=a.y,o=Math.atan2(D-y,f-S),S>f&&(o-=Math.PI),i.type){case O.toEnd:t.rotate(o,S,y),c=u.stringWidth(d),T=n.getSize(),S<f||S===f&&y>D?(_=S-c,h=y-Math.trunc(T/2)+E*T,t.setColor(e.get_FontBackColor()),t.clearRect(_,h,c,T),h=y+Math.trunc(T/2)+E*T,t.setColor(e.get_TextColor()),t.drawString(d,_,h)):(_=S,h=y-Math.trunc(T/2)+E*T,t.setColor(e.get_FontBackColor()),t.clearRect(_,h,c,T),h=y+Math.trunc(T/2)+E*T,t.setColor(e.get_TextColor()),t.drawString(d,_,h));break;case O.aboveMiddle:I=new L.POINT2((S+f)/2,(y+D)/2),t.rotate(o,I.x,I.y),c=u.stringWidth(d),T=n.getSize(),_=I.x-c/2,h=I.y-Math.trunc(T/2)+E*T,t.setColor(e.get_FontBackColor()),t.clearRect(_,h,c,T),h=I.y+T/2+E*T,t.setColor(e.get_TextColor()),t.drawString(d,_,h);break;case O.area:t.rotate(0,S,y),c=u.stringWidth(d),T=n.getSize(),_=S-c/2,h=y-Math.trunc(T/2)+E*T,t.setColor(e.get_FontBackColor()),t.clearRect(_,h,c,T),h=y+T/2+E*T,t.setColor(e.get_TextColor()),t.drawString(d,_,h);break;case O.screen:if(e.Pixels.length>=14){switch(l=e.Pixels[3],r=e.Pixels[10],A=g.lineutility.GetQuadrantDouble(l,r),o=Math.atan2(r.y-l.y,r.x-l.x),A){case 1:case 4:o+=Math.PI/2;break;case 2:case 3:o-=Math.PI/2}t.rotate(o,S,y),c=u.stringWidth(d),T=n.getSize(),_=S-c/2,h=y-Math.trunc(T/2)+E*T,t.setColor(e.get_FontBackColor()),t.clearRect(_,h,c,T),h=y+T/2+E*T,t.setColor(e.get_TextColor()),t.drawString(d,_,h)}else c=u.stringWidth(d),T=n.getSize(),_=e.Pixels[0].x,h=e.Pixels[0].y,t.setColor(e.get_FontBackColor()),t.clearRect(_,h,c,T),h=h+T/2+E*T,t.setColor(e.get_TextColor()),t.drawString(d,_,h)}}}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"DisplayModifiers",new y.RendererException("Failed inside DisplayModifiers",e))}}static BuildModifierShape(e,t,i,a,n,s,l){let r;try{let e,o,c,T,u,_=new L.POINT2(t),h=new L.POINT2(i);l&&(s+=1),s<0&&(_=g.lineutility.ExtendDirectedLine(t,i,t,2,-s*n),h=g.lineutility.ExtendDirectedLine(t,i,i,2,-s*n)),s>0&&(_=g.lineutility.ExtendDirectedLine(t,i,t,3,s*n),h=g.lineutility.ExtendDirectedLine(t,i,i,3,s*n)),_.y===h.y&&(_.y+=1),e=g.lineutility.ExtendAlongLineDouble(_,h,-a),o=g.lineutility.ExtendDirectedLine(h,_,e,0,n/2),c=g.lineutility.ExtendDirectedLine(h,_,e,1,n/2),T=g.lineutility.ExtendDirectedLine(h,_,_,1,n/2),u=g.lineutility.ExtendDirectedLine(h,_,_,0,n/2),r=new d.Shape2(d.Shape2.SHAPE_TYPE_MODIFIER_FILL),r.moveTo(o),r.lineTo(c),r.lineTo(T),r.lineTo(u),r.lineTo(o)}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"BuildModifierShape",new y.RendererException("Failed inside BuildModifierShape",e))}return r}static GetIntegralTextShapes(e,t,i){try{if(null==e.Pixels||null==i)return;let n,s,l,r=R.clsUtility.getMSRSegmentColors(e);t.setFont(e.get_Font());let o,c,T,u,L,h,E,A=0,I=t.getFontMetrics(),S=0,y=0;switch(e.get_LineType()){case _.TacticalLines.BOUNDARY:{if(o=e.get_EchelonSymbol(),s=new d.Shape2(d.Shape2.SHAPE_TYPE_POLYLINE),s.setLineColor(e.get_LineColor()),s.set_Style(e.get_LineStyle()),E=R.clsUtility.getLineStroke(e.get_LineThickness(),s.get_Style(),e.get_lineCap(),a.BasicStroke.JOIN_ROUND),s.setStroke(E),null!=o&&o.length>0&&(S=I.stringWidth(o)),null==r||0===r.size){for(s.moveTo(e.Pixels[0]),A=1;A<e.Pixels.length;A++)s.lineTo(e.Pixels[A]);i.push(s);break}let _=e.Pixels.length;for(A=0;A<_-1;A++)if(l=null,null!=r&&r.has(A)&&(n=r.get(A),l=new d.Shape2(d.Shape2.SHAPE_TYPE_POLYLINE),l.setLineColor(n),l.set_Style(e.get_LineStyle()),l.setStroke(E)),L=e.Pixels[A],h=e.Pixels[A+1],null!=l?l.moveTo(L):s.moveTo(L),"ge"!==e.get_Client()&&!0!==O.GetBoundarySegmentTooShort(e,t,A))u=g.lineutility.MidPointDouble(L,h,0),null!=l?l.moveTo(L):s.moveTo(L),S>0&&(u=g.lineutility.MidPointDouble(L,h,0),y=g.lineutility.CalcDistanceDouble(L,u)-S/1.5,c=g.lineutility.ExtendAlongLineDouble(L,h,y),y=g.lineutility.CalcDistanceDouble(L,u)+S/1.5,T=g.lineutility.ExtendAlongLineDouble(L,h,y),null!=l?(l.lineTo(c),l.moveTo(T)):(s.lineTo(c),s.moveTo(T))),null!=l?l.lineTo(h):s.lineTo(h),null!=l&&i.push(l);else{if(null!=l){l.lineTo(h),i.push(l);continue}s.lineTo(h)}i.push(s);break}}}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"GetIntegralTextShapes",new y.RendererException("Failed inside GetIntegralTextShapes",e))}}static switchDirection(e){switch(e){case 0:return 1;case 1:return 0;case 2:return 3;case 3:return 2}return-1}static DisplayModifiers2(e,t,i,n,r){try{if(null==i)return;if(null==e.modifiers||0===e.modifiers.length)return;let o,T,u,h,A,I,S,y,f=0,D=e.get_FontBackColor(),P=0,R=0,N=0,C="",p=0,x=0,b=-1,w=e.get_LineType();if(o=e.get_Font(),null==o&&(o=t.getFont()),0===o.getSize())return;t.setFont(o);let m=t.getFontMetrics();null!=D?t.setBackground(D):t.setBackground(E.Color.white);let F,G=-1;for(f=0;f<e.modifiers.length;f++){T=e.modifiers[f];let E=T.lineFactor;if(n&&(E=-E),C=T.text,(null==C||""===C)&&(u=T.image,null==u))continue;R=null!=C?m.stringWidth(C)+1:u.getSymbolBounds().width+1,N=null!=C?o.getSize():u.getSymbolBounds().height;let D,U,v=0,H=0,B=0,k=0;h=T.textPath[0],v=Math.round(h.x),H=Math.round(h.y),A=T.textPath[1],B=Math.round(A.x),k=Math.round(A.y),P=Math.atan2(k-H,B-v),v>B&&(P-=Math.PI),h=new L.POINT2(v,H),A=new L.POINT2(B,k),D=new L.POINT2((v+B)/2,(H+k)/2);let Y=M.ShapeInfo.justify_left;switch(T.type){case O.aboveEnd:case O.toEnd:v===B&&(B+=1),G=E>=0?2:3,w!==_.TacticalLines.LC&&"ge"!==e.get_Client().toLowerCase()||(G=O.switchDirection(G)),Y=T.type===O.toEnd&&v<B||T.type===O.aboveEnd&&B<v?M.ShapeInfo.justify_right:M.ShapeInfo.justify_left,S=g.lineutility.ExtendDirectedLine(A,h,h,G,E*N),F=new s.Point(S.x,S.y),U=new l.Point2D(S.x,S.y);break;case O.aboveStartInside:S=g.lineutility.ExtendAlongLineDouble(h,A,R),F=new s.Point(S.x,S.y),U=new l.Point2D(S.x,S.y);break;case O.aboveEndInside:S=g.lineutility.ExtendAlongLineDouble(A,h,R),F=new s.Point(S.x,S.y),U=new l.Point2D(S.x,S.y);break;case O.aboveMiddle:case O.aboveMiddlePerpendicular:I=D,"2D"===e.get_Client()&&(E+=.5),E>=0?(S=g.lineutility.ExtendDirectedLine(h,I,I,3,Math.abs(E*N)),D=g.lineutility.ExtendDirectedLine(h,D,D,3,Math.abs(E*N))):(S=g.lineutility.ExtendDirectedLine(h,I,I,2,Math.abs(E*N)),D=g.lineutility.ExtendDirectedLine(h,D,D,2,Math.abs(E*N))),v===B&&H>k&&(S=g.lineutility.ExtendDirectedLine(h,I,I,1,Math.abs(E*N)),D=g.lineutility.ExtendDirectedLine(h,D,D,1,Math.abs(E*N))),v===B&&H<k&&(S=g.lineutility.ExtendDirectedLine(h,I,I,0,Math.abs(E*N)),D=g.lineutility.ExtendDirectedLine(h,D,D,0,Math.abs(E*N))),F=new s.Point(S.x,S.y),Y=M.ShapeInfo.justify_center,U=new l.Point2D(D.x,D.y),T.type===O.aboveMiddlePerpendicular&&(v>B&&(P+=Math.PI),H>k&&(P+=Math.PI),P-=Math.PI/2);break;case O.area:P=0,x=H+N/2+E*N,p=null!=u?v-R/3:v,F=new s.Point(p,x),Y=M.ShapeInfo.justify_center,U=new l.Point2D(p,x);break;case O.areaImage:F=new s.Point(v,H),Y=M.ShapeInfo.justify_center,U=new l.Point2D(v,H);break;case O.screen:if(e.Pixels.length>=14){switch(A=e.Pixels[3],I=e.Pixels[10],b=g.lineutility.GetQuadrantDouble(A,I),P=Math.atan2(I.y-A.y,I.x-A.x),Math.abs(P)<Math.PI/8&&(P<0?P-=Math.PI/2:P+=Math.PI/2),b){case 1:case 4:P+=Math.PI/2;break;case 2:case 3:P-=Math.PI/2}p=(v-R)/2,x=H-Math.trunc(N/2)+E*N,x=H+N/2+E*N}else P=0,p=e.Pixels[0].x,x=e.Pixels[0].y,p=(p-R)/2,x=x-Math.trunc(N/2)+E*N,x=x+N/2+E*N;F=new s.Point(p,x)}if(y=new d.Shape2(d.Shape2.SHAPE_TYPE_MODIFIER_FILL),y.setStroke(new a.BasicStroke(0,a.BasicStroke.CAP_ROUND,a.BasicStroke.JOIN_ROUND,3)),null!=e.get_TextColor()?y.setFillColor(e.get_TextColor()):null!=e.get_LineColor()&&y.setFillColor(e.get_LineColor()),null!=e.get_LineColor()&&y.setLineColor(e.get_LineColor()),null!=r?y.setGlyphPosition(F):y.setGlyphPosition(new l.Point2D(0,0)),null!=C&&""!==C){y.setModifierString(C);let e=new c.TextLayout(C,o,t.getFontMetrics().getFontRenderContext());y.setTextLayout(e),y.setTextJustify(Y)}else null!=u&&y.setModifierImage(u);y.setModifierAngle(180*P/Math.PI),y.setModifierPosition(U),null!=y&&i.push(y)}}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"DisplayModifiers2",e)}}static getTextShape(e,t,i,a){let n,s;try{s=e.getFontRenderContext(),n=new c.TextLayout(t,i,s)}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"getTextShape",new y.RendererException("Failed inside getTextShape",e))}return n.getOutline(a)}static createTextOutline(e){let t;try{let i=e.getShape();t=new d.Shape2(d.Shape2.SHAPE_TYPE_MODIFIER_FILL),t.setShape(i),255===e.getFillColor().getRed()&&255===e.getFillColor().getGreen()&&255===e.getFillColor().getBlue()?t.setLineColor(E.Color.BLACK):t.setLineColor(E.Color.WHITE);let n=f.RendererSettings.getInstance().getTextOutlineWidth();t.setStroke(new a.BasicStroke(n,a.BasicStroke.CAP_ROUND,a.BasicStroke.JOIN_ROUND,3))}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"createTextOutline",new y.RendererException("Failed inside createTextOutline",e))}return t}static getShapePoints(e){try{let t,i=new Array,a=new Array(6),n=0;for(let s=e.getPathIterator(null);!s.isDone();s.next()){let e=s.currentSegment(a);if(0===e&&2===n)break;switch(e){case N.IPathIterator.SEG_MOVETO:t=new l.Point2D(a[0],a[1]),i.push(t),n++;break;case N.IPathIterator.SEG_LINETO:t=new l.Point2D(a[0],a[1]),i.push(t);case N.IPathIterator.SEG_QUADTO:case N.IPathIterator.SEG_CUBICTO:case N.IPathIterator.SEG_CLOSE:}}if(i.length>0){let e;e=new Array;for(let t=0;t<i.length;t++){let a=i[t],n=new L.POINT2(a.getX(),a.getY());e.push(n)}return e}}catch(e){if(!(e instanceof Error))throw e;I.ErrorLogger.LogException(O._className,"getshapePoints",new y.RendererException("Failed inside getShapePoints",e))}return null}}t.Modifier2=O},2517:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=t.ShapeTypes=void 0,t.ShapeTypes=class{static RECTANGLE="RECTANGLE";static POINT="POINT";static ELLIPSE="ELLIPSE";static ROUNDED_RECTANGLE="ROUNDED_RECTANGLE";static LINE="LINE";static BCURVE="BCURVE";static ARC="ARC";static PATH="PATH"},t.ActionTypes=class{static ACTION_MOVE_TO=0;static ACTION_LINE_TO=1;static ACTION_CURVE_TO=2;static ACTION_QUAD_TO=3;static ACTION_ARC_TO=4;static ACTION_ARC=5;static ACTION_DASHED_LINE_TO=6}},2571:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Shape2SVG=void 0;const a=i(9441),n=i(3254),s=i(2723);class l{static Convert(...e){switch(e.length){case 7:{const[t,i,s,l,r,o,c]=e;let T="";if(null!=t){let e,r,o=n.RendererSettings.getInstance().getLabelFont().getName()+", sans-serif",c=n.RendererSettings.getInstance().getLabelFont().getSize().toString(),u=t.getText();u=u.replace(/\&/g,"&amp;"),u=u.replace(/\</g,"&lt;"),u=u.replace(/\</g,"&gt;");let g=new a.Point2D(t.getLocation().getX(),t.getLocation().getY());t.getLocation().getX()<0&&(t.getLocation().getX()+t.getTextBounds().getWidth()>0?(r="middle",g.setLocation(t.getTextBounds().getCenterX(),g.getY())):(r="end",g.setLocation(t.getTextBounds().getMaxX(),g.getY()))),n.RendererSettings.getInstance().getLabelFont().isBold()&&(e="bold"),T+='<text x="'+g.getX()+'" y="'+g.getY()+'"',null!=r&&(T+=' text-anchor="'+r+'"'),T+=' font-family="'+o+'"',T+=' font-size="'+c+'px"',null!=e&&(T+=' font-weight="'+e+'"'),T+=' alignment-baseline="alphabetic"',T+=' stroke-miterlimit="3"';let L="",d="";if(null!=i&&(L=T.toString(),L+=' stroke="'+i+'"',null!=l&&(L+=' stroke-width="'+l+'"'),L+=' fill="none"',L+=">",L+=u,L+="</text>"),null!=s&&(d=T.toString(),d+=' fill="'+s+'"',d+=">",d+=u,d+="</text>"),T="",null!=i&&null!=s)T+=L+"\n"+d+"\n";else{if(null==s)return null;T+=d}return T}return null}case 11:{const[t,i,a,n,r,o,c,T,u,g,L]=e;let d=new s.TextInfo(t,i,a,n,r);return l.Convert(d,o,c,T,u,g,L)}default:throw Error("Invalid number of arguments")}}static ConvertForGroup(e,t,i,n,s,l,r){let o="";if(null!=e){let s,l=e.getText();l=l.replace(/\&/g,"&amp;"),l=l.replace(/\</g,"&lt;"),l=l.replace(/\</g,"&gt;");let r=new a.Point2D(e.getLocation().getX(),e.getLocation().getY());e.getLocation().getX()<0&&(e.getLocation().getX()+e.getTextBounds().getWidth()>0?(s="middle",r.setLocation(e.getTextBounds().getCenterX(),r.getY())):(s="end",r.setLocation(e.getTextBounds().getMaxX(),r.getY()))),o+='<text x="'+r.getX()+'" y="'+r.getY()+'"',null!=s&&(o+=' text-anchor="'+s+'"');let c="",T="";if(null!=t&&(c=o.toString(),c+=' stroke="'+t+'"',null!=n&&(c+=' stroke-width="'+n+'"'),c+=' fill="none"',c+=">",c+=l,c+="</text>"),null!=i&&(T=o.toString(),T+=' fill="'+i+'"',T+=">",T+=l,T+="</text>"),o="",null!=t&&null!=i)o+=c+"\n"+T+"\n";else{if(null==i)return null;o+=T}return o}return null}static makeBase64Safe(e){return null!=e?btoa(e):null}static convertPath(e,t,i,a,n,s,l){return null}static convertRect(e,t,i,a,n,s,l){let r="";return null!=e&&!0!==e.isEmpty()?(r+='<rect x="'+e.getX()+'" y="'+e.getY(),r+='" width="'+e.getWidth()+'" height="'+e.getHeight()+'"',null!=t&&(r+=' stroke="'+t+'"',r+=null!=a?' stroke-width="'+a+'"':' stroke-width="2"'),r+=null!=i?' fill="'+i+'"':' fill="none"',r+="/>",r):null}}t.Shape2SVG=l},2723:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextInfo=void 0;const a=i(9441),n=i(3170),s=i(3254),l=i(5955),r=i(7232);t.TextInfo=class{_text="";_location;_bounds;_descent=0;_aboveBaseHeight=0;constructor(e,t,i,s,l){let o,c,T,u,g,L,d;o=null==l?new OffscreenCanvas(10,10).getContext("2d"):l,o.font="string"==typeof s?s:s.toString(),this._text=e,c=o.measureText(e),T=i-c.fontBoundingBoxAscent,u=t,this._location=new a.Point2D(t,i),g=c.width,g=c.actualBoundingBoxRight+c.actualBoundingBoxLeft,L=c.fontBoundingBoxDescent+c.fontBoundingBoxAscent,d=new n.Rectangle2D(T,u,g,L),r.RectUtilities.grow(d,1),this._bounds=d,this._descent=c.fontBoundingBoxDescent,this._aboveBaseHeight=c.fontBoundingBoxAscent}setLocation(e,t){this._bounds.setRect(e,t-this._aboveBaseHeight,this._bounds.getWidth(),this._bounds.getHeight()),r.RectUtilities.grow(this._bounds,1),this._location.setLocation(e,t)}getLocation(){return this._location}shift(e,t){l.ShapeUtilities.offset(this._bounds,e,t),l.ShapeUtilities.offset(this._location,e,t)}getText(){return this._text}getTextBounds(){return this._bounds}getTextOutlineBounds(){let e=s.RendererSettings.getInstance(),t=e.getTextOutlineWidth(),i=this._bounds.clone();return t>0&&(e.getTextBackgroundMethod()===s.RendererSettings.TextBackgroundMethod_OUTLINE?l.ShapeUtilities.grow(i,t/2):l.ShapeUtilities.grow(i,t)),i}getDescent(){return this._descent}strokeText=function(e){e.strokeText(this.text,this.location.getX(),this.location.getY())};fillText=function(e){e.fillText(this.text,this.location.getX(),this.location.getY())}}},2809:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.P1=void 0,t.P1=class{start=0;end_Renamed=0}},2864:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.flot=void 0;const a=i(4305),n=i(1207),s=i(7389),l=i(8712),r=i(8101),o=i(7300),c=i(106);class T{static _className="flot";static GetAnchorageFlotSegment(e,t,i,a,s,l,r,u,g,L,d){let _=0;try{let o=0,c=0,h=0,E=0,A=0,I=0,S=0,y=new Array(30),f=0,D=0,M=0;for(0===l&&e[0]>=e[2]&&(g.value[0]=1),0===l&&e[0]<e[2]&&(g.value[0]=0),D=e[2*l+3]-e[2*l+1],M=e[2*l+2]-e[2*l],S=0===M?Math.PI/2:Math.abs(Math.atan(D/M)),S=180/Math.PI*S,e[2*l+0]<=e[2*l+2]&&e[2*l+1]>=e[2*l+3]?S=90-S:e[2*l+0]<=e[2*l+2]&&e[2*l+1]<=e[2*l+3]?S+=90:e[2*l+0]>=e[2*l+2]&&e[2*l+1]<=e[2*l+3]?S=270-S:e[2*l+0]>=e[2*l+2]&&e[2*l+1]>=e[2*l+3]&&(S=270+S),c=n.lineutility.CalcDistance2(t,i,a,s),h=Math.trunc(c/r),h%2==0&&(h-=1),f=h*r-c,c+=f,e[2*l]>=e[2*l+2]?(S+=90,L.value[0]=1):(S-=90,L.value[0]=0),l>0&&L.value[0]!==d.value[0]&&(1===g.value[0]?g.value[0]=0:g.value[0]=1),1===g.value[0]&&(S+=180),E=0;E<h;E+=2)for(A=Math.trunc(t+(E+.5)*(a-t)*r/c),I=Math.trunc(i+(E+.5)*(s-i)*r/c),T.CalcAnglePoints(A,I,S,y,c/(2*h)),o=0;o<30;o++)u[_]=y[o],_++;d.value[0]=L.value[0]}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"GetAnchorageFlotSegment",new c.RendererException("Failed inside GetAnchorageFlotSegment",e))}return _}static GetAnchorageCountDouble(e,t,i){let a=0;try{let l,r=0,o=0,c=0;for(l=new Array(i),r=0;r<i;r++)l[r]=new s.POINT2(e[r]);for(r=0;r<i-1;r++)c=n.lineutility.CalcDistanceDouble(l[r],l[r+1]),o=Math.trunc(c/t),a+=o>0?12*o:1;a+=1}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"GetAnchorageCountDouble",new c.RendererException("Failed inside GetAnchorageCountDouble",e))}return a}static GetFlotCount2Double(e,t,i){let s=0;try{let l=0,o=0,c=0,T=0,u=10;switch(e.get_LineType()){case r.TacticalLines.WF:case r.TacticalLines.UWF:T=a.arraysupport.getScaledSize(40,e.get_LineThickness());break;case r.TacticalLines.WFG:T=a.arraysupport.getScaledSize(60,e.get_LineThickness()),u=17;break;case r.TacticalLines.WFY:T=a.arraysupport.getScaledSize(60,e.get_LineThickness()),u=20;break;default:T=a.arraysupport.getScaledSize(20,e.get_LineThickness())}for(l=0;l<i-1;l++)switch(c=n.lineutility.CalcDistanceDouble(t[l],t[l+1]),o=Math.trunc(c/T),s+=o*u,e.get_LineType()){case r.TacticalLines.WFG:case r.TacticalLines.WFY:0===o&&(s+=2)}}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"GetFlotCount2Double",new c.RendererException("Failed inside GetFlotCount2Double",e))}return s}static GetFlot2Double(e,t,i){let u=0;try{let o,c,g,L=e.get_LineType(),d=0,_=0,h=0,E=0,A=0,I=0,S=0,y=0,f=-1,D=0,M=0,P=0,R=0,N=0,C=0,O=new s.POINT2,p=new s.POINT2,x=new s.POINT2,b=new s.POINT2,w=new s.POINT2,m=new l.ref,F=new l.ref,G=new l.ref;if(m.value=new Array(1),F.value=new Array(1),G.value=new Array(1),m.value[0]=-1,F.value[0]=-1,G.value[0]=-1,M=T.GetFlotCount2Double(e,t,i),M<=0)return 0;switch(g=new Array(M),n.lineutility.InitializePOINT2Array(g),o=new Array(2*i),L){case r.TacticalLines.WF:case r.TacticalLines.UWF:N=a.arraysupport.getScaledSize(40,e.get_LineThickness());break;case r.TacticalLines.WFG:case r.TacticalLines.WFY:N=a.arraysupport.getScaledSize(60,e.get_LineThickness());break;default:N=a.arraysupport.getScaledSize(20,e.get_LineThickness())}for(d=0;d<i;d++)o[_]=t[d].x,_++,o[_]=t[d].y,_++;for(_=0,d=0,h=0;h<i-1;h++)if(R=n.lineutility.CalcDistance2(o[2*h],o[2*h+1],o[2*h+2],o[2*h+3]),P=Math.trunc(R/N),P>0){for(c=new Array(30*P),f=T.GetFlotSegment2(e,o,h,c,m,F,G),d=0;d<f;d++)if(E=c[_],A=c[_+1],D=c[_+2],O.x=E,O.y=A,O.style=D,d<f-1&&(I=c[_+3],S=c[_+4],y=c[_+5],p.x=I,p.y=S,p.style=y),_+=3,u<M){switch(t[u].x=E,t[u].y=A,L){case r.TacticalLines.WF:case r.TacticalLines.WFG:case r.TacticalLines.WFY:(u+1)%10==0?(t[u].style=10,d<f-1?(g[C]=new s.POINT2(t[u]),g[C].style=0,C++,d<f-2&&(L===r.TacticalLines.WFG&&(x=new s.POINT2(g[C-1]),g[C++]=n.lineutility.ExtendAlongLineDouble(x,p,a.arraysupport.getScaledSize(10,e.get_LineThickness()),5),g[C++]=n.lineutility.ExtendAlongLineDouble(x,p,a.arraysupport.getScaledSize(20,e.get_LineThickness()),20),g[C++]=n.lineutility.ExtendAlongLineDouble(x,p,a.arraysupport.getScaledSize(30,e.get_LineThickness()),0),g[C++]=n.lineutility.ExtendAlongLineDouble(x,p,a.arraysupport.getScaledSize(70,e.get_LineThickness()),5)),L===r.TacticalLines.WFY&&(x=new s.POINT2(g[C-1]),g[C++]=n.lineutility.ExtendAlongLineDouble(x,p,a.arraysupport.getScaledSize(10,e.get_LineThickness()),5),g[C++]=n.lineutility.ExtendAlongLineDouble(x,p,a.arraysupport.getScaledSize(15,e.get_LineThickness()),0),b=n.lineutility.ExtendDirectedLine(g[C-1],p,g[C-1],3,a.arraysupport.getScaledSize(5,e.get_LineThickness()),0),g[C++]=n.lineutility.ExtendAlongLineDouble(x,p,a.arraysupport.getScaledSize(25,e.get_LineThickness()),5),w=n.lineutility.ExtendDirectedLine(g[C-1],p,g[C-1],2,a.arraysupport.getScaledSize(5,e.get_LineThickness()),5),g[C++]=new s.POINT2(b),g[C++]=new s.POINT2(w),g[C++]=n.lineutility.ExtendAlongLineDouble(x,p,a.arraysupport.getScaledSize(30,e.get_LineThickness()),0),g[C++]=n.lineutility.ExtendAlongLineDouble(x,p,a.arraysupport.getScaledSize(60,e.get_LineThickness()),5)))):(x.x=o[2*h],x.y=o[2*h+1],x.style=0,g[C++]=new s.POINT2(x),g[C++]=n.lineutility.ExtendAlongLineDouble(x,p,a.arraysupport.getScaledSize(40,e.get_LineThickness()),5),x.x=o[2*h+2],x.y=o[2*h+3],x.style=5,g[C]=new s.POINT2(t[u]),g[C++].style=0,g[C++]=new s.POINT2(x))):t[u].style=9;break;default:t[u].style=0}u++}switch(L){case r.TacticalLines.WF:case r.TacticalLines.WFG:case r.TacticalLines.WFY:t[u-1].style=10;break;default:t[u-1].style=5}_=0}else g[C].x=o[2*h],g[C].y=o[2*h+1],g[C++].style=0,g[C].x=o[2*h+2],g[C].y=o[2*h+3],g[C++].style=5;switch(L){case r.TacticalLines.WFG:case r.TacticalLines.WFY:break;default:return u}for(d=0;d<C;d++)t[u++]=new s.POINT2(g[d])}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"GetFlot2Double",new c.RendererException("Failed inside GetFlot2Double",e))}return u}static GetFlotSegment2(e,t,i,s,l,u,g){let L=0;try{let o=e.get_LineType(),c=0,d=0,_=0,h=0,E=0,A=0,I=0,S=new Array(30),y=0,f=0,D=0,M=0;switch(o){case r.TacticalLines.WF:case r.TacticalLines.UWF:M=a.arraysupport.getScaledSize(40,e.get_LineThickness());break;case r.TacticalLines.WFG:case r.TacticalLines.WFY:M=a.arraysupport.getScaledSize(60,e.get_LineThickness());break;case r.TacticalLines.OCCLUDED:case r.TacticalLines.UOF:M=a.arraysupport.getScaledSize(50,e.get_LineThickness());break;case r.TacticalLines.SF:case r.TacticalLines.USF:case r.TacticalLines.SFG:case r.TacticalLines.SFY:case r.TacticalLines.OFY:M=a.arraysupport.getScaledSize(80,e.get_LineThickness());break;default:M=a.arraysupport.getScaledSize(20,e.get_LineThickness())}for(A=0,0===i&&t[0]>=t[2]&&(o!==r.TacticalLines.SF&&o!==r.TacticalLines.USF&&o!==r.TacticalLines.SFG&&o!==r.TacticalLines.SFY?l.value[0]=1:l.value[0]=0),0===i&&t[0]<t[2]&&(o!==r.TacticalLines.SF&&o!==r.TacticalLines.USF&&o!==r.TacticalLines.SFG&&o!==r.TacticalLines.SFY?l.value[0]=0:l.value[0]=1),f=t[2*i+3]-t[2*i+1],D=t[2*i+2]-t[2*i],I=0===D?Math.PI/2:Math.abs(Math.atan(f/D)),I=180/Math.PI*I,t[2*i+0]<=t[2*i+2]&&t[2*i+1]>=t[2*i+3]?I=90-I:t[2*i+0]<=t[2*i+2]&&t[2*i+1]<=t[2*i+3]?I+=90:t[2*i+0]>=t[2*i+2]&&t[2*i+1]<=t[2*i+3]?I=270-I:t[2*i+0]>=t[2*i+2]&&t[2*i+1]>=t[2*i+3]&&(I=270+I),d=n.lineutility.CalcDistance2(t[2*i],t[2*i+1],t[2*i+2],t[2*i+3]),L=Math.trunc(d/M),y=L*M-d,d+=y,t[2*i]>=t[2*i+2]?(I+=90,u.value[0]=1):(I-=90,u.value[0]=0),i>0&&u.value[0]!==g.value[0]&&(1===l.value[0]?l.value[0]=0:l.value[0]=1),1===l.value[0]&&(I+=180),_=0;_<L;_++)for(h=Math.trunc(t[2*i]+(_+.5)*(t[2*i+2]-t[2*i])*M/d),E=Math.trunc(t[2*i+1]+(_+.5)*(t[2*i+3]-t[2*i+1])*M/d),T.CalcAnglePoints(h,E,I,S,a.arraysupport.getScaledSize(10,e.get_LineThickness())),c=0;c<30;c++)s[A]=S[c],A+=1;g.value[0]=u.value[0]}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"GetFlotSegment2",new c.RendererException("Failed inside GetFlotSegment2",e))}return 10*L}static GetOFYCountDouble(e,t,i){let a=0;try{let s=0,l=0,r=0,o=0,c=0,T=7;for(s=0;s<i-1;s++)c=n.lineutility.CalcDistanceDouble(e[s],e[s+1]),l=Math.trunc(c/t),r=l,o=l,r<1&&(r=1),o<1&&(o=1),a+=18*r,a+=o*T;a<(T+15)*i&&(a=25*i)}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"GetOFYCountDoulbe",new c.RendererException("Failed inside GetOFYCountDouble",e))}return a}static GetOccludedPointsDouble(e,t,i){let u=0;try{let o,c,g,L,d,_=e.get_LineType(),h=0,E=0,A=0,I=0,S=0,y=0,f=0,D=new l.ref,M=0,P=new s.POINT2,R=new s.POINT2,N=a.arraysupport.getScaledSize(20,e.get_LineThickness()),C=a.arraysupport.getScaledSize(50,e.get_LineThickness()),O=0,p=0,x=0,b=0,w=0,m=0,F=0,G=0,U=0,v=new l.ref,H=new l.ref,B=new l.ref;D.value=new Array(1),v.value=new Array(1),H.value=new Array(1),B.value=new Array(1),v.value[0]=-1,H.value[0]=-1,B.value[0]=-1,M=T.GetOccludedCountDouble(t,i),L=new Array(2*i),c=new Array(3*M/13),g=new Array(10*M/13);let k=c.length;for(h=0;h<k;h++)c[h]=new s.POINT2(t[0]),c[h].style=5;for(k=g.length,h=0;h<k;h++)g[h]=new s.POINT2(t[0]),g[h].style=5;for(d=new Array(i+1),h=0;h<i;h++)L[E]=t[h].x,E++,L[E]=t[h].y,E++;for(E=0,d[0]=0,h=0;h<i;h++)d[h+1]=0;for(h=0;h<i-1;h++){if(U=n.lineutility.CalcTrueSlopeDouble(t[h],t[h+1],D),D.value[0]=-D.value[0],f=n.lineutility.CalcDistanceDouble(t[h],t[h+1]),A=Math.trunc(f/C),S=A,y=A,d[h+1]=A,E=0,S>0){for(o=new Array(30*S),T.GetFlotSegment2(e,L,h,o,v,H,B),I=0;I<10*S;I++)g[O].x=o[E],g[O].y=o[E+1],g[O].style=9,O%10==0&&(F=n.lineutility.CalcDistanceDouble(t[h],g[O]),G=n.lineutility.CalcDistanceDouble(t[h+1],g[O]),g[O]=G>F?n.lineutility.ExtendLineDouble(t[h+1],t[h],-F):n.lineutility.ExtendLineDouble(t[h],t[h+1],-G),g[O].style=9,_===r.TacticalLines.UOF&&(g[O].style=0)),(O+1)%10==0&&(_!==r.TacticalLines.OCCLUDED&&_!==r.TacticalLines.UOF||(F=n.lineutility.CalcDistanceDouble(t[h],g[O-9]),G=n.lineutility.CalcDistanceDouble(t[h+1],g[O-9]),g[O]=G>F?n.lineutility.ExtendLineDouble(t[h+1],t[h],-F-N):n.lineutility.ExtendLineDouble(t[h],t[h+1],-G+N),_===r.TacticalLines.OCCLUDED&&(g[O].style=10),_===r.TacticalLines.UOF&&(g[O].style=5)),_===r.TacticalLines.SF&&(g[O].style=23)),E+=3,O++;o=null}for(b=n.lineutility.CalcDistanceDouble(t[h],t[h+1]),E=0;E<y-1;E++){for(m=0,x=0,I=0;I<=h;I++)x+=d[I];switch(F=n.lineutility.CalcDistanceDouble(t[h],g[10*x+10*E]),G=n.lineutility.CalcDistanceDouble(t[h+1],g[10*x+10*E]),_){case r.TacticalLines.OCCLUDED:case r.TacticalLines.UOF:R=G>F?n.lineutility.ExtendLine2Double(t[h+1],t[h],-F-C/2,0):n.lineutility.ExtendLine2Double(t[h],t[h+1],C/2-G,0);break;case r.TacticalLines.SF:R=G>F?n.lineutility.ExtendLine2Double(t[h+1],t[h],-F-C/8,0):n.lineutility.ExtendLine2Double(t[h],t[h+1],C/8-G,0)}w=n.lineutility.CalcDistanceDouble(t[h],R),w+N<b?c[p]=new s.POINT2(R):(c[p]=new s.POINT2(t[h+1]),m=1),c[p].style=9,p++,F=n.lineutility.CalcDistanceDouble(t[h],c[p-1]),G=n.lineutility.CalcDistanceDouble(t[h+1],c[p-1]),P=F>G?n.lineutility.ExtendLineDouble(t[h],c[p-1],N/2):n.lineutility.ExtendLineDouble(t[h+1],c[p-1],-N/2),0===m?0!==U?(t[h].x<t[h+1].x?c[p]=n.lineutility.ExtendDirectedLine(t[h],t[h+1],P,2,N):c[p]=n.lineutility.ExtendDirectedLine(t[h],t[h+1],P,3,N),c[p].style=0,p++):(t[h].y>t[h+1].y?c[p].x=P.x-N:c[p].x=P.x+N,c[p].y=P.y,p++):(c[p]=new s.POINT2(t[h+1]),p++),c[p-1].style=9,0===m?(F=n.lineutility.CalcDistanceDouble(t[h],c[p-2]),G=n.lineutility.CalcDistanceDouble(t[h+1],c[p-2]),c[p]=F>G?n.lineutility.ExtendLine2Double(t[h],c[p-2],N,0):n.lineutility.ExtendLine2Double(t[h+1],c[p-2],-N,0),_===r.TacticalLines.OCCLUDED&&(c[p].style=10),_===r.TacticalLines.UOF&&(c[p].style=5),_===r.TacticalLines.SF&&(c[p].style=24)):(c[p]=new s.POINT2(t[h+1]),c[p].style=5),p++}0===p?(c[p]=new s.POINT2(t[h]),c[p].style=5,p++,c[p]=new s.POINT2(t[h+1]),c[p].style=5,p++,c[p]=new s.POINT2(t[h+1]),c[p].style=5,p++):(c[p]=new s.POINT2(c[p-1]),c[p].style=5,c[p+1]=new s.POINT2(c[p-1]),c[p+1].style=5,c[p+2]=new s.POINT2(c[p-1]),c[p+2].style=5,p+=3)}for(h=0;h<t.length;h++)t[h]=new s.POINT2(c[0]),t[h].style=5;for(O=0,p=0,h=0;h<M/13;h++){for(E=0;E<10;E++)t[u]=new s.POINT2(g[10*h+E]),u++,O++;for(E=0;E<3;E++)t[u]=new s.POINT2(c[3*h+E]),u++,p++}for(k=t.length,h=u;h<k;h++)t[h]=new s.POINT2(t[u-1])}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"GetOccludedPointsDouble",new c.RendererException("Failed inside GetOccludedPointsDouble",e))}return u}static GetOccludedCountDouble(e,t){let i=0;try{let a=0,s=0,l=0,r=0,o=0;for(a=0;a<t-1;a++)o=n.lineutility.CalcDistanceDouble(e[a],e[a+1]),s=Math.trunc(o/50),l=s,r=s,l<1&&(l=1),r<1&&(r=1),i+=10*l,i+=3*r;i<13*t&&(i=13*t),i<t&&(i=t)}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"GetOccludedCountDouble",new c.RendererException("Failed inside GetOccludedCountDouble",e))}return i}static CalcNewPoint(e,t,i,a,n){try{let s=0,l=0,r=0,o=0,c=0,T=-1;switch(i<0&&(i+=360),i>360&&(i-=360),0<=i&&i<=90&&(T=0,i=90-i,i=Math.abs(i)*(Math.PI/180)),90<i&&i<=180&&(T=1,i-=90,i=Math.abs(i)*(Math.PI/180)),180<i&&i<=270&&(T=2,i=270-i,i=Math.abs(i)*(Math.PI/180)),270<i&&i<=360&&(T=3,i-=270,i=Math.abs(i)*(Math.PI/180)),s=Math.abs(Math.tan(i)),l=Math.abs(n/Math.sqrt(1+s*s)),r=Math.abs(s*l),T){case 0:o=e+l,c=t-r;break;case 1:o=e+l,c=t+r;break;case 2:o=e-l,c=t+r;break;case 3:o=e-l,c=t-r}a[0]=o,a[1]=c}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"CalcNewPoint",new c.RendererException("Failed inside CalcNewPoint",e))}return 1}static GetFlotSegment(e,t,i,a,s,l,r){let u=0;try{let o=0,c=0,g=0,L=0,d=0,_=0,h=0,E=new Array(30),A=0,I=0,S=0;for(_=0,0===t&&e[0]>=e[2]&&(s.value[0]=1),0===t&&e[0]<e[2]&&(s.value[0]=0),I=e[2*t+3]-e[2*t+1],S=e[2*t+2]-e[2*t],h=0===S?Math.PI/2:Math.abs(Math.atan(I/S)),h=180/Math.PI*h,e[2*t+0]<=e[2*t+2]&&e[2*t+1]>=e[2*t+3]?h=90-h:e[2*t+0]<=e[2*t+2]&&e[2*t+1]<=e[2*t+3]?h+=90:e[2*t+0]>=e[2*t+2]&&e[2*t+1]<=e[2*t+3]?h=270-h:e[2*t+0]>=e[2*t+2]&&e[2*t+1]>=e[2*t+3]&&(h=270+h),c=n.lineutility.CalcDistance2(e[2*t],e[2*t+1],e[2*t+2],e[2*t+3]),u=Math.trunc(c/a),A=u*a-c,c+=A,e[2*t]>=e[2*t+2]?(h+=90,l.value[0]=1):(h-=90,l.value[0]=0),t>0&&l.value[0]!==r.value[0]&&(1===s.value[0]?s.value[0]=0:s.value[0]=1),1===s.value[0]&&(h+=180),g=0;g<u;g++)if(L=Math.trunc(e[2*t]+(g+.5)*(e[2*t+2]-e[2*t])*a/c),d=Math.trunc(e[2*t+1]+(g+.5)*(e[2*t+3]-e[2*t+1])*a/c),T.CalcAnglePoints(L,d,h,E,c/(2*u)),null!=i)for(o=0;o<30;o++)i[_]=E[o],_+=1;r.value[0]=l.value[0]}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"GetFlotSegment",new c.RendererException("Failed inside GetFlotSegment",e))}return 10*u}static GetFlotDouble(e,t,i){let a=0;try{let s=new l.ref;s.value=new Array(1),s.value[0]=-1;let r=new l.ref;r.value=new Array(1),r.value[0]=-1;let o=new l.ref;o.value=new Array(1),o.value[0]=-1;let c,u,g=0,L=0,d=0,_=0,h=0,E=0,A=-1,I=0,S=0,y=0,f=0;for(S=T.GetFlotCountDouble(e,t,i),c=new Array(2*i),g=0;g<i;g++)c[L]=e[g].x,L++,c[L]=e[g].y,L++;for(L=0,d=0;d<i-1;d++)if(f=n.lineutility.CalcDistance2(c[_],c[_+1],c[_+2],c[_+3]),_+=2,y=Math.trunc(f/t),y>0){for(u=new Array(30*y),A=T.GetFlotSegment(c,d,u,t,s,r,o),g=0;g<A;g++)h=u[L],E=u[L+1],I=u[L+2],L+=3,a<S&&(e[a].x=h,e[a].y=E,a++);L=0,u=null}else u=null,A=T.GetFlotSegment(c,d,u,t,s,r,o),a<S&&(e[a].x=c[2*d],e[a].y=c[2*d+1],a++);let D=e.length;for(g=a-1;g<D;g++)e[g].style=5}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"GetFlotDouble",new c.RendererException("Failed inside GetFlotDouble",e))}return a}static CalcAnglePoints(e,t,i,a,n){try{let s=0,l=0,r=new Array(2);for(s=0;s<10;s++)T.CalcNewPoint(e,t,i-90+20*s,r,n),a[l]=r[0],a[l+1]=r[1],l+=3}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"CalcAnglePoints",new c.RendererException("Failed inside CalcAnglePoints",e))}return 1}static GetFlotCountDouble(e,t,i){let a=0;try{let s,l=0,r=0,o=0;for(s=new Array(i),l=0;l<i;l++)s[l]=e[l];for(l=0;l<i-1;l++)o=n.lineutility.CalcDistanceDouble(s[l],s[l+1]),r=Math.trunc(o/t),a+=r>0?10*r:1;a+=1}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"GetFlotCountDouble",new c.RendererException("Failed inside GetFlotCountDouble",e))}return a}static GetOFYPointsDouble(e,t,i){let r=0;try{let o,c,u,g,L,d,_,h,E,A,I=0,S=0,y=0,f=0,D=0,M=0,P=0,R=new l.ref,N=0,C=new s.POINT2,O=new s.POINT2,p=a.arraysupport.getScaledSize(20,e.get_LineThickness()),x=a.arraysupport.getScaledSize(80,e.get_LineThickness()),b=0,w=0,m=0,F=0,G=0,U=0,v=0,H=0,B=0,k=0,Y=0,W=new l.ref,X=new l.ref,V=new l.ref;R.value=new Array(1),W.value=new Array(1),X.value=new Array(1),V.value=new Array(1),N=T.GetOFYCountDouble(t,x,i),L=new Array(2*i),c=new Array(N),u=new Array(N),g=new Array(N);let z=c.length;for(I=0;I<z;I++)c[I]=new s.POINT2(t[0]),c[I].style=5;for(z=u.length,I=0;I<z;I++)u[I]=new s.POINT2(t[0]),u[I].style=5;for(n.lineutility.InitializePOINT2Array(g),d=new Array(i+1),I=0;I<i;I++)L[S]=t[I].x,S++,L[S]=t[I].y,S++;for(S=0,d[0]=0,I=0;I<i;I++)d[I+1]=0;for(I=0;I<i-1;I++){if(k=0,Y=0,B=n.lineutility.CalcTrueSlopeDouble(t[I],t[I+1],R),R.value[0]=-R.value[0],P=n.lineutility.CalcDistanceDouble(t[I],t[I+1]),y=Math.trunc(P/x),D=y,M=y,d[I+1]=y,S=0,D>0){for(o=new Array(30*D),_=new Array(D),h=new Array(D),T.GetFlotSegment2(e,L,I,o,W,X,V),f=0;f<10*D;f++)u[b].x=o[S],u[b].y=o[S+1],u[b].style=9,b%10==0&&(_[Math.trunc(f/10)]=new s.POINT2(u[b]),v=n.lineutility.CalcDistanceDouble(t[I],u[b]),H=n.lineutility.CalcDistanceDouble(t[I+1],u[b]),u[b]=H>v?n.lineutility.ExtendLineDouble(t[I+1],t[I],-v):n.lineutility.ExtendLineDouble(t[I],t[I+1],-H),u[b].style=9),(b+1)%10==0&&(h[Math.trunc(f/10)]=new s.POINT2(u[b]),Y++,v=n.lineutility.CalcDistanceDouble(t[I],u[b-9]),H=n.lineutility.CalcDistanceDouble(t[I+1],u[b-9]),u[b]=H>v?n.lineutility.ExtendLineDouble(t[I+1],t[I],-v-p):n.lineutility.ExtendLineDouble(t[I],t[I+1],-H+p),u[b].style=10),S+=3,b++;o=null}else g[m]=new s.POINT2(t[I]),g[m++].style=0,g[m]=new s.POINT2(t[I+1]),g[m++].style=5;for(F=n.lineutility.CalcDistanceDouble(t[I],t[I+1]),E=new Array(M),A=new Array(M),S=0;S<M-1;S++)U=0,v=n.lineutility.CalcDistanceDouble(h[S],h[S+1]),v=v/2-p,O=n.lineutility.ExtendAlongLineDouble(h[S],t[I+1],v,0),G=n.lineutility.CalcDistanceDouble(t[I],O),G+p<F?(c[w]=new s.POINT2(O),E[S]=new s.POINT2(O)):(c[w]=new s.POINT2(t[I+1]),U=1),c[w].style=9,w++,C=n.lineutility.ExtendAlongLineDouble(c[w-1],t[I+1],p/2),0===U?0!==B?(t[I].x<t[I+1].x?c[w]=n.lineutility.ExtendDirectedLine(t[I],t[I+1],C,2,p):c[w]=n.lineutility.ExtendDirectedLine(t[I],t[I+1],C,3,p),c[w].style=0,w++):(t[I].y>t[I+1].y?c[w].x=C.x-p:c[w].x=C.x+p,c[w].y=C.y,w++):(c[w]=new s.POINT2(t[I+1]),w++),c[w-1].style=9,0===U?(v=n.lineutility.CalcDistanceDouble(t[I],c[w-2]),H=n.lineutility.CalcDistanceDouble(t[I+1],c[w-2]),c[w]=v>H?n.lineutility.ExtendLine2Double(t[I],c[w-2],p,0):n.lineutility.ExtendLine2Double(t[I+1],c[w-2],-p,0),A[S]=new s.POINT2(c[w]),k++,c[w].style=10):(c[w]=new s.POINT2(t[I+1]),c[w].style=5),w++;for(0===k&&1===Y&&(g[m]=new s.POINT2(t[I]),g[m++].style=0,g[m]=new s.POINT2(_[0]),g[m++].style=5,g[m]=new s.POINT2(t[I+1]),g[m++].style=0,g[m]=new s.POINT2(h[0]),g[m++].style=5),f=0;f<k;f++)0===f&&(g[m]=new s.POINT2(t[I]),g[m++].style=0,g[m]=new s.POINT2(_[0]),g[m++].style=5),f===k-1&&(g[m]=new s.POINT2(t[I+1]),g[m++].style=0,g[m]=new s.POINT2(h[f+1]),g[m++].style=5),g[m]=new s.POINT2(A[f]),g[m++].style=0,g[m]=new s.POINT2(_[f+1]),g[m++].style=5,v=n.lineutility.CalcDistanceDouble(E[f],h[f]),g[m++]=n.lineutility.ExtendAlongLineDouble(E[f],t[I],v/3,0),g[m++]=n.lineutility.ExtendAlongLineDouble(E[f],t[I],2*v/3,5),O=n.lineutility.ExtendDirectedLine(t[I],t[I+1],g[m-2],2,a.arraysupport.getScaledSize(5,e.get_LineThickness()),0),g[m++]=new s.POINT2(O),O=n.lineutility.ExtendDirectedLine(t[I],t[I+1],g[m-2],3,a.arraysupport.getScaledSize(5,e.get_LineThickness()),5),g[m++]=new s.POINT2(O);0===w?(c[w]=new s.POINT2(t[I]),c[w].style=5,w++,c[w]=new s.POINT2(t[I+1]),c[w].style=5,w++,c[w]=new s.POINT2(t[I+1]),c[w].style=5,w++):(c[w]=new s.POINT2(c[w-1]),c[w].style=5,c[w+1]=new s.POINT2(c[w-1]),c[w+1].style=5,c[w+2]=new s.POINT2(c[w-1]),c[w+2].style=5,w+=3)}for(r=0,I=0;I<b;I++)t[r++]=new s.POINT2(u[I]);for(I=0;I<w;I++)t[r++]=new s.POINT2(c[I]);for(I=0;I<m;I++)t[r++]=new s.POINT2(g[I]);for(z=t.length,I=r;I<z;I++)t[I]=new s.POINT2(t[r-1])}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"GetOFYPointsDouble",new c.RendererException("Failed inside GetOFYPointsDouble",e))}return r}static GetSFPointsDouble(e,t,i){let u=0;try{let o,c,g,L,d,_,h,E,A,I,S=e.get_LineType(),y=0,f=0,D=0,M=0,P=0,R=0,N=0,C=0,O=new l.ref,p=new s.POINT2,x=new s.POINT2,b=a.arraysupport.getScaledSize(20,e.get_LineThickness()),w=a.arraysupport.getScaledSize(80,e.get_LineThickness()),m=0,F=0,G=0,U=0,v=0,H=0,B=0,k=0,Y=0,W=new l.ref,X=new l.ref,V=new l.ref;y=T.GetSFCountDouble(t,i),O.value=new Array(1),X.value=new Array(1),X.value[0]=-1,V.value=new Array(1),V.value[0]=-1,W.value=new Array(1),W.value[0]=-1,L=new Array(2*i),c=new Array(y),g=new Array(y);let z=c.length;for(f=0;f<z;f++)c[f]=new s.POINT2(t[0]),c[f].style=5;for(z=g.length,f=0;f<z;f++)g[f]=new s.POINT2(t[0]),g[f].style=5;for(I=new Array(4*(i-1)),n.lineutility.InitializePOINT2Array(I),d=new Array(i+1),f=0;f<i;f++)L[D]=t[f].x,D++,L[D]=t[f].y,D++;for(D=0,d[0]=0,f=0;f<i;f++)d[f+1]=0;for(f=0;f<i-1;f++){if(Y=n.lineutility.CalcTrueSlopeDouble(t[f],t[f+1],O),O.value[0]=-O.value[0],C=n.lineutility.CalcDistanceDouble(t[f],t[f+1]),M=Math.trunc(C/w),R=M,N=M,d[f+1]=M,D=0,R>0){for(o=new Array(30*R),_=new Array(R),n.lineutility.InitializePOINT2Array(_),h=new Array(R),n.lineutility.InitializePOINT2Array(h),T.GetFlotSegment2(e,L,f,o,W,X,V),P=0;P<10*R;P++)g[m].x=o[D],g[m].y=o[D+1],S===r.TacticalLines.USF||S===r.TacticalLines.SF?g[m].style=19:g[m].style=9,m%10==0&&(_[Math.trunc(P/10)]=g[m],B=n.lineutility.CalcDistanceDouble(t[f],g[m]),k=n.lineutility.CalcDistanceDouble(t[f+1],g[m]),g[m]=k>B?n.lineutility.ExtendLineDouble(t[f+1],t[f],-B):n.lineutility.ExtendLineDouble(t[f],t[f+1],-k),S===r.TacticalLines.USF||S===r.TacticalLines.SF?g[m].style=19:g[m].style=9),(m+1)%10==0&&(S===r.TacticalLines.USF||S===r.TacticalLines.SF?g[m].style=5:g[m].style=23,h[Math.trunc(P/10)]=new s.POINT2(g[m])),0===P&&(I[G]=new s.POINT2(t[f]),I[G++].style=19,I[G]=new s.POINT2(_[P]),I[G++].style=5),P===10*R-1&&(I[G]=new s.POINT2(t[f+1]),I[G++].style=19,I[G]=new s.POINT2(_[Math.trunc(P/10)]),I[G++].style=5),D+=3,m++;o=null}else I[G]=new s.POINT2(t[f]),I[G++].style=0,I[G]=new s.POINT2(t[f+1]),I[G++].style=5;for(U=n.lineutility.CalcDistanceDouble(t[f],t[f+1]),E=new Array(N),n.lineutility.InitializePOINT2Array(E),A=new Array(N),n.lineutility.InitializePOINT2Array(A),D=0;D<N-1;D++)H=0,B=n.lineutility.CalcDistanceDouble(_[D],_[D+1]),B=B/2-b,x=n.lineutility.ExtendAlongLineDouble(_[D],t[f+1],B,0),v=n.lineutility.CalcDistanceDouble(t[f],x),v+b<U?(c[F]=new s.POINT2(x),E[D]=new s.POINT2(x)):(c[F]=new s.POINT2(t[f+1]),H=1),S===r.TacticalLines.USF||S===r.TacticalLines.SF?c[F].style=25:c[F].style=9,F++,p=n.lineutility.ExtendAlongLineDouble(c[F-1],t[f+1],b/2),0===H?0!==Y?(t[f].x<t[f+1].x?c[F]=n.lineutility.ExtendDirectedLine(t[f],t[f+1],p,2,b):c[F]=n.lineutility.ExtendDirectedLine(t[f],t[f+1],p,3,b),c[F].style=0,F++):(t[f].y>t[f+1].y?c[F].x=p.x-b:c[F].x=p.x+b,c[F].y=p.y,F++):(c[F]=new s.POINT2(t[f+1]),F++),S===r.TacticalLines.USF||S===r.TacticalLines.SF?c[F-1].style=25:c[F-1].style=9,0===H?(c[F]=n.lineutility.ExtendAlongLineDouble(c[F-2],t[f+1],b),S===r.TacticalLines.USF||S===r.TacticalLines.SF?c[F].style=5:c[F].style=24,A[D]=new s.POINT2(c[F])):(c[F]=new s.POINT2(t[f+1]),c[F].style=5),F++,S!==r.TacticalLines.SF&&S!==r.TacticalLines.USF||(B=n.lineutility.CalcDistanceDouble(_[D],E[D]),c[F]=new s.POINT2(_[D]),c[F++].style=19,c[F++]=n.lineutility.ExtendAlongLineDouble(_[D],t[f+1],B/2,5),c[F]=new s.POINT2(h[D]),c[F++].style=19,c[F++]=n.lineutility.ExtendAlongLineDouble(h[D],t[f],B/2,5),D===N-2&&(c[F]=new s.POINT2(_[D+1]),c[F++].style=19,c[F++]=n.lineutility.ExtendAlongLineDouble(_[D+1],t[f+1],B/2,5),c[F]=new s.POINT2(h[D+1]),c[F++].style=19,c[F++]=n.lineutility.ExtendAlongLineDouble(h[D+1],t[f],B/2,5)),c[F]=new s.POINT2(E[D]),c[F++].style=25,c[F++]=n.lineutility.ExtendAlongLineDouble(E[D],t[f],B/2,5),c[F]=new s.POINT2(A[D]),c[F++].style=25,c[F++]=n.lineutility.ExtendAlongLineDouble(A[D],t[f+1],B/2,5),S===r.TacticalLines.USF&&(c[F]=new s.POINT2(h[D]),c[F++].style=19,c[F]=new s.POINT2(_[D]),c[F++].style=5,D===N-2&&(c[F]=new s.POINT2(h[D+1]),c[F++].style=19,c[F]=new s.POINT2(_[D+1]),c[F++].style=5),c[F]=new s.POINT2(A[D]),c[F++].style=25,c[F]=new s.POINT2(E[D]),c[F++].style=5)),S===r.TacticalLines.SFG&&(c[F++]=n.lineutility.ExtendAlongLineDouble(E[D],t[f],b/2,22),c[F++]=n.lineutility.ExtendAlongLineDouble(A[D],t[f+1],b/2,20)),S===r.TacticalLines.SFY&&(B=n.lineutility.CalcDistanceDouble(_[D],E[D]),c[F]=n.lineutility.ExtendAlongLineDouble(E[D],t[f],B/4),c[F].style=25,c[F+1]=n.lineutility.ExtendAlongLineDouble(E[D],t[f],B/2),c[F+1].style=5,c[F+2]=n.lineutility.ExtendAlongLineDouble(E[D],t[f],B/2),c[F+2].style=19,c[F+3]=n.lineutility.ExtendAlongLineDouble(E[D],t[f],3*B/4),c[F+3].style=5,c[F+4]=n.lineutility.ExtendDirectedLine(c[F],t[f],c[F],2,a.arraysupport.getScaledSize(5,e.get_LineThickness()),25),c[F+5]=n.lineutility.ExtendDirectedLine(c[F+3],t[f],c[F+3],3,a.arraysupport.getScaledSize(5,e.get_LineThickness()),5),F+=6,B=n.lineutility.CalcDistanceDouble(h[D+1],A[D]),c[F]=n.lineutility.ExtendAlongLineDouble(A[D],t[f+1],B/4),c[F].style=25,c[F+1]=n.lineutility.ExtendAlongLineDouble(A[D],t[f+1],B/2),c[F+1].style=5,c[F+2]=n.lineutility.ExtendAlongLineDouble(A[D],t[f+1],B/2),c[F+2].style=19,c[F+3]=n.lineutility.ExtendAlongLineDouble(A[D],t[f+1],3*B/4),c[F+3].style=5,c[F+4]=n.lineutility.ExtendDirectedLine(c[F],t[f+1],c[F],3,a.arraysupport.getScaledSize(5,e.get_LineThickness()),19),c[F+5]=n.lineutility.ExtendDirectedLine(c[F+3],t[f+1],c[F+3],2,a.arraysupport.getScaledSize(5,e.get_LineThickness()),5),F+=6);0===F?(c[F]=new s.POINT2(t[f]),c[F].style=5,F++,c[F]=new s.POINT2(t[f+1]),c[F].style=5,F++,c[F]=new s.POINT2(t[f+1]),c[F].style=5,F++):(c[F]=new s.POINT2(c[F-1]),c[F].style=5,c[F+1]=new s.POINT2(c[F-1]),c[F+1].style=5,c[F+2]=new s.POINT2(c[F-1]),c[F+2].style=5,F+=3)}for(z=t.length,f=0;f<z;f++)t[f]=new s.POINT2(c[0]),t[f].style=5;for(u=0,f=0;f<m;f++)t[u++]=new s.POINT2(g[f]);for(f=0;f<F;f++)t[u++]=new s.POINT2(c[f]);for(f=0;f<G;f++)t[u++]=new s.POINT2(I[f]);for(z=t.length,f=u;f<z;f++)t[f]=new s.POINT2(t[u-1])}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"GetSFPointsDouble",new c.RendererException("Failed inside GetSFPointsDouble",e))}return u}static GetSFCountDouble(e,t){let i=0;try{let a=0,s=0,l=0,r=0,o=0;for(a=0;a<t-1;a++)o=n.lineutility.CalcDistanceDouble(e[a],e[a+1]),s=Math.trunc(o/80),l=s,r=s,l<1&&(l=1),r<1&&(r=1),i+=10*l,i+=3*r,i+=16*s,i+=4*t;i<25*t&&(i=25*t),i<t&&(i=t)}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(T._className,"GetSFCountDouble",new c.RendererException("Failed inside GetSFCountDouble",e))}return i}}t.flot=T},2876:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PathIterator=void 0;const a=i(3170),n=i(7389);class s{static SEG_CLOSE=4;static SEG_CUBICTO=3;static SEG_LINETO=1;static SEG_MOVETO=0;static SEG_QUADTO=2;static WIND_EVEN_ODD=0;static WIND_NON_ZERO=1;_currentSeg=0;_pts;constructor(e){this._currentSeg=0,this._pts=new Array}getPoints(){return this._pts}currentSegment(e){let t=this._pts[this._currentSeg].style;return t===s.SEG_LINETO||t===s.SEG_MOVETO?(e[0]=this._pts[this._currentSeg].x,e[1]=this._pts[this._currentSeg].y):t===s.SEG_CUBICTO?(e[0]=this._pts[this._currentSeg].x,e[1]=this._pts[this._currentSeg].y,this._currentSeg++,e[2]=this._pts[this._currentSeg].x,e[3]=this._pts[this._currentSeg].y,this._currentSeg++,e[4]=this._pts[this._currentSeg].x,e[5]=this._pts[this._currentSeg].y):t===s.SEG_QUADTO&&(e[0]=this._pts[this._currentSeg].x,e[1]=this._pts[this._currentSeg].y,this._currentSeg++,e[2]=this._pts[this._currentSeg].x,e[3]=this._pts[this._currentSeg].y),t}getWindingRule(){return 1}isDone(){return this._currentSeg===this._pts.length}next(){this._currentSeg++}reset(){this._currentSeg=0}moveTo(e,t){this._pts.push(new n.POINT2(e,t,s.SEG_MOVETO))}lineTo(e,t){this._pts.push(new n.POINT2(e,t,s.SEG_LINETO))}cubicTo(e,t,i,a,l,r){this._pts.push(new n.POINT2(e,t,s.SEG_CUBICTO)),this._pts.push(new n.POINT2(i,a,s.SEG_CUBICTO)),this._pts.push(new n.POINT2(l,r,s.SEG_CUBICTO))}curveTo(e,t,i,a,l,r){this._pts.push(new n.POINT2(e,t,s.SEG_CUBICTO)),this._pts.push(new n.POINT2(i,a,s.SEG_CUBICTO)),this._pts.push(new n.POINT2(l,r,s.SEG_CUBICTO))}quadTo(e,t,i,a){this._pts.push(new n.POINT2(e,t,s.SEG_QUADTO)),this._pts.push(new n.POINT2(i,a,s.SEG_QUADTO))}getBounds(){let e=0,t=this._pts[0].x,i=this._pts[0].x,n=this._pts[0].y,s=this._pts[0].y,l=this._pts.length;for(e=1;e<l;e++)this._pts[e].x<t&&(t=this._pts[e].x),this._pts[e].x>i&&(i=this._pts[e].x),this._pts[e].y<n&&(n=this._pts[e].y),this._pts[e].y>s&&(s=this._pts[e].y);return new a.Rectangle2D(t,n,i-t,s-n)}setPathIterator(e){this.reset(),this._pts=e}}t.PathIterator=s},2937:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PatternFillRenderer=void 0;const a=i(9441),n=i(3170),s=i(8101),l=i(498),r=i(1059),o=i(3444);class c{static svgBeachSlopeModerate='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="30" height="30" ><circle cx="15" cy="15" r="3" stroke="#CCCCCC" fill="#CCCCCC" stroke-width="1"/></svg>';static svgBeachSlopeSteep='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="30" height="30" ><circle cx="15" cy="15" r="3" stroke="#CCCCCC" fill="#CCCCCC" stroke-width="1"/></svg>';static svgFoulGround='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="200" height="200" ><text x="0" y="50" fill="#808080" stroke="#808080" font-family="sans-serif" font-size="60">#</text><text x="100" y="150" fill="#808080" stroke="#808080" font-family="sans-serif" font-size="60">#</text></svg>';static svgKelp='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="200" height="250" ><g id="kelp1" transform="scale(0.25 0.25)"><path fill="none" stroke="#808080" stroke-width="8" d="M186.5,121.5c22.973-20.676,49.014-39.547,80-46c37.059-7.719,81.906,7.875,108-28"/><path fill="none" stroke="#808080" stroke-width="8" d="M262.277,76.832c-43.969-7.328-80.516-35.457-105.445-76"/><path fill="none" stroke="#808080" stroke-width="8" d="M197.5,47.5c-50.059-5.008-102.018,38.008-142,62"/><path fill="none" stroke="#808080" stroke-width="8" d="M135.832,61.391c-52.047,0-87.924-24.668-135.332-38.891"/><path fill="none" stroke="#808080" stroke-width="8" d="M46.5,38.5c0,0-22.5,15.75-30,21"/></g><g id="kelp2" transform="scale(0.25 0.25)"><path fill="none" stroke="#808080" stroke-width="8" d="M586.5,621.5c22.973-20.676,49.016-39.547,80-46c37.059-7.719,81.906,7.875,108-28"/><path fill="none" stroke="#808080" stroke-width="8" d="M662.277,576.832c-43.969-7.328-80.516-35.457-105.445-76"/><path fill="none" stroke="#808080" stroke-width="8" d="M597.5,547.5c-50.059-5.008-102.016,38.008-142,62"/><path fill="none" stroke="#808080" stroke-width="8" d="M535.832,561.391c-52.047,0-87.926-24.668-135.332-38.891"/><path fill="none" stroke="#808080" stroke-width="8" d="M446.5,538.5c0,0-22.5,15.75-30,21"/></g></svg>';static svgRigField='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="50" height="50" ><circle fill="#C0C0C0" cx="25" cy="24" r="10"/></svg>';static svgSweptArea='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="150" height="150" ><circle fill="#FF00FF" cx="19" cy="19" r="19"/><circle fill="#FF00FF" cx="94" cy="94" r="19"/></svg>';static svgWeirs='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="124" height="104"><g id="trap1"><rect x="1" y="21" fill="none" stroke="#C0C0C0" stroke-width="2" width="60" height="30"/><line fill="none" stroke="#C0C0C0" stroke-width="2" x1="11" y1="1" x2="31" y2="21"/></g><g id="trap2"><rect x="63" y="73" fill="none" stroke="#C0C0C0" stroke-width="2" width="60" height="30"/><line fill="none" stroke="#C0C0C0" stroke-width="2" x1="73" y1="53" x2="93" y2="73"/></g></svg>';static MakeHatchPatternFill(e,t,i,s){let c,T;if(e==l.clsUtility.Hatch_ForwardDiagonal)c=t+i,T=-i;else{if(e!=l.clsUtility.Hatch_BackwardDiagonal)return null;c=-i,T=t+i}const u=r.RendererUtilities.colorToHexString(s,!1),g='<svg width="'+t+'" height="'+t+'" xmlns="http://www.w3.org/2000/svg" version="1.1"><line id="middle_line" stroke="'+u+'" stroke-width="'+i+'" x1="'+c+'" x2="'+T+'" y1="'+(t+i)+'" y2="'+-i+'"/><line id="bottom_line" stroke="'+u+'" stroke-width="'+i+'" x1="'+c+'" x2="'+T+'" y1="'+(2*t+i)+'" y2="'+(t-i)+'"/><line id="top_line" stroke="'+u+'" stroke-width="'+i+'" x1="'+c+'" x2="'+T+'" y1="'+i+'" y2="'+(-t-i)+'"/></svg>',L=new a.Point2D(t/2,t/2),d=new n.Rectangle2D(t/2,t/2,t,t);return new o.SVGSymbolInfo(g,L,d,d)}static MakeMetocPatternFill(e){let t=0,i=0,l="";switch(e.get_LineType()){case s.TacticalLines.BEACH_SLOPE_MODERATE:t=30,i=30,l=c.svgBeachSlopeModerate;break;case s.TacticalLines.BEACH_SLOPE_STEEP:t=30,i=30,l=c.svgBeachSlopeSteep;break;case s.TacticalLines.FOUL_GROUND:t=200,i=200,l=c.svgFoulGround;break;case s.TacticalLines.KELP:t=200,i=250,l=c.svgKelp;break;case s.TacticalLines.OIL_RIG_FIELD:t=50,i=50,l=c.svgRigField;break;case s.TacticalLines.SWEPT_AREA:t=150,i=150,l=c.svgSweptArea;break;case s.TacticalLines.FISH_TRAPS:t=124,i=104,l=c.svgWeirs}const r=new a.Point2D(t/2,i/2),T=new n.Rectangle2D(t/2,i/2,t,i);return new o.SVGSymbolInfo(l,r,T,T)}}t.PatternFillRenderer=c},3170:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Rectangle2D=void 0;const a=i(9441);class n{x=0;y=0;width=0;height=0;add(e,t){const i=Math.min(this.getMinX(),e),a=Math.max(this.getMaxX(),e),n=Math.min(this.getMinY(),t),s=Math.max(this.getMaxY(),t);this.setRect(i,n,a-i,s-n)}createIntersection(e){if(e.x>this.x+this.width)return null;if(e.x+e.width<this.x)return null;if(e.y>this.y+this.height)return null;if(e.y+e.height<this.y)return null;if(e.contains(this))return this;if(this.contains(e))return e;let t=0,i=0,a=0,s=0;return this.x<e.x?(t=e.x,a=this.x+this.width):(t=this.x,a=e.x+e.width),this.y<e.y?(i=e.y,s=this.y+this.height):(i=this.y,s=e.y+e.height),new n(t,i,a-t,s-i)}createUnion(e){let t=this.clone();return t.union(e),t}getX(){return this.x}getY(){return this.y}getCenterX(){return(this.x+this.width)/2}getCenterY(){return(this.y+this.height)/2}getMinX(){return this.x}getMinY(){return this.y}getMaxX(){return this.x+this.width}getMaxY(){return this.y+this.height}getHeight(){return this.height}getWidth(){return this.width}contains(...e){switch(e.length){case 1:if(e[0]instanceof n){const[t]=e;let i=t.getX(),a=t.getY();return!(!this.contains(i,a)||(i+=t.getWidth(),a+=t.getHeight(),!this.contains(i,a)))}{const[t]=e;return this.x<=t.getX()&&t.getX()<=this.x+this.width&&this.y<=t.getY()&&t.getY()<=this.y+this.height}case 2:{const[t,i]=e;return this.x<=t&&t<=this.x+this.width&&this.y<=i&&i<=this.y+this.height}case 4:{const[t,i,a,n]=e;let s=t,l=i;return!(!this.contains(s,l)||(s+=a,l+=n,!this.contains(s,l)))}default:throw Error("Invalid number of arguments")}}intersects(...e){switch(e.length){case 1:{const[t]=e;return!(this.x+this.width<t.x||this.x>t.x+t.width||this.y+this.height<t.y||this.y>t.y+t.height)}case 4:{const[t,i,a,n]=e;return!(this.x+this.width<t||this.x>t+a||this.y+this.height<i||this.y>i+n)}default:throw Error("Invalid number of arguments")}}intersectsLine(e){return!1}isEmpty(){return 0===this.width&&0===this.height}setRect(...e){switch(e.length){case 1:{const[t]=e;this.x=t.getX(),this.y=t.getY(),this.width=t.getWidth(),this.height=t.getHeight();break}case 4:{const[t,i,a,n]=e;this.x=t,this.y=i,this.width=a,this.height=n;break}default:throw Error("Invalid number of arguments")}}grow(...e){switch(e.length){case 1:{const[t]=e;this.x=this.x-t,this.y=this.y-t,this.width=this.width+2*t,this.height=this.height+2*t;break}case 2:{const[t,i]=e;this.x=this.x-t,this.y=this.y-i,this.width=this.width+2*t,this.height=this.height+2*i;break}}}stroke(e){e.strokeRect(this.getX(),this.getY(),this.getWidth(),this.getHeight())}fill(e){e.fillRect(this.getX(),this.getY(),this.getWidth(),this.getHeight())}clone(){return new n(this.x,this.y,this.width,this.height)}union(e){let t,i,n,s,l=new a.Point2D(this.x+this.width,this.y+this.height),r=new a.Point2D(e.x+e.width,e.y+e.height);e&&(i=e.y<this.y?e.y:this.y,t=e.x<this.x?e.x:this.x,n=r.getY()>l.getY()?r.getY():l.getY(),s=r.getX()>l.getX()?r.getX():l.getX(),this.setRect(t,i,s-t,n-i))}constructor(...e){switch(e.length){case 0:this.x=0,this.y=0,this.width=0,this.height=0;break;case 4:{const[t,i,a,n]=e;this.x=t,this.y=i,this.width=a,this.height=n;break}default:throw Error("Invalid number of arguments")}}toSVGElement(e,t,i){var a='<rect x="'+this.x+'" y="'+this.y;return a+='" width="'+this.width+'" height="'+this.height+'"',t?a+=' stroke-width="'+t+'"':e&&(a+=' stroke-width="2"'),e&&(a+=' stroke="'+e+'"'),(a+=i?' fill="'+i+'"':' fill="none"')+"/>"}}t.Rectangle2D=n},3247:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawRules=void 0,t.DrawRules=class{static DONOTDRAW=0;static AREA1=101;static AREA2=102;static AREA3=103;static AREA4=104;static AREA5=105;static AREA6=106;static AREA7=107;static AREA8=108;static AREA9=109;static AREA10=110;static AREA11=111;static AREA12=112;static AREA13=113;static AREA14=114;static AREA15=115;static AREA16=116;static AREA17=117;static AREA18=118;static AREA19=119;static AREA20=120;static AREA21=121;static AREA22=122;static AREA23=123;static AREA24=124;static AREA25=125;static AREA26=126;static POINT1=201;static POINT2=202;static POINT3=203;static POINT4=204;static POINT5=205;static POINT6=206;static POINT7=207;static POINT8=208;static POINT9=209;static POINT10=210;static POINT11=211;static POINT12=212;static POINT13=213;static POINT14=214;static POINT15=215;static POINT16=216;static POINT17=217;static POINT18=218;static LINE1=301;static LINE2=302;static LINE3=303;static LINE4=304;static LINE5=305;static LINE6=306;static LINE7=307;static LINE8=308;static LINE9=309;static LINE10=310;static LINE11=311;static LINE12=312;static LINE13=313;static LINE14=314;static LINE15=315;static LINE16=316;static LINE17=317;static LINE18=318;static LINE19=319;static LINE20=320;static LINE21=321;static LINE22=322;static LINE23=323;static LINE24=324;static LINE25=325;static LINE26=326;static LINE27=327;static LINE28=328;static LINE29=329;static CORRIDOR1=401;static AXIS1=501;static AXIS2=502;static POLYLINE1=601;static ELLIPSE1=701;static RECTANGULAR1=801;static RECTANGULAR2=802;static RECTANGULAR3=803;static CIRCULAR1=901;static CIRCULAR2=902;static ARC1=1001}},3254:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RendererSettings=void 0;const a=i(628),n=i(6940),s=i(7300),l=i(269);i(7028);class r{static _instance;static _TextBackgroundMethod=3;static TextBackgroundMethod_NONE=0;static TextBackgroundMethod_COLORFILL=1;static TextBackgroundMethod_OUTLINE=2;static TextBackgroundMethod_OUTLINE_QUICK=3;static _TextBackgroundAutoColorThreshold=160;static _TextOutlineWidth=1;static _ColorLabelForeground;static _ColorLabelBackground;static _PixelSize=50;static _AutoCollapseModifiers=!0;static _SymbolOutlineWidth=1;static _OutlineSPControlMeasures=!0;static _ActionPointDefaultFill=!0;static _CenterOnHQStaff=!0;static OperationalConditionModifierType_SLASH=0;static OperationalConditionModifierType_BAR=1;static _OCMType=1;static SeaMineRenderMethod_MEDAL=1;static SeaMineRenderMethod_ALT=2;static _SeaMineRenderMethod=1;static _UseLineInterpolation=!0;static _ModifierFontName="arial";static _ModifierFontType=a.Font.BOLD;static _ModifierFontWeight="bold";static _ModifierFontSize=12;static _ModifierFontKerning=0;static _ModifierFontTracking=0;_scaleEchelon=!1;_DrawAffiliationModifierAsLabel=!1;static _MPLabelFontName="arial";static _MPLabelFontType=a.Font.BOLD;static _MPLabelFontSize=12;static _KMLLabelScale=1;static _DPI=96;_TwoLabelOnly=!1;_scaleMainIconWithoutSectorMods=!1;_friendlyUnitFillColor=n.AffiliationColors.FriendlyUnitFillColor;_hostileUnitFillColor=n.AffiliationColors.HostileUnitFillColor;_neutralUnitFillColor=n.AffiliationColors.NeutralUnitFillColor;_unknownUnitFillColor=n.AffiliationColors.UnknownUnitFillColor;_friendlyGraphicFillColor=n.AffiliationColors.FriendlyGraphicFillColor;_hostileGraphicFillColor=n.AffiliationColors.HostileGraphicFillColor;_neutralGraphicFillColor=n.AffiliationColors.NeutralGraphicFillColor;_unknownGraphicFillColor=n.AffiliationColors.UnknownGraphicFillColor;_friendlyUnitLineColor=n.AffiliationColors.FriendlyUnitLineColor;_hostileUnitLineColor=n.AffiliationColors.HostileUnitLineColor;_neutralUnitLineColor=n.AffiliationColors.NeutralUnitLineColor;_unknownUnitLineColor=n.AffiliationColors.UnknownUnitLineColor;_friendlyGraphicLineColor=n.AffiliationColors.FriendlyGraphicLineColor;_hostileGraphicLineColor=n.AffiliationColors.HostileGraphicLineColor;_neutralGraphicLineColor=n.AffiliationColors.NeutralGraphicLineColor;_unknownGraphicLineColor=n.AffiliationColors.UnknownGraphicLineColor;_Listeners=new Array;constructor(){this.Init()}static getInstance(){return r._instance||(r._instance=new r),r._instance}Init(){}addEventListener(e){this._Listeners.push(e)}raiseEvents(e){for(let t of this._Listeners)t.SettingsEventChanged(e)}setTextBackgroundMethod(e){r._TextBackgroundMethod=e,r._TextBackgroundMethod===r.TextBackgroundMethod_OUTLINE?r._TextOutlineWidth=4:r._TextBackgroundMethod===r.TextBackgroundMethod_OUTLINE_QUICK&&(r._TextOutlineWidth=1)}getTextBackgroundMethod(){return r._TextBackgroundMethod}setDefaultPixelSize(e){r._PixelSize=e}getDefaultPixelSize(){return r._PixelSize}setOperationalConditionModifierType(e){r._OCMType=e}getOperationalConditionModifierType(){return r._OCMType}setSeaMineRenderMethod(e){r._SeaMineRenderMethod=e}getSeaMineRenderMethod(){return r._SeaMineRenderMethod}setUseLineInterpolation(e){r._UseLineInterpolation=e}getUseLineInterpolation(){return r._UseLineInterpolation}setDeviceDPI(e){r._DPI=e}getDeviceDPI(){return r._DPI}setAutoCollapseModifiers(e){r._AutoCollapseModifiers=e}getAutoCollapseModifiers(){return r._AutoCollapseModifiers}setCenterOnHQStaff(e){r._CenterOnHQStaff=e}getCenterOnHQStaff(){return r._CenterOnHQStaff}getTextOutlineWidth(){return r._TextOutlineWidth}setTextBackgroundAutoColorThreshold(e){r._TextBackgroundAutoColorThreshold=e}getTextBackgroundAutoColorThreshold(){return r._TextBackgroundAutoColorThreshold}setSinglePointSymbolOutlineWidth(e){r._SymbolOutlineWidth=e}getSinglePointSymbolOutlineWidth(){return r._SymbolOutlineWidth}setOutlineSPControlMeasures(e){r._OutlineSPControlMeasures=e}getOutlineSPControlMeasures(){return r._OutlineSPControlMeasures}setActionPointDefaultFill(e){r._ActionPointDefaultFill=e}getActionPointDefaultFill(){return r._ActionPointDefaultFill}setScaleEchelon(e){this._scaleEchelon=e}getScaleEchelon(){return this._scaleEchelon}setDrawAffiliationModifierAsLabel(e){this._DrawAffiliationModifierAsLabel=e}getDrawAffiliationModifierAsLabel(){return this._DrawAffiliationModifierAsLabel}setLabelFont(...e){if(3!==e.length)throw Error("Invalid number of arguments");if("string"==typeof e[1]){const[t,i,n]=e;r._ModifierFontName=t,r._ModifierFontWeight=i,r._ModifierFontType=a.Font.getTypeInt(i),r._ModifierFontSize=n}else if("number"==typeof e[1]){const[t,i,n]=e;r._ModifierFontName=t,r._ModifierFontWeight=a.Font.getTypeString(i),r._ModifierFontType=i,r._ModifierFontSize=n}this.raiseEvents(l.SettingsChangedEvent.EventType_FontChanged)}setMPLabelFont(...e){switch(e.length){case 3:if("number"==typeof e[1]){const[t,i,a]=e;r._MPLabelFontName=t,r._MPLabelFontType=i,r._MPLabelFontSize=a,r._KMLLabelScale=1}else{const[t,i,n]=e;r._MPLabelFontName=t,r._MPLabelFontType=a.Font.getTypeInt(i),r._MPLabelFontSize=n,r._KMLLabelScale=1}break;case 4:if("number"==typeof e[1]){const[t,i,n,s]=e;r._MPLabelFontName=t,r._ModifierFontWeight=a.Font.getTypeString(i),r._ModifierFontType=i,r._MPLabelFontSize=Math.round(n*s),r._KMLLabelScale=s}else{const[t,i,n,s]=e;r._MPLabelFontName=t,r._ModifierFontWeight=i,r._ModifierFontType=a.Font.getTypeInt(i),r._MPLabelFontSize=Math.round(n*s),r._KMLLabelScale=s}break;default:throw Error("Invalid number of arguments")}this.raiseEvents(l.SettingsChangedEvent.EventType_FontChanged)}getLabelFontName(){return r._ModifierFontName}getLabelFontType(){return r._ModifierFontType}getLabelFontSize(){return r._ModifierFontSize}getLabelFont(){try{return new a.Font(r._ModifierFontName,r._ModifierFontType,r._ModifierFontSize)}catch(e){if(e instanceof Error){let t='font creation error, returning "'+r._ModifierFontName+'" font, '+r._ModifierFontSize+"pt. Check font name and type.";return s.ErrorLogger.LogMessage("RendererSettings","getLabelFont",t),s.ErrorLogger.LogMessage("RendererSettings","getLabelFont",e.message),new a.Font("arial",a.Font.BOLD,12)}throw e}}getMPLabelFont(){try{return new a.Font(r._MPLabelFontName,r._MPLabelFontType,r._MPLabelFontSize)}catch(e){if(e instanceof Error){let t='font creation error, returning "'+r._MPLabelFontName+'" font, '+r._MPLabelFontSize+"pt. Check font name and type.";return s.ErrorLogger.LogMessage("RendererSettings","getMPLabelFont",t),s.ErrorLogger.LogMessage("RendererSettings","getMPLabelFont",e.message),new a.Font("arial",a.Font.BOLD,12)}throw e}}getKMLLabelScale(){return r._KMLLabelScale}getMPLabelFontName(){return r._MPLabelFontName}getMPLabelFontType(){return r._MPLabelFontType}getMPLabelFontSize(){return r._MPLabelFontSize}getTwoLabelOnly(){return this._TwoLabelOnly}setTwoLabelOnly(e){this._TwoLabelOnly=e}setScaleMainIcon(e){this._scaleMainIconWithoutSectorMods=e}getScaleMainIcon(){return this._scaleMainIconWithoutSectorMods}getFriendlyUnitFillColor(){return this._friendlyUnitFillColor}setFriendlyUnitFillColor(e){null!=e&&(this._friendlyUnitFillColor=e)}getHostileUnitFillColor(){return this._hostileUnitFillColor}setHostileUnitFillColor(e){null!=e&&(this._hostileUnitFillColor=e)}getNeutralUnitFillColor(){return this._neutralUnitFillColor}setNeutralUnitFillColor(e){null!=e&&(this._neutralUnitFillColor=e)}getUnknownUnitFillColor(){return this._unknownUnitFillColor}setUnknownUnitFillColor(e){null!=e&&(this._unknownUnitFillColor=e)}getHostileGraphicFillColor(){return this._hostileGraphicFillColor}setHostileGraphicFillColor(e){null!=e&&(this._hostileGraphicFillColor=e)}getFriendlyGraphicFillColor(){return this._friendlyGraphicFillColor}setFriendlyGraphicFillColor(e){null!=e&&(this._friendlyGraphicFillColor=e)}getNeutralGraphicFillColor(){return this._neutralGraphicFillColor}setNeutralGraphicFillColor(e){null!=e&&(this._neutralGraphicFillColor=e)}getUnknownGraphicFillColor(){return this._unknownGraphicFillColor}setUnknownGraphicFillColor(e){null!=e&&(this._unknownGraphicFillColor=e)}getFriendlyUnitLineColor(){return this._friendlyUnitLineColor}setFriendlyUnitLineColor(e){null!=e&&(this._friendlyUnitLineColor=e)}getHostileUnitLineColor(){return this._hostileUnitLineColor}setHostileUnitLineColor(e){null!=e&&(this._hostileUnitLineColor=e)}getNeutralUnitLineColor(){return this._neutralUnitLineColor}setNeutralUnitLineColor(e){null!=e&&(this._neutralUnitLineColor=e)}getUnknownUnitLineColor(){return this._unknownUnitLineColor}setUnknownUnitLineColor(e){null!=e&&(this._unknownUnitLineColor=e)}getFriendlyGraphicLineColor(){return this._friendlyGraphicLineColor}setFriendlyGraphicLineColor(e){null!=e&&(this._friendlyGraphicLineColor=e)}getHostileGraphicLineColor(){return this._hostileGraphicLineColor}setHostileGraphicLineColor(e){null!=e&&(this._hostileGraphicLineColor=e)}getNeutralGraphicLineColor(){return this._neutralGraphicLineColor}setNeutralGraphicLineColor(e){null!=e&&(this._neutralGraphicLineColor=e)}getUnknownGraphicLineColor(){return this._unknownGraphicLineColor}setUnknownGraphicLineColor(e){null!=e&&(this._unknownGraphicLineColor=e)}setGraphicPreferredAffiliationColors(e,t,i,a,n,s,l,r){this.setFriendlyGraphicLineColor(e),this.setHostileGraphicLineColor(t),this.setNeutralGraphicLineColor(i),this.setUnknownGraphicLineColor(a),this.setFriendlyGraphicFillColor(n),this.setHostileGraphicFillColor(s),this.setNeutralGraphicFillColor(l),this.setUnknownGraphicFillColor(r)}setUnitPreferredAffiliationColors(e,t,i,a,n,s,l,r){this.setFriendlyUnitLineColor(e),this.setHostileUnitLineColor(t),this.setNeutralUnitLineColor(i),this.setUnknownUnitLineColor(a),this.setFriendlyUnitFillColor(n),this.setHostileUnitFillColor(s),this.setNeutralUnitFillColor(l),this.setUnknownUnitFillColor(r)}}t.RendererSettings=r},3444:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGSymbolInfo=void 0;const a=i(9441),n=i(3170);t.SVGSymbolInfo=class{_svg;_svgDataURI;_anchorX=0;_anchorY=0;_symbolBounds;_bounds;constructor(e,t,i,a){this._svg=e,this._anchorX=t.getX(),this._anchorY=t.getY(),this._symbolBounds=i,this._bounds=a}bytesToBase64(e){const t=String.fromCodePoint(...e);return btoa(t)}escapeChars(e){let t=e;return t=t.replace(/\n/g,""),t=t.replace(/%/g,"%25"),t=t.replace(/#/g,"%23"),t=t.replace(/"/g,"%22"),t=t.replace(/</g,"%3C"),t=t.replace(/=/g,"%3D"),t=t.replace(/>/g,"%3E"),t=t.replace(/\//g,"%2F"),t=t.replace(/\\/g,"%5C"),t=t.replace(/\[/g,"%5B"),t=t.replace(/\]/g,"%5D"),t=t.replace(/\^/g,"%5E"),t=t.replace(/\`/g,"%60"),t=t.replace(/\~/g,"%7E"),t=t.replace(/\?/g,"%3F"),t=t.replace(/:/g,"%3A"),t=t.replace(/;/g,"%3B"),t=t.replace(/\@/g,"%40"),t=t.replace(/\{/g,"%7B"),t=t.replace(/\|/g,"%7C"),t=t.replace(/\}/g,"%7D"),t}getSVGDataURI(){if(null==this._svgDataURI){let e="data:image/svg+xml;base64,"+btoa(String.fromCodePoint(...(new TextEncoder).encode(this._svg)));this._svgDataURI=e}return this._svgDataURI}getSVG(){return this._svg}getSymbolCenterX(){return this._anchorX}getSymbolCenterY(){return this._anchorY}getSymbolCenterPoint(){return new a.Point2D(this._anchorX,this._anchorY)}getSymbolBounds(){return this._symbolBounds}getImageBounds(){return new n.Rectangle2D(this._bounds.getX(),this._bounds.getY(),this._bounds.getWidth(),this._bounds.getHeight())}}},3515:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TGLight=void 0;const a=i(8087),n=i(8101),s=i(8113),l=i(7300),r=i(106),o=i(2421),c=i(2466);class T{LatLongs;static _className="TGLight";get_LatLongs(){return this.LatLongs}set_LatLongs(e){this.LatLongs=e}Pixels;get_Pixels(){return this.Pixels}set_Pixels(e){this.Pixels=e}modifiers;get_Modifiers(){return this.modifiers}set_Modifiers(e){this.modifiers=e}tp;set_TexturePaint(e){this.tp=e}get_TexturePaint(){return this.tp}maskOff;constructor(){}font;set_Font(e){this.font=e}get_Font(){return this.font}iconSize=50;setIconSize(e){this.iconSize=e}getIconSize(){return this.iconSize}keepUnitRatio=!0;set_KeepUnitRatio(e){this.keepUnitRatio=e}get_KeepUnitRation(){return this.keepUnitRatio}lineType=0;set_LineType(e){this.lineType=e}get_LineType(){return this.lineType}lineStyle=0;set_LineStyle(e){this.lineStyle=e}get_LineStyle(){return this.lineStyle}lineColor;get_LineColor(){return this.lineColor}set_LineColor(e){this.lineColor=e}fillStyle=0;get_FillStyle(){return this.fillStyle}set_Fillstyle(e){this.fillStyle=e}fillColor;get_FillColor(){return this.fillColor}set_FillColor(e){this.fillColor=e}fontBackColor=s.Color.WHITE;get_FontBackColor(){return this.fontBackColor}set_FontBackColor(e){this.fontBackColor=e}textColor;get_TextColor(){return this.textColor}set_TextColor(e){this.textColor=e}lineThickness=0;get_LineThickness(){return this.lineThickness}set_LineThickness(e){this.lineThickness=e}t="";get_Name(){return this.visibleModifiers?this.t:""}client="";get_Client(){return this.client}set_client(e){this.client=e}set_Name(e){this.t=e}t1="";get_T1(){return this.visibleModifiers?this.t1:""}set_T1(e){this.t1=e}am="";get_AM(){return this.visibleModifiers?this.am:""}set_AM(e){this.am=e}am1="";get_AM1(){return this.visibleModifiers?this.am1:""}set_AM1(e){this.am1=e}an="";get_AN(){return this.visibleModifiers?this.an:""}set_AN(e){this.an=e}v="";get_V(){return this.visibleModifiers?this.v:""}set_V(e){this.v=e}ap="";get_AP(){return this.visibleModifiers?this.ap:""}set_AP(e){this.ap=e}as="";get_AS(){return this.visibleModifiers?this.as:""}set_AS(e){this.as=e}x="";get_X(){return this.x}set_X(e){this.x=e}x1="";get_X1(){return this.x1}set_X1(e){this.x1=e}h="";get_H(){return this.visibleModifiers||this.lineType===n.TacticalLines.RECTANGULAR?this.h:""}set_H(e){this.h=e}get_Location(){return this.visibleModifiers?this.y.length>0?this.y:this.h:""}set_Location(e){this.y=e}h1="";get_H1(){return this.visibleModifiers?this.h1:""}set_H1(e){this.h1=e}y="";n="ENY";get_N(){return this.n}set_N(e){this.n=e}h2="";get_H2(){return this.visibleModifiers||this.lineType===n.TacticalLines.RECTANGULAR?this.h2:""}set_H2(e){this.h2=e}leftRightMinMax="";get_LRMM(){return this.leftRightMinMax}set_LRMM(e){this.leftRightMinMax=e}w="";get_DTG(){return this.visibleModifiers?this.w:""}set_DTG(e){this.w=e}w1="";get_DTG1(){return this.visibleModifiers?this.w1:""}set_DTG1(e){this.w1=e}standardIdentity="00";get_StandardIdentity(){return this.standardIdentity}isHostile(){return null!=this.standardIdentity&&("5"===this.standardIdentity.charAt(1)||"6"===this.standardIdentity.charAt(1))}echelonSymbol="";get_EchelonSymbol(){return this.echelonSymbol}set_EchelonSymbol(e){this.echelonSymbol=e}symbolId="00000000";get_SymbolId(){return this.symbolId}status="P";get_Status(){return this.status}set_Status(e){this.status=e}set_SymbolId(e){try{if(this.symbolId=e,25===o.SymbolID.getSymbolSet(this.symbolId)){this.standardIdentity=o.SymbolID.getStandardIdentity(this.symbolId)+"",1===this.standardIdentity.length&&(this.standardIdentity="0"+this.standardIdentity),this.status="P",1===o.SymbolID.getStatus(this.symbolId)&&(this.status="A",this.lineStyle=1);let e=o.SymbolID.getAmplifierDescriptor(this.symbolId);this.echelonSymbol=c.SymbolUtilities.getEchelonText(e),null==this.echelonSymbol&&(this.echelonSymbol="")}}catch(e){if(!(e instanceof Error))throw e;l.ErrorLogger.LogException(T._className,"set_SymbolId",new r.RendererException("Failed inside set_SymbolId",e))}}visibleModifiers=!0;set_VisibleModifiers(e){this.visibleModifiers=e}get_VisibleModifiers(){return this.visibleModifiers}visibleLabels;set_VisibleLabels(e){this.visibleLabels=e}get_VisibleLabels(){return this.visibleLabels}_useLineInterpolation=!1;get_UseLineInterpolation(){return this._useLineInterpolation}set_UseLineInterpolation(e){this._useLineInterpolation=e}_useDashArray=!1;get_UseDashArray(){return this._useDashArray}set_UseDashArray(e){this._useDashArray=e}_useHatchFill=!1;get_UseHatchFill(){return this._useHatchFill}set_UseHatchFill(e){this._useHatchFill=e}_wasClipped=!1;set_WasClipped(e){this._wasClipped=e}get_WasClipped(){return this._wasClipped}_HideOptionalLabels=!1;get_HideOptionalLabels(){return this._HideOptionalLabels}set_HideOptionalLabels(e){this._HideOptionalLabels=e}lineCap=a.BasicStroke.CAP_SQUARE;set_lineCap(e){this.lineCap=e}get_lineCap(){return this.lineCap}}t.TGLight=T},3586:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Path=void 0;const a=i(7389);t.Path=class{pts=[];lineTo(e,t){if(this.pts.length>0){var i=this.pts[this.pts.length-1];if(i.x===e&&i.y===t)return}this.pts.push(new a.POINT2(e,t))}moveTo(e,t){if(this.pts.length>0){var i=this.pts[this.pts.length-1];if(i.x===e&&i.y===t)return}this.pts.push(new a.POINT2(e,t))}curveTo(e,t,i,n,s,l){this.pts.push(new a.POINT2(e,t)),this.pts.push(new a.POINT2(i,n)),this.pts.push(new a.POINT2(s,l))}cubicTo(e,t,i,n,s,l){this.pts.push(new a.POINT2(e,t)),this.pts.push(new a.POINT2(i,n)),this.pts.push(new a.POINT2(s,l))}quadTo(e,t,i,n){this.pts.push(new a.POINT2(e,t)),this.pts.push(new a.POINT2(i,n))}addPath(e){this.pts.push(...e.getPts())}computeBounds(e,t){var i=0,a=this.pts[0].x,n=this.pts[0].x,s=this.pts[0].y,l=this.pts[0].y,r=null;for(i=1;i<this.pts.length;i++)(r=this.pts[i]).x<a&&(a=r.x),r.x>n&&(n=r.x),r.y<s&&(s=r.y),r.y>l&&(l=r.y);e.left=a,e.top=s,e.right=n,e.bottom=l}close(){}getPts(){return this.pts}reset(){this.pts.length=0}}},3694:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CChannelPoints2=void 0;const a=i(7389);t.CChannelPoints2=class{m_Line1;m_Line2;constructor(...e){switch(e.length){case 0:this.m_Line1=new a.POINT2,this.m_Line2=new a.POINT2;break;case 1:{const[t]=e;this.m_Line1=new a.POINT2(t.m_Line1),this.m_Line2=new a.POINT2(t.m_Line2);break}default:throw Error("Invalid number of arguments")}}}},3867:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PathIterator=void 0,t.PathIterator=class{arrActions=[];size=0;index=0;constructor(e){this.arrActions=e,this.size=e.length}isDone(){return this.index===this.size}next(){this.index++}currentSegment(){return this.arrActions[this.index]}}},3874:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MSLookup=void 0;const a=i(6932),n=i(680),s=i(2421),l=i(2466),r=i(7300),o=i(7028),c=i(1059);class T{static mse;static msd;static _instance;static _initCalled=!1;static _isReady=!1;static _MSLookupD;static _MSLookupE;_IDListD=[];_IDListE=[];static msdJSON="/msd.json";static mseJSON="/mse.json";static async loadData(e){let t=T.msdJSON,i=T.mseJSON;e&&(t=e+t.substring(t.lastIndexOf("/")+1,t.length),i=e+i.substring(i.lastIndexOf("/")+1,i.length));let a=new Array;a.push(c.RendererUtilities.getData(t)),a.push(c.RendererUtilities.getData(i)),await Promise.all(a).then((e=>{T.msd=e[0],T.mse=e[1]})).catch((e=>{throw e}))}constructor(){this.init()}static getInstance(){return T._instance||(T._instance=new T),T._instance}init(){if(!1===T._initCalled){T._initCalled=!0,T._MSLookupD=new Map,T._MSLookupE=new Map,this._IDListD=new Array,this._IDListE=new Array;try{this.populateLookup(s.SymbolID.Version_2525Dch1),this.populateLookup(s.SymbolID.Version_2525E),this._IDListD.length>0&&this._IDListE.length>0&&(T._isReady=!0)}catch(e){if(!(e instanceof Error))throw e;console.log(e.message)}}}isReady(){return T._isReady}async populateLookup(e){let t,i;try{let a;e===s.SymbolID.Version_2525E?(t=T._MSLookupE,i=this._IDListE,a=T.mse.mse.SYMBOL):(t=T._MSLookupD,i=this._IDListD,a=T.msd.msd.SYMBOL);let l="";for(let s of a)if(6!=s.code.length&&(s.code="000000"),""!==s.ss&&(l=s.ss),"000000"!==s.code){let a=l+s.code;if(s.geometry||s.drawRules){let i=null;s.modifiers&&""!==s.modifiers&&(i=s.modifiers.split(","));let r=s.geometry||"",o=s.drawRules||"";t.set(a,new n.MSInfo(e,l,s.e,s.et,s.est,s.code,r,o,this.populateModifierList(i)))}else t.set(a,new n.MSInfo(e,l,s.e,s.et,s.est,s.code,this.populateModifierList(l,s.code,e)));i.push(a)}}catch(e){if(!(e instanceof Error))throw e;console.log(e.message)}}populateModifierList(...e){switch(e.length){case 1:{const[t]=e;let i=new Array;if(null!=t&&t.length>0)for(let e of t)i.push(a.Modifiers.getModifierKey(e));return i}case 3:{const[t,i,n]=e;let l=parseInt(t),r=new Array;if(n>=s.SymbolID.Version_2525E)switch(l){case s.SymbolID.SymbolSet_LandUnit:case s.SymbolID.SymbolSet_LandCivilianUnit_Organization:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.B_ECHELON),r.push(a.Modifiers.D_TASK_FORCE_INDICATOR),r.push(a.Modifiers.F_REINFORCED_REDUCED),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.J_EVALUATION_RATING),r.push(a.Modifiers.K_COMBAT_EFFECTIVENESS),r.push(a.Modifiers.L_SIGNATURE_EQUIP),r.push(a.Modifiers.M_HIGHER_FORMATION),r.push(a.Modifiers.P_IFF_SIF_AIS),r.push(a.Modifiers.Q_DIRECTION_OF_MOVEMENT),r.push(a.Modifiers.S_HQ_STAFF_INDICATOR),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.W_DTG_1),r.push(a.Modifiers.X_ALTITUDE_DEPTH),r.push(a.Modifiers.Y_LOCATION),r.push(a.Modifiers.Z_SPEED),l===s.SymbolID.SymbolSet_LandUnit&&"110000"===i&&r.push(a.Modifiers.AA_SPECIAL_C2_HQ),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AD_PLATFORM_TYPE),r.push(a.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME),r.push(a.Modifiers.AF_COMMON_IDENTIFIER),r.push(a.Modifiers.AH_AREA_OF_UNCERTAINTY),r.push(a.Modifiers.AI_DEAD_RECKONING_TRAILER),r.push(a.Modifiers.AJ_SPEED_LEADER),r.push(a.Modifiers.AK_PAIRING_LINE),r.push(a.Modifiers.AL_OPERATIONAL_CONDITION),r.push(a.Modifiers.AO_ENGAGEMENT_BAR),r.push(a.Modifiers.AQ_GUARDED_UNIT),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_LandEquipment:case s.SymbolID.SymbolSet_SignalsIntelligence:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.C_QUANTITY),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.J_EVALUATION_RATING),r.push(a.Modifiers.K_COMBAT_EFFECTIVENESS),r.push(a.Modifiers.L_SIGNATURE_EQUIP),r.push(a.Modifiers.M_HIGHER_FORMATION),r.push(a.Modifiers.N_HOSTILE),r.push(a.Modifiers.P_IFF_SIF_AIS),r.push(a.Modifiers.Q_DIRECTION_OF_MOVEMENT),r.push(a.Modifiers.R_MOBILITY_INDICATOR),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.V_EQUIP_TYPE),r.push(a.Modifiers.W_DTG_1),r.push(a.Modifiers.X_ALTITUDE_DEPTH),r.push(a.Modifiers.Y_LOCATION),r.push(a.Modifiers.Z_SPEED),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AD_PLATFORM_TYPE),r.push(a.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME),r.push(a.Modifiers.AF_COMMON_IDENTIFIER),r.push(a.Modifiers.AG_AUX_EQUIP_INDICATOR),r.push(a.Modifiers.AH_AREA_OF_UNCERTAINTY),r.push(a.Modifiers.AI_DEAD_RECKONING_TRAILER),r.push(a.Modifiers.AJ_SPEED_LEADER),r.push(a.Modifiers.AK_PAIRING_LINE),r.push(a.Modifiers.AL_OPERATIONAL_CONDITION),r.push(a.Modifiers.AO_ENGAGEMENT_BAR),r.push(a.Modifiers.AQ_GUARDED_UNIT),r.push(a.Modifiers.AS_COUNTRY),r.push(a.Modifiers.AR_SPECIAL_DESIGNATOR);break;case s.SymbolID.SymbolSet_LandInstallation:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.J_EVALUATION_RATING),r.push(a.Modifiers.K_COMBAT_EFFECTIVENESS),r.push(a.Modifiers.P_IFF_SIF_AIS),r.push(a.Modifiers.S_HQ_STAFF_INDICATOR),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.W_DTG_1),r.push(a.Modifiers.X_ALTITUDE_DEPTH),r.push(a.Modifiers.Y_LOCATION),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME),r.push(a.Modifiers.AH_AREA_OF_UNCERTAINTY),r.push(a.Modifiers.AI_DEAD_RECKONING_TRAILER),r.push(a.Modifiers.AJ_SPEED_LEADER),r.push(a.Modifiers.AK_PAIRING_LINE),r.push(a.Modifiers.AL_OPERATIONAL_CONDITION),r.push(a.Modifiers.AQ_GUARDED_UNIT),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_DismountedIndividuals:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.J_EVALUATION_RATING),r.push(a.Modifiers.K_COMBAT_EFFECTIVENESS),r.push(a.Modifiers.M_HIGHER_FORMATION),r.push(a.Modifiers.Q_DIRECTION_OF_MOVEMENT),r.push(a.Modifiers.P_IFF_SIF_AIS),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.V_EQUIP_TYPE),r.push(a.Modifiers.W_DTG_1),r.push(a.Modifiers.X_ALTITUDE_DEPTH),r.push(a.Modifiers.Y_LOCATION),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AF_COMMON_IDENTIFIER),r.push(a.Modifiers.AS_COUNTRY),r.push(a.Modifiers.AV_LEADERSHIP);break;case s.SymbolID.SymbolSet_Space:case s.SymbolID.SymbolSet_SpaceMissile:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.Q_DIRECTION_OF_MOVEMENT),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.V_EQUIP_TYPE),r.push(a.Modifiers.X_ALTITUDE_DEPTH),r.push(a.Modifiers.Z_SPEED),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AL_OPERATIONAL_CONDITION),r.push(a.Modifiers.AO_ENGAGEMENT_BAR),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_Air:case s.SymbolID.SymbolSet_AirMissile:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.Q_DIRECTION_OF_MOVEMENT),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.V_EQUIP_TYPE),r.push(a.Modifiers.X_ALTITUDE_DEPTH),r.push(a.Modifiers.Z_SPEED),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AF_COMMON_IDENTIFIER),r.push(a.Modifiers.AL_OPERATIONAL_CONDITION),r.push(a.Modifiers.AO_ENGAGEMENT_BAR),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_SeaSurface:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.P_IFF_SIF_AIS),r.push(a.Modifiers.Q_DIRECTION_OF_MOVEMENT),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.V_EQUIP_TYPE),r.push(a.Modifiers.Y_LOCATION),r.push(a.Modifiers.Z_SPEED),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AQ_GUARDED_UNIT),r.push(a.Modifiers.AL_OPERATIONAL_CONDITION),r.push(a.Modifiers.AO_ENGAGEMENT_BAR),r.push(a.Modifiers.AQ_GUARDED_UNIT),r.push(a.Modifiers.AR_SPECIAL_DESIGNATOR),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_SeaSubsurface:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.P_IFF_SIF_AIS),r.push(a.Modifiers.Q_DIRECTION_OF_MOVEMENT),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.V_EQUIP_TYPE),r.push(a.Modifiers.X_ALTITUDE_DEPTH),r.push(a.Modifiers.Y_LOCATION),r.push(a.Modifiers.Z_SPEED),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AL_OPERATIONAL_CONDITION),r.push(a.Modifiers.AO_ENGAGEMENT_BAR),r.push(a.Modifiers.AQ_GUARDED_UNIT),r.push(a.Modifiers.AR_SPECIAL_DESIGNATOR),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_Activities:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.J_EVALUATION_RATING),r.push(a.Modifiers.Q_DIRECTION_OF_MOVEMENT),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.W_DTG_1),r.push(a.Modifiers.Y_LOCATION),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_CyberSpace:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.B_ECHELON),r.push(a.Modifiers.D_TASK_FORCE_INDICATOR),r.push(a.Modifiers.F_REINFORCED_REDUCED),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.K_COMBAT_EFFECTIVENESS),r.push(a.Modifiers.L_SIGNATURE_EQUIP),r.push(a.Modifiers.M_HIGHER_FORMATION),r.push(a.Modifiers.S_HQ_STAFF_INDICATOR),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.V_EQUIP_TYPE),r.push(a.Modifiers.W_DTG_1),r.push(a.Modifiers.Y_LOCATION),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AO_ENGAGEMENT_BAR),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_ControlMeasure:break;case s.SymbolID.SymbolSet_Atmospheric:"110102"===i||"110202"===i||"162200"===i?r.push(a.Modifiers.X_ALTITUDE_DEPTH):"140200"===i&&r.push(a.Modifiers.AN_AZIMUTH);case s.SymbolID.SymbolSet_MineWarfare:case s.SymbolID.SymbolSet_Oceanographic:case s.SymbolID.SymbolSet_MeteorologicalSpace:}else switch(l){case s.SymbolID.SymbolSet_LandUnit:case s.SymbolID.SymbolSet_LandCivilianUnit_Organization:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.B_ECHELON),r.push(a.Modifiers.D_TASK_FORCE_INDICATOR),r.push(a.Modifiers.F_REINFORCED_REDUCED),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.J_EVALUATION_RATING),r.push(a.Modifiers.K_COMBAT_EFFECTIVENESS),r.push(a.Modifiers.M_HIGHER_FORMATION),r.push(a.Modifiers.P_IFF_SIF_AIS),r.push(a.Modifiers.Q_DIRECTION_OF_MOVEMENT),r.push(a.Modifiers.S_HQ_STAFF_INDICATOR),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.W_DTG_1),r.push(a.Modifiers.X_ALTITUDE_DEPTH),r.push(a.Modifiers.Y_LOCATION),r.push(a.Modifiers.Z_SPEED),l===s.SymbolID.SymbolSet_LandUnit&&"110000"===i&&r.push(a.Modifiers.AA_SPECIAL_C2_HQ),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AH_AREA_OF_UNCERTAINTY),r.push(a.Modifiers.AI_DEAD_RECKONING_TRAILER),r.push(a.Modifiers.AJ_SPEED_LEADER),r.push(a.Modifiers.AK_PAIRING_LINE),r.push(a.Modifiers.AL_OPERATIONAL_CONDITION),r.push(a.Modifiers.AO_ENGAGEMENT_BAR),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_LandEquipment:case s.SymbolID.SymbolSet_SignalsIntelligence_Land:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.C_QUANTITY),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.J_EVALUATION_RATING),r.push(a.Modifiers.L_SIGNATURE_EQUIP),r.push(a.Modifiers.N_HOSTILE),r.push(a.Modifiers.P_IFF_SIF_AIS),r.push(a.Modifiers.Q_DIRECTION_OF_MOVEMENT),r.push(a.Modifiers.R_MOBILITY_INDICATOR),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.V_EQUIP_TYPE),r.push(a.Modifiers.W_DTG_1),r.push(a.Modifiers.X_ALTITUDE_DEPTH),r.push(a.Modifiers.Y_LOCATION),r.push(a.Modifiers.Z_SPEED),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AD_PLATFORM_TYPE),r.push(a.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME),r.push(a.Modifiers.AF_COMMON_IDENTIFIER),r.push(a.Modifiers.AG_AUX_EQUIP_INDICATOR),r.push(a.Modifiers.AH_AREA_OF_UNCERTAINTY),r.push(a.Modifiers.AI_DEAD_RECKONING_TRAILER),r.push(a.Modifiers.AJ_SPEED_LEADER),r.push(a.Modifiers.AK_PAIRING_LINE),r.push(a.Modifiers.AL_OPERATIONAL_CONDITION),r.push(a.Modifiers.AO_ENGAGEMENT_BAR),r.push(a.Modifiers.AQ_GUARDED_UNIT),r.push(a.Modifiers.AR_SPECIAL_DESIGNATOR),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_LandInstallation:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.J_EVALUATION_RATING),r.push(a.Modifiers.K_COMBAT_EFFECTIVENESS),r.push(a.Modifiers.P_IFF_SIF_AIS),r.push(a.Modifiers.S_HQ_STAFF_INDICATOR),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.W_DTG_1),r.push(a.Modifiers.X_ALTITUDE_DEPTH),r.push(a.Modifiers.Y_LOCATION),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AH_AREA_OF_UNCERTAINTY),r.push(a.Modifiers.AI_DEAD_RECKONING_TRAILER),r.push(a.Modifiers.AJ_SPEED_LEADER),r.push(a.Modifiers.AK_PAIRING_LINE),r.push(a.Modifiers.AL_OPERATIONAL_CONDITION),r.push(a.Modifiers.AO_ENGAGEMENT_BAR),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_Space:case s.SymbolID.SymbolSet_SpaceMissile:case s.SymbolID.SymbolSet_SignalsIntelligence_Space:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.Q_DIRECTION_OF_MOVEMENT),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.V_EQUIP_TYPE),r.push(a.Modifiers.X_ALTITUDE_DEPTH),r.push(a.Modifiers.Z_SPEED),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AL_OPERATIONAL_CONDITION),r.push(a.Modifiers.AO_ENGAGEMENT_BAR),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_Air:case s.SymbolID.SymbolSet_AirMissile:case s.SymbolID.SymbolSet_SignalsIntelligence_Air:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.P_IFF_SIF_AIS),r.push(a.Modifiers.Q_DIRECTION_OF_MOVEMENT),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.V_EQUIP_TYPE),r.push(a.Modifiers.X_ALTITUDE_DEPTH),r.push(a.Modifiers.Z_SPEED),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AL_OPERATIONAL_CONDITION),r.push(a.Modifiers.AO_ENGAGEMENT_BAR),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_SeaSurface:case s.SymbolID.SymbolSet_SignalsIntelligence_SeaSurface:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.P_IFF_SIF_AIS),r.push(a.Modifiers.Q_DIRECTION_OF_MOVEMENT),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.V_EQUIP_TYPE),r.push(a.Modifiers.Y_LOCATION),r.push(a.Modifiers.Z_SPEED),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AL_OPERATIONAL_CONDITION),r.push(a.Modifiers.AO_ENGAGEMENT_BAR),r.push(a.Modifiers.AQ_GUARDED_UNIT),r.push(a.Modifiers.AR_SPECIAL_DESIGNATOR),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_SeaSubsurface:case s.SymbolID.SymbolSet_SignalsIntelligence_SeaSubsurface:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.AG_AUX_EQUIP_INDICATOR),r.push(a.Modifiers.AL_OPERATIONAL_CONDITION),r.push(a.Modifiers.AO_ENGAGEMENT_BAR),r.push(a.Modifiers.AR_SPECIAL_DESIGNATOR),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.Q_DIRECTION_OF_MOVEMENT),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.V_EQUIP_TYPE),r.push(a.Modifiers.X_ALTITUDE_DEPTH),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_Activities:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.J_EVALUATION_RATING),r.push(a.Modifiers.Q_DIRECTION_OF_MOVEMENT),r.push(a.Modifiers.W_DTG_1),r.push(a.Modifiers.Y_LOCATION),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_CyberSpace:r.push(a.Modifiers.A_SYMBOL_ICON),r.push(a.Modifiers.B_ECHELON),r.push(a.Modifiers.D_TASK_FORCE_INDICATOR),r.push(a.Modifiers.F_REINFORCED_REDUCED),r.push(a.Modifiers.G_STAFF_COMMENTS),r.push(a.Modifiers.H_ADDITIONAL_INFO_1),r.push(a.Modifiers.K_COMBAT_EFFECTIVENESS),r.push(a.Modifiers.L_SIGNATURE_EQUIP),r.push(a.Modifiers.M_HIGHER_FORMATION),r.push(a.Modifiers.S_HQ_STAFF_INDICATOR),r.push(a.Modifiers.T_UNIQUE_DESIGNATION_1),r.push(a.Modifiers.V_EQUIP_TYPE),r.push(a.Modifiers.W_DTG_1),r.push(a.Modifiers.Y_LOCATION),r.push(a.Modifiers.AB_FEINT_DUMMY_INDICATOR),r.push(a.Modifiers.AO_ENGAGEMENT_BAR),r.push(a.Modifiers.AS_COUNTRY);break;case s.SymbolID.SymbolSet_ControlMeasure:break;case s.SymbolID.SymbolSet_Atmospheric:"110102"===i||"110202"===i||"162200"===i?r.push(a.Modifiers.X_ALTITUDE_DEPTH):"140200"===i&&r.push(a.Modifiers.AN_AZIMUTH);case s.SymbolID.SymbolSet_MineWarfare:case s.SymbolID.SymbolSet_Oceanographic:case s.SymbolID.SymbolSet_MeteorologicalSpace:}return l!==s.SymbolID.SymbolSet_SignalsIntelligence_Air&&l!==s.SymbolID.SymbolSet_SignalsIntelligence_Land&&l!==s.SymbolID.SymbolSet_SignalsIntelligence_SeaSurface&&l!==s.SymbolID.SymbolSet_SignalsIntelligence_SeaSubsurface&&l!==s.SymbolID.SymbolSet_SignalsIntelligence_Space||r.push(a.Modifiers.R2_SIGNIT_MOBILITY_INDICATOR),r}default:throw Error("Invalid number of arguments")}}getMSLInfo(...e){switch(e.length){case 1:{const[t]=e;let i=t.length;if(i>=20&&i<=30){let e=s.SymbolID.getVersion(t);return this.getMSLInfo(l.SymbolUtilities.getBasicSymbolID(t),e)}return null}case 2:{const[t,i]=e;let a=t.length;return 8===a?i===s.SymbolID.Version_2525E?T._MSLookupE.get(t)||null:i===s.SymbolID.Version_2525D&&"25272100"===t?new n.MSInfo(s.SymbolID.Version_2525D,"25","Protection Areas","Minimum Safe Distance Zone","","272100","Area","Area14",[]):T._MSLookupD.get(t)||null:a>=20&&a<=30?this.getMSLInfo(l.SymbolUtilities.getBasicSymbolID(t),i):null}default:throw Error("Invalid number of arguments")}}getIDList(e){return e<s.SymbolID.Version_2525E?this._IDListD:e===s.SymbolID.Version_2525E?this._IDListE:this._IDListD}addCustomSymbol(e){let t=!1;try{let i=e.getVersion();i<s.SymbolID.Version_2525E?-1==this._IDListD.indexOf(e.getBasicSymbolID())?(this._IDListD.push(e.getBasicSymbolID()),T._MSLookupD.set(e.getBasicSymbolID(),e),t=!0):r.ErrorLogger.LogMessage("Symbol Set and Entity Code combination already exist: "+e.getBasicSymbolID(),o.LogLevel.INFO,!1):i===s.SymbolID.Version_2525E&&(-1==this._IDListE.indexOf(e.getBasicSymbolID())?(this._IDListE.push(e.getBasicSymbolID()),T._MSLookupE.set(e.getBasicSymbolID(),e),t=!0):r.ErrorLogger.LogMessage("Symbol Set and Entity Code combination already exist: "+e.getBasicSymbolID(),o.LogLevel.INFO,!1))}catch(e){r.ErrorLogger.LogException("MSLookup","addCustomSymbol",e)}return t}}t.MSLookup=T},3886:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LineInfo=void 0,t.LineInfo=class{lineColor;fillColor;stroke;_Polylines;constructor(){}setLineColor(e){this.lineColor=e}getLineColor(){return this.lineColor}setFillColor(e){this.fillColor=e}getFillColor(){return this.fillColor}getStroke(){return this.stroke}setStroke(e){this.stroke=e}getPolylines(){return this._Polylines}setPolylines(e){this._Polylines=e}}},4305:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.arraysupport=void 0;const a=i(6967),n=i(8624),s=i(8087),l=i(8262),r=i(8443),o=i(4571),c=i(2864),T=i(1207),u=i(7389),g=i(8712),L=i(5772),d=i(8101),_=i(8113),h=i(7300),E=i(106),A=i(3254);class I{static maxLength=100;static minLength=2.5;static dACP=0;static _className="arraysupport";static FillPoints(e,t,i){i.length=0;for(let a=0;a<t;a++)i.push(e[a])}static GetLineArray2(e,t,i,a,n){let s=null;try{let l,o=t.length,c=new Array(o),g=0;for(g=0;g<o;g++)l=t[g],c[g]=new u.POINT2(l.x,l.y,l.style);let L=r.countsupport.GetCountersDouble(e,o,c,a);if(!(L>0))return null;for(c=new Array(L),T.lineutility.InitializePOINT2Array(c),o>t.length&&(o=t.length),o>c.length&&(o=c.length),g=0;g<o;g++)l=t[g],c[g]=new u.POINT2(l.x,l.y,l.style);s=I.GetLineArray2Double(e,c,L,o,i,a,n)}catch(t){if(!(t instanceof Error))throw t;h.ErrorLogger.LogException(I._className,"GetLineArray2",new E.RendererException("GetLineArray2 "+e.get_LineType().toString(),t))}return s}static GetFORTLPointsDouble(e,t,i){let a=0;try{let n,s=0,l=0,o=0,c=0,L=I.getScaledSize(20,e.get_LineThickness()),d=new g.ref,_=new u.POINT2,h=new u.POINT2;c=r.countsupport.GetFORTLCountDouble(e,t,i);let E=0,A=L/2;for(n=new Array(c),T.lineutility.InitializePOINT2Array(n),s=0;s<i-1;s++){o=T.lineutility.CalcTrueSlopeDouble(t[s],t[s+1],d);let e=T.lineutility.CalcDistanceDouble(t[s],t[s+1]);if(e/L<1){n[a]=new u.POINT2(t[s]),a++,n[a]=new u.POINT2(t[s+1]),a++;continue}E=Math.trunc(e/L);let i=e/E;for(l=0;l<E;l++)n[a]=T.lineutility.ExtendLine2Double(t[s+1],t[s],-l*i,0),a++,n[a]=T.lineutility.ExtendLine2Double(t[s+1],t[s],-l*i-i/2,0),a++,_=new u.POINT2(n[a-1]),h=T.lineutility.ExtendLineDouble(t[s],n[a-1],i/2),t[s].x>t[s+1].x&&(n[a]=T.lineutility.ExtendDirectedLine(t[s],t[s+1],_,3,A),a++,n[a]=T.lineutility.ExtendDirectedLine(t[s],t[s+1],h,3,A),a++),t[s].x<t[s+1].x&&(n[a]=T.lineutility.ExtendDirectedLine(t[s],t[s+1],_,2,A),a++,n[a]=T.lineutility.ExtendDirectedLine(t[s],t[s+1],h,2,A),a++),t[s].x===t[s+1].x&&(t[s].y<t[s+1].y&&(n[a]=T.lineutility.ExtendDirectedLine(t[s],t[s+1],_,1,A),a++,n[a]=T.lineutility.ExtendDirectedLine(t[s],t[s+1],h,1,A),a++),t[s].y>t[s+1].y&&(n[a]=T.lineutility.ExtendDirectedLine(t[s],t[s+1],_,0,A),a++,n[a]=T.lineutility.ExtendDirectedLine(t[s],t[s+1],h,0,A),a++)),n[a]=T.lineutility.ExtendLine2Double(t[s],n[a-3],i/2,0),a++;n[a]=new u.POINT2(t[s+1]),a++}for(s=0;s<a;s++)t[s]=new u.POINT2(n[s]);return a}catch(t){if(!(t instanceof Error))throw t;h.ErrorLogger.LogException(I._className,"GetFORTLPointsDouble",new E.RendererException("GetFORTLPointsDouble "+e.get_LineType().toString(),t))}return a}static GetATWallPointsDouble2(e,t,i){let a=0;try{let n,s,l=0,o=0,c=0,g=0,L=0,d=0,_=0,h=0;for(c=r.countsupport.GetFORTLCountDouble(e,t,i),n=new Array(c),T.lineutility.InitializePOINT2Array(n),n[a++]=new u.POINT2(t[0]),l=0;l<i-1;l++){for(g=T.lineutility.CalcDistanceDouble(t[l],t[l+1]),d=I.getScaledSize(10,e.get_LineThickness()),L=2*d,h=Math.round((g-d)/L),L=g/h,_=h-1,o=-1;o<_;o++)n[a]=T.lineutility.ExtendLine2Double(t[l+1],t[l],-o*L-3*d,0),a++,s=T.lineutility.ExtendLineDouble(t[l],n[a-1],d/2),t[l].x>t[l+1].x&&(n[a]=T.lineutility.ExtendDirectedLine(t[l],n[a-1],s,2,d)),t[l].x<t[l+1].x&&(n[a]=T.lineutility.ExtendDirectedLine(t[l],n[a-1],s,3,d)),t[l].x===t[l+1].x&&(n[a]=new u.POINT2(s),t[l].y<t[l+1].y?n[a].x=s.x-d:n[a].x=s.x+d),a++,n[a]=T.lineutility.ExtendLine2Double(t[l],n[a-2],d,0),a++;n[a]=new u.POINT2(t[l+1]),n[a].style=0,a++}for(l=0;l<a;l++)t[l]=new u.POINT2(n[l])}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetATWallPointsDouble",new E.RendererException("GetATWallPointsDouble",e))}return a}static GetInsideOutsideDouble2(e,t,i,a,n,s){let l=0;try{let r=new g.ref,o=new g.ref,c=0,L=0,_=0,h=0,E=0,A=0,I=0,S=0,y=0,f=0,D=0,M=1,P=2,R=3;if(new u.POINT2,S=T.lineutility.CalcTrueSlopeDouble(e,t,o),null==o.value)return 0;if(L=(e.x+t.x)/2,_=(e.y+t.y)/2,Math.abs(o.value[0])>=1||0===S)for(f=0,I=0;I<a-1;I++)n!==I&&(i[I].y<_&&i[I+1].y>_||i[I].y>_&&i[I+1].y<_||i[I].y<_&&i[I+1].y===_||i[I].y===_&&i[I+1].y<_)&&(y=T.lineutility.CalcTrueSlopeDouble(i[I],i[I+1],r),1===y&&0===r.value[0]&&(A++,A--),0===y&&i[I].x<L&&A++,0!==r.value[0]&&1===y&&(c=i[I].y-r.value[0]*i[I].x,h=(_-c)/r.value[0],h<L&&A++));else for(f=1,I=0;I<a-1;I++)n!==I&&(i[I].x<L&&i[I+1].x>L||i[I].x>L&&i[I+1].x<L||i[I].x<L&&i[I+1].x===L||i[I].x===L&&i[I+1].x<L)&&(y=T.lineutility.CalcTrueSlopeDouble(i[I],i[I+1],r),0===y&&(A++,A--),1===y&&0===r.value[0]&&i[I].y<_&&A++,0!==r.value[0]&&1===y&&(c=i[I].y-r.value[0]*i[I].x,E=r.value[0]*L+c,E<_&&A++));switch(A%2){case 0:l=0===f?D:P;break;case 1:l=0===f?M:R}s===d.TacticalLines.ICING&&(l===D?l=M:l===M?l=D:l===P?l=R:l===R&&(l=P))}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetInsideOutsideDouble2",new E.RendererException("GetInsideOutsideDouble2",e))}return l}static GetZONEPointsDouble2(e,t,i){let a=0;try{let n,s,l,o,c=e.get_LineType(),g=0,L=0,_=0,h=0,E=0,A=new u.POINT2(t[0]),S=0,y=I.getScaledSize(20,e.get_LineThickness());h=r.countsupport.GetFORTLCountDouble(e,t,i),o=new Array(h),T.lineutility.InitializePOINT2Array(o);let f=0;for(g=0;g<i-1;g++)if(n=new u.POINT2(t[g]),s=new u.POINT2(t[g+1]),S=I.GetInsideOutsideDouble2(n,s,t,i,g,c),E=T.lineutility.CalcDistanceDouble(t[g],t[g+1]),E<y)o[a]=new u.POINT2(t[g]),a++,o[a]=new u.POINT2(t[g+1]),a++;else{switch(c){case d.TacticalLines.OBSAREA:case d.TacticalLines.OBSFAREA:switch(S){case 0:S=1;break;case 1:S=0;break;case 2:S=3;break;case 3:S=2}}for(_=Math.trunc(E/y),f=E-_*y,L=0;L<_;L++){switch(L>0?(o[a++]=T.lineutility.ExtendLine2Double(t[g+1],t[g],-L*y-f/2,0),o[a++]=T.lineutility.ExtendLine2Double(t[g+1],t[g],-L*y-y/2-f/2,0)):(o[a++]=T.lineutility.ExtendLine2Double(t[g+1],t[g],-L*y,0),o[a++]=T.lineutility.ExtendLine2Double(t[g+1],t[g],-L*y-y/2,0)),c){case d.TacticalLines.OBSAREA:case d.TacticalLines.OBSFAREA:case d.TacticalLines.ZONE:case d.TacticalLines.ENCIRCLE:A=T.lineutility.ExtendLineDouble(t[g],o[a-1],y/4);break;case d.TacticalLines.STRONG:case d.TacticalLines.FORT_REVD:case d.TacticalLines.FORT:A=new u.POINT2(o[a-1])}switch(o[a++]=T.lineutility.ExtendDirectedLine(n,s,A,S,y/2),c){case d.TacticalLines.OBSAREA:case d.TacticalLines.OBSFAREA:case d.TacticalLines.ZONE:case d.TacticalLines.ENCIRCLE:o[a]=T.lineutility.ExtendLine2Double(t[g],o[a-2],y/2,0);break;case d.TacticalLines.STRONG:o[a]=new u.POINT2(o[a-2]);break;case d.TacticalLines.FORT_REVD:case d.TacticalLines.FORT:l=T.lineutility.ExtendLine2Double(t[g],o[a-2],y/2,0),o[a]=T.lineutility.ExtendDirectedLine(n,s,l,S,y/2),a++,o[a]=new u.POINT2(l)}a++,c===d.TacticalLines.ENCIRCLE&&(o[a++]=new u.POINT2(o[a-4]))}o[a++]=new u.POINT2(t[g+1])}for(g=0;g<a;g++)c===d.TacticalLines.OBSAREA&&(o[g].style=11);for(c===d.TacticalLines.OBSAREA?o[a-1].style=12:a>0&&(o[a-1].style=5),g=0;g<a;g++)t[g]=new u.POINT2(o[g]),g===a-1&&c!==d.TacticalLines.OBSAREA&&(t[g].style=5)}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetZONEPointsDouble2",new E.RendererException("GetZONEPointsDouble2",e))}return a}static IsTurnArcReversed(e){try{if(e.length<3)return!1;let t=new Array(2);t[0]=new u.POINT2(e[0]),t[1]=new u.POINT2(e[1]),T.lineutility.CalcClockwiseCenterDouble(t);let i=T.lineutility.CalcDistanceDouble(t[0],e[2]);return t[0]=new u.POINT2(e[1]),t[1]=new u.POINT2(e[0]),T.lineutility.CalcClockwiseCenterDouble(t),T.lineutility.CalcDistanceDouble(t[0],e[2])>i}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"IsTurnArcReversed",new E.RendererException("IsTurnArcReversed",e))}return!1}static GetIsolatePointsDouble(e,t,i){try{let a=new u.POINT2(e[0]),n=new u.POINT2(e[1]),s=new u.POINT2(e[0]);a.x===n.x&&a.y===n.y&&(n.x+=1);let l=new u.POINT2,r=new u.POINT2,o=0,c=0,g=0,L=new Array(26),_=new Array(7),h=new Array(21),E=new Array(3),S=T.lineutility.CalcDistanceDouble(a,n),y=Math.abs(S-20);S<40&&(y=S/1.5);let f=T.lineutility.MBRDistance(e,2),D=new Array(2),M=new Array(3);for(o=0;o<2;o++)M[o]=new u.POINT2(e[o]);e.length>=3&&(M[2]=new u.POINT2(e[2])),T.lineutility.InitializePOINT2Array(L),T.lineutility.InitializePOINT2Array(_),T.lineutility.InitializePOINT2Array(h),T.lineutility.InitializePOINT2Array(E),T.lineutility.InitializePOINT2Array(D);let P=A.RendererSettings.getInstance().getDeviceDPI()/96;f/7>I.maxLength*P&&(f=7*I.maxLength*P),f/7<I.minLength*P&&(f=7*I.minLength*P),f>140*P&&(f=140*P);let R=new Array(26);for(T.lineutility.InitializePOINT2Array(R),r.x=2*n.x-a.x,r.y=2*n.y-a.y,L[0]=new u.POINT2(e[1]),L[1]=new u.POINT2(r),null!=i&&(L[0]=new u.POINT2(e[0]),L[1]=new u.POINT2(e[1])),T.lineutility.ArcArrayDouble(L,0,S,t,i),o=0;o<26;o++)L[o].style=0,e[o]=new u.POINT2(L[o]),e[o].style=0;switch(t!==d.TacticalLines.OCCUPY?T.lineutility.GetArrowHead4Double(L[24],L[25],Math.trunc(f/7),Math.trunc(f/7),E,0):T.lineutility.GetArrowHead4Double(L[24],L[25],Math.trunc(f/7),Math.trunc(1.75*f/7),E,0),e[25].style=5,t){case d.TacticalLines.CORDONKNOCK:case d.TacticalLines.CORDONSEARCH:case d.TacticalLines.ISOLATE:for(S>100&&(y=.8*S),o=1;o<=23;o++)o%3==0&&(_[c].x=a.x-y/S*(a.x-L[o].x),_[c].y=a.y-y/S*(a.y-L[o].y),_[c].style=0,h[g]=new u.POINT2(L[o-1]),g++,h[g]=new u.POINT2(_[c]),g++,h[g]=new u.POINT2(L[o+1]),h[g].style=5,g++,c++);for(o=26;o<47;o++)e[o]=new u.POINT2(h[o-26]);for(e[46].style=5,o=47;o<50;o++)e[o]=new u.POINT2(E[o-47]),e[o].style=0;break;case d.TacticalLines.OCCUPY:for(o=26;o<29;o++)e[o]=new u.POINT2(E[o-26]);e[29]=T.lineutility.ExtendAlongLineDouble(E[0],E[1],2*T.lineutility.CalcDistanceDouble(E[0],E[1])),e[30]=new u.POINT2(E[1]),e[31]=T.lineutility.ExtendAlongLineDouble(E[2],E[1],2*T.lineutility.CalcDistanceDouble(E[2],E[1]));break;case d.TacticalLines.SECURE:for(o=26;o<29;o++)e[o]=new u.POINT2(E[o-26]),e[o].style=0;e[28].style=5;break;case d.TacticalLines.TURN:{let i=I.IsTurnArcReversed(M);for(i&&(a.x=n.x,a.y=n.y,n.x=s.x,n.y=s.y),D[0]=new u.POINT2(a),D[1]=new u.POINT2(n),S=T.lineutility.CalcClockwiseCenterDouble(D),l=new u.POINT2(D[0]),r=new u.POINT2(D[1]),L[0]=new u.POINT2(a),L[1]=new u.POINT2(r),T.lineutility.ArcArrayDouble(L,0,S,t,null),o=0;o<26;o++)L[o].style=0,e[o]=new u.POINT2(L[o]),e[o].style=0;for(i?T.lineutility.GetArrowHead4Double(L[1],a,Math.trunc(f/7),Math.trunc(f/7),E,5):T.lineutility.GetArrowHead4Double(L[24],n,Math.trunc(f/7),Math.trunc(f/7),E,5),e[25].style=5,o=26;o<29;o++)e[o]=new u.POINT2(E[o-26]),e[o].style=9;e[28].style=10;break}case d.TacticalLines.RETAIN:for(o=26;o<29;o++)e[o]=new u.POINT2(E[o-26]),e[o].style=0;for(e[28].style=5,c=29,o=1;o<24;o++)e[c]=new u.POINT2(L[o]),e[c].style=0,c++,e[c]=T.lineutility.ExtendLineDouble(a,L[o],f/7),e[c].style=5,c++}}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetIsolatePointsDouble",new E.RendererException("GetIsolatePointsDouble "+t.toString(),e))}}static AirfieldCenterFeature(e,t){try{let i=T.lineutility.MBRDistance(e,t-5),a=A.RendererSettings.getInstance().getDeviceDPI()/96;i>350*a?i=350*a:i<100*a&&(i=100*a);for(let i=0;i<t;i++)e[i].style=0;e[t-5]=new u.POINT2(e[0]),e[t-5].style=5,e[t-4]=T.lineutility.CalcCenterPointDouble(e,t-6),e[t-4].x-=i/10,e[t-4].style=0,e[t-3]=new u.POINT2(e[t-4]),e[t-3].x=e[t-4].x+i/5,e[t-3].style=5,e[t-2]=new u.POINT2(e[t-4]),e[t-2].y+=i/20,e[t-2].style=0,e[t-1]=new u.POINT2(e[t-3]),e[t-1].y-=i/20,e[t-1].style=0}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"AirfieldCenterFeature",new E.RendererException("AirfieldCenterFeature",e))}}static GetATWallPointsDouble(e,t,i){let a=0;try{let n,s,l,o,c=e.get_LineType(),u=0,g=0,L=0,_=0,h=0,E=0,A=0,S=0;switch(L=r.countsupport.GetFORTLCountDouble(e,t,i),n=new Array(L),c){case d.TacticalLines.CFG:case d.TacticalLines.CFY:n[a]=t[0],n[a].style=0,a++}for(u=0;u<i-1;u++){switch(_=T.lineutility.CalcDistanceDouble(t[u],t[u+1]),c){case d.TacticalLines.UCF:case d.TacticalLines.CF:case d.TacticalLines.CFG:case d.TacticalLines.CFY:h=I.getScaledSize(60,e.get_LineThickness()),A=I.getScaledSize(20,e.get_LineThickness()),E=_/h-Math.trunc(_/h),S=E<.75?Math.trunc(_/h):Math.trunc(_/h)+1;break;default:h=I.getScaledSize(20,e.get_LineThickness()),A=I.getScaledSize(10,e.get_LineThickness()),S=Math.trunc(_/h)-1}if(S<1)n[a]=t[u],a++,n[a]=t[u+1],a++;else{for(g=0;g<S;g++){switch(c){case d.TacticalLines.CFG:g>0?(n[a]=T.lineutility.ExtendLine2Double(t[u+1],t[u],-g*h+I.getScaledSize(45,e.get_LineThickness()),0),a++,n[a]=T.lineutility.ExtendLine2Double(t[u+1],t[u],-g*h+I.getScaledSize(4,e.get_LineThickness()),5),a++,n[a]=T.lineutility.ExtendLine2Double(t[u+1],t[u],-g*h-I.getScaledSize(1,e.get_LineThickness()),20),a++,n[a]=T.lineutility.ExtendLine2Double(t[u+1],t[u],-g*h-I.getScaledSize(10,e.get_LineThickness()),0)):n[a]=T.lineutility.ExtendLine2Double(t[u+1],t[u],-g*h-I.getScaledSize(45,e.get_LineThickness()),0);break;case d.TacticalLines.CFY:g>0?(n[a]=T.lineutility.ExtendLine2Double(t[u+1],t[u],-g*h+I.getScaledSize(45,e.get_LineThickness()),0),a++,n[a]=T.lineutility.ExtendLine2Double(t[u+1],t[u],-g*h+I.getScaledSize(10,e.get_LineThickness()),5),a++,n[a]=T.lineutility.ExtendAlongLineDouble(n[a-1],t[u+1],I.getScaledSize(5,e.get_LineThickness()),0),a++,n[a]=T.lineutility.ExtendAlongLineDouble(n[a-1],t[u+1],I.getScaledSize(10,e.get_LineThickness()),5),a++,l=T.lineutility.ExtendDirectedLine(n[a-2],n[a-1],n[a-1],3,I.getScaledSize(5,e.get_LineThickness()),0),o=T.lineutility.ExtendDirectedLine(n[a-1],n[a-2],n[a-2],2,I.getScaledSize(5,e.get_LineThickness()),5),n[a]=l,a++,n[a]=o,a++,n[a]=T.lineutility.ExtendLine2Double(t[u+1],t[u],-g*h-I.getScaledSize(10,e.get_LineThickness()),0)):n[a]=T.lineutility.ExtendLine2Double(t[u+1],t[u],-g*h-I.getScaledSize(45,e.get_LineThickness()),0);break;default:n[a]=T.lineutility.ExtendLine2Double(t[u+1],t[u],-g*h-I.getScaledSize(30,e.get_LineThickness()),0)}switch(c===d.TacticalLines.CF&&(n[a].style=0),a++,n[a]=T.lineutility.ExtendLine2Double(t[u+1],t[u],-g*h-A,0),c!==d.TacticalLines.CF&&c!==d.TacticalLines.CFG&&c!==d.TacticalLines.CFY||(n[a].style=9),a++,s=T.lineutility.ExtendLineDouble(t[u],n[a-1],A/2),t[u].x>t[u+1].x&&(n[a]=T.lineutility.ExtendDirectedLine(t[u],n[a-1],s,2,A)),t[u].x<t[u+1].x&&(n[a]=T.lineutility.ExtendDirectedLine(t[u],n[a-1],s,3,A)),t[u].x===t[u+1].x&&(n[a]=s,t[u].y<t[u+1].y?n[a].x=s.x-A:n[a].x=s.x+A),a++,c!==d.TacticalLines.CF&&c!==d.TacticalLines.CFG&&c!==d.TacticalLines.CFY||(n[a-1].style=9),n[a]=T.lineutility.ExtendLine2Double(t[u],n[a-2],A,0),c){case d.TacticalLines.CF:n[a].style=10;break;case d.TacticalLines.CFG:case d.TacticalLines.CFY:n[a].style=10,a++,n[a]=T.lineutility.ExtendLine2Double(t[u],n[a-3],A,0)}a++}n[a]=t[u+1],n[a].style=0,a++}}for(u=0;u<a;u++)t[u]=n[u];t[a-1].style=5}catch(t){if(!(t instanceof Error))throw t;h.ErrorLogger.LogException(I._className,"GetATWallPointsDouble",new E.RendererException("GetATWallPointsDouble "+e.get_LineType().toString(),t))}return a}static GetRidgePointsDouble(e,t,i){let a=0;try{let n,s,l=0,o=0,c=0,L=0,d=I.getScaledSize(20,e.get_LineThickness()),_=new g.ref,h=I.getScaledSize(20,e.get_LineThickness()),E=0,A=0,S=0;for(_.value=new Array(1),c=r.countsupport.GetFORTLCountDouble(e,t,i),n=new Array(c),T.lineutility.InitializePOINT2Array(n),l=0;l<i-1;l++)if(S=T.lineutility.CalcTrueSlopeDouble(t[l],t[l+1],_),L=T.lineutility.CalcDistanceDouble(t[l],t[l+1]),E=Math.trunc(L/d),E<1)n[a]=new u.POINT2(t[l]),a++,n[a]=new u.POINT2(t[l+1]),a++;else{for(o=0;o<E;o++)n[a]=T.lineutility.ExtendLine2Double(t[l+1],t[l],-o*d,0),a++,A=T.lineutility.CalcDistanceDouble(t[l],n[a-1]),s=T.lineutility.ExtendLineDouble(t[l+1],t[l],-A-h/2),0!==S?t[l].x<t[l+1].x?n[a]=T.lineutility.ExtendDirectedLine(t[l],t[l+1],s,2,h):n[a]=T.lineutility.ExtendDirectedLine(t[l],t[l+1],s,3,h):t[l+1].y<t[l].y?n[a]=T.lineutility.ExtendDirectedLine(t[l],t[l+1],s,0,h):n[a]=T.lineutility.ExtendDirectedLine(t[l],t[l+1],s,1,h),a++,n[a]=T.lineutility.ExtendLine2Double(t[l+1],t[l],-A-h,0),a++;n[a]=new u.POINT2(t[l+1]),a++}for(l=0;l<a;l++)t[l]=new u.POINT2(n[l]);for(l=a;l<c;l++)t[l]=new u.POINT2(n[a-1])}catch(t){if(!(t instanceof Error))throw t;h.ErrorLogger.LogException(I._className,"GetRidgePointsDouble",new E.RendererException("GetRidgePointsDouble "+e.get_LineType().toString(),t))}return a}static GetSquallDouble(e,t,i,a,n){let s=0;try{let l,o,c,L=0,d=0,_=new u.POINT2(e[0]),h=new u.POINT2(e[n-1]),E=new g.ref,A=0,I=r.countsupport.GetSquallQty(e,i,a,n),S=new Array(I);if(T.lineutility.InitializePOINT2Array(S),E.value=new Array(1),E.value[0]=-1,0===I)return 0;for(L=0;L<n-1;L++)if(l=new u.POINT2(e[L]),o=new u.POINT2(e[L+1]),A=r.countsupport.GetSquallSegQty(l,o,i,a),A>0)for(c=new Array(A),T.lineutility.InitializePOINT2Array(c),E.value[0]=-1,T.lineutility.GetSquallSegment(l,o,c,E,t,i,a),d=0;d<A;d++)S[s].x=c[d].x,S[s].y=c[d].y,0===d&&(S[s]=new u.POINT2(e[L])),d===A-1&&(S[s]=new u.POINT2(e[L+1])),S[s].style=0,s++;else S[s].x=l.x,S[s++].y=l.y,S[s].x=o.x,S[s++].y=o.y;for(L=0;L<s;L++)L<I&&(e[L].x=S[L].x,e[L].y=S[L].y,0===L&&(e[L]=new u.POINT2(_)),L===s-1&&(e[L]=new u.POINT2(h)),e[L].style=S[L].style);if(0===s){for(L=0;L<e.length;L++)e[L]=0===L?new u.POINT2(_):new u.POINT2(h);s=e.length}}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetSquallDouble",new E.RendererException("GetSquallDouble",e))}return s}static GetSevereSquall(e,t,i){let a=0;try{let n=5,s=0,l=0,o=r.countsupport.GetSquallQty(e,n,t,i)+2*i,c=new Array(o),g=new u.POINT2,L=new u.POINT2,d=new u.POINT2,_=new u.POINT2,h=new u.POINT2,E=new u.POINT2,A=new u.POINT2,I=(new u.POINT2,new u.POINT2,0),S=0;for(T.lineutility.InitializePOINT2Array(c),s=0;s<i-1;s++){for(S=T.lineutility.CalcDistanceDouble(e[s],e[s+1]),I=Math.trunc(S/t),l=0;l<I;l++)g=T.lineutility.ExtendAlongLineDouble2(e[s],e[s+1],l*t),L=T.lineutility.ExtendAlongLineDouble(e[s],e[s+1],l*t+t/6*4),L.style=5,c[a++]=new u.POINT2(g),c[a++]=new u.POINT2(L),E=T.lineutility.ExtendAlongLineDouble(e[s],e[s+1],l*t+t/6*5),A=T.lineutility.ExtendAlongLineDouble(e[s],e[s+1],l*t+t),d=T.lineutility.ExtendDirectedLine(g,L,L,2,t/6,0),_=T.lineutility.ExtendDirectedLine(g,E,E,3,t/6,0),h=T.lineutility.ExtendDirectedLine(g,A,A,2,t/6,5),h.style=5,c[a++]=new u.POINT2(d),c[a++]=new u.POINT2(_),c[a++]=new u.POINT2(h);c[a++]=new u.POINT2(e[s+1]),g=T.lineutility.ExtendAlongLineDouble(e[s+1],e[s],S-I*t),g.style=5,c[a++]=new u.POINT2(g)}for(a>e.length&&(a=e.length),s=0;s<a&&s<o;s++)e[s]=new u.POINT2(c[s])}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetSevereSquall",new E.RendererException("GetSevereSquall",e))}return a}static GetConvergencePointsDouble(e,t,i){let a=i;try{let n=0,s=0,l=0,r=new u.POINT2,o=new u.POINT2,c=new Array(i),g=new u.POINT2,L=0;for(n=0;n<i;n++)c[n]=new u.POINT2(e[n]);for(e[i-1].style=5,n=0;n<i-1;n++)for(r=new u.POINT2(c[n]),o=new u.POINT2(c[n+1]),l=T.lineutility.CalcDistanceDouble(r,o),L=Math.trunc(l/t),l-L*t<5&&(L-=1),s=0;s<L;s++)g=T.lineutility.ExtendAlongLineDouble(r,o,s*t+t/2,0),e[a++]=new u.POINT2(g),g=T.lineutility.ExtendAlongLineDouble(g,o,t/2),g=T.lineutility.ExtendDirectedLine(r,g,g,2,t/2,5),e[a++]=new u.POINT2(g),g=T.lineutility.ExtendAlongLineDouble(r,o,(s+1)*t,0),e[a++]=new u.POINT2(g),g=T.lineutility.ExtendAlongLineDouble(g,o,t/2),g=T.lineutility.ExtendDirectedLine(r,g,g,3,t/2,5),e[a++]=new u.POINT2(g)}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetConvergencePointsDouble",new E.RendererException("GetConvergencePointsDouble",e))}return a}static GetITDPointsDouble(e,t,i){let a=0;try{let n=0,s=0,l=0,r=new u.POINT2,o=new u.POINT2,c=new Array(i),g=new u.POINT2,L=0,d=19;for(n=0;n<i;n++)c[n]=new u.POINT2(e[n]);for(n=0;n<i-1;n++)for(r=new u.POINT2(c[n]),o=new u.POINT2(c[n+1]),l=T.lineutility.CalcDistanceDouble(r,o),L=Math.trunc(l/t),l-L*t/3*2<t/3&&(L-=1),0===L&&(r.style=19,e[a++]=new u.POINT2(r),o.style=5,e[a++]=new u.POINT2(o)),s=0;s<L;s++)g=T.lineutility.ExtendAlongLineDouble(r,o,s*t+t/3,d),e[a++]=new u.POINT2(g),s<L-1?g=T.lineutility.ExtendAlongLineDouble(g,o,2*t/3,5):(g=new u.POINT2(c[n+1]),g.style=5),e[a++]=new u.POINT2(g),d=19===d?25:19}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetITDPointsDouble",new E.RendererException("GetITDPointsDouble",e))}return a}static GetXPoints(e,t,i,a){let n=0;try{let s,l,r,o=0,c=0,g=0,L=new u.POINT2,d=new u.POINT2,_=new u.POINT2,h=new u.POINT2,E=0,A=0,I=i/6;for(o=0;o<a-1;o++)for(g=T.lineutility.CalcDistanceDouble(e[o],e[o+1]),E=Math.trunc((g-i)/i),A=g/E,c=0;c<E;c++)s=T.lineutility.ExtendAlongLineDouble2(e[o],e[o+1],A/2+A*c),l=T.lineutility.ExtendAlongLineDouble2(s,e[o+1],I),r=T.lineutility.ExtendAlongLineDouble2(s,e[o+1],-I),L=T.lineutility.ExtendDirectedLine(e[o],l,l,2,I),d=T.lineutility.ExtendDirectedLine(e[o],l,l,3,I),d.style=5,_=T.lineutility.ExtendDirectedLine(e[o],r,r,2,I),h=T.lineutility.ExtendDirectedLine(e[o],r,r,3,I),h.style=5,t[n++]=new u.POINT2(L),t[n++]=new u.POINT2(h),t[n++]=new u.POINT2(_),t[n++]=new u.POINT2(d)}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetXPointsDouble",new E.RendererException("GetXPointsDouble",e))}return n}static getEllipsePoints(e,t,i){let a=null;try{a=new Array(37);let n=0,s=0,l=T.lineutility.CalcDistanceDouble(e,t),r=T.lineutility.CalcDistanceDouble(e,i);for(T.lineutility.InitializePOINT2Array(a),n=1;n<37;n++)s=10*n*Math.PI/180,a[n-1].x=e.x+Math.trunc(l*Math.cos(s)),a[n-1].y=e.y+Math.trunc(r*Math.sin(s)),a[n-1].style=0;a[36]=new u.POINT2(a[0])}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetEllipsePoints",new E.RendererException("GetEllipsePoints",e))}return a}static getRotatedEllipsePoints(e,t,i,a,n){let s=null;try{let n=new Array(36),l=0,r=0,o=0,c=T.lineutility.CalcDistanceDouble(e,t),u=T.lineutility.CalcDistanceDouble(e,i);for(T.lineutility.InitializePOINT2Array(n),l=1;l<37;l++)o=10*l*Math.PI/180,n[l-1].x=e.x+c*Math.cos(o),n[l-1].y=e.y+u*Math.sin(o),n[l-1].style=0;for(T.lineutility.RotateGeometryDouble(n,36,a-90),s=new Array(37),r=0;r<36;r++)s[r]=n[r];s[36]=n[0]}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetRotatedEllipsePoints",new E.RendererException("GetRotatedEllipsePoints",e))}return s}static GetLVOPoints(e,t,i,a,n){let s=0;try{let l=0,r=0,o=2*i,c=0,g=0,L=0,d=0,_=0,h=new u.POINT2,E=new Array(37),A=0;for(L=0;L<n-1;L++){for(T.lineutility.InitializePOINT2Array(E),r=T.lineutility.CalcDistanceDouble(e[L],e[L+1]),g=Math.trunc((r-a)/a),A=r/g,l=T.lineutility.CalcSegmentAngleDouble(e[L],e[L+1]),l+=Math.PI/2,d=0;d<g;d++){for(h=T.lineutility.ExtendAlongLineDouble2(e[L],e[L+1],d*A),_=1;_<37;_++)c=20*_*Math.PI/180,E[_-1].x=h.x+Math.trunc(i*Math.cos(c)),E[_-1].y=h.y+Math.trunc(o*Math.sin(c)),E[_-1].style=0;for(T.lineutility.RotateGeometryDouble(E,36,Math.trunc(180*l/Math.PI)),E[36]=new u.POINT2(E[35]),E[36].style=5,_=0;_<37;_++)t[s]=new u.POINT2(E[_]),s++}if(L===n-2){for(h=e[L+1],_=1;_<37;_++)c=20*_*Math.PI/180,E[_-1].x=h.x+Math.trunc(i*Math.cos(c)),E[_-1].y=h.y+Math.trunc(o*Math.sin(c)),E[_-1].style=0;for(T.lineutility.RotateGeometryDouble(E,36,Math.trunc(180*l/Math.PI)),E[36]=new u.POINT2(E[35]),E[36].style=5,_=0;_<37;_++)t[s]=new u.POINT2(E[_]),s++}}}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetLVOPointsDouble",new E.RendererException("GetLVOPointsDouble",e))}return s}static GetIcingPointsDouble(e,t,i){let a=0;try{let n=0,s=new Array(i),l=-1,r=0,o=0,c=new u.POINT2,g=new u.POINT2,L=new u.POINT2,_=new u.POINT2;for(n=0;n<i;n++)s[n]=new u.POINT2(e[n]);let h=0;for(n=0;n<i-1;n++)for(o=Math.trunc(T.lineutility.CalcDistanceDouble(s[n],s[n+1])),o/=t,h=T.lineutility.CalcDistanceDouble(s[n],s[n+1])/o,l=I.GetInsideOutsideDouble2(s[n],s[n+1],s,i,n,d.TacticalLines.ICING),r=0;r<o;r++)c=0===r?new u.POINT2(s[n]):T.lineutility.ExtendAlongLineDouble(s[n],s[n+1],r*h,0),g=T.lineutility.ExtendAlongLineDouble(s[n],s[n+1],r*h+2*t/3,5),L=T.lineutility.ExtendAlongLineDouble(s[n],s[n+1],r*h+t/3,0),_=T.lineutility.ExtendDirectedLine(s[n],s[n+1],L,l,t/3,5),e[a]=new u.POINT2(c),e[a+1]=new u.POINT2(g),e[a+2]=new u.POINT2(L),e[a+3]=new u.POINT2(_),a+=4}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetIcingPointsDouble",new E.RendererException("GetIcingPointsDouble",e))}return a}static GetAnchorageDouble(e,t,i){let a=0;try{let n,s,l,r=0,o=0,L=0,d=0,_=0,h=-1,E=0,A=0,I=0,S=new u.POINT2,y=new u.POINT2,f=new u.POINT2;for(E=c.flot.GetAnchorageCountDouble(e,t,i),n=new Array(2*i),r=0;r<i;r++)n[o]=e[r].x,o++,n[o]=e[r].y,o++;o=0;let D=new g.ref;D.value=new Array(1);let M=new g.ref;M.value=new Array(1);let P=new g.ref;for(P.value=new Array(1),L=0;L<i-1;L++)if(y.x=n[2*L],y.y=n[2*L+1],f.x=n[2*L+2],f.y=n[2*L+3],L>0&&(y=T.lineutility.ExtendAlongLineDouble(y,f,t)),I=T.lineutility.CalcDistanceDouble(y,f),A=Math.trunc(I/t),A>0){for(l=new Array(32*A),h=c.flot.GetAnchorageFlotSegment(n,y.x,y.y,f.x,f.y,L,t,l,D,M,P),s=new Array(h),r=0;r<h;r++)s[r]=l[r];for(r=0;r<h/3;r++){if(d=s[o],_=s[o+1],o+=3,r%10==0)S.x=d,S.y=_,S.style=5;else if((r+1)%10==0){if(a<E){e[a].x=d,e[a++].y=_,e[a++]=new u.POINT2(S);continue}break}if(!(a<E))break;e[a].x=d,e[a].y=_,a++}o=0}else a<E&&(e[a].x=n[2*L],e[a].y=n[2*L+1],a++);for(r=a-1;r<E;r++)e[r].style=5}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetAnchorageDouble",new E.RendererException("GetAnchorageDouble",e))}return a}static GetPipePoints(e,t,i){let a=0;try{let n=new Array(i),s=new u.POINT2,l=new u.POINT2,r=new u.POINT2,o=new Array(e.length),c=0,g=0,L=0;for(g=0;g<i;g++)n[g]=new u.POINT2(e[g]);let d=0,_=0;for(T.lineutility.InitializePOINT2Array(o),g=0;g<i-1;g++){for(_=T.lineutility.CalcDistanceDouble(n[g],n[g+1]),d=Math.trunc(_/t),L=0;L<d;L++)s=T.lineutility.ExtendAlongLineDouble2(n[g],n[g+1],t*L),s.style=0,l=T.lineutility.ExtendAlongLineDouble2(n[g],n[g+1],t*L+t/2),l.style=5,r=T.lineutility.ExtendAlongLineDouble2(n[g],n[g+1],t*L+t/2),r.style=20,e[a++]=new u.POINT2(s),e[a++]=new u.POINT2(l),o[c++]=new u.POINT2(r);0===d?(e[a]=new u.POINT2(n[g]),e[a++].style=0,e[a]=new u.POINT2(n[g+1]),e[a++].style=5):(e[a]=new u.POINT2(e[a-1]),e[a++].style=0,e[a]=new u.POINT2(n[g+1]),e[a++].style=5)}for(L=0;L<c;L++)e[a++]=new u.POINT2(o[L]);e[a++]=new u.POINT2(e[a])}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetPipePoints",new E.RendererException("GetPipePoints",e))}return a}static GetReefPoints(e,t,i){let a=0;try{let n=new Array(i),s=new u.POINT2,l=new u.POINT2,r=new u.POINT2,o=new u.POINT2,c=new u.POINT2;for(let t=0;t<i;t++)n[t]=new u.POINT2(e[t]);let g=0,L=0,d=0;for(let _=0;_<i-1;_++){L=n[_].x<n[_+1].x?2:3,d=T.lineutility.CalcDistanceDouble(n[_],n[_+1]),g=Math.trunc(d/t);for(let i=0;i<g;i++)s=T.lineutility.ExtendAlongLineDouble2(n[_],n[_+1],t*i),l=T.lineutility.ExtendAlongLineDouble2(s,n[_+1],.35*t),l=T.lineutility.ExtendDirectedLine(n[_],n[_+1],l,L,t),r=T.lineutility.ExtendAlongLineDouble2(s,n[_+1],.4*t),r=T.lineutility.ExtendDirectedLine(n[_],n[_+1],r,L,.6*t),o=T.lineutility.ExtendAlongLineDouble2(s,n[_+1],.75*t),o=T.lineutility.ExtendDirectedLine(n[_],n[_+1],o,L,1.35*t),c=T.lineutility.ExtendAlongLineDouble2(n[_],n[_+1],t*(i+1)),e[a++]=new u.POINT2(s),e[a++]=new u.POINT2(l),e[a++]=new u.POINT2(r),e[a++]=new u.POINT2(o),e[a++]=new u.POINT2(c);0===g&&(e[a++]=new u.POINT2(n[_]),e[a++]=new u.POINT2(n[_+1]))}e[a++]=new u.POINT2(n[i-1])}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetReefPoints",new E.RendererException("GetReefPoints",e))}return a}static GetRestrictedAreaPoints(e,t,i){let a=0;try{let n=new Array(i),s=new u.POINT2,l=new u.POINT2,r=new u.POINT2,o=new u.POINT2;for(let t=0;t<i;t++)n[t]=new u.POINT2(e[t]);let c=0,g=0,L=0;for(let d=0;d<i-1;d++){L=T.lineutility.CalcDistanceDouble(n[d],n[d+1]),g=Math.trunc(L/t),c=n[d].x<n[d+1].x?3:2;for(let i=0;i<g;i++)s=T.lineutility.ExtendAlongLineDouble2(n[d],n[d+1],t*i),s.style=0,l=T.lineutility.ExtendAlongLineDouble2(n[d],n[d+1],t*i+2*t/3),l.style=5,r=T.lineutility.MidPointDouble(s,l,0),o=T.lineutility.ExtendDirectedLine(n[d],n[d+1],r,c,2*t/3),o.style=5,e[a++]=new u.POINT2(r),e[a++]=new u.POINT2(o),e[a++]=new u.POINT2(s),e[a++]=new u.POINT2(l);0===g&&(e[a++]=new u.POINT2(n[d]),e[a++]=new u.POINT2(n[d+1]))}e[a-1].style=0,e[a++]=new u.POINT2(n[i-1])}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetRestrictedAreaPoints",new E.RendererException("GetRestrictedAreaPoints",e))}return a}static getOverheadWire(e,t,i){let a=0;try{let n,s,l=0,r=new Array;for(l=0;l<i;l++)n=new u.POINT2(t[l]),s=new u.POINT2(n),s.y-=I.getScaledSize(5,e.get_LineThickness()),r.push(s),s=new u.POINT2(n),s.x-=I.getScaledSize(5,e.get_LineThickness()),r.push(s),s=new u.POINT2(n),s.y-=I.getScaledSize(20,e.get_LineThickness()),r.push(s),s=new u.POINT2(n),s.x+=I.getScaledSize(5,e.get_LineThickness()),r.push(s),s=new u.POINT2(n),s.y-=I.getScaledSize(5,e.get_LineThickness()),s.style=5,r.push(s),s=new u.POINT2(n),s.x-=I.getScaledSize(2,e.get_LineThickness()),s.y-=I.getScaledSize(10,e.get_LineThickness()),r.push(s),s=new u.POINT2(n),s.x+=I.getScaledSize(2,e.get_LineThickness()),s.y-=I.getScaledSize(10,e.get_LineThickness()),s.style=5,r.push(s),s=new u.POINT2(n),s.x-=I.getScaledSize(7,e.get_LineThickness()),s.y-=I.getScaledSize(17,e.get_LineThickness()),r.push(s),s=new u.POINT2(n),s.x-=I.getScaledSize(5,e.get_LineThickness()),s.y-=I.getScaledSize(20,e.get_LineThickness()),r.push(s),s=new u.POINT2(n),s.x+=I.getScaledSize(5,e.get_LineThickness()),s.y-=I.getScaledSize(20,e.get_LineThickness()),r.push(s),s=new u.POINT2(n),s.x+=I.getScaledSize(7,e.get_LineThickness()),s.y-=I.getScaledSize(17,e.get_LineThickness()),s.style=5,r.push(s),s=new u.POINT2(n),s.y-=I.getScaledSize(20,e.get_LineThickness()),r.push(s),s=new u.POINT2(n),s.x+=I.getScaledSize(8,e.get_LineThickness()),s.y-=I.getScaledSize(12,e.get_LineThickness()),s.style=5,r.push(s);for(l=0;l<i-1;l++)n=new u.POINT2(t[l]),s=new u.POINT2(t[l+1]),n.x<s.x?(n.x+=I.getScaledSize(5,e.get_LineThickness()),n.y-=I.getScaledSize(10,e.get_LineThickness()),s.x-=I.getScaledSize(5,e.get_LineThickness()),s.y-=I.getScaledSize(10,e.get_LineThickness()),s.style=5):(n.x-=I.getScaledSize(5,e.get_LineThickness()),n.y-=I.getScaledSize(10,e.get_LineThickness()),s.x+=I.getScaledSize(5,e.get_LineThickness()),s.y-=I.getScaledSize(10,e.get_LineThickness()),s.style=5),r.push(n),r.push(s);for(l=0;l<r.length;l++)t[l]=r[l],a++;for(l=a;l<t.length;l++)t[l]=new u.POINT2(t[a-1])}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(I._className,"GetOverheadWire",new E.RendererException("GetOverheadWire",e))}return a}static GetLineArray2Double(e,t,i,S,y,f,D){let M=new Array;try{let h=e.get_LineType();if(l.CELineArray.getClient(),null==t||t.length<2)return null;let E,P,R,N,C=0,O=0,p=0,x=0,b=0,w=0,m=0,F=0,G=new g.ref,U=new g.ref,v=0,H=0,B=0,k=0,Y=0,W=new g.ref,X=0,V=0,z=0,K=0,Q=-1,Z=T.lineutility.MBRDistance(t,S),J=new u.POINT2(t[0]),j=new u.POINT2(t[1]),q=new u.POINT2(t[1]),$=new u.POINT2(t[0]),ee=new u.POINT2(t[0]),te=new u.POINT2(t[0]),ie=new u.POINT2(t[0]),ae=new u.POINT2(t[0]),ne=new u.POINT2(t[0]),se=new u.POINT2(t[0]),le=(new u.POINT2(t[0]),new u.POINT2(t[0]),new Array(3)),re=new Array(26),oe=new Array(100),ce=new u.POINT2(t[0]),Te=new u.POINT2(t[0]),ue=new u.POINT2,ge=new u.POINT2,Le=new u.POINT2,de=new u.POINT2,_e=new u.POINT2,he=(new u.POINT2(t[0]),0),Ee=new Array(6),Ae=0;for(i>2&&(q=new u.POINT2(t[2])),J.style=0,j.style=0,q.style=0,R=new Array(S),z=0;z<S;z++)R[z]=new u.POINT2(t[z]);let Ie,Se,ye,fe,De,Me,Pe,Re,Ne,Ce,Oe,pe=A.RendererSettings.getInstance().getDeviceDPI()/96;switch(h){case d.TacticalLines.OVERHEAD_WIRE:he=I.getOverheadWire(e,t,S);break;case d.TacticalLines.BOUNDARY:he=t.length;break;case d.TacticalLines.REEF:he=i=I.GetReefPoints(t,I.getScaledSize(40,e.get_LineThickness()),S);break;case d.TacticalLines.RESTRICTED_AREA:he=i=I.GetRestrictedAreaPoints(t,I.getScaledSize(15,e.get_LineThickness()),S);break;case d.TacticalLines.TRAINING_AREA:for(Z=T.lineutility.MBRDistance(t,S),Y=20*pe,Z<60*pe&&(Y=Z/4),Y<5*pe&&(Y=5*pe),z=0;z<S;z++)t[z].style=1;for(t[S-1].style=5,J=T.lineutility.CalcCenterPointDouble(t,S-1),T.lineutility.CalcCircleDouble(J,Y,26,re,0),z=S;z<S+26;z++)t[z]=new u.POINT2(re[z-S]);t[z-1].style=5,Z<50*pe?Y*=.6:Y=12*pe,j=new u.POINT2(J),j.y-=Y,j.style=0,q=new u.POINT2(j),q.y+=Y,q.style=5,$=new u.POINT2(q),$.y+=Y/4+e.get_LineThickness(),$.style=0,ee=new u.POINT2($),ee.y+=Y/4,t[z++]=new u.POINT2(j),t[z++]=new u.POINT2(q),t[z++]=new u.POINT2($),ee.style=5,t[z++]=new u.POINT2(ee),he=i=z;break;case d.TacticalLines.PIPE:he=i=I.GetPipePoints(t,I.getScaledSize(20,e.get_LineThickness()),S);break;case d.TacticalLines.ANCHORAGE_AREA:switch(O=I.GetInsideOutsideDouble2(t[0],t[1],t,S,0,h),w=T.lineutility.GetQuadrantDouble(t[0],t[1]),w){case 4:switch(O){case 1:case 2:default:break;case 0:case 3:T.lineutility.ReversePointsDouble2(t,S)}break;case 1:switch(O){case 1:case 3:default:break;case 0:case 2:T.lineutility.ReversePointsDouble2(t,S)}break;case 2:switch(O){case 1:case 2:T.lineutility.ReversePointsDouble2(t,S)}break;case 3:switch(O){case 1:case 3:T.lineutility.ReversePointsDouble2(t,S)}}Ae=I.GetAnchorageDouble(t,I.getScaledSize(20,e.get_LineThickness()),S),he=Ae;break;case d.TacticalLines.ANCHORAGE_LINE:T.lineutility.ReversePointsDouble2(t,S),he=I.GetAnchorageDouble(t,I.getScaledSize(20,e.get_LineThickness()),S);break;case d.TacticalLines.LRO:{let i=r.countsupport.GetXPointsCount(R,I.getScaledSize(30,e.get_LineThickness()),S),a=new Array(i),n=r.countsupport.GetLVOCount(R,I.getScaledSize(30,e.get_LineThickness()),S),s=new Array(n);for(i=I.GetXPoints(R,a,I.getScaledSize(30,e.get_LineThickness()),S),n=I.GetLVOPoints(R,s,I.getScaledSize(4,e.get_LineThickness()),I.getScaledSize(30,e.get_LineThickness()),S),K=0;K<i;K++)t[K]=new u.POINT2(a[K]);for(i>0&&(t[i-1].style=5),K=0;K<n;K++)t[i+K]=new u.POINT2(s[K]);he=i+n;break}case d.TacticalLines.UNDERCAST:t[0].x<t[1].x&&T.lineutility.ReversePointsDouble2(t,S),Ae=c.flot.GetFlotDouble(t,I.getScaledSize(20,e.get_LineThickness()),S),he=Ae;break;case d.TacticalLines.LVO:he=I.GetLVOPoints(R,t,I.getScaledSize(4,e.get_LineThickness()),I.getScaledSize(20,e.get_LineThickness()),S);break;case d.TacticalLines.ICING:he=i=I.GetIcingPointsDouble(t,I.getScaledSize(15,e.get_LineThickness()),S);break;case d.TacticalLines.MVFR:switch(O=I.GetInsideOutsideDouble2(t[0],t[1],t,S,0,h),w=T.lineutility.GetQuadrantDouble(t[0],t[1]),w){case 4:switch(O){case 0:case 3:default:break;case 1:case 2:T.lineutility.ReversePointsDouble2(t,S)}break;case 1:switch(O){case 0:case 2:default:break;case 1:case 3:T.lineutility.ReversePointsDouble2(t,S)}break;case 2:switch(O){case 0:case 3:T.lineutility.ReversePointsDouble2(t,S)}break;case 3:switch(O){case 0:case 2:T.lineutility.ReversePointsDouble2(t,S)}}Ae=c.flot.GetFlotDouble(t,I.getScaledSize(20,e.get_LineThickness()),S),he=Ae;break;case d.TacticalLines.ITD:he=I.GetITDPointsDouble(t,I.getScaledSize(15,e.get_LineThickness()),S);break;case d.TacticalLines.CONVERGENCE:he=I.GetConvergencePointsDouble(t,I.getScaledSize(10,e.get_LineThickness()),S);break;case d.TacticalLines.RIDGE:he=i=I.GetRidgePointsDouble(e,t,S);break;case d.TacticalLines.TROUGH:case d.TacticalLines.UPPER_TROUGH:case d.TacticalLines.INSTABILITY:case d.TacticalLines.SHEAR:he=i=I.GetSquallDouble(t,I.getScaledSize(10,e.get_LineThickness()),6,I.getScaledSize(30,e.get_LineThickness()),S);break;case d.TacticalLines.CABLE:he=i=I.GetSquallDouble(t,I.getScaledSize(20,e.get_LineThickness()),6,I.getScaledSize(20,e.get_LineThickness()),S);break;case d.TacticalLines.SQUALL:he=i=I.GetSevereSquall(t,I.getScaledSize(30,e.get_LineThickness()),S);break;case d.TacticalLines.SF:case d.TacticalLines.USF:case d.TacticalLines.SFG:case d.TacticalLines.SFY:T.lineutility.ReversePointsDouble2(t,S),he=i=c.flot.GetSFPointsDouble(e,t,S);break;case d.TacticalLines.OFY:T.lineutility.ReversePointsDouble2(t,S),he=i=c.flot.GetOFYPointsDouble(e,t,S);break;case d.TacticalLines.OCCLUDED:case d.TacticalLines.UOF:for(T.lineutility.ReversePointsDouble2(t,S),i=c.flot.GetOccludedPointsDouble(e,t,S),z=0;z<S;z++)t[i+z]=R[z];he=i+=S;break;case d.TacticalLines.WF:case d.TacticalLines.UWF:for(T.lineutility.ReversePointsDouble2(t,S),Ae=c.flot.GetFlot2Double(e,t,S),z=0;z<S;z++)t[i-S+z]=R[z];he=Ae+S;break;case d.TacticalLines.WFG:case d.TacticalLines.WFY:T.lineutility.ReversePointsDouble2(t,S),Ae=c.flot.GetFlot2Double(e,t,S),he=Ae;break;case d.TacticalLines.CFG:case d.TacticalLines.CFY:he=i=I.GetATWallPointsDouble(e,t,S);break;case d.TacticalLines.CF:case d.TacticalLines.UCF:for(t[(i=I.GetATWallPointsDouble(e,t,S))-1].style=5,z=0;z<S;z++)t[i+z]=R[z];t[(i+=S)-1].style=5,he=i;break;case d.TacticalLines.IL:case d.TacticalLines.PLANNED:case d.TacticalLines.ESR1:case d.TacticalLines.ESR2:switch(T.lineutility.LineRelativeToLine(t[0],t[1],t[2],J,j),Y=T.lineutility.CalcDistanceDouble(t[0],J),ee=T.lineutility.ExtendLineDouble(J,t[0],Y),T.lineutility.LineRelativeToLine(t[0],t[1],ee,q,$),t[0]=new u.POINT2(J),t[1]=new u.POINT2(j),t[2]=new u.POINT2($),t[3]=new u.POINT2(q),h){case d.TacticalLines.IL:case d.TacticalLines.ESR2:t[0].style=0,t[1].style=5,t[2].style=0;break;case d.TacticalLines.PLANNED:t[0].style=1,t[1].style=5,t[2].style=1;break;case d.TacticalLines.ESR1:t[1].style=5,J.x<=j.x?t[1].y<=t[2].y?(t[0].style=0,t[2].style=1):(t[0].style=1,t[2].style=0):t[1].y>=t[2].y?(t[0].style=0,t[2].style=1):(t[0].style=1,t[2].style=0)}he=4;break;case d.TacticalLines.FORDSITE:T.lineutility.LineRelativeToLine(t[0],t[1],t[2],J,j),t[0].style=1,t[1].style=5,t[2]=new u.POINT2(J),t[2].style=1,t[3]=new u.POINT2(j),t[3].style=5,he=4;break;case d.TacticalLines.ROADBLK:for(E=new Array(4),z=0;z<4;z++)E[z]=new u.POINT2(t[z]);B=T.lineutility.CalcDistanceDouble(t[0],t[1]),Y=T.lineutility.CalcDistanceToLineDouble(t[0],t[1],t[2]),t[0]=T.lineutility.ExtendTrueLinePerpDouble(E[0],E[1],E[1],Y,0),t[1]=T.lineutility.ExtendTrueLinePerpDouble(E[0],E[1],E[0],Y,5),t[2]=T.lineutility.ExtendTrueLinePerpDouble(E[0],E[1],E[1],-Y,0),t[3]=T.lineutility.ExtendTrueLinePerpDouble(E[0],E[1],E[0],-Y,5),ce=T.lineutility.MidPointDouble(E[0],E[1],0),ce=T.lineutility.ExtendLineDouble(E[0],ce,Y),t[4]=T.lineutility.ExtendAngledLine(E[0],E[1],ce,105,B/2),t[5]=T.lineutility.ExtendAngledLine(E[0],E[1],ce,-75,B/2),t[5].style=5,ce=T.lineutility.MidPointDouble(E[0],E[1],0),ce=T.lineutility.ExtendLineDouble(E[1],ce,Y),t[6]=T.lineutility.ExtendAngledLine(E[0],E[1],ce,105,B/2),t[7]=T.lineutility.ExtendAngledLine(E[0],E[1],ce,-75,B/2),t[7].style=5,he=8;break;case d.TacticalLines.AIRFIELD:I.AirfieldCenterFeature(t,i),he=i;break;case d.TacticalLines.PNO:case d.TacticalLines.PLD:case d.TacticalLines.CFL:for(z=0;z<i;z++)t[z].style=1;he=i;break;case d.TacticalLines.FENCED:for(I.FillPoints(t,i,M),N=T.lineutility.LineOfXPoints(e,R),z=0;z<N.length;z++)M.push(N[z]);he=M.length;break;case d.TacticalLines.FOXHOLE:p=T.lineutility.CalcTrueSlopeDouble(J,j,W),0===p&&(X=J.y>j.y?0:1),0!==p&&W.value[0]<=1&&(X=J.x<j.x?3:2),0!==p&&W.value[0]>1&&(J.x<j.x&&J.y>j.y&&(X=1),J.x<j.x&&J.y<j.y&&(X=0),J.x>j.x&&J.y>j.y&&(X=1),J.x>j.x&&J.y<j.y&&(X=0)),Z/20>I.maxLength*pe&&(Z=20*I.maxLength*pe),Z/20<I.minLength*pe&&(Z=20*I.minLength*pe),Z<250*pe&&(Z=250*pe),Z>500*pe&&(Z=500*pe),t[0]=T.lineutility.ExtendDirectedLine(J,j,J,X,Z/20),t[1]=new u.POINT2(J),t[2]=new u.POINT2(j),t[3]=T.lineutility.ExtendDirectedLine(J,j,j,X,Z/20),he=4;break;case d.TacticalLines.ISOLATE:case d.TacticalLines.CORDONKNOCK:case d.TacticalLines.CORDONSEARCH:I.GetIsolatePointsDouble(t,h,D),he=50;break;case d.TacticalLines.OCCUPY:I.GetIsolatePointsDouble(t,h,D),he=32;break;case d.TacticalLines.RETAIN:I.GetIsolatePointsDouble(t,h,D),he=75;break;case d.TacticalLines.SECURE:I.GetIsolatePointsDouble(t,h,D),he=29;break;case d.TacticalLines.TURN:{let e=t[0];t[0]=t[1],t[1]=e,I.GetIsolatePointsDouble(t,h,null),he=29;break}case d.TacticalLines.ENCIRCLE:case d.TacticalLines.ZONE:case d.TacticalLines.OBSAREA:case d.TacticalLines.OBSFAREA:case d.TacticalLines.STRONG:case d.TacticalLines.FORT_REVD:case d.TacticalLines.FORT:he=I.GetZONEPointsDouble2(e,t,S);break;case d.TacticalLines.ATWALL:case d.TacticalLines.LINE:he=I.GetATWallPointsDouble2(e,t,S);break;case d.TacticalLines.SC:case d.TacticalLines.MRR:case d.TacticalLines.SL:case d.TacticalLines.TC:case d.TacticalLines.LLTR:case d.TacticalLines.SAAFR:case d.TacticalLines.AC:{let e=!1;if(e=!0,C=I.dACP,T.lineutility.InitializePOINT2Array(Ee),T.lineutility.InitializePOINT2Array(re),he=0,!e)for(z=0;z<S;z++)R[z].style<=0&&(R[z].style=1);for(z=0;z<S-1;z++)for(Z=R[z].style,Ee[0]=new u.POINT2(R[z]),Ee[1]=new u.POINT2(R[z+1]),T.lineutility.GetSAAFRSegment(Ee,h,Z),K=0;K<6;K++)t[he]=new u.POINT2(Ee[K]),he++;let i=0;if(e){let e=0,a=R[0];for(z=0;z<S;z++)if(i=R[z].style,0!==z){if(!(i<0)){for(re[0]=new u.POINT2(R[z]),Z=e,T.lineutility.CalcCircleDouble(re[0],Z,26,re,0),re[25].style=5,K=0;K<26;K++)t[he]=new u.POINT2(re[K]),he++;for(re[0]=new u.POINT2(a),T.lineutility.CalcCircleDouble(re[0],Z,26,re,0),re[25].style=5,K=0;K<26;K++)t[he]=new u.POINT2(re[K]),he++;e=i,a=R[z]}}else e=i,a=R[z]}else for(z=0;z<S-1;z++){for(i=R[z].style,re[0]=new u.POINT2(R[z]),Z=i,T.lineutility.CalcCircleDouble(re[0],Z,26,re,0),re[25].style=5,K=0;K<26;K++)t[he]=new u.POINT2(re[K]),he++;for(re[0]=new u.POINT2(R[z+1]),Z=i,T.lineutility.CalcCircleDouble(re[0],Z,26,re,0),re[25].style=5,K=0;K<26;K++)t[he]=new u.POINT2(re[K]),he++}break}case d.TacticalLines.MINED:case d.TacticalLines.UXO:case d.TacticalLines.ACOUSTIC:case d.TacticalLines.ACOUSTIC_AMB:case d.TacticalLines.BEARING:case d.TacticalLines.BEARING_J:case d.TacticalLines.BEARING_RDF:case d.TacticalLines.ELECTRO:case d.TacticalLines.BEARING_EW:case d.TacticalLines.TORPEDO:case d.TacticalLines.OPTICAL:he=i;break;case d.TacticalLines.MSDZ:for(T.lineutility.InitializePOINT2Array(oe),$=new u.POINT2(t[3]),null==D?(B=T.lineutility.CalcDistanceDouble(J,j),T.lineutility.CalcCircleDouble(J,B,100,oe,0)):T.lineutility.CalcCircleDouble2(J,j,100,oe,D),z=0;z<100;z++)t[z]=new u.POINT2(oe[z]);for(t[99].style=5,null==D?(B=T.lineutility.CalcDistanceDouble(J,q),T.lineutility.CalcCircleDouble(J,B,100,oe,0)):T.lineutility.CalcCircleDouble2(J,q,100,oe,D),z=0;z<100;z++)t[100+z]=new u.POINT2(oe[z]);if(t[199].style=5,4==S)for(null==D?(B=T.lineutility.CalcDistanceDouble(J,$),T.lineutility.CalcCircleDouble(J,B,100,oe,0)):T.lineutility.CalcCircleDouble2(J,$,100,oe,D),z=0;z<100;z++)t[200+z]=new u.POINT2(oe[z]);he=i;break;case d.TacticalLines.CONVOY:Z<150*pe&&(Z=150*pe),Z>500*pe&&(Z=500*pe),b=Z/25,J=new u.POINT2(t[0]),j=new u.POINT2(t[1]),p=T.lineutility.CalcTrueSlopeDouble(j,J,W),J=T.lineutility.ExtendLine2Double(j,J,3*-b,0),W.value[0]<1?(t[0]=T.lineutility.ExtendDirectedLine(J,j,J,2,b),t[1]=T.lineutility.ExtendDirectedLine(J,j,j,2,b),t[2]=T.lineutility.ExtendDirectedLine(J,j,j,3,b),t[3]=T.lineutility.ExtendDirectedLine(J,j,J,3,b)):(t[0]=T.lineutility.ExtendDirectedLine(J,j,J,0,b),t[1]=T.lineutility.ExtendDirectedLine(J,j,j,0,b),t[2]=T.lineutility.ExtendDirectedLine(J,j,j,1,b),t[3]=T.lineutility.ExtendDirectedLine(J,j,J,1,b)),q=T.lineutility.ExtendLineDouble(j,J,3*b),T.lineutility.GetArrowHead4Double(J,q,Math.trunc(3*b),Math.trunc(3*b),le,0),Y=T.lineutility.CalcDistanceDouble(t[0],le[0]),k=T.lineutility.CalcDistanceDouble(t[3],le[0]),t[3].style=5,Y<k?(t[4]=new u.POINT2(t[0]),t[4].style=0,t[5]=new u.POINT2(le[0]),t[5].style=0,t[6]=new u.POINT2(le[1]),t[6].style=0,t[7]=new u.POINT2(le[2]),t[7].style=0,t[8]=new u.POINT2(t[3])):(t[4]=t[3],t[4].style=0,t[5]=le[0],t[5].style=0,t[6]=le[1],t[6].style=0,t[7]=le[2],t[7].style=0,t[8]=t[0]),he=9;break;case d.TacticalLines.HCONVOY:Z<150*pe&&(Z=150*pe),Z>500*pe&&(Z=500*pe),b=Z/25,J=new u.POINT2(t[0]),j=new u.POINT2(t[1]),q=T.lineutility.ExtendAlongLineDouble(J,j,2*b),T.lineutility.GetArrowHead4Double(J,q,Math.trunc(2*b),Math.trunc(2*b),le,0),p=T.lineutility.CalcTrueSlopeDouble(j,q,W),W.value[0]<1?(t[0]=T.lineutility.ExtendDirectedLine(q,j,q,T.lineutility.extend_above,b),t[1]=T.lineutility.ExtendDirectedLine(q,j,j,T.lineutility.extend_above,b),t[2]=T.lineutility.ExtendDirectedLine(q,j,j,T.lineutility.extend_below,b),t[3]=T.lineutility.ExtendDirectedLine(q,j,q,T.lineutility.extend_below,b)):(t[0]=T.lineutility.ExtendDirectedLine(q,j,q,T.lineutility.extend_left,b),t[1]=T.lineutility.ExtendDirectedLine(q,j,j,T.lineutility.extend_left,b),t[2]=T.lineutility.ExtendDirectedLine(q,j,j,T.lineutility.extend_right,b),t[3]=T.lineutility.ExtendDirectedLine(q,j,q,T.lineutility.extend_right,b)),t[4]=new u.POINT2(t[0]),t[5]=new u.POINT2(q),t[5].style=0,t[6]=new u.POINT2(le[1]),t[7]=new u.POINT2(le[0]),t[8]=new u.POINT2(le[2]),t[8].style=0,t[9]=new u.POINT2(le[1]),he=10;break;case d.TacticalLines.MSR_ONEWAY:case d.TacticalLines.MSR_TWOWAY:case d.TacticalLines.MSR_ALT:case d.TacticalLines.ASR_ONEWAY:case d.TacticalLines.ASR_TWOWAY:case d.TacticalLines.ASR_ALT:case d.TacticalLines.ROUTE_ONEWAY:case d.TacticalLines.ROUTE_ALT:for(V=S,t[S-1].style=5,z=0;z<S-1;z++){if(Y=T.lineutility.CalcDistanceDouble(t[z],t[z+1]),Y<20)continue;J=new u.POINT2(t[z]),j=new u.POINT2(t[z+1]),q=T.lineutility.ExtendLine2Double(t[z],t[z+1],-3*Y/4,0),$=T.lineutility.ExtendLine2Double(t[z],t[z+1],-1*Y/4,5);let e=10*pe;for(X=I.SupplyRouteArrowSide(t[z],t[z+1]),q=T.lineutility.ExtendDirectedLine(J,j,q,X,e),$=T.lineutility.ExtendDirectedLine(J,j,$,X,e),t[V]=new u.POINT2(q),V++,t[V]=new u.POINT2($),V++,Y=e,Z/20<I.minLength*pe&&(Y=5*pe),T.lineutility.GetArrowHead4Double(q,$,Y,Y,le,0),K=0;K<3;K++)t[V]=new u.POINT2(le[K]),V++;if(h===d.TacticalLines.MSR_ALT||h===d.TacticalLines.ASR_ALT||h===d.TacticalLines.ROUTE_ALT)for(T.lineutility.GetArrowHead4Double($,q,Y,Y,le,0),K=0;K<3;K++)t[V]=new u.POINT2(le[K]),V++;if(h===d.TacticalLines.MSR_TWOWAY||h===d.TacticalLines.ASR_TWOWAY)for(e=15*pe,q=T.lineutility.ExtendDirectedLine(J,j,q,X,e),$=T.lineutility.ExtendDirectedLine(J,j,$,X,e),t[V]=new u.POINT2(q),V++,t[V]=new u.POINT2($),V++,T.lineutility.GetArrowHead4Double($,q,Y,Y,le,0),K=0;K<3;K++)t[V]=new u.POINT2(le[K]),V++}he=V;break;case d.TacticalLines.FORDIF:{for(T.lineutility.LineRelativeToLine(t[0],t[1],t[2],ee,te),t[2]=new u.POINT2(te),t[3]=new u.POINT2(ee),z=0;z<i;z++)t[z].style=1;let a;J=T.lineutility.MidPointDouble(t[0],t[1],0),j=T.lineutility.MidPointDouble(t[2],t[3],0);let n=!0;if(null!=f){let e=new u.POINT2(f.getMinX(),f.getMinY()),t=new u.POINT2(f.getMaxX(),f.getMaxY());a=T.lineutility.BoundOneSegment(J,j,e,t),null!=a&&a.length>1?(J=a[0],j=a[1]):(a=new Array(2),a[0]=new u.POINT2(J),a[1]=new u.POINT2(j),n=!1)}ce=T.lineutility.MidPointDouble(J,j,0),T.lineutility.CalcDistanceDouble(ce,J)>T.lineutility.CalcDistanceDouble(ce,j)?(T.lineutility.LineRelativeToLine(t[2],t[3],J,ee,te),t[0]=new u.POINT2(te.x,te.y,1),t[1]=new u.POINT2(ee.x,ee.y,1)):(T.lineutility.LineRelativeToLine(t[0],t[1],j,ee,te),t[2]=new u.POINT2(te.x,te.y,1),t[3]=new u.POINT2(ee.x,ee.y,1));let s=I.getScaledSize(10,e.get_LineThickness());if(q=T.lineutility.ExtendLine2Double(t[0],J,-s,0),$=T.lineutility.ExtendLine2Double(t[3],j,-s,0),ee=T.lineutility.ExtendLine2Double(t[0],J,s,0),te=T.lineutility.ExtendLine2Double(t[3],j,s,0),b=T.lineutility.CalcDistanceDouble(J,j),F=4,O=1,t[F]=new u.POINT2(J),t[F].style=0,F++,n)for(;x<b-s&&(x=O*s/2,t[F]=T.lineutility.ExtendLine2Double(q,$,x-b,0),F++,O++,x=O*s/2,t[F]=T.lineutility.ExtendLine2Double(ee,te,x-b,0),F++,!(F>=t.length-1));)O++;t[F]=new u.POINT2(j),t[F].style=5,F++,he=F;break}case d.TacticalLines.ATDITCH:he=T.lineutility.GetDitchSpikeDouble(e,t,S,0);break;case d.TacticalLines.ATDITCHC:t[0].style=9,he=T.lineutility.GetDitchSpikeDouble(e,t,S,0);break;case d.TacticalLines.ATDITCHM:T.lineutility.ReversePointsDouble2(t,S),t[0].style=9,he=T.lineutility.GetDitchSpikeDouble(e,t,S,0);break;case d.TacticalLines.DIRATKGND:for(Z/30>I.maxLength*pe&&(Z=30*I.maxLength*pe),Z/30<I.minLength*pe&&(Z=30*I.minLength*pe),Z<150*pe&&(Z=150*pe),Z>500*pe&&(Z=500*pe),Y=T.lineutility.CalcDistanceDouble(t[0],t[1]),Y<Z/40&&(t[1]=T.lineutility.ExtendLineDouble(t[0],t[1],Z/40+1)),t[0]=T.lineutility.ExtendAlongLineDouble(t[0],t[1],Z/40),T.lineutility.ReversePointsDouble2(t,S),J=new u.POINT2(t[i-12]),j=new u.POINT2(t[i-11]),q=T.lineutility.ExtendLineDouble(J,j,Z/40),T.lineutility.GetArrowHead4Double(J,j,Math.trunc(Z/20),Math.trunc(Z/20),le,0),z=0;z<3;z++)t[i-10+z]=new u.POINT2(le[z]);for(T.lineutility.GetArrowHead4Double(J,q,Math.trunc(Z/13.33),Math.trunc(Z/13.33),le,0),z=0;z<3;z++)t[i-7+z]=new u.POINT2(le[z]);t[i-4]=new u.POINT2(t[i-10]),t[i-4].style=0,t[i-3]=new u.POINT2(t[i-7]),t[i-3].style=5,t[i-2]=new u.POINT2(t[i-8]),t[i-2].style=0,t[i-1]=new u.POINT2(t[i-5]),t[i-1].style=5,he=i;break;case d.TacticalLines.MFLANE:case d.TacticalLines.RAFT:for(q=T.lineutility.ExtendLineDouble(t[i-8],t[i-7],Z/2),$=new u.POINT2(t[i-7]),j=T.lineutility.ExtendLineDouble(t[1],t[0],Z/2),Z/10>I.maxLength*pe&&(Z=10*I.maxLength*pe),Z/10<I.minLength*pe&&(Z=10*I.minLength*pe),Z>250*pe&&(Z=250*pe),T.lineutility.GetArrowHead4Double(q,$,Math.trunc(Z/10),Math.trunc(Z/5),le,0),K=0;K<3;K++)t[i-6+K]=new u.POINT2(le[K]);for(T.lineutility.GetArrowHead4Double(j,J,Math.trunc(Z/10),Math.trunc(Z/5),le,0),K=0;K<3;K++)t[i-3+K]=new u.POINT2(le[K]);t[S-1].style=5,he=i;break;case d.TacticalLines.DIRATKAIR:{for(T.lineutility.ReversePointsDouble2(t,S),K=S-1;K>0&&(Y+=T.lineutility.CalcDistanceDouble(t[K],t[K-1]),!(Y>60));K--);for(Y>60?(Q=K,q=t[Q],Q>=1&&($=t[Q-1])):(Q=S<=3?1:2,q=t[Q],Q>=1&&($=t[Q-1])),J=new u.POINT2(t[0]),Z/20>I.maxLength*pe&&(Z=20*I.maxLength*pe),Z/20<I.minLength*pe&&(Z=20*I.minLength*pe),Z<150*pe&&(Z=150*pe),Z>250*pe&&(Z=250*pe),T.lineutility.GetArrowHead4Double(t[i-11],t[i-10],Math.trunc(Z/20),Math.trunc(Z/20),le,0),z=0;z<3;z++)t[i-9+z]=new u.POINT2(le[z]);for(t[i-6].x=(t[i-11].x+t[i-10].x)/2,t[i-6].y=(t[i-11].y+t[i-10].y)/2,J=new u.POINT2(t[i-6]),T.lineutility.GetArrowHead4Double(t[i-11],J,Math.trunc(Z/20),Math.trunc(Z/20),le,9),Q>=1&&(J=T.lineutility.MidPointDouble(q,$,0),T.lineutility.GetArrowHead4Double($,J,Math.trunc(Z/20),Math.trunc(Z/20),le,9)),z=0;z<3;z++)t[i-6+z]=new u.POINT2(le[z]);for(T.lineutility.GetArrowHead4Double(t[i-10],J,Math.trunc(Z/20),Math.trunc(Z/20),le,9),Q>=1&&(J=T.lineutility.MidPointDouble(q,$,0),T.lineutility.GetArrowHead4Double(q,J,Math.trunc(Z/20),Math.trunc(Z/20),le,9)),z=0;z<3;z++)t[i-3+z]=new u.POINT2(le[z]);let e=new Array;for(t[Q-1].style=5,2===S&&(t[1].style=5),z=0;z<i;z++)e.push(new u.POINT2(t[z]));for(ce=T.lineutility.MidPointDouble(t[Q-1],t[Q],0),J=T.lineutility.ExtendAlongLineDouble(ce,t[Q],Z/20,0),e.push(J),j=new u.POINT2(t[Q]),j.style=5,e.push(j),J=T.lineutility.ExtendAlongLineDouble(ce,t[Q-1],Z/20,0),e.push(J),j=new u.POINT2(t[Q-1]),j.style=5,e.push(j),i=e.length,t=new Array(e.length),z=0;z<e.length;z++)t[z]=new u.POINT2(e[z]);he=i;break}case d.TacticalLines.PDF:{J=new u.POINT2(t[1]),j=new u.POINT2(t[0]),t[0]=new u.POINT2(J),t[1]=new u.POINT2(j),P=new Array(3),P[0]=new u.POINT2(J),P[1]=new u.POINT2(j),P[2]=new u.POINT2(q),T.lineutility.GetPixelsMin(P,3,G,U),G.value[0]<0?G.value[0]=G.value[0]-100:G.value[0]=0,t[2].style=5,Z/20>I.maxLength*pe&&(Z=20*I.maxLength*pe),Z/20<I.minLength*pe&&(Z=20*I.minLength*pe),Z>500*pe&&(Z=500*pe);let i=I.getScaledSize(2,e.get_LineThickness()/2);for(q=T.lineutility.ExtendLineDouble(J,j,-Z/10),p=T.lineutility.CalcTrueSlopeDouble(J,j,W),0!==p&&0!==W.value[0]&&(v=q.y+1/W.value[0]*q.x,H=-1/W.value[0]*G.value[0]+v,se.x=G.value[0],se.y=H,t[3]=T.lineutility.ExtendLineDouble(se,q,-i),t[3].style=0,t[4]=T.lineutility.ExtendLineDouble(se,q,i),t[4].style=0),0!==p&&0===W.value[0]&&(t[3]=new u.POINT2(q),t[3].y=q.y-i,t[3].style=0,t[4]=new u.POINT2(q),t[4].y=q.y+i,t[4].style=0),0===p&&(t[3]=new u.POINT2(q),t[3].x=q.x-i,t[3].style=0,t[4]=new u.POINT2(q),t[4].x=q.x+i,t[4].style=0),q=T.lineutility.ExtendLineDouble(j,J,-Z/10),0!==p&&0!==W.value[0]&&(v=q.y+1/W.value[0]*q.x,H=-1/W.value[0]*G.value[0]+v,se.x=G.value[0],se.y=H,t[5]=T.lineutility.ExtendLineDouble(se,q,i),t[5].style=0,t[6]=T.lineutility.ExtendLineDouble(se,q,-i)),0!==p&&0===W.value[0]&&(t[5]=new u.POINT2(q),t[5].y=q.y+i,t[5].style=0,t[6]=new u.POINT2(q),t[6].y=q.y-i),0===p&&(t[5]=new u.POINT2(q),t[5].x=q.x+i,t[5].style=0,t[6]=new u.POINT2(q),t[6].x=q.x-i),t[6].style=0,t[7]=new u.POINT2(t[3]),t[7].style=5,T.lineutility.GetArrowHead4Double(t[1],t[0],Math.trunc(Z/20),Math.trunc(Z/20),le,0),z=0;z<3;z++)t[8+z]=new u.POINT2(le[z]);for(T.lineutility.GetArrowHead4Double(t[1],t[2],Math.trunc(Z/20),Math.trunc(Z/20),le,0),z=0;z<3;z++)t[11+z]=new u.POINT2(le[z]),t[11+z].style=0;he=14;break}case d.TacticalLines.DIRATKSPT:for(T.lineutility.ReversePointsDouble2(t,S),Z/20>I.maxLength*pe&&(Z=20*I.maxLength*pe),Z/20<I.minLength*pe&&(Z=20*I.minLength*pe),Z<150*pe&&(Z=150*pe),Z>500*pe&&(Z=500*pe),T.lineutility.GetArrowHead4Double(t[i-5],t[i-4],Math.trunc(Z/20),Math.trunc(Z/20),le,0),K=0;K<3;K++)t[i-K-1]=new u.POINT2(le[K]);he=i;break;case d.TacticalLines.ABATIS:P=new Array(2),P[0]=new u.POINT2(J),P[1]=new u.POINT2(j),T.lineutility.GetPixelsMin(P,2,G,U),G.value[0]<=0?G.value[0]=G.value[0]-100:G.value[0]=0,Z>300*pe&&(Z=300*pe),t[0]=T.lineutility.ExtendLineDouble(t[1],t[0],-Z/10),p=T.lineutility.CalcTrueSlopeDouble(J,j,W),ce.x=(J.x+t[0].x)/2,ce.y=(J.y+t[0].y)/2,t[i-3]=new u.POINT2(J),t[i-4].style=5,t[i-3].style=0,0!==p&&0!==W.value[0]&&(v=ce.y+1/W.value[0]*ce.x,H=-1/W.value[0]*G.value[0]+v,se.x=G.value[0],se.y=H,t[i-2]=T.lineutility.ExtendLineDouble(se,ce,Z/20),t[i-2].y>=ce.y&&(t[i-2]=T.lineutility.ExtendLineDouble(se,ce,-Z/20))),0!==p&&0===W.value[0]&&(t[i-2]=new u.POINT2(ce),t[i-2].y=ce.y-Z/20),0===p&&(t[i-2]=new u.POINT2(ce),t[i-2].x=ce.x-Z/20),t[i-2].style=0,t[i-1]=new u.POINT2(t[0]),he=i;break;case d.TacticalLines.CLUSTER:for(P=new Array(2),Math.abs(J.y-j.y)<1&&(j.y=J.y+1),P[0]=new u.POINT2(J),P[1]=new u.POINT2(j),E=new Array(26),B=T.lineutility.CalcDistanceDouble(J,j)/2,ce.x=(j.x+J.x)/2,ce.y=(j.y+J.y)/2,p=T.lineutility.CalcTrueSlopeDouble(J,j,W),0!==p&&0!==W.value[0]&&(v=ce.y+1/W.value[0]*ce.x,se.x=0,se.y=v,q=T.lineutility.ExtendLineDouble(se,ce,B),t[0].x<=t[1].x?q.y>=ce.y&&(q=T.lineutility.ExtendLineDouble(se,ce,-B)):q.y<=ce.y&&(q=T.lineutility.ExtendLineDouble(se,ce,-B))),0!==p&&0===W.value[0]&&(q=ce,t[0].x<=t[1].x?q.y=ce.y-B:q.y=ce.y+B),0===p&&(q=ce,t[0].y<=t[1].y?q.x=ce.x+B:q.x=ce.x-B),j=T.lineutility.ExtendLineDouble(ce,q,100),E[0]=new u.POINT2(q),E[1]=new u.POINT2(j),T.lineutility.ArcArrayDouble(E,0,B,h,null),t[0].style=1,t[1].style=5,z=0;z<26;z++)t[2+z]=new u.POINT2(E[z]),t[2+z].style=1;he=28;break;case d.TacticalLines.TRIP:for(B=T.lineutility.CalcDistanceToLineDouble(J,j,q),p=T.lineutility.CalcTrueSlopeDouble(J,j,W),0!==p&&0!==W.value[0]&&(v=j.y+1/W.value[0]*j.x,H=q.y-W.value[0]*q.x,ue=T.lineutility.CalcTrueIntersectDouble2(-1/W.value[0],v,W.value[0],H,1,1,J.x,J.y),ge=T.lineutility.ExtendLineDouble(J,j,B/2),Le=T.lineutility.ExtendLineDouble(J,j,B),v=ge.y+1/W.value[0]*ge.x,de=T.lineutility.CalcTrueIntersectDouble2(-1/W.value[0],v,W.value[0],H,1,1,J.x,J.y),v=Le.y+1/W.value[0]*Le.x,_e=T.lineutility.CalcTrueIntersectDouble2(-1/W.value[0],v,W.value[0],H,1,1,J.x,J.y),ce=T.lineutility.MidPointDouble(ge,de,0),Te=T.lineutility.MidPointDouble(Le,_e,0),v=j.y+1/W.value[0]*j.x,ue=T.lineutility.CalcTrueIntersectDouble2(-1/W.value[0],v,W.value[0],H,1,1,J.x,J.y),de=T.lineutility.ExtendLineDouble(J,j,B),Y=T.lineutility.CalcDistanceDouble(ue,de),ge=T.lineutility.ExtendLineDouble(ue,de,-(Y-B))),0!==p&&0===W.value[0]&&(ue.x=j.x,ue.y=q.y,ge=T.lineutility.ExtendLineDouble(J,j,B/2),Le=q,de.x=ue.x+B/2,de.y=ue.y,_e.x=j.x+B,_e.y=q.y,ce=T.lineutility.MidPointDouble(ge,de,0),Te=T.lineutility.MidPointDouble(Le,_e,0),de=T.lineutility.ExtendLineDouble(J,j,B),Y=T.lineutility.CalcDistanceDouble(ue,de),ge=T.lineutility.ExtendLineDouble(ue,de,-(Y-B))),0===p&&(ue.x=q.x,ue.y=j.y,ge=T.lineutility.ExtendLineDouble(J,j,B/2),Le=q,de.y=ue.y+B/2,de.x=ue.x,_e.y=j.y+B,_e.x=q.x,ce=T.lineutility.MidPointDouble(ge,de,0),Te=T.lineutility.MidPointDouble(Le,_e,0),de=T.lineutility.ExtendLineDouble(J,j,B),Y=T.lineutility.CalcDistanceDouble(ue,de),ge=T.lineutility.ExtendLineDouble(ue,de,-(Y-B))),re[0]=new u.POINT2(ge),re[1]=new u.POINT2(de),T.lineutility.ArcArrayDouble(re,0,B,h,null),t[0].style=5,t[1].style=5,K=0;K<26;K++)t[K]=new u.POINT2(re[K]);for(K=25;K<i;K++)t[K].style=5;for(t[26]=new u.POINT2(j),B=T.lineutility.CalcDistanceDouble(j,J),ce=T.lineutility.ExtendLine2Double(j,J,-B/2-7,0),t[27]=new u.POINT2(ce),t[27].style=0,ce=T.lineutility.ExtendLine2Double(j,J,-B/2+7,0),t[28]=new u.POINT2(ce),t[29]=new u.POINT2(J),t[29].style=5,T.lineutility.GetArrowHead4Double(j,J,15,15,le,0),K=0;K<3;K++)t[30+K]=new u.POINT2(le[K]);for(K=0;K<3;K++)t[30+K].style=5;ce=T.lineutility.MidPointDouble(J,j,0),Y=T.lineutility.CalcDistanceDouble(j,ue),t[33]=q,$=T.lineutility.PointRelativeToLine(J,j,J,q),Y=T.lineutility.CalcDistanceDouble($,q),ee=T.lineutility.ExtendAlongLineDouble(J,j,Y),Y=T.lineutility.CalcDistanceDouble(q,ee),t[34]=T.lineutility.ExtendLineDouble(q,ee,Y),he=35;break;case d.TacticalLines.FOLLA:for(T.lineutility.ReversePointsDouble2(t,S),Z/10>I.maxLength*pe&&(Z=10*I.maxLength*pe),Z/10<I.minLength*pe&&(Z=10*I.minLength*pe),Z>150*pe&&(Z=150*pe),t[0]=T.lineutility.ExtendLineDouble(t[1],t[0],-2*Z/10),K=0;K<i-14;K++)t[K].style=18;for(t[i-15].style=5,J=T.lineutility.ExtendLineDouble(t[1],t[0],5*Z/10),T.lineutility.GetArrowHead4Double(J,t[0],Math.trunc(Z/10),Math.trunc(Z/10),le,0),K=0;K<3;K++)t[i-14+K]=new u.POINT2(le[K]);for($=T.lineutility.ExtendLineDouble(t[1],t[0],Z/10),T.lineutility.GetArrowHead4Double(J,$,Math.trunc(Z/10),Math.trunc(Z/10),le,0),t[i-12].style=0,t[i-11]=new u.POINT2(le[2]),t[i-11].style=0,t[i-10]=new u.POINT2(le[0]),t[i-10].style=0,t[i-9]=new u.POINT2(t[i-14]),t[i-9].style=5,T.lineutility.GetArrowHead4Double(t[i-16],t[i-15],Math.trunc(Z/10),Math.trunc(Z/10),le,0),K=0;K<3;K++)t[i-8+K]=new u.POINT2(le[K]);for(t[i-6].style=0,$=T.lineutility.ExtendLineDouble(t[i-16],t[i-15],-.75*Z/10),t[1]=$,t[1].style=5,T.lineutility.GetArrowHead4Double(t[i-16],$,Math.trunc(Z/10),Math.trunc(Z/10),le,0),K=0;K<3;K++)t[i-5+K]=new u.POINT2(le[2-K]);t[i-5].style=0,t[i-2]=new u.POINT2(t[i-8]),t[i-2].style=5,t[i-1]=new u.POINT2(t[i-7]),he=16;break;case d.TacticalLines.FOLSP:for(T.lineutility.ReversePointsDouble2(t,S),Z/15>I.maxLength*pe&&(Z=15*I.maxLength*pe),Z/15<I.minLength*pe&&(Z=15*I.minLength*pe),Z<100*pe&&(Z=100*pe),Z>500*pe&&(Z=500*pe),t[0]=T.lineutility.ExtendLineDouble(t[1],t[0],-Z/8.75),t[i-15].style=5,J=T.lineutility.ExtendLineDouble(t[1],t[0],Z/4),T.lineutility.GetArrowHead4Double(J,t[0],Math.trunc(Z/20),Math.trunc(Z/20),le,0),K=0;K<3;K++)t[i-14+K]=new u.POINT2(le[K]);for(t[i-12].style=0,$=T.lineutility.ExtendLineDouble(t[1],t[0],Z/15),T.lineutility.GetArrowHead4Double(J,$,Math.trunc(Z/20),Math.trunc(Z/20),le,0),K=0;K<3;K++)t[i-11+K]=new u.POINT2(le[2-K]),t[i-11+K].style=0;for(t[i-8]=new u.POINT2(t[i-14]),t[i-8].style=5,T.lineutility.GetArrowHead4Double(t[i-16],t[i-15],Math.trunc(Z/20),Math.trunc(Z/20),le,9),K=0;K<3;K++)t[i-7+K]=new u.POINT2(le[K]);for(K=4;K>0;K--)t[i-K].style=5;he=12;break;case d.TacticalLines.FERRY:for(m=9,Z/10>I.maxLength*pe&&(Z=10*I.maxLength*pe),Z/10<I.minLength*pe&&(Z=10*I.minLength*pe),Z>250*pe&&(Z=250*pe),T.lineutility.GetArrowHead4Double(t[i-8],t[i-7],Math.trunc(Z/10),Math.trunc(Z/10),le,m),K=0;K<3;K++)t[i-6+K]=new u.POINT2(le[K]);for(T.lineutility.GetArrowHead4Double(t[1],t[0],Math.trunc(Z/10),Math.trunc(Z/10),le,m),K=0;K<3;K++)t[i-3+K]=new u.POINT2(le[K]);he=8;break;case d.TacticalLines.NAVIGATION:{let i=I.getScaledSize(10,e.get_LineThickness());$=T.lineutility.ExtendLine2Double(j,J,-i,0),ee=T.lineutility.ExtendLine2Double(J,j,-i,0),te=T.lineutility.ExtendTrueLinePerpDouble(J,j,$,i,0),ie=T.lineutility.ExtendTrueLinePerpDouble(J,j,$,-i,0),ae=T.lineutility.ExtendTrueLinePerpDouble(J,j,ee,i,0),ne=T.lineutility.ExtendTrueLinePerpDouble(J,j,ee,-i,0),te.y<ie.y?t[0]=new u.POINT2(te):t[0]=new u.POINT2(ie),ae.y>ne.y?t[3]=new u.POINT2(ae):t[3]=new u.POINT2(ne),t[1]=new u.POINT2(J),t[2]=new u.POINT2(j),he=4;break}case d.TacticalLines.FORTL:he=I.GetFORTLPointsDouble(e,t,S);break;case d.TacticalLines.CANALIZE:he=o.DISMSupport.GetDISMCanalizeDouble(t,h);break;case d.TacticalLines.BREACH:he=o.DISMSupport.GetDISMBreachDouble(t,h);break;case d.TacticalLines.SCREEN:case d.TacticalLines.GUARD:case d.TacticalLines.COVER:he=4===S?o.DISMSupport.GetDISMCoverDoubleRevC(t,h,S):o.DISMSupport.GetDISMCoverDouble(t,h);break;case d.TacticalLines.SARA:{he=o.DISMSupport.GetDISMCoverDouble(t,h);let e=new Array(16);for(z=0;z<4;z++)e[z]=t[z];for(z=4;z<8;z++)e[z]=t[z+4];for(z=8;z<12;z++)e[z]=t[z-4];for(z=12;z<16;z++)e[z]=t[z];t=e;break}case d.TacticalLines.DISRUPT:he=o.DISMSupport.GetDISMDisruptDouble(t,h);break;case d.TacticalLines.CONTAIN:he=o.DISMSupport.GetDISMContainDouble(t,h);break;case d.TacticalLines.PENETRATE:o.DISMSupport.GetDISMPenetrateDouble(t,h),he=7;break;case d.TacticalLines.MNFLDBLK:case d.TacticalLines.BLOCK:o.DISMSupport.GetDISMBlockDouble2(t,h),he=4;break;case d.TacticalLines.LINTGT:case d.TacticalLines.LINTGTS:case d.TacticalLines.FPF:he=o.DISMSupport.GetDISMLinearTargetDouble(t,h,i);break;case d.TacticalLines.GAP:case d.TacticalLines.ASLTXING:o.DISMSupport.GetDISMGapDouble(t,h),he=12;break;case d.TacticalLines.MNFLDDIS:he=o.DISMSupport.GetDISMMinefieldDisruptDouble(t,h);break;case d.TacticalLines.SPTBYFIRE:he=o.DISMSupport.GetDISMSupportByFireDouble(t,h);break;case d.TacticalLines.ATKBYFIRE:he=o.DISMSupport.GetDISMATKBYFIREDouble(t,h);break;case d.TacticalLines.BYIMP:he=o.DISMSupport.GetDISMByImpDouble(t,h);break;case d.TacticalLines.CLEAR:he=o.DISMSupport.GetDISMClearDouble(t,h);break;case d.TacticalLines.BYDIF:he=o.DISMSupport.GetDISMByDifDouble(t,h,f);break;case d.TacticalLines.SEIZE:{let e=0;4===S&&(e=T.lineutility.CalcDistanceDouble(t[0],t[1]),t[1]=new u.POINT2(t[3]),t[2]=new u.POINT2(t[2])),he=o.DISMSupport.GetDISMSeizeDouble(t,h,e);break}case d.TacticalLines.FIX:case d.TacticalLines.MNFLDFIX:he=o.DISMSupport.GetDISMFixDouble(t,h,f);break;case d.TacticalLines.RIP:he=o.DISMSupport.GetDISMRIPDouble(t,h);break;case d.TacticalLines.DELAY:case d.TacticalLines.WITHDRAW:case d.TacticalLines.WDRAWUP:case d.TacticalLines.RETIRE:case d.TacticalLines.FPOL:case d.TacticalLines.RPOL:he=o.DISMSupport.GetDelayGraphicEtcDouble(t);break;case d.TacticalLines.EASY:he=o.DISMSupport.GetDISMEasyDouble(t,h);break;case d.TacticalLines.BYPASS:he=o.DISMSupport.GetDISMBypassDouble(t,h);break;case d.TacticalLines.AMBUSH:he=o.DISMSupport.AmbushPointsDouble(t);break;case d.TacticalLines.FLOT:he=c.flot.GetFlotDouble(t,I.getScaledSize(20,e.get_LineThickness()),S);break;default:he=S}switch(h){case d.TacticalLines.BOUNDARY:return I.FillPoints(t,he,M),M;case d.TacticalLines.CONTAIN:case d.TacticalLines.BLOCK:case d.TacticalLines.COVER:case d.TacticalLines.SCREEN:case d.TacticalLines.GUARD:case d.TacticalLines.PAA_RECTANGULAR:case d.TacticalLines.RECTANGULAR_TARGET:case d.TacticalLines.FOLSP:case d.TacticalLines.FOLLA:case d.TacticalLines.BREACH:case d.TacticalLines.BYPASS:case d.TacticalLines.CANALIZE:case d.TacticalLines.CLEAR:case d.TacticalLines.DISRUPT:case d.TacticalLines.FIX:case d.TacticalLines.ISOLATE:case d.TacticalLines.OCCUPY:case d.TacticalLines.PENETRATE:case d.TacticalLines.RETAIN:case d.TacticalLines.SECURE:case d.TacticalLines.SEIZE:case d.TacticalLines.AIRFIELD:case d.TacticalLines.CORDONKNOCK:case d.TacticalLines.CORDONSEARCH:case d.TacticalLines.MSDZ:case d.TacticalLines.CONVOY:case d.TacticalLines.HCONVOY:case d.TacticalLines.MFLANE:case d.TacticalLines.DIRATKAIR:case d.TacticalLines.ABATIS:I.FillPoints(t,he,M);break;default:if(null==y)return I.FillPoints(t,he,M),M}if(null==y)return M;let xe,be,we=!0;switch(h){case d.TacticalLines.PDF:for(I.addPolyline(t,3,y),Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Ie.moveTo(t[3]),K=4;K<8;K++)Ie.lineTo(t[K]);y.push(Ie),be=new Array(6);for(let e=0;e<6;e++)be[e]=t[e+8];I.addPolyline(be,6,y);break;case d.TacticalLines.DIRATKGND:for(Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Ie.moveTo(t[0]),z=0;z<he-10;z++)Ie.lineTo(t[z]);for(y.push(Ie),Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Ie.moveTo(t[he-10]),z=9;z>0;z--)5===t[he-z-1].style?Ie.moveTo(t[he-z]):Ie.lineTo(t[he-z]);y.push(Ie);break;case d.TacticalLines.DEPTH_AREA:{De=new L.Shape2(L.Shape2.SHAPE_TYPE_FILL),De.setFillColor(_.Color.WHITE);let i=new s.BasicStroke(I.getScaledSize(28,e.get_LineThickness()));for(ye=new L.Shape2(L.Shape2.SHAPE_TYPE_FILL),ye.setFillColor(new _.Color(30,144,255)),Re=new s.BasicStroke(i.getLineWidth()/2),fe=new L.Shape2(L.Shape2.SHAPE_TYPE_FILL),fe.setFillColor(new _.Color(153,204,255)),xe=new a.Polygon,K=0;K<S;K++)xe.addPoint(t[K].x,t[K].y),0===K?De.moveTo(t[K]):De.lineTo(t[K]);Ne=new n.Area(xe),ye.setShape(Ne),Oe=new n.Area(i.createStrokedShape(xe)),De.setShape(T.lineutility.createStrokedShape(Oe)),Ce=new n.Area(Re.createStrokedShape(xe)),fe.setShape(T.lineutility.createStrokedShape(Ce)),y.push(ye),y.push(fe),y.push(De);break}case d.TacticalLines.TRAINING_AREA:for(Se=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Se.set_Style(1),ye=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),ye.set_Style(0),Se.moveTo(t[0]),K=1;K<S;K++)Se.lineTo(t[K]);for(we=!0,K=S;K<he;K++)0===t[K].style&&(we?(ye.moveTo(t[K]),we=!1):ye.lineTo(t[K])),5===t[K].style&&(ye.lineTo(t[K]),we=!0);y.push(Se),y.push(ye);break;case d.TacticalLines.ITD:for(Se=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Se.setLineColor(_.Color.RED),ye=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),ye.setLineColor(_.Color.GREEN),K=0;K<he-1;K++)19===t[K].style&&5===t[K+1].style?(Se.moveTo(t[K]),Se.lineTo(t[K+1])):25===t[K].style&&5===t[K+1].style&&(ye.moveTo(t[K]),ye.lineTo(t[K+1]));y.push(Se),y.push(ye),e.set_lineCap(s.BasicStroke.CAP_BUTT);break;case d.TacticalLines.SFY:for(Se=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Se.setLineColor(_.Color.RED),ye=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),ye.setLineColor(_.Color.BLUE),K=0;K<he-1;K++){if(23===t[K].style){Me=new L.Shape2(L.Shape2.SHAPE_TYPE_FILL),Me.setFillColor(_.Color.RED),Me.moveTo(t[K-9]);for(let e=K-8;e<=K;e++)Me.lineTo(t[e]);y.push(Me)}24===t[K].style&&(Pe=new L.Shape2(L.Shape2.SHAPE_TYPE_FILL),Pe.setFillColor(_.Color.BLUE),Pe.moveTo(t[K-2]),Pe.lineTo(t[K-1]),Pe.lineTo(t[K]),y.push(Pe))}for(K=0;K<S;K++)0===K?(Y=I.getScaledSize(50,e.get_LineThickness()),Se.moveTo(R[0]),k=T.lineutility.CalcDistanceDouble(R[0],R[1]),k<Y&&(Y=k),J=T.lineutility.ExtendAlongLineDouble(R[0],R[1],Y),Se.lineTo(J)):K>0&&K<S-1?(Y=I.getScaledSize(50,e.get_LineThickness()),k=T.lineutility.CalcDistanceDouble(R[K],R[K-1]),k<Y&&(Y=k),J=T.lineutility.ExtendAlongLineDouble(R[K],R[K-1],Y),j=R[K],Y=I.getScaledSize(50,e.get_LineThickness()),k=T.lineutility.CalcDistanceDouble(R[K],R[K+1]),k<Y&&(Y=k),q=T.lineutility.ExtendAlongLineDouble(R[K],R[K+1],Y),Se.moveTo(J),Se.lineTo(j),Se.lineTo(q)):(Y=I.getScaledSize(50,e.get_LineThickness()),k=T.lineutility.CalcDistanceDouble(R[S-1],R[S-2]),k<Y&&(Y=k),Se.moveTo(R[S-1]),J=T.lineutility.ExtendAlongLineDouble(R[S-1],R[S-2],Y),Se.lineTo(J));for(K=0;K<i-1;K++)19===t[K].style&&5===t[K+1].style?(Se.moveTo(t[K]),Se.lineTo(t[K+1])):25===t[K].style&&5===t[K+1].style&&(ye.moveTo(t[K]),ye.lineTo(t[K+1]));y.push(Se),y.push(ye);break;case d.TacticalLines.SFG:for(Se=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Se.setLineColor(_.Color.RED),ye=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),ye.setLineColor(_.Color.BLUE),K=0;K<he-1;K++){if(23===t[K].style){Me=new L.Shape2(L.Shape2.SHAPE_TYPE_FILL),Me.setFillColor(_.Color.RED),Me.moveTo(t[K-9]);for(let e=K-8;e<=K;e++)Me.lineTo(t[e]);y.push(Me)}24===t[K].style&&(Pe=new L.Shape2(L.Shape2.SHAPE_TYPE_FILL),Pe.setFillColor(_.Color.BLUE),Pe.moveTo(t[K-2]),Pe.lineTo(t[K-1]),Pe.lineTo(t[K]),y.push(Pe))}for(K=0;K<S;K++)0===K?(Y=I.getScaledSize(50,e.get_LineThickness()),Se.moveTo(R[0]),k=T.lineutility.CalcDistanceDouble(R[0],R[1]),k<Y&&(Y=k),J=T.lineutility.ExtendAlongLineDouble(R[0],R[1],Y),Se.lineTo(J)):K>0&&K<S-1?(Y=I.getScaledSize(50,e.get_LineThickness()),k=T.lineutility.CalcDistanceDouble(R[K],R[K-1]),k<Y&&(Y=k),J=T.lineutility.ExtendAlongLineDouble(R[K],R[K-1],Y),j=R[K],Y=I.getScaledSize(50,e.get_LineThickness()),k=T.lineutility.CalcDistanceDouble(R[K],R[K+1]),k<Y&&(Y=k),q=T.lineutility.ExtendAlongLineDouble(R[K],R[K+1],Y),Se.moveTo(J),Se.lineTo(j),Se.lineTo(q)):(Y=I.getScaledSize(50,e.get_LineThickness()),k=T.lineutility.CalcDistanceDouble(R[S-1],R[S-2]),k<Y&&(Y=k),Se.moveTo(R[S-1]),J=T.lineutility.ExtendAlongLineDouble(R[S-1],R[S-2],Y),Se.lineTo(J));for(y.push(Se),K=0;K<he;K++){if(22===t[K].style){let i=new Array(8);Se=T.lineutility.CalcCircleShape(t[K],I.getScaledSize(3,e.get_LineThickness()),8,i,9),Se.setFillColor(_.Color.RED),null!=Se&&null!=Se.getShape()&&y.push(Se)}if(20===t[K].style){let i=new Array(8);ye=T.lineutility.CalcCircleShape(t[K],I.getScaledSize(3,e.get_LineThickness()),8,i,9),ye.setFillColor(_.Color.BLUE),null!=ye&&null!=ye.getShape()&&y.push(ye)}}break;case d.TacticalLines.USF:for(Se=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Se.setLineColor(_.Color.RED),ye=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),ye.setLineColor(_.Color.BLUE),we=!0,K=0;K<he-1;K++)19===t[K].style&&5===t[K+1].style&&(Se.moveTo(t[K]),Se.lineTo(t[K+1])),19===t[K].style&&19===t[K+1].style&&(Se.moveTo(t[K]),Se.lineTo(t[K+1])),25===t[K].style&&5===t[K+1].style&&(ye.moveTo(t[K]),ye.lineTo(t[K+1])),25===t[K].style&&25===t[K+1].style&&(ye.moveTo(t[K]),ye.lineTo(t[K+1])),0===t[K].style&&5===t[K+1].style&&(Se.moveTo(t[K]),Se.lineTo(t[K+1]));y.push(Se),y.push(ye);break;case d.TacticalLines.SF:for(Se=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Se.setLineColor(_.Color.RED),ye=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),ye.setLineColor(_.Color.BLUE),Me=new L.Shape2(L.Shape2.SHAPE_TYPE_FILL),Me.setLineColor(_.Color.RED),Me.setFillColor(_.Color.RED),Pe=new L.Shape2(L.Shape2.SHAPE_TYPE_FILL),Pe.setLineColor(_.Color.BLUE),Pe.setFillColor(_.Color.BLUE),K=0;K<he-1;K++){if(19===t[K].style&&5===t[K+1].style&&(Se.moveTo(t[K]),Se.lineTo(t[K+1])),19===t[K].style&&19===t[K+1].style){if(0===Me.getPoints().length){Me.moveTo(t[K+9]);for(let e=K+9;e>=K;e--)Me.lineTo(t[e])}else{Me.moveTo(t[K]);for(let e=K;e<K+10;e++)Me.lineTo(t[e])}K+=9,y.push(Me),Me=new L.Shape2(L.Shape2.SHAPE_TYPE_FILL),Me.setLineColor(_.Color.RED),Me.setFillColor(_.Color.RED)}25===t[K].style&&5===t[K+1].style&&(ye.moveTo(t[K]),ye.lineTo(t[K+1])),25===t[K].style&&25===t[K+1].style&&(0===Pe.getPoints().length?(Pe.moveTo(t[K+2]),Pe.lineTo(t[K+1]),Pe.lineTo(t[K])):(Pe.moveTo(t[K]),Pe.lineTo(t[K+1]),Pe.lineTo(t[K+2])),y.push(Pe),Pe=new L.Shape2(L.Shape2.SHAPE_TYPE_FILL),Pe.setLineColor(_.Color.BLUE),Pe.setFillColor(_.Color.BLUE)),0===t[K].style&&5===t[K+1].style&&(Se.moveTo(t[K]),Se.lineTo(t[K+1]))}y.push(Se),y.push(ye);break;case d.TacticalLines.WFG:for(Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),K=0;K<he-1;K++)0===t[K].style&&5===t[K+1].style&&(Ie.moveTo(t[K]),Ie.lineTo(t[K+1]));for(y.push(Ie),K=0;K<he;K++)if(20===t[K].style){let i=new Array(8);Ie=T.lineutility.CalcCircleShape(t[K],I.getScaledSize(3,e.get_LineThickness()),8,i,9),null!=Ie&&null!=Ie.getShape()&&y.push(Ie)}break;case d.TacticalLines.FOLLA:for(Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Ie.set_Style(1),Ie.moveTo(t[0]),Ie.lineTo(t[1]),y.push(Ie),Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Ie.set_Style(0),z=2;z<i;z++)5!==t[z-1].style?Ie.lineTo(t[z]):Ie.moveTo(t[z]);y.push(Ie);break;case d.TacticalLines.CFG:for(K=0;K<he;K++)if(20!==t[K].style);else{let i=new Array(8);Ie=T.lineutility.CalcCircleShape(t[K],I.getScaledSize(3,e.get_LineThickness()),8,i,9),null!=Ie&&null!=Ie.getShape()&&y.push(Ie)}for(Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),K=0;K<he-1;K++)0===t[K].style&&0===t[K+1].style&&(Ie.moveTo(t[K]),Ie.lineTo(t[K+1])),0===t[K].style&&9===t[K+1].style&&(Ie.moveTo(t[K]),Ie.lineTo(t[K+1])),0===t[K].style&&5===t[K+1].style&&(Y=T.lineutility.CalcDistanceDouble(t[K],t[K+1]),J=T.lineutility.ExtendAlongLineDouble(t[K],t[K+1],Y-I.getScaledSize(5,e.get_LineThickness())),Ie.moveTo(t[K]),Ie.lineTo(J)),0===t[K].style&&K===he-2&&(Ie.moveTo(t[K]),Ie.lineTo(t[K+1]));y.push(Ie);break;case d.TacticalLines.PIPE:for(K=0;K<he;K++)if(20===t[K].style){let i=new Array(8);Ie=T.lineutility.CalcCircleShape(t[K],I.getScaledSize(5,e.get_LineThickness()),8,i,9),null!=Ie&&null!=Ie.getShape()&&y.push(Ie)}for(Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),K=0;K<he-1;K++)0===t[K].style&&5===t[K+1].style&&(Ie.moveTo(t[K]),Ie.lineTo(t[K+1]));y.push(Ie);break;case d.TacticalLines.ATDITCHM:for(K=0;K<he;K++)if(20!==t[K].style)K<he-2&&(0!==t[K].style&&0===t[K+1].style?(Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Ie.set_Style(t[K].style),Ie.moveTo(t[K]),Ie.lineTo(t[K])):0===t[K].style&&0===t[K+1].style?(Ie.moveTo(t[K]),Ie.lineTo(t[K+1])):0===t[K].style&&10===t[K+1].style&&(Ie.moveTo(t[K]),Ie.lineTo(t[K+1]),y.push(Ie))),K<he-2&&(5===t[K].style&&0===t[K+1].style?(Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Ie.set_Style(t[K].style),Ie.moveTo(t[K])):0===t[K].style&&0===t[K+1].style?Ie.lineTo(t[K+1]):0===t[K].style&&5===t[K+1].style&&(Ie.lineTo(t[K+1]),y.push(Ie)));else{let i=new Array(8);Ie=T.lineutility.CalcCircleShape(t[K],I.getScaledSize(4,e.get_LineThickness()),8,i,9),null!=Ie&&null!=Ie.getShape()&&y.push(Ie)}break;case d.TacticalLines.ESR1:Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Ie.set_Style(t[0].style),Ie.moveTo(t[0]),Ie.lineTo(t[1]),y.push(Ie),Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Ie.set_Style(t[2].style),Ie.moveTo(t[2]),Ie.lineTo(t[3]),y.push(Ie);break;case d.TacticalLines.FORDIF:for(Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Ie.set_Style(t[0].style),Ie.moveTo(t[0]),Ie.lineTo(t[1]),Ie.moveTo(t[2]),Ie.lineTo(t[3]),y.push(Ie),Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Ie.set_Style(t[4].style),Ie.moveTo(t[4]),K=5;K<he;K++)5!==t[K-1].style&&Ie.lineTo(t[K]);null!=Ie&&null!=Ie.getShape()&&y.push(Ie);break;case d.TacticalLines.FENCED:for(Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Ie.set_Style(M[0].style),Ie.moveTo(M[0]),K=1;K<i;K++)Ie.lineTo(M[K]);for(null!=Ie&&null!=Ie.getShape()&&y.push(Ie),Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),we=!0,K=i;K<M.length;K++)we?(0===K&&Ie.set_Style(M[K].style),K>0&&5===M[K].style&&5===M[K-1].style&&Ie.lineTo(M[K]),Ie.moveTo(M[K]),we=!1):(Ie.lineTo(M[K]),5!==M[K].style&&10!==M[K].style||(we=!0)),K===M.length-1&&null!=Ie&&null!=Ie.getShape()&&y.push(Ie);break;case d.TacticalLines.AIRFIELD:for(Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Ie.moveTo(t[0]),K=1;K<he-5;K++)Ie.lineTo(t[K]);y.push(Ie),Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Ie.moveTo(t[he-4]),Ie.lineTo(t[he-3]),Ie.moveTo(t[he-2]),Ie.lineTo(t[he-1]),y.push(Ie);break;case d.TacticalLines.STRIKWARN:{let e=Math.trunc(he/2);I.addPolyline(t,e,y),be=new Array(e);for(let i=0;i<e;i++)be[i]=t[i+e];I.addPolyline(be,e,y);break}case d.TacticalLines.DIRATKAIR:be=new Array(9);for(let e=0;e<4;e++)be[e]=t[t.length-4+e];I.addPolyline(be,4,y),I.addPolyline(t,he-13,y);for(let e=0;e<9;e++)be[e]=t[t.length-13+e];I.addPolyline(be,9,y);break;case d.TacticalLines.DIRATKSPT:I.addPolyline(t,he-3,y),be=new Array(3);for(let e=0;e<3;e++)be[e]=t[t.length-3+e];I.addPolyline(be,3,y);break;default:I.addPolyline(t,he,y)}switch(h){case d.TacticalLines.AC:case d.TacticalLines.SAAFR:case d.TacticalLines.MRR:case d.TacticalLines.SL:case d.TacticalLines.TC:case d.TacticalLines.SC:case d.TacticalLines.LLTR:for(z=0;z<S-1;z++)Z=R[z].style,Ee[0]=new u.POINT2(R[z]),Ee[1]=new u.POINT2(R[z+1]),T.lineutility.GetSAAFRFillSegment(Ee,Z),Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_FILL),Ie.moveTo(Ee[0]),Ie.lineTo(Ee[1]),Ie.lineTo(Ee[2]),Ie.lineTo(Ee[3]),y.splice(0,0,Ie);break;case d.TacticalLines.DIRATKAIR:{let e=0,i=new Array(4);for(K=0;K<he;K++)10===t[K].style&&(Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE),Ie.moveTo(t[K-2]),Ie.lineTo(t[K]),null!=Ie&&null!=Ie.getShape()&&y.push(Ie),i[e++]=t[K-2],i[e++]=t[K]);break}case d.TacticalLines.OFY:case d.TacticalLines.OCCLUDED:case d.TacticalLines.WF:case d.TacticalLines.WFG:case d.TacticalLines.WFY:case d.TacticalLines.CF:case d.TacticalLines.CFY:case d.TacticalLines.CFG:case d.TacticalLines.SARA:case d.TacticalLines.FERRY:case d.TacticalLines.EASY:case d.TacticalLines.BYDIF:case d.TacticalLines.BYIMP:case d.TacticalLines.FOLSP:case d.TacticalLines.ATDITCHC:case d.TacticalLines.ATDITCHM:case d.TacticalLines.MNFLDFIX:case d.TacticalLines.TURN:case d.TacticalLines.MNFLDDIS:for(K=0;K<he;K++)0===K?9===t[K].style&&(Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_FILL),Ie.set_Style(t[K].style),Ie.moveTo(t[K])):(9===t[K].style&&9!==t[K-1].style&&(Ie=new L.Shape2(L.Shape2.SHAPE_TYPE_FILL),Ie.set_Style(t[K].style),Ie.moveTo(t[K])),9===t[K].style&&9===t[K-1].style&&Ie.lineTo(t[K])),10===t[K].style&&(Ie.lineTo(t[K]),null!=Ie&&null!=Ie.getShape()&&y.splice(0,0,Ie))}}catch(t){if(!(t instanceof Error))throw t;h.ErrorLogger.LogException(I._className,"GetLineArray2Double",new E.RendererException("GetLineArray2Dboule "+e.get_LineType().toString(),t))}return M}static addPolyline(e,t,i){let a=null,n=!0;for(let s=0;s<t;s++){if(null==a&&(a=new L.Shape2(L.Shape2.SHAPE_TYPE_POLYLINE)),n){if(0===s&&a.set_Style(e[s].style),s>0){if(5===e[s].style&&5===e[s-1].style&&s<t-1)continue;if(5===e[s].style&&10===e[s-1].style)continue}if(0===s&&e.length>1&&5===e[s].style&&5===e[s+1].style)continue;a.moveTo(e[s]),n=!1}else a.lineTo(e[s]),5!==e[s].style&&10!==e[s].style||(n=!0);s===t-1&&null!=a&&null!=a.getShape()&&i.push(a)}}static SupplyRouteArrowSide(e,t){let i=new g.ref,a=T.lineutility.CalcTrueSlopeDouble(e,t,i);if(e.x<t.x){if(i.value[0]<1)return 2;if(i.value[0]>=1)return 1}else if(e.x>t.x){if(i.value[0]<1)return 3;if(i.value[0]>=1)return 0}else if(0===a)return e.y>t.y?0:1;return 0}static getScaledSize(e,t){return t<=3?e:(t>100&&(t=100),e*(1+(t-3)/2))}}t.arraysupport=I},4352:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RoundedRectangle=void 0;const a=i(6001);t.RoundedRectangle=class{radius;rectangle;constructor(e,t,i,n,s){this.radius=s,this.rectangle=new a.Rectangle(e,t,i,n)}getShapeType(){return"ROUNDED_RECTANGLE"}getBounds(){return new a.Rectangle(this.rectangle.getX()-1,this.rectangle.getY()-1,this.rectangle.getWidth()+2,this.rectangle.getHeight()+2)}shift(e,t){this.rectangle.shift(e,t)}setPath(e){var t=this.rectangle.getX(),i=this.rectangle.getY(),a=this.rectangle.getWidth(),n=this.rectangle.getHeight();a<2*this.radius&&(this.radius=a/2),n<2*this.radius&&(this.radius=n/2);var s=this.radius;e.moveTo(t+s,i),e.lineTo(t+a-s,i),e.arcTo(t+a,i,t+a,i+s,s),e.lineTo(t+a,i+n-s),e.arcTo(t+a,i+n,t+a-s,i+n,s),e.lineTo(t+s,i+n),e.arcTo(t,i+n,t,i+n-s,s),e.lineTo(t,i+s),e.arcTo(t,i,t+s,i,s)}stroke(e){e.beginPath(),this.setPath(e),e.stroke()}fill(e){e.beginPath(),this.setPath(e),e.fill()}toSVGElement(e,t,i){var a='<rect x="'+this.rectangle.getX()+'" y="'+this.rectangle.getY();return a+='" rx="'+this.radius+'" ry="'+this.radius,a+='" width="'+this.rectangle.getWidth()+'" height="'+this.rectangle.getHeight()+'"',t?a+=' stroke-width="'+t+'"':e&&(a+=' stroke-width="2"'),e&&(a+=' stroke="'+e+'"'),(a+=i?' fill="'+i+'"':' fill="none"')+"/>"}}},4513:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DistanceUnit=void 0;class i{static FEET_PER_METER=3.28084;static FLIGHT_LEVEL_PER_METER=.0328084;conversionFactor=0;label;constructor(e,t){this.conversionFactor=e,this.label=t}static parse(e){if(null==e)return null;let t=e.split(",");if(2!==t.length)return null;let a=parseFloat(t[0].trim()),n=t[1].trim();return new i(a,n)}toAttribute(){return this.conversionFactor+","+this.label}static METERS=new i(1,"M");static FEET=new i(i.FEET_PER_METER,"FT");static FLIGHT_LEVEL=new i(i.FLIGHT_LEVEL_PER_METER,"FL")}t.DistanceUnit=i},4546:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clsClipPolygon2=void 0;const a=i(9485),n=i(9441),s=i(3170),l=i(5772),r=i(8101),o=i(8678),c=i(3515),T=i(106),u=i(7300),g=i(1024);class L{static _className="clsClipPolygon2";static intersectPoint(e,t,i){let a;try{let s=i.getP1(),l=i.getP2(),r=0,o=0,c=0,T=0,u=0;Math.abs(s.getX()-l.getX())<Math.abs(s.getY()-l.getY())?(a=new n.Point2D,r=s.getX(),Math.abs(t.getX()-e.getX())<1&&t.setLocation(t.getX()+1,t.getY()),c=(t.getY()-e.getY())/(t.getX()-e.getX()),T=r-e.getX(),a.setLocation(r,e.getY()+c*T)):(a=new n.Point2D,o=s.getY(),Math.abs(t.getX()-e.getX())<1&&t.setLocation(t.getX()+1,t.getY()),c=(t.getY()-e.getY())/(t.getX()-e.getX()),u=o-e.getY(),a.setLocation(e.getX()+u/c,o))}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(L._className,"intersectPoint",new T.RendererException("Failed inside intersectPoint",e))}return a}static clipTop(e,t,i){let s=new Array;try{let l=0,r=0,o=0;l=i.getMinX(),r=i.getMinY();let c,T,u,g,d=new n.Point2D(l,r),_=new n.Point2D(o,r),h=0,E=t.length;for(h=0;h<E;h++)c=t[h],T=0===h?t[t.length-1]:t[h-1],T.getY()>=d.getY()&&c.getY()>=d.getY()&&s.push(c),T.getY()>=d.getY()&&c.getY()<d.getY()&&(g=new a.Line2D(d,_),u=L.intersectPoint(T,c,g),null!=u&&s.push(u),e.set_WasClipped(!0)),T.getY()<d.getY()&&c.getY()<d.getY()||T.getY()<d.getY()&&c.getY()>=d.getY()&&(g=new a.Line2D(d,_),u=L.intersectPoint(T,c,g),null!=u&&s.push(u),s.push(c),e.set_WasClipped(!0))}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(L._className,"clipTop",new T.RendererException("Failed inside clipTop",e))}return s}static clipBottom(e,t,i){let s=new Array;try{let l=0,r=0,o=0;l=i.getMinX(),r=i.getMaxX(),o=i.getMaxY();let c,T,u,g,d=new n.Point2D(l,o),_=new n.Point2D(r,o),h=0,E=t.length;for(h=0;h<E;h++)c=t[h],T=0===h?t[t.length-1]:t[h-1],T.getY()<=_.getY()&&c.getY()<=_.getY()&&s.push(c),T.getY()<=_.getY()&&c.getY()>_.getY()&&(g=new a.Line2D(d,_),u=L.intersectPoint(T,c,g),null!=u&&s.push(u),e.set_WasClipped(!0)),T.getY()>_.getY()&&c.getY()>_.getY()||T.getY()>_.getY()&&c.getY()<=_.getY()&&(g=new a.Line2D(d,_),u=L.intersectPoint(T,c,g),null!=u&&s.push(u),s.push(c),e.set_WasClipped(!0))}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(L._className,"clipBottom",new T.RendererException("Failed inside clipBottom",e))}return s}static clipRight(e,t,i){let s=new Array;try{let l=0,r=0,o=0;l=i.getMinY(),r=i.getMaxX(),o=i.getMaxY();let c,T,u,g,d=new n.Point2D(r,l),_=new n.Point2D(r,o),h=0,E=t.length;for(h=0;h<E;h++)c=t[h],T=0===h?t[t.length-1]:t[h-1],T.getX()<=_.getX()&&c.getX()<=_.getX()&&s.push(c),T.getX()<=_.getX()&&c.getX()>_.getX()&&(g=new a.Line2D(d,_),u=L.intersectPoint(T,c,g),null!=u&&s.push(u),e.set_WasClipped(!0)),T.getX()>_.getX()&&c.getX()>_.getX()||T.getX()>_.getX()&&c.getX()<=_.getX()&&(g=new a.Line2D(d,_),u=L.intersectPoint(T,c,g),null!=u&&s.push(u),s.push(c),e.set_WasClipped(!0))}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(L._className,"clipRight",new T.RendererException("Failed inside clipRight",e))}return s}static clipLeft(e,t,i){let s=new Array;try{let l=0,r=0,o=0;l=i.getMinX(),r=i.getMinY(),o=i.getMaxY();let c,T,u,g,d=new n.Point2D(l,r),_=new n.Point2D(l,o),h=0,E=t.length;for(h=0;h<E;h++)c=t[h],T=0===h?t[t.length-1]:t[h-1],T.getX()>=_.getX()&&c.getX()>=_.getX()&&s.push(c),T.getX()>=_.getX()&&c.getX()<_.getX()&&(g=new a.Line2D(d,_),u=L.intersectPoint(T,c,g),null!=u&&s.push(u),e.set_WasClipped(!0)),T.getX()<_.getX()&&c.getX()<_.getX()||T.getX()<_.getX()&&c.getX()>=_.getX()&&(g=new a.Line2D(d,_),u=L.intersectPoint(T,c,g),null!=u&&s.push(u),s.push(c),e.set_WasClipped(!0))}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(L._className,"clipLeft",new T.RendererException("Failed inside clipLeft",e))}return s}static AddBoundaryPointsForLines(e,t){let i=0;try{let a=0,s=0,l=0,r=0;a=t.getMinX(),s=t.getMinY(),l=t.getMaxX(),r=t.getMaxY();let o=new n.Point2D(a+10,s+10),c=(new n.Point2D(l-10,s+10),new n.Point2D(a+10,r-10),new n.Point2D(l-10,r-10)),T=e[0],u=e[e.length-1],g=!1,L=!1;T.getY()<s||T.getX()<a?(e.splice(0,0,o),g=!0):(T.getX()>l||T.getY()>r)&&(e.splice(0,0,c),g=!0),u.getY()<s||u.getX()<a?(e.push(o),L=!0):(u.getX()>l||u.getY()>r)&&(e.push(c),L=!0),!1===g&&!1===L&&(i=0),!0===g&&!1===L&&(i=1),!1===g&&!0===L&&(i=2),!0===g&&!0===L&&(i=3)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(L._className,"AddBoundaryPointsForLines",new T.RendererException("Failed inside AddBoundaryPointsForLines",e))}return i}static closeAreaTG(e){try{if(null==e.Pixels||0===e.Pixels.length)return;let t=e.Pixels[0],i=e.Pixels[e.Pixels.length-1];t.x===i.x&&t.y===i.y||e.Pixels.push(t)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(L._className,"closeAreaTG",new T.RendererException("Failed inside closeAreaTG",e))}}static fillDMA(e,t){let i=new Array;try{switch(e.get_LineType()){case r.TacticalLines.OBSFAREA:case r.TacticalLines.OBSAREA:case r.TacticalLines.STRONG:case r.TacticalLines.ZONE:case r.TacticalLines.FORT_REVD:case r.TacticalLines.FORT:case r.TacticalLines.ENCIRCLE:case r.TacticalLines.ATDITCHC:case r.TacticalLines.ATDITCHM:break;default:return i}let a,n=0,s=new c.TGLight;s.set_LineType(r.TacticalLines.GENERAL),s.Pixels=new Array;let o=e.Pixels.length;for(n=0;n<o;n++)s.Pixels.push(e.Pixels[n]);if(L.closeAreaTG(s),null!=t&&L.ClipPolygon(s,t),null==s.Pixels||0===s.Pixels.length)return i;for(a=new l.Shape2(l.Shape2.SHAPE_TYPE_FILL),a.setFillColor(e.get_FillColor()),a.moveTo(s.Pixels[0]),o=s.Pixels.length,n=1;n<o;n++)a.lineTo(s.Pixels[n]);i.push(a)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(L._className,"fillDMA",new T.RendererException("Failed inside fillDMA",e))}return i}static addAbatisFill(e,t){try{if(null==e.Pixels||e.Pixels.length<2||null==e.get_FillColor()||e.get_FillColor().getAlpha()<2||null==t)return;let i,a,n=0,s=e.Pixels.length;switch(e.get_LineType()){case r.TacticalLines.MSDZ:{let t=0,a=0,s=0;if(i=new l.Shape2(l.Shape2.SHAPE_TYPE_POLYLINE),i.setFillColor(e.get_FillColor()),null!=e.Pixels&&e.Pixels.length>=300){t=Math.abs(e.Pixels[0].x-e.Pixels[50].x),a=Math.abs(e.Pixels[100].x-e.Pixels[150].x),s=Math.abs(e.Pixels[200].x-e.Pixels[250].x);let l=-1,r=-1;for(t>=a&&t>=s?(l=0,r=99):a>=t&&a>=s?(l=100,r=199):(l=200,r=299),i.moveTo(e.Pixels[l]),n=l;n<=r;n++)i.lineTo(e.Pixels[n])}break}case r.TacticalLines.ABATIS:if(i=new l.Shape2(l.Shape2.SHAPE_TYPE_POLYLINE),i.setFillColor(e.get_FillColor()),a=new c.TGLight,a.set_LineType(r.TacticalLines.GENERAL),a.Pixels=new Array,null!=e.Pixels&&e.Pixels.length>2)for(a.Pixels.push(e.Pixels[s-3]),a.Pixels.push(e.Pixels[s-2]),a.Pixels.push(e.Pixels[s-1]),a.Pixels.push(e.Pixels[s-3]),i.moveTo(a.Pixels[0]),n=1;n<a.Pixels.length;n++)i.lineTo(a.Pixels[n]);break;default:return}null!=t&&t.splice(0,0,i)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(L._className,"addAbatisFill",new T.RendererException("Failed inside addAbatisFill",e))}}static LinesWithFill(e,t){let i=null;try{if(null==e.get_FillColor()||e.get_FillColor().getAlpha()<=1||null==e.Pixels||0===e.Pixels.length)return i;switch(e.get_LineType()){case r.TacticalLines.ABATIS:case r.TacticalLines.SPT:case r.TacticalLines.MAIN:case r.TacticalLines.AAAAA:case r.TacticalLines.AIRAOA:case r.TacticalLines.CATK:case r.TacticalLines.CATKBYFIRE:case r.TacticalLines.CORDONSEARCH:case r.TacticalLines.CORDONKNOCK:case r.TacticalLines.SECURE:case r.TacticalLines.OCCUPY:case r.TacticalLines.RETAIN:case r.TacticalLines.ISOLATE:case r.TacticalLines.CONVOY:case r.TacticalLines.HCONVOY:return i;case r.TacticalLines.PAA_RECTANGULAR:case r.TacticalLines.RECTANGULAR_TARGET:return null;case r.TacticalLines.OBSFAREA:case r.TacticalLines.OBSAREA:case r.TacticalLines.STRONG:case r.TacticalLines.ZONE:case r.TacticalLines.FORT_REVD:case r.TacticalLines.FORT:case r.TacticalLines.ENCIRCLE:case r.TacticalLines.ATDITCHC:case r.TacticalLines.ATDITCHM:return L.fillDMA(e,t)}if(!1===o.clsUtility.LinesWithFill(e.get_LineType()))return i;let a;i=new Array;let n=new c.TGLight;if(n.set_LineType(r.TacticalLines.GENERAL),n.Pixels=new Array,n.Pixels.push(...e.Pixels),L.closeAreaTG(n),null!=t&&L.ClipPolygon(n,t),null==n.Pixels||0===n.Pixels.length)return null;let s=0;for(a=new l.Shape2(l.Shape2.SHAPE_TYPE_FILL),a.setFillColor(e.get_FillColor()),a.moveTo(n.Pixels[0]),s=1;s<n.Pixels.length;s++)a.lineTo(n.Pixels[s]);if(!(null!=e.get_FillColor()||e.get_FillColor().getAlpha()>1))return null;i.push(a)}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(L._className,"LinesWithFill",new T.RendererException("Failed inside LinesWithFill",e))}return i}static buildBox(e){let t=new Array;try{{let i=0,a=0,s=0,l=0;i=e.getMinX()-200,a=e.getMinY()-200,s=e.getMaxX()+200,l=e.getMaxY()+200;let r=new n.Point2D(i,a),o=new n.Point2D(i-10,a),c=new n.Point2D(i-10,a-10),T=new n.Point2D(i,a-10);t.push(r),t.push(o),t.push(c),t.push(T),t.push(r)}}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(L._className,"buildBox",new T.RendererException("Failed inside buildBox",e))}return t}static ClipPolygon(e,t){let i=new Array;try{let a=g.clsUtilityCPOF.POINT2toPoint2D(e.Pixels),n=o.clsUtility.isClosedPolygon(e.get_LineType()),l=new Map,r=0;for(r=0;r<a.length;r++)l.set(r.toString(),a[r]);let c=new s.Rectangle2D(t.getX()-50,t.getY()-50,t.getWidth()+100,t.getHeight()+100),T=0;if(n?(a.splice(a.length-1,1),n=!0):T=L.AddBoundaryPointsForLines(a,c),i=L.clipRight(e,a,c),i=L.clipTop(e,i,c),i=L.clipLeft(e,i,c),i=L.clipBottom(e,i,c),n)i.length>0&&i.push(i[0]);else switch(T){case 0:break;case 1:i.length>0&&i.splice(0,1),i.length>0&&i.splice(0,1);break;case 2:i.length>0&&i.splice(i.length-1,1),i.length>0&&i.splice(i.length-1,1);break;case 3:i.length>0&&i.splice(0,1),i.length>0&&i.splice(0,1),i.length>0&&i.splice(i.length-1,1),i.length>0&&i.splice(i.length-1,1)}!0===n?i.length>2?e.Pixels=g.clsUtilityCPOF.Point2DtoPOINT2Mapped(i,l):e.Pixels=new Array:i.length>1?e.Pixels=g.clsUtilityCPOF.Point2DtoPOINT2Mapped(i,l):e.Pixels=new Array}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(L._className,"ClipPolygon",new T.RendererException("Failed inside ClipPolygon",e))}return i}}t.clsClipPolygon2=L},4571:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DISMSupport=void 0;const a=i(8087),n=i(8262),s=i(1207),l=i(7389),r=i(8712),o=i(5772),c=i(8101),T=i(7300),u=i(106),g=i(3254),L=i(8678);class d{static LEFT_SIDE=0;static RIGHT_SIDE=1;static COLINEAR=2;static CONST_PI=Math.PI;static maxLength=100;static minLength=2.5;static _className="DISMSupport";static GetTGFontSize(e){let t=-1;try{t=e<20?0:e<50?1:e>250?3:2}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetTGFontSize",new u.RendererException("Failed inside GetTGFontSize",e))}return t}static ArcApproximationDouble(e,t,i,a,n,s,l,r,o){try{let c=0,T=0,u=0,g=0,L=0,_=0,h=0,E=0,A=0,I=0,S=0,y=0,f=0;if(e>i){let t=e;e=i,i=t}if(t>a){let e=t;t=a,a=e}for(c=(i-e)/2,T=(a-t)/2,u=e+c,g=t+T,L=n-u,h=l-u,_=g-s,E=g-r,A=0===_?L>0?0:d.CONST_PI:0===L?_>0?.5*d.CONST_PI:-.5*d.CONST_PI:Math.atan2(_,L),I=0===E?h>0?0:d.CONST_PI:0===h?E>0?.5*d.CONST_PI:-.5*d.CONST_PI:Math.atan2(E,h),I<=A&&(I+=2*d.CONST_PI),S=(I-A)/16,y=A;f<17;y+=S,f++)o[f].x=u+c*Math.cos(y),o[f].y=g-T*Math.sin(y);return}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"ArcApproximationDouble",new u.RendererException("Failed inside ArcApproximationDouble",e))}}static DrawOpenRectangleDouble(e,t,i){try{let a=new l.POINT2,n=0;for(a.x=(e[0].x+e[1].x)/2,a.y=(e[0].y+e[1].y)/2,t[0].x=e[0].x-a.x+e[2].x,t[0].y=e[0].y-a.y+e[2].y,t[1].x=e[1].x-a.x+e[2].x,t[1].y=e[1].y-a.y+e[2].y,i[0]=new l.POINT2(e[1]),i[1]=new l.POINT2(t[1]),i[2]=new l.POINT2(t[0]),i[3]=new l.POINT2(e[0]),n=0;n<4;n++)i[n].style=0;i[3].style=5}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"DrawOpenRectangleDouble",new u.RendererException("Failed inside DrawOpenRectangleDouble",e))}}static DetermineDirectionDouble(e){try{let t=0,i=0;return e[0].x===e[1].x?e[2].x<e[0].x?1:0:(t=(e[0].y-e[1].y)/(e[0].x-e[1].x),i=e[0].y-t*e[0].x,(e[2].y-i)/t>e[2].x?1:0)}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"DetermineDirectionDouble",new u.RendererException("Failed inside DetermineDirectionDouble",e))}return 0}static CalcEndpieceDeltasDouble(e,t,i,a){try{let n=new l.POINT2,s=0,r=0;n.x=(e[0].x+e[1].x)/2,n.y=(e[0].y+e[1].y)/2,s=(Math.sqrt((e[1].x-e[0].x)*(e[1].x-e[0].x)+(e[1].y-e[0].y)*(e[1].y-e[0].y))+Math.sqrt((e[2].x-n.x)*(e[2].x-n.x)+(e[2].y-n.y)*(e[2].y-n.y)))/20;let o=g.RendererSettings.getInstance().getDeviceDPI()/96;return s>d.maxLength/5*o&&(s=d.maxLength/5*o),s<d.minLength*o&&(s=d.minLength*o),r=Math.atan2(e[2].y-n.y,e[2].x-n.x)+a,t.value=new Array(1),i.value=new Array(1),t.value[0]=s*Math.cos(r),void(i.value[0]=s*Math.sin(r))}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"CalcEndpieceDeltasDouble",new u.RendererException("Failed inside CalcEndpieceDeltasDouble",e))}}static GetDelayGraphicEtcDouble(e){let t=0;try{let i=new Array(2),a=new Array(3),n=0,r=0,o=0,c=0,T=0,u=0,L=0,_=0,h=new l.POINT2,E=new Array(17),A=new Array(4),I=0;for(I=0;I<3;I++)a[I]=new l.POINT2(e[I]);s.lineutility.InitializePOINT2Array(i),s.lineutility.InitializePOINT2Array(E),s.lineutility.InitializePOINT2Array(A),e[t]=new l.POINT2(a[0]),e[t].style=14,t++,e[t]=new l.POINT2(a[1]),e[t].style=5,t++,n=Math.sqrt((a[1].x-a[0].x)*(a[1].x-a[0].x)+(a[1].y-a[0].y)*(a[1].y-a[0].y)),r=Math.sqrt((a[2].x-a[1].x)*(a[2].x-a[1].x)+(a[2].y-a[1].y)*(a[2].y-a[1].y))/2,o=(n+2*r)/20;let S=g.RendererSettings.getInstance().getDeviceDPI()/96;for(o>d.maxLength*S&&(o=d.maxLength*S),o<d.minLength*S&&(o=d.minLength*S),c=Math.atan2(e[1].y-e[0].y,e[1].x-e[0].x),T=o*Math.cos(c-d.CONST_PI/4),u=o*Math.sin(c-d.CONST_PI/4),L=o*Math.cos(c+d.CONST_PI/4),_=o*Math.sin(c+d.CONST_PI/4),d.DrawEndpieceDeltasDouble(a[0],T,u,L,_,A),I=0;I<4;I++)e[t]=new l.POINT2(A[I]),t++;for(h.x=(a[1].x+a[2].x)/2,h.y=(a[1].y+a[2].y)/2,!1===d.ReverseDelayArc(a)?d.ArcApproximationDouble(h.x-r,h.y-r,h.x+r,h.y+r,a[1].x,a[1].y,a[2].x,a[2].y,E):d.ArcApproximationDouble(h.x-r,h.y-r,h.x+r,h.y+r,a[2].x,a[2].y,a[1].x,a[1].y,E),I=0;I<17;I++)e[t]=new l.POINT2(E[I]),e[t].style=0,t++}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDelayGraphicEtcDouble",new u.RendererException("Failed inside GetDelayGraphicEtcDouble",e))}return t}static GetDISMCoverDouble(e,t){let i=0;try{let a=new l.POINT2(e[0]),n=new l.POINT2(e[1]),r=new l.POINT2(e[2]),o=new l.POINT2,T=new l.POINT2;s.lineutility.LineRelativeToLine(n,r,a,o,T),s.lineutility.LineRelativeToLine(o,a,n,r,T);let u=s.lineutility.GetQuadrantDouble(a,T);n=new l.POINT2(e[1]),r=new l.POINT2(e[2]);let L=0;L=n.x<r.x&&(1===u||4===u)||n.x>r.x&&(2===u||3===u)?-1:1;let _=new l.POINT2(e[0]);_.style=0;let h=new l.POINT2(e[1]);h.style=0;let E=new l.POINT2(e[2]);E.style=0;let A=s.lineutility.CalcDistanceDouble(_,h),I=s.lineutility.CalcDistanceDouble(_,E);if(A=Math.min(A,I),!(d.GetTGFontSize(A)>0))return e[0]=new l.POINT2(_),e[0].style=0,e[1]=new l.POINT2(h),e[1].style=5,e[2]=new l.POINT2(_),e[2].style=0,e[3]=new l.POINT2(E),4;{let a=A/15,n=g.RendererSettings.getInstance().getDeviceDPI()/96;a>d.maxLength*n&&(a=d.maxLength*n),a<d.minLength*n&&(a=d.minLength*n);let r=new Array(4);s.lineutility.InitializePOINT2Array(r);let o=Math.atan2(_.y-h.y,_.x-h.x),T=Math.cos(o+L*d.CONST_PI/4)*a,u=Math.sin(o+L*d.CONST_PI/4)*a;r[0]=new l.POINT2(_),t!==c.TacticalLines.SARA&&(r[0].x-=30*Math.cos(o),r[0].y-=30*Math.sin(o));let I=s.lineutility.MidPointDouble(r[0],h,0);r[1].x=I.x-T,r[1].y=I.y-u,r[2].x=I.x+T,r[2].y=I.y+u,r[3]=new l.POINT2(h);for(let t=0;t<4;t++)e[i]=new l.POINT2(r[t]),i++;e[i-1].style=5;let S=Math.cos(o-L*d.CONST_PI/4)*a,y=Math.sin(o-L*d.CONST_PI/4)*a;r[0].x=r[3].x+T,r[0].y=r[3].y+u,r[1]=new l.POINT2(r[3]),r[2].x=r[3].x+S,r[2].y=r[3].y+y;for(let a=0;a<3;a++)e[i]=new l.POINT2(r[a]),e[i].style=0,t===c.TacticalLines.SARA&&(e[i].style=9),i++;e[i-1].style=5,t===c.TacticalLines.SARA&&(e[i-1].style=9,e[i]=new l.POINT2(e[i-3]),e[i].style=10,i++);let f=Math.atan2(_.y-E.y,_.x-E.x),D=Math.cos(f-L*d.CONST_PI/4)*a,M=Math.sin(f-L*d.CONST_PI/4)*a;r[0]=new l.POINT2(_),t!==c.TacticalLines.SARA&&(r[0].x-=30*Math.cos(f),r[0].y-=30*Math.sin(f));let P=s.lineutility.MidPointDouble(r[0],E,0);r[1].x=P.x-D,r[1].y=P.y-M,r[2].x=P.x+D,r[2].y=P.y+M,r[3]=new l.POINT2(E);for(let t=0;t<4;t++)e[i]=new l.POINT2(r[t]),i++;e[i-1].style=5;let R=Math.cos(f+L*d.CONST_PI/4)*a,N=Math.sin(f+L*d.CONST_PI/4)*a;r[0].x=r[3].x+D,r[0].y=r[3].y+M,r[1]=new l.POINT2(r[3]),r[2].x=r[3].x+R,r[2].y=r[3].y+N;for(let a=0;a<3;a++)e[i]=new l.POINT2(r[a]),e[i].style=0,t===c.TacticalLines.SARA&&(e[i].style=9),i++;e[i-1].style=5,t===c.TacticalLines.SARA&&(e[i-1].style=9,e[i]=new l.POINT2(e[i-3]),e[i].style=10,i++)}}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMcoverDouble",new u.RendererException("Failed inside GetDISMCoverDouble",e))}return i}static GetDISMCoverDoubleRevC(e,t,i){let a=0;try{let n,r=0,o=0,T=0,u=0,L=0,_=0,h=0,E=0,A=0,I=1,S=0,y=0,f=new Array(3),D=new Array(2),M=new Array(4),P=!1,R=1;if(4===i){for(n=new Array(4),A=0;A<i;A++)n[A]=new l.POINT2(e[A]);e[1]=n[0],e[2]=n[3],e[0].x=(n[1].x+n[2].x)/2,e[0].y=(n[1].y+n[2].y)/2}let N=new l.POINT2(e[0]),C=new l.POINT2(e[1]),O=new l.POINT2(e[2]),p=new l.POINT2,x=new l.POINT2;s.lineutility.LineRelativeToLine(C,O,N,p,x),s.lineutility.LineRelativeToLine(p,N,C,O,x);let b=s.lineutility.GetQuadrantDouble(N,x);for(C=new l.POINT2(e[1]),O=new l.POINT2(e[2]),(C.x<O.x&&1===b||C.x>O.x&&2===b||C.x>O.x&&3===b||C.x<O.x&&4===b)&&(R=-1),t===c.TacticalLines.SARA&&(I=0),e[1].x<=e[2].x&&(P=!0),A=0;A<3;A++)f[A]=new l.POINT2(e[A]),f[A].style=0;if(s.lineutility.InitializePOINT2Array(D),s.lineutility.InitializePOINT2Array(M),_=Math.sqrt((f[1].x-f[0].x)*(f[1].x-f[0].x)+(f[1].y-f[0].y)*(f[1].y-f[0].y)),h=Math.sqrt((f[2].x-f[0].x)*(f[2].x-f[0].x)+(f[2].y-f[0].y)*(f[2].y-f[0].y)),_>h&&(_=h),S=d.GetTGFontSize(_),!(S>0))return e[0]=new l.POINT2(f[0]),e[0].style=0,e[1]=new l.POINT2(f[1]),e[1].style=5,e[2]=new l.POINT2(f[0]),e[2].style=0,e[3]=new l.POINT2(f[2]),4;{E=_/15;let s=g.RendererSettings.getInstance().getDeviceDPI()/96;if(E>d.maxLength*s&&(E=d.maxLength*s),E<d.minLength*s&&(E=d.minLength*s),i<4){for(P?f[0].x-=30*I:f[0].x+=30*I,y=0,M[0].x=f[0].x-2*y,M[0].y=f[0].y,M[0].x-=y,r=Math.atan2(M[0].y-f[1].y,M[0].x-f[1].x),D[0].x=(M[0].x+f[1].x)/2,D[0].y=(M[0].y+f[1].y)/2,o=Math.cos(r+R*d.CONST_PI/4)*E,T=Math.sin(r+R*d.CONST_PI/4)*E,M[1].x=D[0].x-o,M[1].y=D[0].y-T,M[2].x=D[0].x+o,M[2].y=D[0].y+T,M[3]=new l.POINT2(f[1]),A=0;A<4;A++)e[a]=new l.POINT2(M[A]),a++;e[a-1].style=5}else{for(M[0]=new l.POINT2(n[1]),r=Math.atan2(M[0].y-n[0].y,M[0].x-n[0].x),D[0].x=(M[0].x+n[0].x)/2,D[0].y=(M[0].y+n[0].y)/2,o=Math.cos(r+R*d.CONST_PI/4)*E,T=Math.sin(r+R*d.CONST_PI/4)*E,M[1].x=D[0].x-o,M[1].y=D[0].y-T,M[2].x=D[0].x+o,M[2].y=D[0].y+T,M[3]=new l.POINT2(n[0]),A=0;A<4;A++)e[a]=new l.POINT2(M[A]),a++;e[a-1].style=5}for(u=Math.cos(r-R*d.CONST_PI/4)*E,L=Math.sin(r-R*d.CONST_PI/4)*E,i<4?(M[0].x=f[1].x+o,M[0].y=f[1].y+T):(M[0].x=n[0].x+o,M[0].y=n[0].y+T),M[1]=i<4?new l.POINT2(f[1]):new l.POINT2(n[0]),i<4?(M[2].x=f[1].x+u,M[2].y=f[1].y+L):(M[2].x=n[0].x+u,M[2].y=n[0].y+L),A=0;A<3;A++)e[a]=new l.POINT2(M[A]),e[a].style=0,t===c.TacticalLines.SARA&&(e[a].style=9),a++;if(e[a-1].style=5,t===c.TacticalLines.SARA&&(e[a-1].style=9,e[a]=new l.POINT2(e[a-3]),e[a].style=10,a++),i<4){for(P?f[0].x+=60*I:f[0].x-=60*I,M[0].x=f[0].x+2*y,M[0].y=f[0].y,M[0].x+=y,r=Math.atan2(M[0].y-f[2].y,M[0].x-f[2].x),D[0].x=(M[0].x+f[2].x)/2,D[0].y=(M[0].y+f[2].y)/2,o=Math.cos(r-R*d.CONST_PI/4)*E,T=Math.sin(r-R*d.CONST_PI/4)*E,M[1].x=D[0].x-o,M[1].y=D[0].y-T,M[2].x=D[0].x+o,M[2].y=D[0].y+T,M[3]=new l.POINT2(f[2]),A=0;A<4;A++)e[a]=new l.POINT2(M[A]),a++;e[a-1].style=5,u=Math.cos(r+R*d.CONST_PI/4)*E,L=Math.sin(r+R*d.CONST_PI/4)*E,M[0].x=f[2].x+o,M[0].y=f[2].y+T,M[1]=f[2],M[2].x=f[2].x+u,M[2].y=f[2].y+L}else{for(M[0]=new l.POINT2(n[2]),r=Math.atan2(M[0].y-n[3].y,M[0].x-n[3].x),D[0].x=(M[0].x+n[3].x)/2,D[0].y=(M[0].y+n[3].y)/2,o=Math.cos(r-R*d.CONST_PI/4)*E,T=Math.sin(r-R*d.CONST_PI/4)*E,M[1].x=D[0].x-o,M[1].y=D[0].y-T,M[2].x=D[0].x+o,M[2].y=D[0].y+T,M[3]=new l.POINT2(n[3]),A=0;A<4;A++)e[a]=new l.POINT2(M[A]),a++;e[a-1].style=5,u=Math.cos(r+R*d.CONST_PI/4)*E,L=Math.sin(r+R*d.CONST_PI/4)*E,M[0].x=n[3].x+o,M[0].y=n[3].y+T,M[1]=new l.POINT2(n[3]),M[2].x=n[3].x+u,M[2].y=n[3].y+L}for(A=0;A<3;A++)e[a]=new l.POINT2(M[A]),e[a].style=0,t===c.TacticalLines.SARA&&(e[a].style=9),a++;e[a-1].style=5,t===c.TacticalLines.SARA&&(e[a-1].style=9,e[a]=new l.POINT2(e[a-3]),e[a].style=10,a++)}}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMcoverDoubleRevC",new u.RendererException("Failed inside GetDISMCoverDoubleRevc",e))}return a}static GetDISMBypassDouble(e,t){let i=0;try{let t=0,a=new Array(2),n=new Array(4),o=new Array(3),c=new Array(4),T=new Array(4),u=new r.ref,g=new r.ref,L=0;for(t=0;t<3;t++)o[t]=new l.POINT2(e[t]);for(s.lineutility.InitializePOINT2Array(a),s.lineutility.InitializePOINT2Array(n),s.lineutility.InitializePOINT2Array(c),s.lineutility.InitializePOINT2Array(T),d.DrawOpenRectangleDouble(o,a,n),t=0;t<4;t++)e[i]=n[t],i++;for(L=d.DetermineDirectionDouble(o),d.CalcEndpieceDeltasDouble(o,u,g,d.CONST_PI/4),o[0].y-o[1].y<0?0!==L?(d.DrawEndpieceDeltasDouble(o[0],u.value[0],g.value[0],g.value[0],-u.value[0],c),d.DrawEndpieceDeltasDouble(o[1],u.value[0],g.value[0],g.value[0],-u.value[0],T)):(d.DrawEndpieceDeltasDouble(o[0],g.value[0],-u.value[0],u.value[0],g.value[0],c),d.DrawEndpieceDeltasDouble(o[1],g.value[0],-u.value[0],u.value[0],g.value[0],T)):0!==L?(d.DrawEndpieceDeltasDouble(o[0],g.value[0],-u.value[0],u.value[0],g.value[0],c),d.DrawEndpieceDeltasDouble(o[1],g.value[0],-u.value[0],u.value[0],g.value[0],T)):(d.DrawEndpieceDeltasDouble(o[0],u.value[0],g.value[0],g.value[0],-u.value[0],c),d.DrawEndpieceDeltasDouble(o[1],u.value[0],g.value[0],g.value[0],-u.value[0],T)),t=0;t<4;t++)e[i]=new l.POINT2(c[t]),i++;for(t=0;t<4;t++)e[i]=new l.POINT2(T[t]),i++}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMBypassDouble",new u.RendererException("Failed inside GetDISMBypassDouble",e))}return i}static GetDISMBreachDouble(e,t){let i=0;try{let t=new Array(2),a=new Array(4),n=new Array(4),o=new Array(4),c=new r.ref,T=new r.ref,u=0,g=0,L=new Array(3);for(g=0;g<3;g++)L[g]=new l.POINT2(e[g]);for(s.lineutility.InitializePOINT2Array(t),s.lineutility.InitializePOINT2Array(a),s.lineutility.InitializePOINT2Array(n),s.lineutility.InitializePOINT2Array(o),d.DrawOpenRectangleDouble(L,t,a),g=0;g<4;g++)e[i]=new l.POINT2(a[g]),i++;for(u=d.DetermineDirectionDouble(L),d.CalcEndpieceDeltasDouble(L,c,T,d.CONST_PI/4),L[0].y-L[1].y<0?0!==u?(d.DrawEndpieceDeltasDouble(L[0],c.value[0],T.value[0],-c.value[0],-T.value[0],n),d.DrawEndpieceDeltasDouble(L[1],T.value[0],-c.value[0],-T.value[0],c.value[0],o)):(d.DrawEndpieceDeltasDouble(L[0],T.value[0],-c.value[0],-T.value[0],c.value[0],n),d.DrawEndpieceDeltasDouble(L[1],c.value[0],T.value[0],-c.value[0],-T.value[0],o)):0!==u?(d.DrawEndpieceDeltasDouble(L[0],T.value[0],-c.value[0],-T.value[0],c.value[0],n),d.DrawEndpieceDeltasDouble(L[1],c.value[0],T.value[0],-c.value[0],-T.value[0],o)):(d.DrawEndpieceDeltasDouble(L[0],c.value[0],T.value[0],-c.value[0],-T.value[0],n),d.DrawEndpieceDeltasDouble(L[1],T.value[0],-c.value[0],-T.value[0],c.value[0],o)),g=0;g<4;g++)e[i]=new l.POINT2(n[g]),i++;for(g=0;g<4;g++)e[i]=new l.POINT2(o[g]),i++}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMBreachDouble",new u.RendererException("Failed inside GetDISMBreachDouble",e))}return i}static GetDISMCanalizeDouble(e,t){let i=0;try{let t=new Array(2),a=new Array(4),n=new Array(4),o=new Array(4),c=0,T=new r.ref,u=new r.ref,g=0,L=new Array(3);for(c=0;c<3;c++)L[c]=new l.POINT2(e[c]);for(s.lineutility.InitializePOINT2Array(t),s.lineutility.InitializePOINT2Array(a),s.lineutility.InitializePOINT2Array(n),s.lineutility.InitializePOINT2Array(o),d.DrawOpenRectangleDouble(L,t,a),c=0;c<4;c++)e[i]=new l.POINT2(a[c]),i++;for(g=d.DetermineDirectionDouble(L),d.CalcEndpieceDeltasDouble(L,T,u,d.CONST_PI/4),L[0].y-L[1].y<0?0!==g?(d.DrawEndpieceDeltasDouble(L[1],T.value[0],u.value[0],-T.value[0],-u.value[0],n),d.DrawEndpieceDeltasDouble(L[0],u.value[0],-T.value[0],-u.value[0],T.value[0],o)):(d.DrawEndpieceDeltasDouble(L[1],u.value[0],-T.value[0],-u.value[0],T.value[0],n),d.DrawEndpieceDeltasDouble(L[0],T.value[0],u.value[0],-T.value[0],-u.value[0],o)):0!==g?(d.DrawEndpieceDeltasDouble(L[1],u.value[0],-T.value[0],-u.value[0],T.value[0],n),d.DrawEndpieceDeltasDouble(L[0],T.value[0],u.value[0],-T.value[0],-u.value[0],o)):(d.DrawEndpieceDeltasDouble(L[1],T.value[0],u.value[0],-T.value[0],-u.value[0],n),d.DrawEndpieceDeltasDouble(L[0],u.value[0],-T.value[0],-u.value[0],T.value[0],o)),c=0;c<4;c++)e[i]=new l.POINT2(n[c]),i++;for(c=0;c<4;c++)e[i]=new l.POINT2(o[c]),i++}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMCanalizeDouble",new u.RendererException("Failed inside GetDISMCanalizeDouble",e))}return i}static getFDIShape(...e){switch(e.length){case 3:{const[t,i,n]=e;try{let e=s.lineutility.MidPointDouble(i,n,0),l=s.lineutility.CalcDistanceDouble(i,e),r=s.lineutility.ExtendDirectedLine(i,n,e,s.lineutility.extend_above,l),c=new o.Shape2(o.Shape2.SHAPE_TYPE_POLYLINE);c.moveTo(i),c.lineTo(r),c.lineTo(n),c.set_Style(1),c.setLineColor(t.get_LineColor());let T=L.clsUtility.getLineStroke(t.get_LineThickness(),c.get_Style(),a.BasicStroke.CAP_SQUARE,a.BasicStroke.JOIN_MITER);return c.setStroke(T),c}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"getFDIShape",new u.RendererException("Failed inside getFDIShape",e))}return null}case 4:{let[t,i,n,l]=e;try{let e=s.lineutility.CalcDistanceDouble(i,l);l=s.lineutility.ExtendLineDouble(i,l,.25*e),i=s.lineutility.ExtendLineDouble(l,i,.25*e);let r=s.lineutility.MidPointDouble(i,l,0);e=s.lineutility.CalcDistanceDouble(r,n),n=s.lineutility.ExtendLineDouble(r,n,.5*e);let c=new o.Shape2(o.Shape2.SHAPE_TYPE_POLYLINE);c.moveTo(i),c.lineTo(n),c.lineTo(l),c.set_Style(1),c.setLineColor(t.get_LineColor());let T=L.clsUtility.getLineStroke(t.get_LineThickness(),c.get_Style(),a.BasicStroke.CAP_SQUARE,a.BasicStroke.JOIN_MITER);return c.setStroke(T),c}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"getFDIShape",new u.RendererException("Failed inside getFDIShape",e))}return null}default:throw Error("Invalid number of arguments")}}static GetDISMDisruptDouble(e,t){let i=0;try{let t=new Array(2),a=new Array(3),n=new l.POINT2,r=0,o=new Array(3),c=0,T=new Array(4),u=new Array(4),L=new Array(4),_=0,h=0,E=0,A=0,I=0;for(r=0;r<3;r++)o[r]=new l.POINT2(e[r]);s.lineutility.InitializePOINT2Array(t),s.lineutility.InitializePOINT2Array(a),s.lineutility.InitializePOINT2Array(T),s.lineutility.InitializePOINT2Array(u),s.lineutility.InitializePOINT2Array(L),e[i]=new l.POINT2(o[0]),e[i].style=0,i++,e[i]=new l.POINT2(o[1]),e[i].style=5,i++,e[i]=new l.POINT2(o[1]),e[i].style=0,i++,e[i]=new l.POINT2(o[2]),e[i].style=5,i++,n.x=(o[0].x+o[1].x)/2,n.y=(o[0].y+o[1].y)/2,a[0]=new l.POINT2(o[2]),a[1].x=n.x+4*(o[2].x-o[1].x)/5,a[1].y=n.y+4*(o[2].y-o[1].y)/5,a[2].x=o[0].x+3*(o[2].x-o[1].x)/5,a[2].y=o[0].y+3*(o[2].y-o[1].y)/5,t[0].x=n.x-(o[2].x-o[1].x)/5,t[0].y=n.y-(o[2].y-o[1].y)/5,t[1]=new l.POINT2(a[1]),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,t[0]=new l.POINT2(o[0]),t[1]=new l.POINT2(a[2]),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,_=(Math.sqrt((o[1].x-o[0].x)*(o[1].x-o[0].x)+(o[1].y-o[0].y)*(o[1].y-o[0].y))+Math.sqrt((o[2].x-o[1].x)*(o[2].x-o[1].x)+(o[2].y-o[1].y)*(o[2].y-o[1].y)))/15;let S=g.RendererSettings.getInstance().getDeviceDPI()/96;for(_>d.maxLength*S&&(_=d.maxLength*S),_<d.minLength*S&&(_=d.minLength*S),c=Math.atan2(o[1].y-o[2].y,o[1].x-o[2].x),h=_*Math.cos(c-d.CONST_PI/6),E=_*Math.sin(c-d.CONST_PI/6),A=_*Math.cos(c+d.CONST_PI/6),I=_*Math.sin(c+d.CONST_PI/6),d.DrawEndpieceDeltasDouble(a[0],h,E,A,I,T),d.DrawEndpieceDeltasDouble(a[1],h,E,A,I,u),d.DrawEndpieceDeltasDouble(a[2],h,E,A,I,L),r=0;r<4;r++)e[i]=new l.POINT2(T[r]),i++;for(r=0;r<4;r++)e[i]=new l.POINT2(u[r]),i++;for(r=0;r<4;r++)e[i]=new l.POINT2(L[r]),i++}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMDisruptDouble",new u.RendererException("Failed inside GetDISMDisruptDouble",e))}return i}static GetDISMContainDouble(e,t){let i=0;try{let t=new Array(3),a=new l.POINT2,n=new l.POINT2,o=0,c=0,T=0,u=0,L=0,_=0,h=0,E=0,A=0,I=0,S=0,y=0,f=0,D=new Array(3),M=new Array(17);for(c=0;c<3;c++)D[c]=new l.POINT2(e[c]);s.lineutility.InitializePOINT2Array(t),s.lineutility.InitializePOINT2Array(M),a.x=(D[0].x+D[1].x)/2,a.y=(D[0].y+D[1].y)/2;let P=new r.ref,R=s.lineutility.PointRelativeToLine(D[0],D[1],D[2]);s.lineutility.CalcTrueSlopeDouble2(D[0],D[1],P),0!==P.value[0]?(D[0].y>D[1].y&&R.x>a.x&&s.lineutility.Reverse2Points(D[0],D[1]),D[0].y<D[1].y&&R.x<a.x&&s.lineutility.Reverse2Points(D[0],D[1])):(D[0].x<D[1].x&&R.y>a.y&&s.lineutility.Reverse2Points(D[0],D[1]),D[0].x>D[1].x&&R.y<a.y&&s.lineutility.Reverse2Points(D[0],D[1])),o=Math.sqrt((a.x-D[2].x)*(a.x-D[2].x)+(a.y-D[2].y)*(a.y-D[2].y)),o<1&&(o=1),T=Math.atan2(D[0].y-D[1].y,D[0].x-D[1].x),L=Math.cos(T+d.CONST_PI/2),_=Math.sin(T+d.CONST_PI/2),n.x=a.x+L*o,n.y=a.y+_*o,t[0]=new l.POINT2(a),t[1]=new l.POINT2(D[2]),e[i]=new l.POINT2(t[0]),e[i].style=14,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,h=Math.sqrt((a.x-D[0].x)*(a.x-D[0].x)+(a.y-D[0].y)*(a.y-D[0].y)),E=(o+h)/20;let N=g.RendererSettings.getInstance().getDeviceDPI()/96;for(E>d.maxLength*N&&(E=d.maxLength*N),E<d.minLength*N&&(E=d.minLength*N),A=Math.atan2(n.y-a.y,n.x-a.x),I=Math.cos(A+d.CONST_PI/4),S=Math.sin(A+d.CONST_PI/4),y=Math.cos(A-d.CONST_PI/4),f=Math.sin(A-d.CONST_PI/4),t[0].x=a.x+I*E,t[0].y=a.y+S*E,t[1]=new l.POINT2(a),t[2].x=a.x+y*E,t[2].y=a.y+f*E,c=0;c<3;c++)e[i]=new l.POINT2(t[c]),e[i].style=0,i++;for(e[i-1].style=5,d.ArcApproximationDouble(a.x-h,a.y-h,a.x+h,a.y+h,D[0].x,D[0].y,D[1].x,D[1].y,M),c=0;c<17;c++)e[i]=new l.POINT2(M[c]),e[i].style=0,i++;e[i-1].style=5,t[0]=new l.POINT2(D[0]),t[1].x=(t[0].x+a.x)/2,t[1].y=(t[0].y+a.y)/2,u=s.lineutility.CalcDistanceDouble(t[0],t[1]),u>d.maxLength*N&&(t[1]=s.lineutility.ExtendLineDouble(t[1],t[0],-d.maxLength*N)),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,t[0]=new l.POINT2(D[1]),t[1].x=(t[0].x+a.x)/2,t[1].y=(t[0].y+a.y)/2,u=s.lineutility.CalcDistanceDouble(t[0],t[1]),u>d.maxLength*N&&(t[1]=s.lineutility.ExtendLineDouble(t[1],t[0],-d.maxLength*N)),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,t[0].x=a.x-(n.x-a.x)*h/o,t[0].y=a.y-(n.y-a.y)*h/o,t[1].x=(a.x+t[0].x)/2,t[1].y=(a.y+t[0].y)/2,u=s.lineutility.CalcDistanceDouble(t[0],t[1]),u>d.maxLength*N&&(t[1]=s.lineutility.ExtendLineDouble(t[1],t[0],-d.maxLength*N)),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,t[0].x=a.x-I*h,t[0].y=a.y-S*h,t[1].x=(a.x+t[0].x)/2,t[1].y=(a.y+t[0].y)/2,u=s.lineutility.CalcDistanceDouble(t[0],t[1]),u>d.maxLength*N&&(t[1]=s.lineutility.ExtendLineDouble(t[1],t[0],-d.maxLength*N)),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,t[0].x=a.x-y*h,t[0].y=a.y-f*h,t[1].x=(a.x+t[0].x)/2,t[1].y=(a.y+t[0].y)/2,u=s.lineutility.CalcDistanceDouble(t[0],t[1]),u>d.maxLength*N&&(t[1]=s.lineutility.ExtendLineDouble(t[1],t[0],-d.maxLength*N)),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,I=Math.cos(A+d.CONST_PI/8),S=Math.sin(A+d.CONST_PI/8),y=Math.cos(A-d.CONST_PI/8),f=Math.sin(A-d.CONST_PI/8),t[0].x=a.x-I*h,t[0].y=a.y-S*h,t[1].x=(a.x+t[0].x)/2,t[1].y=(a.y+t[0].y)/2,u=s.lineutility.CalcDistanceDouble(t[0],t[1]),u>d.maxLength*N&&(t[1]=s.lineutility.ExtendLineDouble(t[1],t[0],-d.maxLength*N)),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,t[0].x=a.x-y*h,t[0].y=a.y-f*h,t[1].x=(a.x+t[0].x)/2,t[1].y=(a.y+t[0].y)/2,u=s.lineutility.CalcDistanceDouble(t[0],t[1]),u>d.maxLength*N&&(t[1]=s.lineutility.ExtendLineDouble(t[1],t[0],-d.maxLength*N)),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,I=Math.cos(A+3*d.CONST_PI/8),S=Math.sin(A+3*d.CONST_PI/8),y=Math.cos(A-3*d.CONST_PI/8),f=Math.sin(A-3*d.CONST_PI/8),t[0].x=a.x-I*h,t[0].y=a.y-S*h,t[1].x=(a.x+t[0].x)/2,t[1].y=(a.y+t[0].y)/2,u=s.lineutility.CalcDistanceDouble(t[0],t[1]),u>d.maxLength*N&&(t[1]=s.lineutility.ExtendLineDouble(t[1],t[0],-d.maxLength*N)),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,t[0].x=a.x-y*h,t[0].y=a.y-f*h,t[1].x=(a.x+t[0].x)/2,t[1].y=(a.y+t[0].y)/2,u=s.lineutility.CalcDistanceDouble(t[0],t[1]),u>d.maxLength*N&&(t[1]=s.lineutility.ExtendLineDouble(t[1],t[0],-d.maxLength*N)),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMContainDouble",new u.RendererException("Failed inside GetDISMContainDouble",e))}return i}static GetDISMFixDouble(e,t,i){let a=0;try{let n=new Array(3),r=new Array(2),o=0,T=0,u=0,L=0,_=0,h=0,E=0,A=0,I=0,S=0,y=0;for(y=0;y<2;y++)r[y]=new l.POINT2(e[y]);let f=!0;if(null!=i){let e=new l.POINT2(i.getMinX(),i.getMinY()),t=new l.POINT2(i.getMaxX(),i.getMaxY());r=s.lineutility.BoundOneSegment(r[0],r[1],e,t)}if(null==r){for(r=new Array(2),y=0;y<2;y++)r[y]=new l.POINT2(e[y]);f=!1}s.lineutility.InitializePOINT2Array(n),o=Math.atan2(r[0].y-r[1].y,r[0].x-r[1].x),T=Math.sqrt((r[1].x-r[0].x)*(r[1].x-r[0].x)+(r[1].y-r[0].y)*(r[1].y-r[0].y)),u=T/15;let D=g.RendererSettings.getInstance().getDeviceDPI()/96;if(u>d.maxLength*D&&(u=d.maxLength*D),u<d.minLength*D&&(u=d.minLength*D),L=u/1.5,_=Math.cos(o+d.CONST_PI/2)*u,h=Math.sin(o+d.CONST_PI/2)*u,E=Math.cos(o)*L,A=Math.sin(o)*L,I=Math.trunc(T/L)-3,S=2,n[0]=new l.POINT2(r[1]),n[1].x=r[1].x+1.5*E,n[1].y=r[1].y+1.5*A,e[a]=new l.POINT2(n[0]),e[a].style=0,a++,e[a]=new l.POINT2(n[1]),e[a].style=5,a++,n[0].x=r[1].x+_+E*S,n[0].y=r[1].y+h+A*S,S++,e[a]=new l.POINT2(n[0]),e[a].style=0,a++,e[a]=new l.POINT2(n[1]),e[a].style=5,a++,f)for(;S<=I;){for(n[1].x=r[1].x-_+E*S,n[1].y=r[1].y-h+A*S,S++,n[2].x=r[1].x+_+E*S,n[2].y=r[1].y+h+A*S,S++,y=0;y<3;y++)e[a]=new l.POINT2(n[y]),e[a].style=0,a++;e[a-1].style=5,n[0]=new l.POINT2(n[2])}for(n[1]=new l.POINT2(n[0]),n[0].x=r[1].x+E*S,n[0].y=r[1].y+A*S,e[a]=new l.POINT2(n[0]),e[a].style=0,a++,e[a]=new l.POINT2(n[1]),e[a].style=5,a++,n[1]=new l.POINT2(r[0]),e[a]=new l.POINT2(n[0]),e[a].style=0,a++,e[a]=new l.POINT2(n[1]),e[a].style=5,a++,n[0].x=r[0].x+_/1.5-E,n[0].y=r[0].y+h/1.5-A,n[2].x=r[0].x-_/1.5-E,n[2].y=r[0].y-h/1.5-A,y=0;y<3;y++)e[a]=new l.POINT2(n[y]),t===c.TacticalLines.MNFLDFIX?e[a].style=9:e[a].style=0,a++;t===c.TacticalLines.MNFLDFIX?e[a-1].style=10:e[a-1].style=5}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMFixDouble",new u.RendererException("Failed inside GetDISMFixDouble",e))}return a}static GetDISMClearDouble(e,t){let i=0;try{let t=new Array(3),a=0,n=new Array(2),o=new Array(3),c=(e[0].x+e[1].x)/2,T=(e[0].y+e[1].y)/2,u=new r.ref,g=new r.ref,L=new r.ref,_=new r.ref,h=new Array(4),E=new Array(4),A=new Array(4);for(a=0;a<3;a++)t[a]=new l.POINT2(e[a]);for(s.lineutility.InitializePOINT2Array(n),s.lineutility.InitializePOINT2Array(o),s.lineutility.InitializePOINT2Array(h),s.lineutility.InitializePOINT2Array(E),s.lineutility.InitializePOINT2Array(A),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,n[0].x=c,n[0].y=T,n[1]=new l.POINT2(t[2]),o[0]=new l.POINT2(n[0]),e[i]=new l.POINT2(n[0]),e[i].style=0,i++,e[i]=new l.POINT2(n[1]),e[i].style=5,i++,n[0].x=(t[0].x+c)/2,n[0].y=(t[0].y+T)/2,n[1].x=t[2].x+t[0].x-n[0].x,n[1].y=t[2].y+t[0].y-n[0].y,o[1]=new l.POINT2(n[0]),e[i]=new l.POINT2(n[0]),e[i].style=0,i++,e[i]=new l.POINT2(n[1]),e[i].style=5,i++,n[0].x=(t[1].x+c)/2,n[0].y=(t[1].y+T)/2,n[1].x=t[2].x+t[1].x-n[0].x,n[1].y=t[2].y+t[1].y-n[0].y,o[2]=new l.POINT2(n[0]),e[i]=new l.POINT2(n[0]),e[i].style=0,i++,e[i]=new l.POINT2(n[1]),e[i].style=5,i++,d.CalcEndpieceDeltasDouble(t,u,g,d.CONST_PI/6),d.CalcEndpieceDeltasDouble(t,L,_,-d.CONST_PI/6),d.DrawEndpieceDeltasDouble(o[0],u.value[0],g.value[0],L.value[0],_.value[0],h),d.DrawEndpieceDeltasDouble(o[1],u.value[0],g.value[0],L.value[0],_.value[0],E),d.DrawEndpieceDeltasDouble(o[2],u.value[0],g.value[0],L.value[0],_.value[0],A),a=0;a<4;a++)e[i]=new l.POINT2(h[a]),i++;for(a=0;a<4;a++)e[i]=new l.POINT2(E[a]),i++;for(a=0;a<4;a++)e[i]=new l.POINT2(A[a]),i++}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMClearDouble",new u.RendererException("Failed inside GetDISMClearDouble",e))}return i}static IsSeizeArcReversed(e){try{let t=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),i=Math.cos(t+d.CONST_PI/4),a=Math.sin(t+d.CONST_PI/4),n=Math.cos(t-d.CONST_PI/4),r=Math.sin(t-d.CONST_PI/4),o=Math.sqrt((e[1].x-e[0].x)*(e[1].x-e[0].x)+(e[1].y-e[0].y)*(e[1].y-e[0].y))/1.414213562373,c=new l.POINT2;c.x=e[0].x-i*o,c.y=e[0].y-a*o;let T=s.lineutility.CalcDistanceDouble(c,e[2]),u=new l.POINT2;return u.x=e[0].x-n*o,u.y=e[0].y-r*o,s.lineutility.CalcDistanceDouble(u,e[2])>T}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"IsSeizeArcReversed",new u.RendererException("Failed inside IsSeizeArcReversed",e))}return!1}static GetDISMSeizeDouble(e,t,i){let a=0;try{let t=new l.POINT2,r=new l.POINT2,o=new Array(3),c=22.5,T=new Array(17),u=new Array(3),L=0,_=0,h=0,E=0,A=0,I=0,S=0,y=0,f=0,D=0,M=0,P=1;for(i>0&&(c=i),y=0;y<3;y++)o[y]=new l.POINT2(e[y]);for(n.CELineArray.getClient().startsWith("cpof")||0!==i||(S=s.lineutility.CalcDistanceDouble(o[0],o[1]),c>S/2&&(c=S/2)),s.lineutility.InitializePOINT2Array(u),s.lineutility.InitializePOINT2Array(T),d.ArcApproximationDouble(o[0].x-c,o[0].y-c,o[0].x+c,o[0].y+c,o[0].x,o[0].y,o[0].x,o[0].y,T),y=0;y<17;y++)e[a]=new l.POINT2(T[y]),e[a].style=0,a++;e[a-1].style=5,L=Math.atan2(o[0].y-o[1].y,o[0].x-o[1].x),_=Math.cos(L+d.CONST_PI/4),h=Math.sin(L+d.CONST_PI/4),E=Math.cos(L-d.CONST_PI/4),A=Math.sin(L-d.CONST_PI/4);let R=d.IsSeizeArcReversed(o);for(!1===R?(r.x=o[0].x-E*c,r.y=o[0].y-A*c,I=Math.sqrt((o[1].x-o[0].x)*(o[1].x-o[0].x)+(o[1].y-o[0].y)*(o[1].y-o[0].y)),S=I/1.414213562373,t.x=o[0].x-_*S,t.y=o[0].y-h*S,d.ArcApproximationDouble(t.x-S,t.y-S,t.x+S,t.y+S,o[1].x,o[1].y,r.x,r.y,T)):(r.x=o[0].x-_*c,r.y=o[0].y-h*c,I=Math.sqrt((o[1].x-o[0].x)*(o[1].x-o[0].x)+(o[1].y-o[0].y)*(o[1].y-o[0].y)),S=I/1.414213562373,t.x=o[0].x-E*S,t.y=o[0].y-A*S,d.ArcApproximationDouble(t.x-S,t.y-S,t.x+S,t.y+S,r.x,r.y,o[1].x,o[1].y,T)),y=0;y<17;y++)e[a]=new l.POINT2(T[y]),e[a].style=0,a++;e[a-1].style=5;let N=g.RendererSettings.getInstance().getDeviceDPI()/96;for(I/8>d.maxLength*N&&(P=I/(8*d.maxLength*N)),0===P&&(P=1),!1===R?(u[0].x=o[1].x-(o[1].x-o[0].x)/(8*P),u[0].y=o[1].y-(o[1].y-o[0].y)/(8*P),u[1]=new l.POINT2(o[1]),f=Math.cos(L+d.CONST_PI/2),D=Math.sin(L+d.CONST_PI/2),M=I/8,u[2].x=o[1].x+f*M/P,u[2].y=o[1].y+D*M/P):(u[0].x=o[1].x-(o[1].x-o[0].x)/(8*P),u[0].y=o[1].y-(o[1].y-o[0].y)/(8*P),u[1]=new l.POINT2(o[1]),f=Math.cos(L-d.CONST_PI/2),D=Math.sin(L-d.CONST_PI/2),M=I/8,u[2].x=o[1].x+f*M/P,u[2].y=o[1].y+D*M/P),y=0;y<3;y++)e[a]=new l.POINT2(u[y]),e[a].style=0,a++;e[a-1].style=5}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMSeizeDouble",new u.RendererException("Failed inside GetDISMSeizeDouble",e))}return a}static side(e,t,i,a,n,s){let l=0,r=0,o=0,c=0;try{let T=0;if(l=i-e,o=a-t,r=n-e,c=s-t,T=l*c-o*r,T>0)return d.LEFT_SIDE;if(T<0)return d.RIGHT_SIDE}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"side",new u.RendererException("Failed inside side",e))}return d.COLINEAR}static GetDISMRIPDouble(e,t){let i=0;try{let t=new Array(2),a=new Array(4),n=0,r=0,o=0,c=0,T=0,u=0,L=0,_=0,h=0,E=0,A=new Array(4),I=new Array(17),S=new l.POINT2,y=!1,f=d.side(e[0].x,e[0].y,e[1].x,e[1].y,e[2].x,e[2].y),D=d.side(e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y);for((f===d.RIGHT_SIDE&&D===d.RIGHT_SIDE||f===d.RIGHT_SIDE&&D===d.COLINEAR||f===d.COLINEAR&&D===d.RIGHT_SIDE)&&(y=!0),n=0;n<4;n++)a[n]=new l.POINT2(e[n]);s.lineutility.InitializePOINT2Array(t),s.lineutility.InitializePOINT2Array(A),s.lineutility.InitializePOINT2Array(I),e[i]=new l.POINT2(a[0]),e[i].style=0,i++,e[i]=new l.POINT2(a[1]),e[i].style=5,i++,t[0]=new l.POINT2(a[2]),t[1]=new l.POINT2(a[3]),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,t[0]=new l.POINT2(a[0]),t[1]=new l.POINT2(a[1]),r=Math.sqrt((t[1].x-t[0].x)*(t[1].x-t[0].x)+(t[1].y-t[0].y)*(t[1].y-t[0].y)),o=r/8;let M=g.RendererSettings.getInstance().getDeviceDPI()/96;for(o>d.maxLength*M&&(o=d.maxLength*M),o<d.minLength*M&&(o=d.minLength*M),c=Math.atan2(t[1].y-t[0].y,t[1].x-t[0].x),T=o*Math.cos(c-d.CONST_PI/4),u=o*Math.sin(c-d.CONST_PI/4),L=o*Math.cos(c+d.CONST_PI/4),_=o*Math.sin(c+d.CONST_PI/4),d.DrawEndpieceDeltasDouble(t[0],T,u,L,_,A),n=0;n<4;n++)e[i]=new l.POINT2(A[n]),e[i].style=0,i++;for(e[i-3].style=5,e[i-1].style=5,t[0]=new l.POINT2(a[2]),t[1]=new l.POINT2(a[3]),h=Math.sqrt((t[1].x-t[0].x)*(t[1].x-t[0].x)+(t[1].y-t[0].y)*(t[1].y-t[0].y)),o=h/8,o>d.maxLength*M&&(o=d.maxLength*M),o<d.minLength*M&&(o=d.minLength*M),c=Math.atan2(t[1].y-t[0].y,t[1].x-t[0].x),T=o*Math.cos(c-d.CONST_PI/4),u=o*Math.sin(c-d.CONST_PI/4),L=o*Math.cos(c+d.CONST_PI/4),_=o*Math.sin(c+d.CONST_PI/4),d.DrawEndpieceDeltasDouble(t[0],T,u,L,_,A),n=0;n<4;n++)e[i]=new l.POINT2(A[n]),e[i].style=0,i++;for(e[i-3].style=5,e[i-1].style=5,E=Math.sqrt((a[2].x-a[1].x)*(a[2].x-a[1].x)+(a[2].y-a[1].y)*(a[2].y-a[1].y))/2,S.x=(a[1].x+a[2].x)/2,S.y=(a[1].y+a[2].y)/2,!1===y?d.ArcApproximationDouble(S.x-E,S.y-E,S.x+E,S.y+E,a[2].x,a[2].y,a[1].x,a[1].y,I):d.ArcApproximationDouble(S.x-E,S.y-E,S.x+E,S.y+E,a[1].x,a[1].y,a[2].x,a[2].y,I),n=0;n<17;n++)e[i]=new l.POINT2(I[n]),e[i].style=0,i++;e[i-1].style=5}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMRIPDouble",new u.RendererException("Failed inside GetDISMRIPDouble",e))}return i}static GetDISMByDifDouble(e,t,i){let a=0;try{let t=new Array(2),n=new Array(4),o=new Array(3),c=new Array(2),T=new Array(4),u=new Array(4),L=new Array(3),_=new r.ref,h=new r.ref,E=0,A=0,I=0,S=0,y=0,f=0,D=0,M=0,P=0,R=0,N=0,C=0;for(C=0;C<3;C++)o[C]=new l.POINT2(e[C]);if(s.lineutility.InitializePOINT2Array(t),s.lineutility.InitializePOINT2Array(n),s.lineutility.InitializePOINT2Array(L),s.lineutility.InitializePOINT2Array(T),s.lineutility.InitializePOINT2Array(u),d.DrawOpenRectangleDouble(o,t,n),c[0]=new l.POINT2(n[1]),c[1]=new l.POINT2(n[2]),null!=i){let e=new l.POINT2(i.getMinX(),i.getMinY()),t=new l.POINT2(i.getMaxX(),i.getMaxY());c=s.lineutility.BoundOneSegment(c[0],c[1],e,t)}let O=!0;for(null==c&&(c=new Array(2),c[0]=new l.POINT2(n[1]),c[1]=new l.POINT2(n[2]),O=!1),C=0;C<4;C++)e[a]=new l.POINT2(n[C]),e[a].style=0,a++;e[1].style=5,e[a-1].style=5,A=Math.atan2(c[0].y-c[1].y,c[0].x-c[1].x),I=Math.sqrt((c[1].x-c[0].x)*(c[1].x-c[0].x)+(c[1].y-c[0].y)*(c[1].y-c[0].y)),S=I/15;let p=g.RendererSettings.getInstance().getDeviceDPI()/96;if(S>d.maxLength*p&&(S=d.maxLength*p),S<d.minLength*p&&(S=d.minLength*p),y=S/1.5,f=Math.cos(A+d.CONST_PI/2)*S,D=Math.sin(A+d.CONST_PI/2)*S,M=Math.cos(A)*y,P=Math.sin(A)*y,R=Math.trunc(I/y)-3,N=2,L[0]=new l.POINT2(c[1]),L[1].x=c[1].x+1.5*M,L[1].y=c[1].y+1.5*P,e[a]=new l.POINT2(L[0]),e[a].style=0,a++,e[a]=new l.POINT2(L[1]),e[a].style=5,a++,L[0].x=c[1].x+f+M*N,L[0].y=c[1].y+D+P*N,N++,e[a]=new l.POINT2(L[0]),e[a].style=0,a++,e[a]=new l.POINT2(L[1]),e[a].style=5,a++,O)for(;N<=R;){for(L[1].x=c[1].x-f+M*N,L[1].y=c[1].y-D+P*N,N++,L[2].x=c[1].x+f+M*N,L[2].y=c[1].y+D+P*N,N++,C=0;C<3;C++)e[a]=new l.POINT2(L[C]),e[a].style=0,a++;e[a-1].style=5,L[0]=new l.POINT2(L[2])}L[1]=new l.POINT2(L[0]),L[0].x=c[1].x+M*N,L[0].y=c[1].y+P*N,e[a]=new l.POINT2(L[0]),e[a].style=0,a++,e[a]=new l.POINT2(L[1]),e[a].style=5,a++,L[1]=new l.POINT2(c[0]),e[a]=new l.POINT2(L[0]),e[a].style=0,a++,e[a]=new l.POINT2(L[1]),e[a].style=5,a++,E=d.DetermineDirectionDouble(o),d.CalcEndpieceDeltasDouble(o,_,h,d.CONST_PI/4),o[0].y-o[1].y<0?0!==E?(d.DrawEndpieceDeltasDouble(o[0],_.value[0],h.value[0],h.value[0],-_.value[0],T),d.DrawEndpieceDeltasDouble(o[1],_.value[0],h.value[0],h.value[0],-_.value[0],u)):(d.DrawEndpieceDeltasDouble(o[0],h.value[0],-_.value[0],_.value[0],h.value[0],T),d.DrawEndpieceDeltasDouble(o[1],h.value[0],-_.value[0],_.value[0],h.value[0],u)):0!==E?(d.DrawEndpieceDeltasDouble(o[0],h.value[0],-_.value[0],_.value[0],h.value[0],T),d.DrawEndpieceDeltasDouble(o[1],h.value[0],-_.value[0],_.value[0],h.value[0],u)):(d.DrawEndpieceDeltasDouble(o[0],_.value[0],h.value[0],h.value[0],-_.value[0],T),d.DrawEndpieceDeltasDouble(o[1],_.value[0],h.value[0],h.value[0],-_.value[0],u)),e[a]=new l.POINT2(T[1]),e[a].style=9,a++,e[a]=new l.POINT2(T[0]),e[a].style=9,a++,e[a]=new l.POINT2(T[3]),e[a].style=9,a++,e[a]=new l.POINT2(T[3]),e[a].style=10,a++,e[a]=new l.POINT2(u[1]),e[a].style=9,a++,e[a]=new l.POINT2(u[0]),e[a].style=9,a++,e[a]=new l.POINT2(u[3]),e[a].style=9,a++,e[a]=new l.POINT2(u[3]),e[a].style=10,a++}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMByDifDouble",new u.RendererException("Failed inside GetDISMByDifDouble",e))}return a}static GetDISMPenetrateDouble(e,t){try{let t=new Array(3),i=new l.POINT2,a=new Array(3),r=0,o=0;for(r=0;r<3;r++)a[r]=new l.POINT2(e[r]);s.lineutility.InitializePOINT2Array(t),e[0].x=a[0].x,e[0].y=a[0].y,e[0].style=0,e[1].x=a[1].x,e[1].y=a[1].y,e[1].style=5,i=s.lineutility.MidPointDouble(a[0],a[1],0),e[2]=new l.POINT2(a[2]),e[3]=new l.POINT2(i),e[3].style=5,o=s.lineutility.MBRDistance(a,3);let c=g.RendererSettings.getInstance().getDeviceDPI()/96;o/5>d.maxLength*c&&(o=5*d.maxLength*c),o/5<d.minLength*c&&(o=5*d.minLength*c);let T=n.CELineArray.getClient();for("cpof3d"===T||"cpof2d"===T?o<400*c&&(o=400*c):o<150*c&&(o=150*c),o>600*c&&(o=600*c),s.lineutility.GetArrowHead4Double(e[2],e[3],Math.trunc(o/20),Math.trunc(o/20),t,0),r=0;r<3;r++)e[4+r]=new l.POINT2(t[r])}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMPenetrateDouble",new u.RendererException("Failed inside GetDISMPenetrateDouble",e))}}static GetDISMByImpDouble(e,t){let i=0;try{let t=0,a=new Array(2),n=new Array(4),o=new Array(3),c=new Array(4),T=new Array(4),u=new l.POINT2,L=new Array(6),_=new l.POINT2,h=new r.ref,E=new r.ref,A=0,I=s.lineutility.MBRDistance(e,3),S=g.RendererSettings.getInstance().getDeviceDPI()/96;for(I>40*d.maxLength*S&&(I=40*d.maxLength*S),I<5*d.minLength*S&&(I=5*d.minLength*S),I>250*S&&(I=250*S),I/15>s.lineutility.CalcDistanceDouble(e[0],e[1])&&(I=15*s.lineutility.CalcDistanceDouble(e[0],e[1])),t=0;t<3;t++)o[t]=new l.POINT2(e[t]);s.lineutility.InitializePOINT2Array(n),s.lineutility.InitializePOINT2Array(c),s.lineutility.InitializePOINT2Array(T),s.lineutility.InitializePOINT2Array(L),s.lineutility.InitializePOINT2Array(a),d.DrawOpenRectangleDouble(o,a,n),e[i]=new l.POINT2(n[0]),e[i].style=0,i++,e[i]=new l.POINT2(n[1]),e[i].style=0,i++,u=s.lineutility.MidPointDouble(n[1],n[2],0),L[0]=s.lineutility.ExtendLine2Double(n[1],u,-I/30,5),L[1]=s.lineutility.ExtendLine2Double(n[1],u,I/30,5),e[i]=new l.POINT2(L[0]),e[i].style=5,i++,_=s.lineutility.PointRelativeToLine(n[0],n[1],L[0]),L[2]=s.lineutility.ExtendLineDouble(_,L[0],-I/30),L[3]=s.lineutility.ExtendLineDouble(_,L[0],I/30),e[i]=new l.POINT2(L[2]),e[i].style=0,i++,e[i]=new l.POINT2(L[3]),e[i].style=5,i++,_=s.lineutility.PointRelativeToLine(n[2],n[3],L[1]),L[4]=s.lineutility.ExtendLineDouble(_,L[1],-I/30),L[5]=s.lineutility.ExtendLineDouble(_,L[1],I/30),e[i]=new l.POINT2(L[4]),e[i].style=0,i++,e[i]=new l.POINT2(L[5]),e[i].style=5,i++,e[i]=new l.POINT2(L[1]),e[i].style=0,i++,e[i]=new l.POINT2(n[2]),e[i].style=0,i++,e[i]=new l.POINT2(n[3]),e[i].style=5,i++,A=d.DetermineDirectionDouble(o),d.CalcEndpieceDeltasDouble(o,h,E,d.CONST_PI/4),o[0].y-o[1].y<0?0!==A?(d.DrawEndpieceDeltasDouble(o[0],h.value[0],E.value[0],E.value[0],-h.value[0],c),d.DrawEndpieceDeltasDouble(o[1],h.value[0],E.value[0],E.value[0],-h.value[0],T)):(d.DrawEndpieceDeltasDouble(o[0],E.value[0],-h.value[0],h.value[0],E.value[0],c),d.DrawEndpieceDeltasDouble(o[1],E.value[0],-h.value[0],h.value[0],E.value[0],T)):0!==A?(d.DrawEndpieceDeltasDouble(o[0],E.value[0],-h.value[0],h.value[0],E.value[0],c),d.DrawEndpieceDeltasDouble(o[1],E.value[0],-h.value[0],h.value[0],E.value[0],T)):(d.DrawEndpieceDeltasDouble(o[0],h.value[0],E.value[0],E.value[0],-h.value[0],c),d.DrawEndpieceDeltasDouble(o[1],h.value[0],E.value[0],E.value[0],-h.value[0],T)),e[i]=new l.POINT2(c[1]),e[i].style=9,i++,e[i]=new l.POINT2(c[0]),e[i].style=9,i++,e[i]=new l.POINT2(c[3]),e[i].style=9,i++,e[i]=new l.POINT2(c[3]),e[i].style=10,i++,e[i]=new l.POINT2(T[1]),e[i].style=9,i++,e[i]=new l.POINT2(T[0]),e[i].style=9,i++,e[i]=new l.POINT2(T[3]),e[i].style=9,i++,e[i]=new l.POINT2(T[3]),e[i].style=10,i++}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMByImpDouble",new u.RendererException("Failed inside GetDISMByImpDouble",e))}return i}static GetDISMSupportByFireDouble(e,t){let i=0;try{let t=new Array(3),a=new Array(4),n=0,r=0,o=0,c=0,T=0,u=0,L=0;for(n=0;n<4;n++)a[n]=new l.POINT2(e[n]);d.ReorderSptByFirePoints(a),s.lineutility.InitializePOINT2Array(t),e[i]=new l.POINT2(a[0]),e[i].style=0,i++,e[i]=new l.POINT2(a[1]),e[i].style=5,i++,t[0]=new l.POINT2(a[0]),t[1]=new l.POINT2(a[2]),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,r=Math.sqrt((a[0].x-a[1].x)*(a[0].x-a[1].x)+(a[0].y-a[1].y)*(a[0].y-a[1].y))/10;let _=g.RendererSettings.getInstance().getDeviceDPI()/96;for(r>d.maxLength*_&&(r=d.maxLength*_),r<d.minLength*_&&(r=d.minLength*_),o=Math.atan2(a[0].y-a[2].y,a[0].x-a[2].x),c=Math.cos(o+d.CONST_PI/6)*r,T=Math.sin(o+d.CONST_PI/6)*r,u=Math.cos(o-d.CONST_PI/6)*r,L=Math.sin(o-d.CONST_PI/6)*r,t[0].x=a[2].x+c,t[0].y=a[2].y+T,t[1]=new l.POINT2(a[2]),t[2].x=a[2].x+u,t[2].y=a[2].y+L,n=0;n<3;n++)e[i]=new l.POINT2(t[n]),e[i].style=0,i++;for(e[i-1].style=5,t[0]=new l.POINT2(a[1]),t[1]=new l.POINT2(a[3]),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,o=Math.atan2(a[1].y-a[3].y,a[1].x-a[3].x),c=Math.cos(o+d.CONST_PI/6)*r,T=Math.sin(o+d.CONST_PI/6)*r,u=Math.cos(o-d.CONST_PI/6)*r,L=Math.sin(o-d.CONST_PI/6)*r,t[0].x=a[3].x+c,t[0].y=a[3].y+T,t[1]=new l.POINT2(a[3]),t[2].x=a[3].x+u,t[2].y=a[3].y+L,n=0;n<3;n++)e[i]=new l.POINT2(t[n]),e[i].style=0,i++;e[i-1].style=5,o=Math.atan2(a[1].y-a[0].y,a[1].x-a[0].x),r*=2,c=Math.cos(o-d.CONST_PI/4)*r,T=Math.sin(o-d.CONST_PI/4)*r,u=Math.cos(o+d.CONST_PI/4)*r,L=Math.sin(o+d.CONST_PI/4)*r,t[0].x=a[0].x-c,t[0].y=a[0].y-T,t[1]=new l.POINT2(a[0]),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,t[0].x=a[1].x+u,t[0].y=a[1].y+L,t[1]=new l.POINT2(a[1]),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMSupportbyFireDouble",new u.RendererException("Failed inside GetDISMSupportByFireDouble",e))}return i}static ReorderAtkByFirePoints(e){try{let t=new Array(3),i=new l.POINT2,a=new l.POINT2,n=new l.POINT2,r=new l.POINT2,o=0,c=0,T=0,u=0,g=0;for(let i=0;i<3;i++)t[i]=new l.POINT2(e[i]);Math.abs(t[1].x-t[2].x)>2?(o=s.lineutility.CalcDistanceToLineDouble(t[1],t[2],t[0]),i=s.lineutility.ExtendDirectedLine(t[1],t[2],t[2],2,o),a=s.lineutility.ExtendDirectedLine(t[1],t[2],t[2],3,o),c=s.lineutility.CalcDistanceDouble(t[0],i),T=s.lineutility.CalcDistanceDouble(t[0],a),c<T?t[2].x<t[1].x&&s.lineutility.Reverse2Points(t[1],t[2]):t[2].x>t[1].x&&s.lineutility.Reverse2Points(t[1],t[2])):(o=s.lineutility.CalcDistanceToLineDouble(t[1],t[2],t[0]),n=s.lineutility.ExtendDirectedLine(t[1],t[2],t[2],0,o),r=s.lineutility.ExtendDirectedLine(t[1],t[2],t[2],1,o),u=s.lineutility.CalcDistanceDouble(t[0],n),g=s.lineutility.CalcDistanceDouble(t[0],r),g<u?t[2].y<t[1].y&&s.lineutility.Reverse2Points(t[1],t[2]):t[2].y>t[1].y&&s.lineutility.Reverse2Points(t[1],t[2])),e[1].x=t[1].x,e[1].y=t[1].y,e[2].x=t[2].x,e[2].y=t[2].y}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"ReorderAtkByFirePoints",new u.RendererException("Failed inside GetDISMSupportByFireDouble",e))}}static ReorderSptByFirePoints(e){try{let t=new l.POINT2,i=new l.POINT2,a=new l.POINT2,n=new l.POINT2,r=0,o=0,c=0,T=0,u=0,g=s.lineutility.MidPointDouble(e[0],e[1],0);Math.abs(e[2].x-e[3].x)>2?(r=s.lineutility.CalcDistanceToLineDouble(e[1],e[2],g),t=s.lineutility.ExtendDirectedLine(e[1],e[2],e[2],2,r),i=s.lineutility.ExtendDirectedLine(e[1],e[2],e[2],3,r),o=s.lineutility.CalcDistanceDouble(e[0],t),c=s.lineutility.CalcDistanceDouble(e[0],i),o<c?e[2].x<e[1].x&&(s.lineutility.Reverse2Points(e[0],e[1]),s.lineutility.Reverse2Points(e[2],e[3])):e[2].x>e[1].x&&(s.lineutility.Reverse2Points(e[0],e[1]),s.lineutility.Reverse2Points(e[2],e[3]))):(r=s.lineutility.CalcDistanceToLineDouble(e[1],e[2],g),a=s.lineutility.ExtendDirectedLine(e[1],e[2],e[2],0,r),n=s.lineutility.ExtendDirectedLine(e[1],e[2],e[2],1,r),T=s.lineutility.CalcDistanceDouble(e[0],a),u=s.lineutility.CalcDistanceDouble(e[0],n),T<u?e[2].y>e[1].y&&(s.lineutility.Reverse2Points(e[0],e[1]),s.lineutility.Reverse2Points(e[2],e[3])):e[2].y<e[1].y&&(s.lineutility.Reverse2Points(e[0],e[1]),s.lineutility.Reverse2Points(e[2],e[3])))}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"ReorderSptByFire",new u.RendererException("Failed inside ReorderSptByFirePoints",e))}}static GetDISMATKBYFIREDouble(e,t){let i=0;try{let t=new Array(3),a=new l.POINT2,n=new Array(3),r=0,o=0,c=0,T=0,u=0,L=0,_=0;for(r=0;r<3;r++)n[r]=new l.POINT2(e[r]);d.ReorderAtkByFirePoints(n),s.lineutility.InitializePOINT2Array(t),t[0]=new l.POINT2(n[1]),t[1]=new l.POINT2(n[2]),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,a.x=(n[1].x+n[2].x)/2,a.y=(n[1].y+n[2].y)/2,t[0]=new l.POINT2(a),t[1]=new l.POINT2(n[0]),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,o=(Math.sqrt((n[1].x-n[2].x)*(n[1].x-n[2].x)+(n[1].y-n[2].y)*(n[1].y-n[2].y))+Math.sqrt((n[0].x-a.x)*(n[0].x-a.x)+(n[0].y-a.y)*(n[0].y-a.y)))/20;let h=g.RendererSettings.getInstance().getDeviceDPI()/96;for(o>d.maxLength/5*h&&(o=d.maxLength/5*h),o<d.minLength*h&&(o=d.minLength*h),c=Math.atan2(a.y-n[0].y,a.x-n[0].x),T=Math.cos(c+d.CONST_PI/6)*o,u=Math.sin(c+d.CONST_PI/6)*o,L=Math.cos(c-d.CONST_PI/6)*o,_=Math.sin(c-d.CONST_PI/6)*o,t[0].x=n[0].x+T,t[0].y=n[0].y+u,t[1]=new l.POINT2(n[0]),t[2].x=n[0].x+L,t[2].y=n[0].y+_,r=0;r<3;r++)e[i]=new l.POINT2(t[r]),e[i].style=0,i++;e[i-1].style=5,c=Math.atan2(n[1].y-n[2].y,n[1].x-n[2].x),T=Math.cos(c-d.CONST_PI/4)*o*2,u=Math.sin(c-d.CONST_PI/4)*o*2,L=Math.cos(c+d.CONST_PI/4)*o*2,_=Math.sin(c+d.CONST_PI/4)*o*2,t[0].x=n[1].x+T,t[0].y=n[1].y+u,t[1]=new l.POINT2(n[1]),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,t[0].x=n[2].x-L,t[0].y=n[2].y-_,t[1]=new l.POINT2(n[2]),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMAtkByFireDouble",new u.RendererException("Failed inside GetDISMAtkByFireDouble",e))}return i}static GetDISMGapDouble(e,t){try{let t=new Array(4),i=new Array(2),a=0,n=s.lineutility.MBRDistance(e,4);for(a=0;a<4;a++)t[a]=new l.POINT2(e[a]);s.lineutility.InitializePOINT2Array(i);let r=g.RendererSettings.getInstance().getDeviceDPI()/96;n/10>d.maxLength*r&&(n=10*d.maxLength*r),n/10<d.minLength*r&&(n=10*d.minLength*r),e[0]=new l.POINT2(t[0]),e[0].style=0,e[1]=new l.POINT2(t[1]),e[1].style=5,e[2]=new l.POINT2(t[2]),e[2].style=0,e[3]=new l.POINT2(t[3]),e[3].style=5;let o=n/10;o>20*r&&(o=20*r);let c=o;i[0]=s.lineutility.ExtendLineDouble(t[1],t[0],o),i[1]=s.lineutility.ExtendLineDouble(t[2],t[0],c),e[4]=new l.POINT2(e[0]),e[4].style=0,e[5]=s.lineutility.MidPointDouble(i[0],i[1],5),i[0]=s.lineutility.ExtendLineDouble(t[0],t[1],o),i[1]=s.lineutility.ExtendLineDouble(t[3],t[1],c),e[6]=new l.POINT2(e[1]),e[6].style=0,e[7]=s.lineutility.MidPointDouble(i[0],i[1],5),i[0]=s.lineutility.ExtendLineDouble(t[0],t[2],c),i[1]=s.lineutility.ExtendLineDouble(t[3],t[2],o),e[8]=new l.POINT2(e[2]),e[8].style=0,e[9]=s.lineutility.MidPointDouble(i[0],i[1],5),i[0]=s.lineutility.ExtendLineDouble(t[1],t[3],c),i[1]=s.lineutility.ExtendLineDouble(t[2],t[3],o),e[10]=new l.POINT2(e[3]),e[10].style=0,e[11]=s.lineutility.MidPointDouble(i[0],i[1],5)}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMGapDouble",new u.RendererException("Failed inside GetDISMGapDouble",e))}return 12}static GetDISMMinefieldDisruptDouble(e,t){let i=0;try{let t=new Array(2),a=new Array(3),n=new l.POINT2,r=0,o=new Array(3),c=0,T=0,u=0,L=new Array(4),_=new Array(4),h=new Array(4),E=0,A=0,I=0,S=0,y=0,f=new l.POINT2;for(r=0;r<3;r++)o[r]=new l.POINT2(e[r]);s.lineutility.InitializePOINT2Array(a),s.lineutility.InitializePOINT2Array(L),s.lineutility.InitializePOINT2Array(_),s.lineutility.InitializePOINT2Array(h),s.lineutility.InitializePOINT2Array(t),e[i]=new l.POINT2(o[0]),e[i].style=0,i++,e[i]=new l.POINT2(o[1]),e[i].style=5,i++,n.x=(o[0].x+o[1].x)/2,n.y=(o[0].y+o[1].y)/2,a[0]=new l.POINT2(o[2]),a[1].x=n.x+4*(o[2].x-o[0].x)/5,a[1].y=n.y+4*(o[2].y-o[0].y)/5,a[2].x=o[1].x+3*(o[2].x-o[0].x)/5,a[2].y=o[1].y+3*(o[2].y-o[0].y)/5,e[i]=new l.POINT2(o[1]),e[i].style=0,i++,e[i]=new l.POINT2(a[2]),e[i].style=5,i++,t[1]=new l.POINT2(a[1]),e[i]=new l.POINT2(n),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,u=s.lineutility.CalcDistanceDouble(o[2],o[0]),T=u;let D=g.RendererSettings.getInstance().getDeviceDPI()/96;T>5*d.maxLength*D&&(T=5*d.maxLength*D),T<5*d.minLength*D&&(T=5*d.minLength*D),f=new l.POINT2(n),t[0].x=f.x-(o[2].x-o[0].x)/5,t[0].y=f.y-(o[2].y-o[0].y)/5,t[0]=s.lineutility.ExtendLineDouble(t[0],f,-T/5),e[i]=new l.POINT2(f),e[i].style=0,i++,e[i]=new l.POINT2(t[0]),e[i].style=5,i++,t[0]=new l.POINT2(o[0]),t[1]=new l.POINT2(a[0]),e[i]=new l.POINT2(t[0]),e[i].style=0,i++,e[i]=new l.POINT2(t[1]),e[i].style=5,i++,E=(Math.sqrt((o[1].x-o[0].x)*(o[1].x-o[0].x)+(o[1].y-o[0].y)*(o[1].y-o[0].y))+Math.sqrt((o[2].x-o[1].x)*(o[2].x-o[1].x)+(o[2].y-o[1].y)*(o[2].y-o[1].y)))/15,E>d.maxLength*D&&(E=d.maxLength*D),E<d.minLength*D&&(E=d.minLength*D),c=Math.atan2(o[0].y-o[2].y,o[0].x-o[2].x),A=E*Math.cos(c-d.CONST_PI/6),I=E*Math.sin(c-d.CONST_PI/6),S=E*Math.cos(c+d.CONST_PI/6),y=E*Math.sin(c+d.CONST_PI/6),d.DrawEndpieceDeltasDouble(a[0],A,I,S,y,L),d.DrawEndpieceDeltasDouble(a[1],A,I,S,y,_),d.DrawEndpieceDeltasDouble(a[2],A,I,S,y,h),e[i]=new l.POINT2(L[1]),e[i].style=9,i++,e[i]=new l.POINT2(L[0]),e[i].style=9,i++,e[i]=new l.POINT2(L[3]),e[i].style=9,i++,e[i]=new l.POINT2(L[3]),e[i].style=10,i++,e[i]=new l.POINT2(_[1]),e[i].style=9,i++,e[i]=new l.POINT2(_[0]),e[i].style=9,i++,e[i]=new l.POINT2(_[3]),e[i].style=9,i++,e[i]=new l.POINT2(_[3]),e[i].style=10,i++,e[i]=new l.POINT2(h[1]),e[i].style=9,i++,e[i]=new l.POINT2(h[0]),e[i].style=9,i++,e[i]=new l.POINT2(h[3]),e[i].style=9,i++,e[i]=new l.POINT2(h[3]),e[i].style=10,i++}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMMinefieldDisruptDouble",new u.RendererException("Failed inside GetDISMMinefieldDisruptDouble",e))}return i}static GetDISMLinearTargetDouble(e,t,i){let a=0;try{let n=0,l=s.lineutility.MBRDistance(e,i-4),r=g.RendererSettings.getInstance().getDeviceDPI()/96;for(l/20>d.maxLength*r&&(l=20*d.maxLength*r),l/20<d.minLength*r&&(l=20*d.minLength*r),l<150*r&&(l=150*r),l>250*r&&(l=250*r),n=0;n<i-4;n++)e[a].style=0,a++;e[a-1].style=5,e[a]=s.lineutility.ExtendTrueLinePerpDouble(e[0],e[1],e[0],l/20,0),a++,e[a]=s.lineutility.ExtendTrueLinePerpDouble(e[0],e[1],e[0],-l/20,5),a++,e[a]=s.lineutility.ExtendTrueLinePerpDouble(e[i-5],e[i-6],e[i-5],l/20,0),a++,e[a]=s.lineutility.ExtendTrueLinePerpDouble(e[i-5],e[i-6],e[i-5],-l/20,5),a++,t===c.TacticalLines.FPF&&(e[0].style=6)}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMLinearTargetDouble",new u.RendererException("Failed inside GetDISMLinearTargetDouble",e))}return a}static GetDISMBlockDouble2(e,t){try{let i=new l.POINT2(e[2]),a=s.lineutility.MidPointDouble(e[0],e[1],0);e[0].style=0,e[1].style=5,e[2]=new l.POINT2(a),e[3]=new l.POINT2(i),t===c.TacticalLines.BLOCK&&(e[2].style=14),t===c.TacticalLines.FPF&&(e[2].style=6)}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMBlockDouble2",new u.RendererException("Failed inside GetDISMBlockDouble2",e))}}static GetDISMPAADouble(e,t){try{let t=new l.POINT2(e[0]),i=new l.POINT2(e[1]),a=new l.POINT2,n=new l.POINT2,r=new l.POINT2,o=s.lineutility.CalcDistanceDouble(t,i);r=s.lineutility.MidPointDouble(t,i,0),a=s.lineutility.ExtendTrueLinePerpDouble(t,i,r,o/2,0),n=s.lineutility.ExtendTrueLinePerpDouble(t,i,r,-o/2,0),o=s.lineutility.CalcDistanceDouble(t,a),e[0]=new l.POINT2(t),e[0].style=14,e[1]=new l.POINT2(a),e[1].style=14,e[2]=new l.POINT2(i),e[2].style=14,e[3]=new l.POINT2(n),e[3].style=14,e[4]=new l.POINT2(t),e[4].style=5}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMPAADouble",new u.RendererException("Failed inside GetDISMPAADouble",e))}}static ReverseDelayArc(e){let t=e[0],i=e[1],a=e[2],n=d.getAngleBetweenPoints(t.x,t.y,i.x,i.y),s=d.getAngleBetweenPoints(i.x,i.y,a.x,a.y),l=s+180;return!d.isInRange(s,l,n)}static isInRange(e,t,i){return i=d.normalizeAngle(i),(e=d.normalizeAngle(e))<(t=d.normalizeAngle(t))?e<=i&&i<=t:e<=i||i<=t}static getAngleBetweenPoints(e,t,i,a){return 180*Math.atan2(a-t,i-e)/Math.PI}static normalizeAngle(e){return(36e5+e)%360}static DrawEndpieceDeltasDouble(e,t,i,a,n,s){try{s[0]=new l.POINT2(e),s[0].style=0,s[1].x=e.x+t,s[1].y=e.y+i,s[1].style=5,s[2]=new l.POINT2(e),s[2].style=0,s[3].x=e.x+a,s[3].y=e.y+n,s[3].style=5}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"DrawEndpieceDeltasDouble",new u.RendererException("Failed inside DrawEndpieceDeltasDouble",e))}}static GetDISMEasyDouble(e,t){let i=0;try{let t=0,a=new Array(2),n=new Array(4),o=new Array(3),c=new Array(4),T=new Array(4),u=new r.ref,g=new r.ref,L=0;for(t=0;t<3;t++)o[t]=e[t];for(s.lineutility.InitializePOINT2Array(a),s.lineutility.InitializePOINT2Array(n),s.lineutility.InitializePOINT2Array(c),s.lineutility.InitializePOINT2Array(T),d.DrawOpenRectangleDouble(o,a,n),t=0;t<4;t++)e[i]=new l.POINT2(n[t]),e[i].style=0,i++;e[i-1].style=5,L=d.DetermineDirectionDouble(o),d.CalcEndpieceDeltasDouble(o,u,g,d.CONST_PI/4),o[0].y-o[1].y<0?0!==L?(d.DrawEndpieceDeltasDouble(o[0],u.value[0],g.value[0],g.value[0],-u.value[0],c),d.DrawEndpieceDeltasDouble(o[1],u.value[0],g.value[0],g.value[0],-u.value[0],T)):(d.DrawEndpieceDeltasDouble(o[0],g.value[0],-u.value[0],u.value[0],g.value[0],c),d.DrawEndpieceDeltasDouble(o[1],g.value[0],-u.value[0],u.value[0],g.value[0],T)):0!==L?(d.DrawEndpieceDeltasDouble(o[0],g.value[0],-u.value[0],u.value[0],g.value[0],c),d.DrawEndpieceDeltasDouble(o[1],g.value[0],-u.value[0],u.value[0],g.value[0],T)):(d.DrawEndpieceDeltasDouble(o[0],u.value[0],g.value[0],g.value[0],-u.value[0],c),d.DrawEndpieceDeltasDouble(o[1],u.value[0],g.value[0],g.value[0],-u.value[0],T)),e[i]=new l.POINT2(c[1]),e[i].style=9,i++,e[i]=new l.POINT2(c[0]),e[i].style=9,i++,e[i]=new l.POINT2(c[3]),e[i].style=9,i++,e[i]=new l.POINT2(c[3]),e[i].style=10,i++,e[i]=new l.POINT2(T[1]),e[i].style=9,i++,e[i]=new l.POINT2(T[0]),e[i].style=9,i++,e[i]=new l.POINT2(T[3]),e[i].style=9,i++,e[i]=new l.POINT2(T[3]),e[i].style=10,i++}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"GetDISMEasyDouble",new u.RendererException("Failed inside GetDISMEasyDouble",e))}return i}static AmbushPointsDouble(e){let t=0;try{let i=new Array(3),a=new Array(3),n=new l.POINT2,r=0,o=0,c=0,T=0,u=0,L=0,_=0,h=new Array(17),E=0,A=0,I=0,S=0,y=0,f=new l.POINT2,D=0,M=0,P=0;for(D=0;D<3;D++)a[D]=new l.POINT2(e[D]);s.lineutility.InitializePOINT2Array(h),s.lineutility.InitializePOINT2Array(i),n.x=(a[1].x+a[2].x)/2,n.y=(a[1].y+a[2].y)/2,r=Math.sqrt((n.x-a[2].x)*(n.x-a[2].x)+(n.y-a[2].y)*(n.y-a[2].y)),Math.sqrt((n.x-a[1].x)*(n.x-a[1].x)+(n.y-a[1].y)*(n.y-a[1].y)),c=Math.atan2(a[1].y-a[2].y,a[1].x-a[2].x),f.x=n.x+Math.cos(c-d.CONST_PI/2)*r,f.y=n.y+Math.sin(c-d.CONST_PI/2)*r;let R=Math.atan2(a[2].y-a[1].y,a[2].x-a[1].x),N=new l.POINT2;N.x=n.x+Math.cos(R-d.CONST_PI/2)*r,N.y=n.y+Math.sin(R-d.CONST_PI/2)*r;let C=s.lineutility.CalcDistanceDouble(a[0],f);if(s.lineutility.CalcDistanceDouble(a[0],N)>C){let e=new l.POINT2(a[1]);a[1]=new l.POINT2(a[2]),a[2]=new l.POINT2(e),f=new l.POINT2(N),c=R}for(r=Math.sqrt((a[1].x-f.x)*(a[1].x-f.x)+(a[1].y-f.y)*(a[1].y-f.y)),d.ArcApproximationDouble(f.x-r,f.y-r,f.x+r,f.y+r,a[2].x,a[2].y,a[1].x,a[1].y,h),D=0;D<17;D++)e[t]=new l.POINT2(h[D]),e[t].style=0,t++;e[t-1].style=5,i[0]=new l.POINT2(a[0]),T=Math.atan2(f.y-a[1].y,f.x-a[1].x),u=Math.atan2(f.y-a[2].y,f.x-a[2].x),L=(T+u)/2,T>0&&u<0?(i[1].x=f.x+Math.cos(L)*r,i[1].y=f.y+Math.sin(L)*r):(i[1].x=f.x-Math.cos(L)*r,i[1].y=f.y-Math.sin(L)*r),e[t]=new l.POINT2(i[0]),e[t].style=0,t++,e[t]=new l.POINT2(i[1]),e[t].style=5,t++,_=Math.atan2(i[1].y-a[0].y,i[1].x-a[0].x),P=(Math.sqrt((a[1].x-a[2].x)*(a[1].x-a[2].x)+(a[1].y-a[2].y)*(a[1].y-a[2].y))+Math.sqrt((a[0].x-n.x)*(a[0].x-n.x)+(a[0].y-n.y)*(a[0].y-n.y)))/20;let O=g.RendererSettings.getInstance().getDeviceDPI()/96;for(P>d.maxLength*O&&(P=d.maxLength*O),P<d.minLength*O&&(P=d.minLength*O),i[0].x=a[0].x+Math.cos(_+d.CONST_PI/6)*P,i[0].y=a[0].y+Math.sin(_+d.CONST_PI/6)*P,i[1]=a[0],i[2].x=a[0].x+Math.cos(_-d.CONST_PI/6)*P,i[2].y=a[0].y+Math.sin(_-d.CONST_PI/6)*P,D=0;D<3;D++)e[t]=new l.POINT2(i[D]),e[t].style=0,t++;for(e[t-1].style=5,o=r/3,o>d.maxLength*O&&(o=d.maxLength*O),o<d.minLength*O&&(o=d.minLength*O),E=d.CONST_PI/18,S=Math.cos(c+d.CONST_PI/2)*o,y=Math.sin(c+d.CONST_PI/2)*o,M=0;M<8;M++)T+=E,A=Math.cos(T)*r,I=Math.sin(T)*r,i[0].x=f.x-A,i[0].y=f.y-I,e[t]=new l.POINT2(i[0]),e[t].style=0,t++,i[1].x=i[0].x-S,i[1].y=i[0].y-y,e[t]=new l.POINT2(i[1]),e[t].style=5,t++}catch(e){if(!(e instanceof Error))throw e;T.ErrorLogger.LogException(d._className,"AmbushPointsDouble",new u.RendererException("Failed inside AmbushPointsDouble",e))}return t}}t.DISMSupport=d},4615:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGTextInfo=void 0;const a=i(628),n=i(9441),s=i(3170),l=i(3254),r=i(5955),o=i(7232);class c{_text;_font;_fontName;_fontSize=0;_fontStyle;_location;_bounds;_descent=0;_aboveBaseHeight=0;justification="start";angle=0;alignmentBaseline="alphabetic";constructor(...e){let t,i,l,r,T,u;switch(e.length){case 5:if(e[1]instanceof n.Point2D){const[a,s,o,c,T]=e;t=new OffscreenCanvas(10,10).getContext("2d"),t.font=o.toString(),this._font=o.toString(),this._fontName=o.getName(),this._fontSize=o.getSize(),this._fontStyle=o.getTypeString(),this._text=a,i=t.measureText(a),l=s.y-(i.fontBoundingBoxAscent+i.fontBoundingBoxDescent)/2,r=s.x,this._location=new n.Point2D(s.x,s.y),this.justification=c,this.angle=T,this.alignmentBaseline="middle"}else{const[s,o,c,T,u]=e;if(t=null==u?new OffscreenCanvas(10,10).getContext("2d"):u,"string"==typeof T){t.font=T;let e=T.split(" ");this._fontStyle=e[0],this._fontSize=parseInt(e[1].replace("px",""));for(let t=2;t<e.length;t++)2===t?this._fontName=e[t]:this._fontName+=" "+e[t]}else T instanceof a.Font&&(t.font=T.toString(),this._fontName=T.getName(),this._fontSize=T.getSize(),this._fontStyle=T.getTypeString());this._text=s,i=t.measureText(s),l=c-i.fontBoundingBoxAscent,r=o,this._location=new n.Point2D(o,c)}break;case 7:{const[a,s,o,c,T,u,g]=e;7===arguments.length&&(null==g?(t=new OffscreenCanvas(10,10).getContext("2d"),this._font=u+" "+T+"px "+c,t.font=this._font):t=g,this._fontStyle=u,this._fontSize=T,this._fontName=c,i=t.measureText(a),l=o-i.fontBoundingBoxAscent,r=s,this._location=new n.Point2D(s,o));break}}T=i.width,T=i.actualBoundingBoxRight+i.actualBoundingBoxLeft,u=i.fontBoundingBoxDescent+i.fontBoundingBoxAscent,"middle"==this.justification?r-=T/2:"end"==this.justification&&(r-=T),this._bounds=new s.Rectangle2D(r,l,T,u),o.RectUtilities.grow(this._bounds,1),0!=this.angle&&(this._bounds=c.getRotatedRectangleBounds(this._bounds,this.getLocation(),this.angle,this.justification)),this._descent=i.fontBoundingBoxDescent,this._aboveBaseHeight=i.fontBoundingBoxAscent}setLocation(e,t){this._bounds.setRect(e,t-this._aboveBaseHeight,this._bounds.getWidth(),this._bounds.getHeight()),o.RectUtilities.grow(this._bounds,1),this._location.setLocation(e,t)}getLocation(){return this._location}shift(e,t){r.ShapeUtilities.offset(this._bounds,e,t),r.ShapeUtilities.offset(this._location,e,t)}getText(){return this._text}getTextBounds(){return this._bounds}getTextOutlineBounds(){let e=l.RendererSettings.getInstance(),t=e.getTextOutlineWidth(),i=this._bounds.clone();return t>0&&(e.getTextBackgroundMethod()===l.RendererSettings.TextBackgroundMethod_OUTLINE?r.ShapeUtilities.grow(i,t/2):r.ShapeUtilities.grow(i,t)),i}getDescent(){return this._descent}toSVGElement(e,t,i=0,a=this.justification,n=0){let s=e,l=t,r=i;var o=0;n&&(o=n);let c=this._location.getX(),T=this._location.getY();var u;0==this.angle?u='<text x="'+c+'" y="'+T+'"':u+='<text transform="translate('+c+","+T+") rotate("+this.angle+')"',u+=' font-family="'+this._fontName+'"',u+=' font-size="'+this._fontSize+'px"',u+=' font-weight="'+this._fontStyle+'"',u+=' alignment-baseline="'+this.alignmentBaseline+'"',u+=' stroke-miterlimit="3"',u+=' text-anchor="'+a+'"';var g=null,L=null,d=this._text;return 1===o?d=(d=(d=(d=(d=(d=(d=d.replace(/\&/g,"&amp;")).replace(/\</g,"&lt;")).replace(/\</g,"&gt;")).replace(/\u2022|\u25CF/g,"&#x2022;")).replace(/\u00D8/g,"&#216;")).replace(/\u00B0/g,"&#176;")).replace(/\u00B1/g,"&#x00B1;"):2===o&&(d=encodeURIComponent(d)),null!=l&&r>0&&(g=2===o?u+' stroke="'+l.replace(/#/g,"%23")+'"':u+' stroke="'+l+'"',r&&(g+=' stroke-width="'+(r+2)+'"'),g+=' fill="none"',g+=">",g+=d,g+="</text>"),null!=s&&(L=2===o?u+' fill="'+s.replace(/#/g,"%23")+'"':u+' fill="'+s+'"',L+=">",L+=d,L+="</text>"),l&&s?g+L:s?L:""}static getRotatedRectangleBounds(e,t,i,a="middle"){const l=e.getWidth();"start"==a?e.x-=l/2:"end"==a&&(e.x+=l/2);let r=new n.Point2D(e.getMinX(),e.getMinY()),o=new n.Point2D(e.getMaxX(),e.getMinY()),T=new n.Point2D(e.getMinX(),e.getMaxY()),u=new n.Point2D(e.getMaxX(),e.getMaxY());if(c.rotatePoint(r,t,i),c.rotatePoint(o,t,i),c.rotatePoint(T,t,i),c.rotatePoint(u,t,i),(e=new s.Rectangle2D(r.x,r.y,0,0)).add(o.x,o.y),e.add(T.x,T.y),e.add(u.x,u.y),"start"==a){const t=Math.sin(2*i*Math.PI/360),a=Math.cos(2*i*Math.PI/360);e.x+=l/2*a,e.y+=l/2*t}else if("end"==a){const t=Math.sin(2*i*Math.PI/360),a=Math.cos(2*i*Math.PI/360);e.x-=l/2*a,e.y-=l/2*t}return e}static rotatePoint(e,t,i){const a=Math.sin(2*-i*Math.PI/360),n=Math.cos(2*-i*Math.PI/360);e.x-=t.x,e.y-=t.y;let s=e.x*n-e.y*a,l=e.x*a+e.y*n;e.x=s+t.x,e.y=l+t.y}}t.SVGTextInfo=c},4686:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeoPixelConversion=void 0;const a=i(3254);class n{static INCHES_PER_METER=39.3700787;static METERS_PER_DEG=40075017/360;static metersPerPixel(e){return e/a.RendererSettings.getInstance().getDeviceDPI()/n.INCHES_PER_METER}static lat2y(e,t,i,a){return-(e-i)*n.METERS_PER_DEG/a}static y2lat(e,t,i,a){return i-e*a/n.METERS_PER_DEG}static long2x(e,t,i,a,s,l){let r=e-i;return l&&(r>180&&(r-=360),r<-180&&(r+=360)),r*n.GetMetersPerDegAtLat(a)/s}static x2long(e,t,i,a,s){let l=i+e*s/n.GetMetersPerDegAtLat(a);return l<-180?l+=360:l>180&&(l-=360),l}static Deg2Rad(e){return e*(2*Math.PI/360)}static GetMetersPerDegAtLat(e){return e=n.Deg2Rad(e),111412.84*Math.cos(e)+-93.5*Math.cos(3*e)+.118*Math.cos(5*e)}}t.GeoPixelConversion=n},4738:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clsMETOC=void 0;const a=i(8087),n=i(1358),s=i(4305),l=i(8485),r=i(1207),o=i(7389),c=i(5772),T=i(8101),u=i(6621),g=i(3515),L=i(2937),d=i(8113),_=i(7300),h=i(106),E=i(3254),A=i(2421),I=i(8678);class S{static _className="clsMETOC";static getWeatherLinetype(e,t){switch(t){case 110301:return T.TacticalLines.CF;case 110302:return T.TacticalLines.UCF;case 110303:return T.TacticalLines.CFG;case 110304:return T.TacticalLines.CFY;case 110305:return T.TacticalLines.WF;case 110306:return T.TacticalLines.UWF;case 110307:return T.TacticalLines.WFG;case 110308:return T.TacticalLines.WFY;case 110309:return T.TacticalLines.OCCLUDED;case 110310:return T.TacticalLines.UOF;case 110311:return T.TacticalLines.OFY;case 110312:return T.TacticalLines.SF;case 110313:return T.TacticalLines.USF;case 110314:return T.TacticalLines.SFG;case 110315:return T.TacticalLines.SFY;case 110401:return T.TacticalLines.TROUGH;case 110402:return T.TacticalLines.UPPER_TROUGH;case 110403:return T.TacticalLines.RIDGE;case 110404:return T.TacticalLines.SQUALL;case 110405:return T.TacticalLines.INSTABILITY;case 110406:return T.TacticalLines.SHEAR;case 110407:return T.TacticalLines.ITC;case 110408:return T.TacticalLines.CONVERGENCE;case 110409:return T.TacticalLines.ITD;case 140300:return T.TacticalLines.JET;case 140400:return T.TacticalLines.STREAM;case 162004:break;case 170100:return T.TacticalLines.IFR;case 170200:return T.TacticalLines.MVFR;case 170300:return T.TacticalLines.TURBULENCE;case 170400:return T.TacticalLines.ICING;case 170500:return T.TacticalLines.NON_CONVECTIVE;case 170501:return T.TacticalLines.CONVECTIVE;case 170600:return T.TacticalLines.FROZEN;case 170700:return T.TacticalLines.THUNDERSTORMS;case 170800:return T.TacticalLines.FOG;case 170900:return T.TacticalLines.SAND;case 171e3:return T.TacticalLines.FREEFORM;case 180100:return T.TacticalLines.ISOBAR;case 180200:return T.TacticalLines.UPPER_AIR;case 180300:return T.TacticalLines.ISOTHERM;case 180400:return T.TacticalLines.ISOTACH;case 180500:return T.TacticalLines.ISODROSOTHERM;case 180600:return T.TacticalLines.ISOPLETHS;case 180700:return T.TacticalLines.OPERATOR_FREEFORM;case 110501:return T.TacticalLines.LVO;case 110502:return T.TacticalLines.UNDERCAST;case 110503:return T.TacticalLines.LRO;case 110504:return T.TacticalLines.ICE_EDGE;case 110505:return T.TacticalLines.ESTIMATED_ICE_EDGE;case 110506:return T.TacticalLines.ICE_EDGE_RADAR;case 110601:return T.TacticalLines.CRACKS;case 110602:return T.TacticalLines.CRACKS_SPECIFIC_LOCATION;case 110603:return T.TacticalLines.ICE_OPENINGS_LEAD;case 110604:return T.TacticalLines.ICE_OPENINGS_FROZEN;case 120102:return T.TacticalLines.DEPTH_CURVE;case 120103:return T.TacticalLines.DEPTH_CONTOUR;case 120104:return T.TacticalLines.DEPTH_AREA;case 120201:return T.TacticalLines.COASTLINE;case 120202:return T.TacticalLines.ISLAND;case 120203:return T.TacticalLines.BEACH;case 120204:return T.TacticalLines.WATER;case 120205:return T.TacticalLines.FORESHORE_LINE;case 120206:return T.TacticalLines.FORESHORE_AREA;case 120305:return T.TacticalLines.ANCHORAGE_LINE;case 120306:return T.TacticalLines.ANCHORAGE_AREA;case 120308:return T.TacticalLines.PIER;case 120312:return T.TacticalLines.FISH_TRAPS;case 120314:return T.TacticalLines.DRYDOCK;case 120317:return T.TacticalLines.LOADING_FACILITY_LINE;case 120318:return T.TacticalLines.LOADING_FACILITY_AREA;case 120319:return T.TacticalLines.RAMP_ABOVE_WATER;case 120320:return T.TacticalLines.RAMP_BELOW_WATER;case 120326:return T.TacticalLines.JETTY_ABOVE_WATER;case 120327:return T.TacticalLines.JETTY_BELOW_WATER;case 120328:return T.TacticalLines.SEAWALL;case 120405:return T.TacticalLines.PERCHES;case 120407:return T.TacticalLines.LEADING_LINE;case 120503:return T.TacticalLines.UNDERWATER_HAZARD;case 120505:return T.TacticalLines.FOUL_GROUND;case 120507:return T.TacticalLines.KELP;case 120511:return T.TacticalLines.BREAKERS;case 120512:return T.TacticalLines.REEF;case 120514:return T.TacticalLines.DISCOLORED_WATER;case 120702:return T.TacticalLines.EBB_TIDE;case 120703:return T.TacticalLines.FLOOD_TIDE;case 130101:return T.TacticalLines.VDR_LEVEL_12;case 130102:return T.TacticalLines.VDR_LEVEL_23;case 130103:return T.TacticalLines.VDR_LEVEL_34;case 130104:return T.TacticalLines.VDR_LEVEL_45;case 130105:return T.TacticalLines.VDR_LEVEL_56;case 130106:return T.TacticalLines.VDR_LEVEL_67;case 130107:return T.TacticalLines.VDR_LEVEL_78;case 130108:return T.TacticalLines.VDR_LEVEL_89;case 130109:return T.TacticalLines.VDR_LEVEL_910;case 130201:return T.TacticalLines.BEACH_SLOPE_FLAT;case 130202:return T.TacticalLines.BEACH_SLOPE_GENTLE;case 130203:return T.TacticalLines.BEACH_SLOPE_MODERATE;case 130204:return T.TacticalLines.BEACH_SLOPE_STEEP;case 140101:return T.TacticalLines.SOLID_ROCK;case 140102:return T.TacticalLines.CLAY;case 140103:return T.TacticalLines.VERY_COARSE_SAND;case 140104:return T.TacticalLines.COARSE_SAND;case 140105:return T.TacticalLines.MEDIUM_SAND;case 140106:return T.TacticalLines.FINE_SAND;case 140107:return T.TacticalLines.VERY_FINE_SAND;case 140108:return T.TacticalLines.VERY_FINE_SILT;case 140109:return T.TacticalLines.FINE_SILT;case 140110:return T.TacticalLines.MEDIUM_SILT;case 140111:return T.TacticalLines.COARSE_SILT;case 140112:return T.TacticalLines.BOULDERS;case 140113:return T.TacticalLines.OYSTER_SHELLS;case 140114:return T.TacticalLines.PEBBLES;case 140115:return T.TacticalLines.SAND_AND_SHELLS;case 140116:return T.TacticalLines.BOTTOM_SEDIMENTS_LAND;case 140117:return T.TacticalLines.BOTTOM_SEDIMENTS_NO_DATA;case 140118:return T.TacticalLines.BOTTOM_ROUGHNESS_SMOOTH;case 140119:return T.TacticalLines.BOTTOM_ROUGHNESS_MODERATE;case 140120:return T.TacticalLines.BOTTOM_ROUGHNESS_ROUGH;case 140121:return T.TacticalLines.CLUTTER_LOW;case 140122:return T.TacticalLines.CLUTTER_MEDIUM;case 140123:return T.TacticalLines.CLUTTER_HIGH;case 140124:return T.TacticalLines.IMPACT_BURIAL_0;case 140125:return T.TacticalLines.IMPACT_BURIAL_10;case 140126:return T.TacticalLines.IMPACT_BURIAL_20;case 140127:return T.TacticalLines.IMPACT_BURIAL_75;case 140128:return T.TacticalLines.IMPACT_BURIAL_100;case 140129:return T.TacticalLines.BOTTOM_CATEGORY_A;case 140130:return T.TacticalLines.BOTTOM_CATEGORY_B;case 140131:return T.TacticalLines.BOTTOM_CATEGORY_C;case 140132:return T.TacticalLines.BOTTOM_TYPE_A1;case 140133:return T.TacticalLines.BOTTOM_TYPE_A2;case 140134:return T.TacticalLines.BOTTOM_TYPE_A3;case 140135:return T.TacticalLines.BOTTOM_TYPE_B1;case 140136:return T.TacticalLines.BOTTOM_TYPE_B2;case 140137:return T.TacticalLines.BOTTOM_TYPE_B3;case 140138:return T.TacticalLines.BOTTOM_TYPE_C1;case 140139:return T.TacticalLines.BOTTOM_TYPE_C2;case 140140:return T.TacticalLines.BOTTOM_TYPE_C3;case 150100:return T.TacticalLines.MARITIME_LIMIT;case 150200:return T.TacticalLines.MARITIME_AREA;case 150300:return T.TacticalLines.RESTRICTED_AREA;case 150400:return T.TacticalLines.SWEPT_AREA;case 150500:return T.TacticalLines.TRAINING_AREA;case 150600:return T.TacticalLines.OPERATOR_DEFINED;case 160100:return T.TacticalLines.CABLE;case 160200:return T.TacticalLines.SUBMERGED_CRIB;case 160300:return T.TacticalLines.CANAL;case 160700:return T.TacticalLines.OIL_RIG_FIELD;case 160800:return T.TacticalLines.PIPE;default:return-1}return-1}static IsWeather(e){try{if(null==e)return-1;if(e.length>15){let t=A.SymbolID.getSymbolSet(e),i=A.SymbolID.getEntityCode(e),a=A.SymbolID.getVersion(e);switch(t){case 45:case 46:return S.getWeatherLinetype(a,i)}}}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"isWeather",new h.RendererException("Failed inside isWeather",e))}return-1}static SetMeTOCProperties(e){try{switch(e.get_SymbolId(),e.get_LineType()){case T.TacticalLines.SQUALL:e.set_LineColor(d.Color.BLACK),e.set_lineCap(a.BasicStroke.CAP_BUTT);break;case T.TacticalLines.TROUGH:e.set_LineStyle(1),e.set_LineColor(d.Color.BLACK),e.set_lineCap(a.BasicStroke.CAP_ROUND);break;case T.TacticalLines.UPPER_TROUGH:e.set_LineColor(d.Color.BLACK),e.set_lineCap(a.BasicStroke.CAP_ROUND);break;case T.TacticalLines.BOTTOM_TYPE_A1:e.set_LineColor(new d.Color(48,255,0)),e.set_FillColor(new d.Color(48,255,0));break;case T.TacticalLines.BOTTOM_TYPE_A2:e.set_LineColor(new d.Color(127,255,0)),e.set_FillColor(new d.Color(127,255,0));break;case T.TacticalLines.BOTTOM_TYPE_C2:e.set_LineColor(new d.Color(255,80,0)),e.set_FillColor(new d.Color(255,80,0));break;case T.TacticalLines.BOTTOM_TYPE_C3:e.set_LineColor(new d.Color(255,48,0)),e.set_FillColor(new d.Color(255,48,0));break;case T.TacticalLines.IMPACT_BURIAL_0:e.set_LineColor(new d.Color(0,0,255)),e.set_FillColor(new d.Color(0,0,255));break;case T.TacticalLines.BOTTOM_TYPE_C1:case T.TacticalLines.IMPACT_BURIAL_75:e.set_LineColor(new d.Color(255,127,0)),e.set_FillColor(new d.Color(255,127,0));break;case T.TacticalLines.BOTTOM_CATEGORY_C:case T.TacticalLines.IMPACT_BURIAL_100:case T.TacticalLines.CLUTTER_HIGH:case T.TacticalLines.BOTTOM_ROUGHNESS_ROUGH:e.set_LineColor(new d.Color(255,0,0)),e.set_FillColor(new d.Color(255,0,0));break;case T.TacticalLines.BOTTOM_TYPE_B2:case T.TacticalLines.BOTTOM_CATEGORY_B:case T.TacticalLines.IMPACT_BURIAL_20:case T.TacticalLines.CLUTTER_MEDIUM:case T.TacticalLines.BOTTOM_ROUGHNESS_MODERATE:e.set_LineColor(new d.Color(255,255,0)),e.set_FillColor(new d.Color(255,255,0));break;case T.TacticalLines.BOTTOM_CATEGORY_A:case T.TacticalLines.IMPACT_BURIAL_10:case T.TacticalLines.CLUTTER_LOW:case T.TacticalLines.BOTTOM_ROUGHNESS_SMOOTH:e.set_LineColor(new d.Color(0,255,0)),e.set_FillColor(new d.Color(0,255,0));break;case T.TacticalLines.BOTTOM_SEDIMENTS_NO_DATA:e.set_LineColor(new d.Color(230,230,230)),e.set_FillColor(new d.Color(230,230,230));break;case T.TacticalLines.BOTTOM_SEDIMENTS_LAND:e.set_LineColor(new d.Color(220,220,220)),e.set_FillColor(new d.Color(220,220,220));break;case T.TacticalLines.SAND_AND_SHELLS:e.set_LineColor(new d.Color(255,220,220)),e.set_FillColor(new d.Color(255,220,220));break;case T.TacticalLines.PEBBLES:e.set_LineColor(new d.Color(255,190,190)),e.set_FillColor(new d.Color(255,190,190));break;case T.TacticalLines.OYSTER_SHELLS:e.set_LineColor(new d.Color(255,150,150)),e.set_FillColor(new d.Color(255,150,150));break;case T.TacticalLines.BOULDERS:e.set_LineColor(new d.Color(255,0,0)),e.set_FillColor(new d.Color(255,0,0));break;case T.TacticalLines.COARSE_SILT:e.set_LineColor(new d.Color(200,255,105)),e.set_FillColor(new d.Color(200,255,105));break;case T.TacticalLines.MEDIUM_SILT:e.set_LineColor(new d.Color(0,255,0)),e.set_FillColor(new d.Color(0,255,0));break;case T.TacticalLines.FINE_SILT:e.set_LineColor(new d.Color(25,255,230)),e.set_FillColor(new d.Color(25,255,230));break;case T.TacticalLines.VERY_FINE_SILT:e.set_LineColor(new d.Color(0,215,255)),e.set_FillColor(new d.Color(0,215,255));break;case T.TacticalLines.VERY_FINE_SAND:e.set_LineColor(new d.Color(255,255,220)),e.set_FillColor(new d.Color(255,255,220));break;case T.TacticalLines.FINE_SAND:e.set_LineColor(new d.Color(255,255,140)),e.set_FillColor(new d.Color(255,255,140));break;case T.TacticalLines.MEDIUM_SAND:e.set_LineColor(new d.Color(255,235,0)),e.set_FillColor(new d.Color(255,235,0));break;case T.TacticalLines.COARSE_SAND:e.set_LineColor(new d.Color(255,215,0)),e.set_FillColor(new d.Color(255,215,0));break;case T.TacticalLines.BOTTOM_TYPE_B3:e.set_LineColor(new d.Color(255,207,0)),e.set_FillColor(new d.Color(255,207,0));break;case T.TacticalLines.VERY_COARSE_SAND:e.set_LineColor(new d.Color(255,180,0)),e.set_FillColor(new d.Color(255,180,0));break;case T.TacticalLines.CLAY:e.set_LineColor(new d.Color(100,130,255)),e.set_FillColor(new d.Color(100,130,255));break;case T.TacticalLines.SOLID_ROCK:e.set_LineColor(new d.Color(255,0,255)),e.set_FillColor(new d.Color(255,0,255));break;case T.TacticalLines.VDR_LEVEL_12:e.set_LineColor(new d.Color(26,153,77)),e.set_FillColor(new d.Color(26,153,77));break;case T.TacticalLines.VDR_LEVEL_23:e.set_LineColor(new d.Color(26,204,77)),e.set_FillColor(new d.Color(26,204,77));break;case T.TacticalLines.BOTTOM_TYPE_A3:e.set_LineColor(new d.Color(175,255,0)),e.set_FillColor(new d.Color(175,255,0));break;case T.TacticalLines.VDR_LEVEL_34:e.set_LineColor(new d.Color(128,255,51)),e.set_FillColor(new d.Color(128,255,51));break;case T.TacticalLines.BOTTOM_TYPE_B1:e.set_LineColor(new d.Color(207,255,0)),e.set_FillColor(new d.Color(207,255,0));break;case T.TacticalLines.VDR_LEVEL_45:e.set_LineColor(new d.Color(204,255,26)),e.set_FillColor(new d.Color(204,255,26));break;case T.TacticalLines.VDR_LEVEL_56:e.set_LineColor(new d.Color(255,255,0)),e.set_FillColor(new d.Color(255,255,0));break;case T.TacticalLines.VDR_LEVEL_67:e.set_LineColor(new d.Color(255,204,0)),e.set_FillColor(new d.Color(255,204,0));break;case T.TacticalLines.VDR_LEVEL_78:e.set_LineColor(new d.Color(255,128,0)),e.set_FillColor(new d.Color(255,128,0));break;case T.TacticalLines.VDR_LEVEL_89:e.set_LineColor(new d.Color(255,77,0)),e.set_FillColor(new d.Color(255,77,0));break;case T.TacticalLines.VDR_LEVEL_910:e.set_LineColor(d.Color.RED),e.set_FillColor(d.Color.RED);break;case T.TacticalLines.CANAL:e.set_LineColor(d.Color.BLACK),e.set_LineThickness(2*e.get_LineThickness());break;case T.TacticalLines.OPERATOR_DEFINED:e.set_LineColor(new d.Color(255,128,0));break;case T.TacticalLines.MARITIME_LIMIT:case T.TacticalLines.MARITIME_AREA:e.set_LineColor(d.Color.MAGENTA),e.set_LineStyle(1);break;case T.TacticalLines.PERCHES:case T.TacticalLines.SUBMERGED_CRIB:e.set_LineColor(d.Color.BLACK),e.set_LineStyle(2),e.set_lineCap(a.BasicStroke.CAP_ROUND),e.set_FillColor(d.Color.BLUE);break;case T.TacticalLines.DISCOLORED_WATER:case T.TacticalLines.UNDERWATER_HAZARD:e.set_LineColor(d.Color.BLACK),e.set_LineStyle(2),e.set_FillColor(new d.Color(0,191,255));break;case T.TacticalLines.LOADING_FACILITY_AREA:e.set_LineColor(new d.Color(210,180,140)),e.set_FillColor(new d.Color(210,180,140));break;case T.TacticalLines.LOADING_FACILITY_LINE:e.set_LineColor(d.Color.GRAY),e.set_LineThickness(2*e.get_LineThickness());break;case T.TacticalLines.DRYDOCK:e.set_LineColor(d.Color.BLACK),e.set_FillColor(new d.Color(205,133,63)),e.set_LineStyle(1);break;case T.TacticalLines.FORESHORE_AREA:e.set_LineColor(new d.Color(173,255,47)),e.set_FillColor(new d.Color(173,255,47));break;case T.TacticalLines.FORESHORE_LINE:e.set_LineColor(new d.Color(173,255,47));break;case T.TacticalLines.RESTRICTED_AREA:case T.TacticalLines.TRAINING_AREA:case T.TacticalLines.ANCHORAGE_LINE:case T.TacticalLines.ANCHORAGE_AREA:e.set_LineColor(d.Color.MAGENTA);break;case T.TacticalLines.PIPE:e.set_LineColor(d.Color.GRAY),e.set_FillColor(d.Color.GRAY);break;case T.TacticalLines.WATER:e.set_LineColor(d.Color.WHITE),e.set_FillColor(d.Color.WHITE);break;case T.TacticalLines.FISH_TRAPS:e.set_LineColor(new d.Color(192,192,192)),e.set_LineStyle(1);break;case T.TacticalLines.SWEPT_AREA:case T.TacticalLines.OIL_RIG_FIELD:case T.TacticalLines.FOUL_GROUND:case T.TacticalLines.KELP:e.set_LineColor(null);break;case T.TacticalLines.BEACH:e.set_LineColor(new d.Color(206,158,140)),e.set_FillColor(new d.Color(206,158,140,Math.trunc(255*.12)));break;case T.TacticalLines.DEPTH_AREA:e.set_LineColor(d.Color.BLUE),e.set_FillColor(d.Color.WHITE);break;case T.TacticalLines.CONVERGENCE:case T.TacticalLines.ITC:e.set_LineColor(new d.Color(255,128,0)),e.set_lineCap(a.BasicStroke.CAP_BUTT);break;case T.TacticalLines.OFY:case T.TacticalLines.OCCLUDED:e.set_LineColor(new d.Color(160,32,240)),e.set_FillColor(new d.Color(160,32,240));break;case T.TacticalLines.UOF:e.set_LineColor(new d.Color(160,32,240));break;case T.TacticalLines.WFY:case T.TacticalLines.WFG:case T.TacticalLines.WF:e.set_FillColor(d.Color.RED),e.set_LineColor(d.Color.RED);break;case T.TacticalLines.UWF:case T.TacticalLines.IFR:e.set_LineColor(d.Color.RED);break;case T.TacticalLines.CFG:case T.TacticalLines.CFY:case T.TacticalLines.CF:e.set_LineColor(d.Color.BLUE),e.set_FillColor(d.Color.BLUE);break;case T.TacticalLines.UCF:case T.TacticalLines.MVFR:e.set_LineColor(d.Color.BLUE);break;case T.TacticalLines.TURBULENCE:{e.set_LineColor(d.Color.BLUE),e.set_LineStyle(2),e.set_lineCap(a.BasicStroke.CAP_ROUND);let t=6*Math.max(E.RendererSettings.getInstance().getDeviceDPI()/96,1);e.get_LineThickness()<t&&e.set_LineThickness(t);break}case T.TacticalLines.CABLE:e.set_LineColor(d.Color.MAGENTA);break;case T.TacticalLines.ISLAND:e.set_LineColor(new d.Color(210,180,140)),e.set_FillColor(new d.Color(210,180,140));break;case T.TacticalLines.SEAWALL:case T.TacticalLines.SEAWALL_GE:case T.TacticalLines.FLOOD_TIDE:case T.TacticalLines.FLOOD_TIDE_GE:case T.TacticalLines.EBB_TIDE:case T.TacticalLines.EBB_TIDE_GE:case T.TacticalLines.JETTY_ABOVE_WATER:case T.TacticalLines.JETTY_ABOVE_WATER_GE:e.set_LineColor(d.Color.GRAY);break;case T.TacticalLines.BEACH_SLOPE_MODERATE:case T.TacticalLines.BEACH_SLOPE_FLAT:e.set_LineColor(new d.Color(179,179,179)),e.set_FillColor(null);break;case T.TacticalLines.BEACH_SLOPE_GENTLE:case T.TacticalLines.BEACH_SLOPE_STEEP:e.set_LineColor(new d.Color(128,128,128)),e.set_FillColor(null);break;case T.TacticalLines.BREAKERS:case T.TacticalLines.JETTY_BELOW_WATER:case T.TacticalLines.JETTY_BELOW_WATER_GE:e.set_LineStyle(1),e.set_LineColor(d.Color.GRAY);break;case T.TacticalLines.DEPTH_CURVE:case T.TacticalLines.DEPTH_CURVE_GE:case T.TacticalLines.DEPTH_CONTOUR:case T.TacticalLines.DEPTH_CONTOUR_GE:case T.TacticalLines.COASTLINE:case T.TacticalLines.COASTLINE_GE:case T.TacticalLines.PIER:case T.TacticalLines.PIER_GE:e.set_LineColor(d.Color.GRAY);break;case T.TacticalLines.FROZEN:case T.TacticalLines.JET:case T.TacticalLines.JET_GE:e.set_LineColor(d.Color.RED);break;case T.TacticalLines.THUNDERSTORMS:e.set_LineColor(d.Color.RED),e.set_LineStyle(3);break;case T.TacticalLines.RAMP_BELOW_WATER:case T.TacticalLines.RAMP_BELOW_WATER_GE:case T.TacticalLines.ESTIMATED_ICE_EDGE:case T.TacticalLines.ESTIMATED_ICE_EDGE_GE:e.set_LineStyle(1),e.set_LineColor(d.Color.BLACK);break;case T.TacticalLines.ISODROSOTHERM:case T.TacticalLines.ISODROSOTHERM_GE:e.set_LineColor(d.Color.GREEN);break;case T.TacticalLines.LRO:case T.TacticalLines.UNDERCAST:case T.TacticalLines.LVO:case T.TacticalLines.RIDGE:case T.TacticalLines.ICE_OPENINGS_LEAD:case T.TacticalLines.ICE_OPENINGS_LEAD_GE:case T.TacticalLines.ICE_OPENINGS_FROZEN:case T.TacticalLines.ICE_OPENINGS_FROZEN_GE:case T.TacticalLines.LEADING_LINE:case T.TacticalLines.STREAM:case T.TacticalLines.STREAM_GE:case T.TacticalLines.CRACKS:case T.TacticalLines.CRACKS_GE:case T.TacticalLines.CRACKS_SPECIFIC_LOCATION:case T.TacticalLines.CRACKS_SPECIFIC_LOCATION_GE:case T.TacticalLines.ISOBAR:case T.TacticalLines.ISOBAR_GE:case T.TacticalLines.UPPER_AIR:case T.TacticalLines.UPPER_AIR_GE:case T.TacticalLines.ICE_EDGE:case T.TacticalLines.ICE_EDGE_GE:case T.TacticalLines.ICE_EDGE_RADAR:case T.TacticalLines.ICE_EDGE_RADAR_GE:case T.TacticalLines.REEF:e.set_LineColor(d.Color.BLACK);break;case T.TacticalLines.INSTABILITY:e.set_LineStyle(4),e.set_lineCap(a.BasicStroke.CAP_ROUND),e.set_LineColor(d.Color.BLACK);break;case T.TacticalLines.SHEAR:e.set_LineStyle(3),e.set_lineCap(a.BasicStroke.CAP_ROUND),e.set_LineColor(d.Color.BLACK);break;case T.TacticalLines.ISOPLETHS:case T.TacticalLines.ISOPLETHS_GE:case T.TacticalLines.ISOTHERM:case T.TacticalLines.ISOTHERM_GE:e.set_LineStyle(1),e.set_LineColor(d.Color.RED);break;case T.TacticalLines.ISOTACH:case T.TacticalLines.ISOTACH_GE:e.set_LineStyle(1),e.set_LineColor(new d.Color(160,32,240));break;case T.TacticalLines.SAND:e.set_LineColor(new d.Color(165,121,82));break;case T.TacticalLines.ICING:e.set_LineColor(new d.Color(189,154,56));break;case T.TacticalLines.NON_CONVECTIVE:e.set_LineColor(d.Color.GREEN);break;case T.TacticalLines.CONVECTIVE:e.set_LineColor(d.Color.GREEN),e.set_LineStyle(3);break;case T.TacticalLines.FOG:e.set_LineColor(d.Color.YELLOW);break;case T.TacticalLines.RAMP_ABOVE_WATER:case T.TacticalLines.RAMP_ABOVE_WATER_GE:e.set_LineColor(d.Color.BLACK)}}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"SetMeTOCProperties",new h.RendererException("Failed inside SetMeTOCProperties",e))}}static ExtrapolatePointFromCurve(e,t,i){try{let a=Math.cos(i),n=Math.sin(i),s=t.x*a+t.y*n;for(let t=0;t<e.length-1;t++){let i=e[t].x*a+e[t].y*n,l=e[t+1].x*a+e[t+1].y*n;if(i<=s&&l>=s||i>=s&&l<=s){let r=-e[t].x*n+e[t].y*a,c=r+(s-i)*((-e[t+1].x*n+e[t+1].y*a-r)/(l-i)),T=s*a-c*n,u=s*n+c*a;return new o.POINT2(T,u)}}}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"ExtrapolatePointFromCurve",new h.RendererException("Failed inside ExtrapolatePointFromCurve",e))}return null}static GetMeTOCShape(e,t){try{if(null==t)return;let i,a,l,r,o,g,L,d,_,h=new Array,E=new Array,A=0,I=0,y=0,f=e.Pixels[e.Pixels.length-1],D=0,M=0,P=0,R=0;switch(L=null,S.SetMeTOCProperties(e),e.get_LineType()){case T.TacticalLines.SF:case T.TacticalLines.USF:case T.TacticalLines.SFG:case T.TacticalLines.SFY:case T.TacticalLines.WFY:case T.TacticalLines.WFG:case T.TacticalLines.WF:case T.TacticalLines.UWF:case T.TacticalLines.UCF:case T.TacticalLines.CF:case T.TacticalLines.CFG:case T.TacticalLines.CFY:case T.TacticalLines.OCCLUDED:case T.TacticalLines.UOF:case T.TacticalLines.OFY:case T.TacticalLines.TROUGH:case T.TacticalLines.UPPER_TROUGH:case T.TacticalLines.CABLE:case T.TacticalLines.INSTABILITY:case T.TacticalLines.SHEAR:case T.TacticalLines.RIDGE:case T.TacticalLines.SQUALL:case T.TacticalLines.ITC:case T.TacticalLines.CONVERGENCE:case T.TacticalLines.ITD:case T.TacticalLines.IFR:case T.TacticalLines.MVFR:case T.TacticalLines.TURBULENCE:case T.TacticalLines.ICING:case T.TacticalLines.NON_CONVECTIVE:case T.TacticalLines.CONVECTIVE:case T.TacticalLines.FROZEN:case T.TacticalLines.THUNDERSTORMS:case T.TacticalLines.FOG:case T.TacticalLines.SAND:case T.TacticalLines.FREEFORM:case T.TacticalLines.OPERATOR_FREEFORM:case T.TacticalLines.LVO:case T.TacticalLines.UNDERCAST:case T.TacticalLines.LRO:case T.TacticalLines.DEPTH_AREA:case T.TacticalLines.ISLAND:case T.TacticalLines.BEACH:case T.TacticalLines.WATER:case T.TacticalLines.FISH_TRAPS:case T.TacticalLines.SWEPT_AREA:case T.TacticalLines.OIL_RIG_FIELD:case T.TacticalLines.FOUL_GROUND:case T.TacticalLines.KELP:case T.TacticalLines.BEACH_SLOPE_MODERATE:case T.TacticalLines.BEACH_SLOPE_STEEP:case T.TacticalLines.ANCHORAGE_AREA:case T.TacticalLines.ANCHORAGE_LINE:case T.TacticalLines.PIPE:case T.TacticalLines.TRAINING_AREA:case T.TacticalLines.RESTRICTED_AREA:case T.TacticalLines.REEF:case T.TacticalLines.FORESHORE_AREA:case T.TacticalLines.FORESHORE_LINE:case T.TacticalLines.DRYDOCK:case T.TacticalLines.LOADING_FACILITY_LINE:case T.TacticalLines.LOADING_FACILITY_AREA:case T.TacticalLines.PERCHES:case T.TacticalLines.UNDERWATER_HAZARD:case T.TacticalLines.BREAKERS:case T.TacticalLines.DISCOLORED_WATER:case T.TacticalLines.BEACH_SLOPE_FLAT:case T.TacticalLines.BEACH_SLOPE_GENTLE:case T.TacticalLines.MARITIME_LIMIT:case T.TacticalLines.MARITIME_AREA:case T.TacticalLines.OPERATOR_DEFINED:case T.TacticalLines.SUBMERGED_CRIB:case T.TacticalLines.CANAL:case T.TacticalLines.VDR_LEVEL_12:case T.TacticalLines.VDR_LEVEL_23:case T.TacticalLines.VDR_LEVEL_34:case T.TacticalLines.VDR_LEVEL_45:case T.TacticalLines.VDR_LEVEL_56:case T.TacticalLines.VDR_LEVEL_67:case T.TacticalLines.VDR_LEVEL_78:case T.TacticalLines.VDR_LEVEL_89:case T.TacticalLines.VDR_LEVEL_910:case T.TacticalLines.SOLID_ROCK:case T.TacticalLines.CLAY:case T.TacticalLines.VERY_COARSE_SAND:case T.TacticalLines.COARSE_SAND:case T.TacticalLines.MEDIUM_SAND:case T.TacticalLines.FINE_SAND:case T.TacticalLines.VERY_FINE_SAND:case T.TacticalLines.VERY_FINE_SILT:case T.TacticalLines.FINE_SILT:case T.TacticalLines.MEDIUM_SILT:case T.TacticalLines.COARSE_SILT:case T.TacticalLines.BOULDERS:case T.TacticalLines.OYSTER_SHELLS:case T.TacticalLines.PEBBLES:case T.TacticalLines.SAND_AND_SHELLS:case T.TacticalLines.BOTTOM_SEDIMENTS_LAND:case T.TacticalLines.BOTTOM_SEDIMENTS_NO_DATA:case T.TacticalLines.BOTTOM_ROUGHNESS_SMOOTH:case T.TacticalLines.BOTTOM_ROUGHNESS_MODERATE:case T.TacticalLines.BOTTOM_ROUGHNESS_ROUGH:case T.TacticalLines.CLUTTER_LOW:case T.TacticalLines.CLUTTER_MEDIUM:case T.TacticalLines.CLUTTER_HIGH:case T.TacticalLines.IMPACT_BURIAL_0:case T.TacticalLines.IMPACT_BURIAL_10:case T.TacticalLines.IMPACT_BURIAL_20:case T.TacticalLines.IMPACT_BURIAL_75:case T.TacticalLines.IMPACT_BURIAL_100:case T.TacticalLines.BOTTOM_CATEGORY_A:case T.TacticalLines.BOTTOM_CATEGORY_B:case T.TacticalLines.BOTTOM_CATEGORY_C:case T.TacticalLines.BOTTOM_TYPE_A1:case T.TacticalLines.BOTTOM_TYPE_A2:case T.TacticalLines.BOTTOM_TYPE_A3:case T.TacticalLines.BOTTOM_TYPE_B1:case T.TacticalLines.BOTTOM_TYPE_B2:case T.TacticalLines.BOTTOM_TYPE_B3:case T.TacticalLines.BOTTOM_TYPE_C1:case T.TacticalLines.BOTTOM_TYPE_C2:case T.TacticalLines.BOTTOM_TYPE_C3:s.arraysupport.GetLineArray2(e,e.Pixels,t,null,null);break;case T.TacticalLines.ISOBAR:case T.TacticalLines.ISOBAR_GE:case T.TacticalLines.UPPER_AIR:case T.TacticalLines.UPPER_AIR_GE:case T.TacticalLines.ISOTHERM:case T.TacticalLines.ISOTHERM_GE:case T.TacticalLines.ISOTACH:case T.TacticalLines.ISOTACH_GE:case T.TacticalLines.ISODROSOTHERM:case T.TacticalLines.ISODROSOTHERM_GE:case T.TacticalLines.ISOPLETHS:case T.TacticalLines.ISOPLETHS_GE:case T.TacticalLines.ICE_EDGE:case T.TacticalLines.ICE_EDGE_GE:case T.TacticalLines.ESTIMATED_ICE_EDGE:case T.TacticalLines.ESTIMATED_ICE_EDGE_GE:case T.TacticalLines.CRACKS:case T.TacticalLines.CRACKS_GE:case T.TacticalLines.DEPTH_CURVE:case T.TacticalLines.DEPTH_CURVE_GE:case T.TacticalLines.DEPTH_CONTOUR:case T.TacticalLines.DEPTH_CONTOUR_GE:case T.TacticalLines.COASTLINE:case T.TacticalLines.COASTLINE_GE:case T.TacticalLines.PIER:case T.TacticalLines.PIER_GE:case T.TacticalLines.RAMP_ABOVE_WATER:case T.TacticalLines.RAMP_ABOVE_WATER_GE:case T.TacticalLines.RAMP_BELOW_WATER:case T.TacticalLines.RAMP_BELOW_WATER_GE:case T.TacticalLines.JETTY_ABOVE_WATER:case T.TacticalLines.JETTY_ABOVE_WATER_GE:case T.TacticalLines.JETTY_BELOW_WATER:case T.TacticalLines.JETTY_BELOW_WATER_GE:case T.TacticalLines.SEAWALL:case T.TacticalLines.SEAWALL_GE:case T.TacticalLines.EBB_TIDE:case T.TacticalLines.FLOOD_TIDE:case T.TacticalLines.EBB_TIDE_GE:case T.TacticalLines.FLOOD_TIDE_GE:case T.TacticalLines.JET:case T.TacticalLines.STREAM:case T.TacticalLines.JET_GE:case T.TacticalLines.STREAM_GE:a=S.DrawSplines(e,h),a.lineTo(f.x,f.y),l=new c.Shape2(c.Shape2.SHAPE_TYPE_POLYLINE),l.setShape(a),t.push(l);break;case T.TacticalLines.CRACKS_SPECIFIC_LOCATION:case T.TacticalLines.CRACKS_SPECIFIC_LOCATION_GE:case T.TacticalLines.ICE_EDGE_RADAR:case T.TacticalLines.ICE_EDGE_RADAR_GE:a=S.DrawSplines(e,h),l=new c.Shape2(c.Shape2.SHAPE_TYPE_POLYLINE),l.setShape(a),t.push(l);break;case T.TacticalLines.ICE_OPENINGS_LEAD:for(L=e.Pixels,_=u.clsChannelUtility.GetPartitions2(e),P=_.length,y=0;y<P;y++){for(e.Pixels=L,d=new Array,I=_[y].start;I<=_[y].end_Renamed+1;I++)d.push(e.Pixels[I]);if(null!=d&&0!==d.length){for(r=new Array,r=S.ParallelLines2(d,s.arraysupport.getScaledSize(20,e.get_LineThickness())),o=new Array,g=new Array,R=r.length,A=0;A<R/2;A++)o.push(r[A]);for(A=R/2;A<R;A++)g.push(r[A]);e.Pixels=g,a=S.DrawSplines(e,h),l=new c.Shape2(c.Shape2.SHAPE_TYPE_POLYLINE),l.setShape(a),t.push(l),e.Pixels=o,a=S.DrawSplines(e,h),l=new c.Shape2(c.Shape2.SHAPE_TYPE_POLYLINE),l.setShape(a),t.push(l)}}break;case T.TacticalLines.ICE_OPENINGS_LEAD_GE:for(L=e.Pixels,_=u.clsChannelUtility.GetPartitions2(e),D=_.length,y=0;y<D;y++){for(e.Pixels=L,d=new Array,I=_[y].start;I<=_[y].end_Renamed+1;I++)d.push(e.Pixels[I]);if(null!=d&&0!==d.length){for(r=new Array,r=S.ParallelLines2(d,s.arraysupport.getScaledSize(20,e.get_LineThickness())),o=new Array,g=new Array,M=r.length,A=0;A<M/2;A++)o.push(r[A]);for(A=M/2;A<M;A++)g.push(r[A]);e.Pixels=g,a=S.DrawSplines(e,h),f=e.Pixels[e.Pixels.length-1],a.lineTo(f.x,f.y),l=new c.Shape2(c.Shape2.SHAPE_TYPE_POLYLINE),l.setShape(a),t.push(l),e.Pixels=o,h=new Array,a=S.DrawSplines(e,h),f=e.Pixels[e.Pixels.length-1],a.lineTo(f.x,f.y),l=new c.Shape2(c.Shape2.SHAPE_TYPE_POLYLINE),l.setShape(a),t.push(l)}}break;case T.TacticalLines.ICE_OPENINGS_FROZEN:case T.TacticalLines.ICE_OPENINGS_FROZEN_GE:for(L=e.Pixels,_=u.clsChannelUtility.GetPartitions2(e),D=_.length,y=0;y<D;y++){for(e.Pixels=L,d=new Array,I=_[y].start;I<=_[y].end_Renamed+1;I++)d.push(e.Pixels[I]);if(0===d.length)continue;for(r=S.ParallelLines2(d,s.arraysupport.getScaledSize(20,e.get_LineThickness())),o=new Array,g=new Array,M=r.length,A=0;A<M/2;A++)o.push(r[A]);for(A=M/2;A<M;A++)g.push(r[A]);if(e.Pixels=g,e.get_LineType()===T.TacticalLines.ICE_OPENINGS_FROZEN)a=S.DrawSplines(e,h);else{let t=new Array;a=S.DrawSplines(e,t),h.push(...t),f=e.Pixels[e.Pixels.length-1],a.lineTo(f.x,f.y)}if(l=new c.Shape2(c.Shape2.SHAPE_TYPE_POLYLINE),l.setShape(a),t.push(l),e.Pixels=o,e.get_LineType()===T.TacticalLines.ICE_OPENINGS_FROZEN)a=S.DrawSplines(e,E);else{let t=new Array;a=S.DrawSplines(e,t),E.push(...t),f=e.Pixels[e.Pixels.length-1],a.lineTo(f.x,f.y)}l=new c.Shape2(c.Shape2.SHAPE_TYPE_POLYLINE),l.setShape(a),t.push(l);let u=new Array,D=new Array,P=new Array;for(A=0;A<h.length;A++)47!==h[A].style?P.push(h[A]):(u.push(P),P=new Array);for(A=0;A<E.length;A++)47!==E[A].style?P.push(E[A]):(D.push(P),P=new Array);for(i=new n.GeneralPath,A=0;A<u.length;A++){let e,t;if(D.length<=A)break;for(u.length>=D.length?(e=u[A],t=D[A]):(e=D[A],t=u[A]),I=0;I<e.length;I++){let a=0;if(1===e.length)continue;a=0===I?Math.atan2(e[I+1].y-e[I].y,e[I+1].x-e[I].x):I===e.length-1?Math.atan2(e[I].y-e[I-1].y,e[I].x-e[I-1].x):Math.atan2(e[I+1].y-e[I-1].y,e[I+1].x-e[I-1].x);let n=e[I],s=S.ExtrapolatePointFromCurve(t,n,a);null!=s&&(i.moveTo(n.x,n.y),i.lineTo(s.x,s.y))}}l=new c.Shape2(c.Shape2.SHAPE_TYPE_POLYLINE),l.setShape(i),t.push(l)}break;case T.TacticalLines.LEADING_LINE:{if(i=S.DrawSplines(e,h),a=new n.GeneralPath,!(h.length>0)){for(a.moveTo(e.Pixels[0].x,e.Pixels[0].y),D=e.Pixels.length,A=0;A<D;A++)a.lineTo(e.Pixels[A].x,e.Pixels[A].y);return l=new c.Shape2(c.Shape2.SHAPE_TYPE_POLYLINE),l.setShape(a),l.set_Style(1),void t.push(l)}a.moveTo(h[0].x,h[0].y);let s=h.length/2;for(A=1;A<=s;A++)h.length>=A-1&&a.lineTo(h[A].x,h[A].y);for(l=new c.Shape2(c.Shape2.SHAPE_TYPE_POLYLINE),l.setShape(a),t.push(l),a=new n.GeneralPath,a.moveTo(h[s].x,h[s].y),M=h.length,A=s+1;A<M;A++)h.length>=A-1&&a.lineTo(h[A].x,h[A].y);l=new c.Shape2(c.Shape2.SHAPE_TYPE_POLYLINE),l.setShape(a),l.set_Style(1),t.push(l);break}}e.get_LineType()!==T.TacticalLines.ICE_OPENINGS_LEAD&&e.get_LineType()!==T.TacticalLines.ICE_OPENINGS_LEAD_GE&&e.get_LineType()!==T.TacticalLines.ICE_OPENINGS_FROZEN&&e.get_LineType()!==T.TacticalLines.ICE_OPENINGS_FROZEN_GE&&e.get_LineType()!==T.TacticalLines.ICE_EDGE_RADAR&&null!=h&&h.length>0&&(a=new n.GeneralPath,a.moveTo(h[h.length-1].x,h[h.length-1].y),a.lineTo(f.x,f.y),l=new c.Shape2(c.Shape2.SHAPE_TYPE_POLYLINE),l.setShape(a),l.set_Style(0),t.push(l)),S.SetShapeProperties(e,t)}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"GetMeTOCShape",new h.RendererException("Failed inside GetMeTOCShape",e))}}static async SetShapeProperties(e,t){try{if(null==t)return;if(e.get_LineType()===T.TacticalLines.DEPTH_AREA)return;let i,n,s,l=0,o=0,u=e.get_LineThickness();switch(e.get_TexturePaint(),e.get_LineType()){case T.TacticalLines.FISH_TRAPS:case T.TacticalLines.SWEPT_AREA:case T.TacticalLines.OIL_RIG_FIELD:case T.TacticalLines.FOUL_GROUND:case T.TacticalLines.KELP:case T.TacticalLines.BEACH_SLOPE_MODERATE:case T.TacticalLines.BEACH_SLOPE_STEEP:s=L.PatternFillRenderer.MakeMetocPatternFill(e),i=t[0],i.setLineColor(e.get_LineColor()),i.setPatternFillImage(s);break;case T.TacticalLines.SF:case T.TacticalLines.USF:case T.TacticalLines.SFG:case T.TacticalLines.SFY:for(o=t.length,l=0;l<o;l++)i=t[l],null!=i&&null!=i.getShape()&&(i.set_Style(e.get_LineStyle()),n=I.clsUtility.getLineStroke(u,i.get_Style(),e.get_lineCap(),a.BasicStroke.JOIN_ROUND),i.setStroke(n));return}let g=-1,d=e.get_LineType(),_=(I.clsUtility.IsChange1Area(d),I.clsUtility.isClosedPolygon(d));for(o=t.length,l=0;l<o;l++)if(i=t[l],null!=i&&null!=i.getShape()){switch(i.getShapeType()===c.Shape2.SHAPE_TYPE_FILL&&i.setFillColor(e.get_FillColor()),g=i.getShapeType(),e.get_LineType()){case T.TacticalLines.SF:case T.TacticalLines.USF:case T.TacticalLines.SFG:case T.TacticalLines.SFY:case T.TacticalLines.ITD:break;case T.TacticalLines.LEADING_LINE:case T.TacticalLines.TRAINING_AREA:i.setLineColor(e.get_LineColor());break;default:i.setLineColor(e.get_LineColor()),i.set_Style(e.get_LineStyle())}if(_||g===c.Shape2.SHAPE_TYPE_FILL)switch(e.get_LineType()){case T.TacticalLines.FORESHORE_AREA:case T.TacticalLines.WATER:case T.TacticalLines.BEACH:case T.TacticalLines.ISLAND:case T.TacticalLines.DRYDOCK:case T.TacticalLines.LOADING_FACILITY_AREA:case T.TacticalLines.PERCHES:case T.TacticalLines.UNDERWATER_HAZARD:case T.TacticalLines.DISCOLORED_WATER:case T.TacticalLines.VDR_LEVEL_12:case T.TacticalLines.VDR_LEVEL_23:case T.TacticalLines.VDR_LEVEL_34:case T.TacticalLines.VDR_LEVEL_45:case T.TacticalLines.VDR_LEVEL_56:case T.TacticalLines.VDR_LEVEL_67:case T.TacticalLines.VDR_LEVEL_78:case T.TacticalLines.VDR_LEVEL_89:case T.TacticalLines.VDR_LEVEL_910:case T.TacticalLines.SOLID_ROCK:case T.TacticalLines.CLAY:case T.TacticalLines.FINE_SAND:case T.TacticalLines.MEDIUM_SAND:case T.TacticalLines.COARSE_SAND:case T.TacticalLines.VERY_COARSE_SAND:case T.TacticalLines.VERY_FINE_SAND:case T.TacticalLines.VERY_FINE_SILT:case T.TacticalLines.FINE_SILT:case T.TacticalLines.MEDIUM_SILT:case T.TacticalLines.COARSE_SILT:case T.TacticalLines.BOULDERS:case T.TacticalLines.OYSTER_SHELLS:case T.TacticalLines.PEBBLES:case T.TacticalLines.SAND_AND_SHELLS:case T.TacticalLines.BOTTOM_SEDIMENTS_LAND:case T.TacticalLines.BOTTOM_SEDIMENTS_NO_DATA:case T.TacticalLines.BOTTOM_ROUGHNESS_MODERATE:case T.TacticalLines.BOTTOM_ROUGHNESS_ROUGH:case T.TacticalLines.BOTTOM_ROUGHNESS_SMOOTH:case T.TacticalLines.CLUTTER_HIGH:case T.TacticalLines.CLUTTER_MEDIUM:case T.TacticalLines.CLUTTER_LOW:case T.TacticalLines.IMPACT_BURIAL_0:case T.TacticalLines.IMPACT_BURIAL_10:case T.TacticalLines.IMPACT_BURIAL_100:case T.TacticalLines.IMPACT_BURIAL_20:case T.TacticalLines.IMPACT_BURIAL_75:case T.TacticalLines.BOTTOM_CATEGORY_A:case T.TacticalLines.BOTTOM_CATEGORY_B:case T.TacticalLines.BOTTOM_CATEGORY_C:case T.TacticalLines.BOTTOM_TYPE_A1:case T.TacticalLines.BOTTOM_TYPE_A2:case T.TacticalLines.BOTTOM_TYPE_A3:case T.TacticalLines.BOTTOM_TYPE_B1:case T.TacticalLines.BOTTOM_TYPE_B2:case T.TacticalLines.BOTTOM_TYPE_B3:case T.TacticalLines.BOTTOM_TYPE_C1:case T.TacticalLines.BOTTOM_TYPE_C2:case T.TacticalLines.BOTTOM_TYPE_C3:case T.TacticalLines.SUBMERGED_CRIB:case T.TacticalLines.FREEFORM:i.setFillColor(e.get_FillColor())}if(d===T.TacticalLines.INSTABILITY||d===T.TacticalLines.SHEAR){let e,t=1,s=2*u,l=i.getPoints(),o=0;for(let e=0;e<6;e++)o+=r.lineutility.CalcDistanceDouble(l[e],l[e+1]);if(s=Math.min(s,o/5),d===T.TacticalLines.INSTABILITY){let i=(o-(2*t+3*s))/2;e=[i,s,t,s,t,s,i,0]}else{let i=(o-(t+2*s))/2;e=[i,s,t,s,i,0]}n=new a.BasicStroke(u,a.BasicStroke.CAP_ROUND,a.BasicStroke.JOIN_ROUND,4,e,0)}else if(d===T.TacticalLines.TROUGH){let t=i.getPoints(),s=0;for(let e=0;e<6;e++)s+=r.lineutility.CalcDistanceDouble(t[e],t[e+1]);let l=2*u;l=Math.min(l,s/4);let o=[l,l];n=new a.BasicStroke(u,e.get_lineCap(),a.BasicStroke.JOIN_ROUND,4,o,0)}else n=I.clsUtility.getLineStroke(u,i.get_Style(),e.get_lineCap(),a.BasicStroke.JOIN_ROUND);i.setStroke(n)}}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"SetShapeProperties",new h.RendererException("Failed inside SetShapeProperties",e))}}static DrawArrow(e,t,i,a){try{let n=new o.POINT2,s=new o.POINT2,l=new Array;n=r.lineutility.ExtendAlongLineDouble(t,e,i),s=r.lineutility.ExtendDirectedLine(e,n,n,2,i),l.push(s),l.push(t),s=r.lineutility.ExtendDirectedLine(e,n,n,3,i),l.push(s),a.moveTo(l[0].x,l[0].y),a.lineTo(l[1].x,l[1].y),a.lineTo(l[2].x,l[2].y),l.length=0,l=null}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"DrawArrow",new h.RendererException("Failed inside DrawArrow",e))}}static DrawSplines(e,t){let i=new n.GeneralPath;try{let a,l,c,u,g,L,d,_,h,E=0,A=0,I=0,y=0,f=e.get_Pixels(),D=new o.POINT2,M=new o.POINT2,P=new o.POINT2,R=new o.POINT2,N=new o.POINT2,C=new o.POINT2,O=new o.POINT2,p=.66*.175,x=0;for(I=f.length,E=0;E<I-1;E++){l=f[E],0===E?(i.moveTo(l.x,l.y),c=l):c=f[E-1],P=E===f.length-1?f[E]:f[E+1],u=E<f.length-2?f[E+1]:f[f.length-1],_=E<f.length-2?f[E+2]:f[f.length-1],g=new o.POINT2,L=new o.POINT2,g.x=u.x-c.x,g.y=u.y-c.y,L.x=l.x+p*g.x,L.y=l.y+p*g.y,d=new o.POINT2;let I=new o.POINT2;switch(I.x=_.x-l.x,I.y=_.y-l.y,d.x=u.x-p*I.x,d.y=u.y-p*I.y,h=S.drawCubicBezier2(e,i,l,L,d,P),e.get_LineType()!==T.TacticalLines.ICE_OPENINGS_FROZEN&&e.get_LineType()!==T.TacticalLines.ICE_OPENINGS_FROZEN_GE||h.length>0&&(h[h.length-1].style=47),t.push(...h),a=h,e.get_LineType()){case T.TacticalLines.EBB_TIDE:E===f.length-2&&a.length>=2&&S.DrawArrow(a[a.length-2],e.Pixels[e.Pixels.length-1],s.arraysupport.getScaledSize(10,e.get_LineThickness()),i);break;case T.TacticalLines.FLOOD_TIDE:x=s.arraysupport.getScaledSize(10,e.get_LineThickness()),0===E&&a.length>1&&(D=a[0],M=a[1],P=r.lineutility.ExtendLineDouble(D,M,x),R=r.lineutility.ExtendLineDouble(D,M,2*x),N=r.lineutility.ExtendLineDouble(D,M,3*x),C=r.lineutility.ExtendDirectedLine(R,P,P,3,x),O=r.lineutility.ExtendDirectedLine(N,R,R,3,x),i.moveTo(R.x,R.y),i.lineTo(C.x,C.y),i.moveTo(N.x,N.y),i.lineTo(O.x,O.y)),E===f.length-2&&a.length>=2&&S.DrawArrow(a[a.length-2],e.Pixels[e.Pixels.length-1],x,i);break;case T.TacticalLines.STREAM:case T.TacticalLines.JET:a.length>E+1&&S.DrawArrow(a[E+1],a[E],s.arraysupport.getScaledSize(10,e.get_LineThickness()),i);break;case T.TacticalLines.FLOOD_TIDE_GE:if(x=s.arraysupport.getScaledSize(10,e.get_LineThickness()),0===E&&a.length>1&&(D=a[0],M=a[1],P=r.lineutility.ExtendLineDouble(D,M,x),R=r.lineutility.ExtendLineDouble(D,M,2*x),N=r.lineutility.ExtendLineDouble(D,M,3*x),C=r.lineutility.ExtendDirectedLine(R,P,P,3,x),O=r.lineutility.ExtendDirectedLine(N,R,R,3,x),i.moveTo(R.x,R.y),i.lineTo(C.x,C.y),i.moveTo(N.x,N.y),i.lineTo(O.x,O.y)),E===f.length-2){for(i.moveTo(t[0].x,t[0].y),y=t.length,A=1;A<y;A++)i.lineTo(t[A].x,t[A].y);a.length>=2&&S.DrawArrow(a[a.length-2],e.Pixels[e.Pixels.length-1],x,i)}break;case T.TacticalLines.EBB_TIDE_GE:if(E===f.length-2){for(i=new n.GeneralPath,i.moveTo(t[0].x,t[0].y),y=t.length,A=1;A<y;A++)i.lineTo(t[A].x,t[A].y);a.length>=2&&S.DrawArrow(a[a.length-2],e.Pixels[e.Pixels.length-1],s.arraysupport.getScaledSize(10,e.get_LineThickness()),i)}break;case T.TacticalLines.JET_GE:case T.TacticalLines.STREAM_GE:if(a.length>E+1&&S.DrawArrow(a[E+1],a[E],s.arraysupport.getScaledSize(10,e.get_LineThickness()),i),E===f.length-2)for(i.moveTo(t[0].x,t[0].y),y=t.length,A=1;A<y;A++)i.lineTo(t[A].x,t[A].y);break;case T.TacticalLines.ICE_OPENINGS_FROZEN_GE:case T.TacticalLines.ICE_OPENINGS_LEAD_GE:case T.TacticalLines.SEAWALL_GE:case T.TacticalLines.JETTY_BELOW_WATER_GE:case T.TacticalLines.JETTY_ABOVE_WATER_GE:case T.TacticalLines.RAMP_ABOVE_WATER_GE:case T.TacticalLines.RAMP_BELOW_WATER_GE:case T.TacticalLines.PIER_GE:case T.TacticalLines.COASTLINE_GE:case T.TacticalLines.DEPTH_CONTOUR_GE:case T.TacticalLines.DEPTH_CURVE_GE:case T.TacticalLines.CRACKS_GE:case T.TacticalLines.ESTIMATED_ICE_EDGE_GE:case T.TacticalLines.ICE_EDGE_GE:case T.TacticalLines.ISOPLETHS_GE:case T.TacticalLines.ISODROSOTHERM_GE:case T.TacticalLines.ISOTACH_GE:case T.TacticalLines.ISOTHERM_GE:case T.TacticalLines.UPPER_AIR_GE:case T.TacticalLines.ISOBAR_GE:if(null!=t&&t.length>0&&(i=new n.GeneralPath,E===f.length-2))for(i.moveTo(t[0].x,t[0].y),y=t.length,A=1;A<y;A++)i.lineTo(t[A].x,t[A].y);break;case T.TacticalLines.ICE_EDGE_RADAR:for(y=a.length,x=s.arraysupport.getScaledSize(5,e.get_LineThickness()),A=0;A<y-1;A++)D=new o.POINT2(a[A].x,a[A].y),P=r.lineutility.ExtendAngledLine(a[A],a[A+1],D,45,x),M=new o.POINT2(a[A].x,a[A].y),R=r.lineutility.ExtendAngledLine(a[A],a[A+1],M,-45,x),i.moveTo(a[A].x,a[A].y),i.lineTo(P.x,P.y),i.moveTo(a[A].x,a[A].y),i.lineTo(R.x,R.y),D=new o.POINT2(a[A].x,a[A].y),P=r.lineutility.ExtendAngledLine(a[A],a[A+1],D,135,x),M=new o.POINT2(a[A].x,a[A].y),R=r.lineutility.ExtendAngledLine(a[A],a[A+1],M,-135,x),i.moveTo(a[A].x,a[A].y),i.lineTo(P.x,P.y),i.moveTo(a[A].x,a[A].y),i.lineTo(R.x,R.y);break;case T.TacticalLines.ICE_EDGE_RADAR_GE:for(y=a.length,x=s.arraysupport.getScaledSize(5,e.get_LineThickness()),A=0;A<y-1;A++)D=new o.POINT2(a[A].x,a[A].y),P=r.lineutility.ExtendAngledLine(a[A],a[A+1],D,45,x),M=new o.POINT2(a[A].x,a[A].y),R=r.lineutility.ExtendAngledLine(a[A],a[A+1],M,-45,x),i.moveTo(a[A].x,a[A].y),i.lineTo(P.x,P.y),i.moveTo(a[A].x,a[A].y),i.lineTo(R.x,R.y),D=new o.POINT2(a[A].x,a[A].y),P=r.lineutility.ExtendAngledLine(a[A],a[A+1],D,135,x),M=new o.POINT2(a[A].x,a[A].y),R=r.lineutility.ExtendAngledLine(a[A],a[A+1],M,-135,x),i.moveTo(a[A].x,a[A].y),i.lineTo(P.x,P.y),i.moveTo(a[A].x,a[A].y),i.lineTo(R.x,R.y);if(E===f.length-2)for(i.moveTo(t[0].x,t[0].y),y=t.length,A=1;A<y;A++)i.lineTo(t[A].x,t[A].y);break;case T.TacticalLines.CRACKS_SPECIFIC_LOCATION:for(y=a.length,x=s.arraysupport.getScaledSize(5,e.get_LineThickness()),A=0;A<y-1;A++)D=a[A+1],M=r.lineutility.ExtendDirectedLine(a[A],a[A+1],D,2,x),i.moveTo(M.x,M.y),M=r.lineutility.ExtendDirectedLine(a[A],a[A+1],D,3,x),i.lineTo(M.x,M.y);break;case T.TacticalLines.CRACKS_SPECIFIC_LOCATION_GE:for(y=a.length,x=s.arraysupport.getScaledSize(5,e.get_LineThickness()),A=0;A<y-1;A++)D=a[A+1],M=r.lineutility.ExtendDirectedLine(a[A],a[A+1],D,2,x),i.moveTo(M.x,M.y),M=r.lineutility.ExtendDirectedLine(a[A],a[A+1],D,3,x),i.lineTo(M.x,M.y);if(E===f.length-2)for(i.moveTo(t[0].x,t[0].y),y=t.length,A=1;A<y;A++)i.lineTo(t[A].x,t[A].y)}}}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"DrawSplines",new h.RendererException("Failed inside DrawSplines",e))}return i}static getPointOnSegment(e,t,i){let a=new o.POINT2;try{a.x=e.x+(t.x-e.x)*i,a.y=e.y+(t.y-e.y)*i}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"getPointOnSegment",new h.RendererException("Failed inside getPointOnSegment",e))}return a}static drawCubicBezier2(e,t,i,a,n,l){let c=new Array;try{let u=S.getPointOnSegment(i,a,.75),g=S.getPointOnSegment(l,n,.75),L=(l.x-i.x)/16,d=(l.y-i.y)/16,_=S.getPointOnSegment(i,a,.375),h=S.getPointOnSegment(u,g,.375);h.x-=L,h.y-=d;let E=S.getPointOnSegment(g,u,.375);E.x+=L,E.y+=d;let A=S.getPointOnSegment(l,n,.375),I=r.lineutility.MidPointDouble(_,h,0),y=r.lineutility.MidPointDouble(u,g,0),f=r.lineutility.MidPointDouble(E,A,0);switch(e.get_LineType()){case T.TacticalLines.ISOBAR:case T.TacticalLines.UPPER_AIR:case T.TacticalLines.ISODROSOTHERM:case T.TacticalLines.ICE_EDGE:case T.TacticalLines.CRACKS:case T.TacticalLines.DEPTH_CURVE:case T.TacticalLines.DEPTH_CONTOUR:case T.TacticalLines.COASTLINE:case T.TacticalLines.PIER:case T.TacticalLines.RAMP_ABOVE_WATER:case T.TacticalLines.JETTY_ABOVE_WATER:case T.TacticalLines.SEAWALL:case T.TacticalLines.ICE_OPENINGS_LEAD:case T.TacticalLines.ISOTACH:case T.TacticalLines.ISOTHERM:case T.TacticalLines.ISOPLETHS:case T.TacticalLines.ESTIMATED_ICE_EDGE:case T.TacticalLines.RAMP_BELOW_WATER:case T.TacticalLines.JETTY_BELOW_WATER:return t.moveTo(i.x,i.y),t.curveTo(a.x,a.y,n.x,n.y,l.x,l.y),c;case T.TacticalLines.ICE_OPENINGS_LEAD_GE:case T.TacticalLines.SEAWALL_GE:case T.TacticalLines.JETTY_BELOW_WATER_GE:case T.TacticalLines.JETTY_ABOVE_WATER_GE:case T.TacticalLines.RAMP_ABOVE_WATER_GE:case T.TacticalLines.RAMP_BELOW_WATER_GE:case T.TacticalLines.PIER_GE:case T.TacticalLines.COASTLINE_GE:case T.TacticalLines.DEPTH_CONTOUR_GE:case T.TacticalLines.DEPTH_CURVE_GE:case T.TacticalLines.CRACKS_GE:case T.TacticalLines.ESTIMATED_ICE_EDGE_GE:case T.TacticalLines.ICE_EDGE_GE:case T.TacticalLines.ISOPLETHS_GE:case T.TacticalLines.ISOTACH_GE:case T.TacticalLines.ISOTHERM_GE:case T.TacticalLines.ISOBAR_GE:case T.TacticalLines.UPPER_AIR_GE:case T.TacticalLines.ISODROSOTHERM_GE:case T.TacticalLines.ICE_OPENINGS_FROZEN:case T.TacticalLines.ICE_OPENINGS_FROZEN_GE:case T.TacticalLines.ICE_EDGE_RADAR:case T.TacticalLines.ICE_EDGE_RADAR_GE:case T.TacticalLines.CRACKS_SPECIFIC_LOCATION:case T.TacticalLines.CRACKS_SPECIFIC_LOCATION_GE:case T.TacticalLines.EBB_TIDE:case T.TacticalLines.FLOOD_TIDE:case T.TacticalLines.EBB_TIDE_GE:case T.TacticalLines.FLOOD_TIDE_GE:case T.TacticalLines.JET:case T.TacticalLines.STREAM:case T.TacticalLines.JET_GE:case T.TacticalLines.STREAM_GE:t.moveTo(i.x,i.y),t.curveTo(a.x,a.y,n.x,n.y,l.x,l.y)}let D,M,P,R,N=0,C=0,O=0,p=0,x=0,b=0,w=0;switch(c.length=0,e.get_LineType()){case T.TacticalLines.ICE_EDGE_RADAR:case T.TacticalLines.ICE_EDGE_RADAR_GE:b=s.arraysupport.getScaledSize(20,e.get_LineThickness());break;case T.TacticalLines.ICE_OPENINGS_FROZEN:case T.TacticalLines.ICE_OPENINGS_FROZEN_GE:case T.TacticalLines.CRACKS_SPECIFIC_LOCATION:case T.TacticalLines.CRACKS_SPECIFIC_LOCATION_GE:b=s.arraysupport.getScaledSize(7,e.get_LineThickness());break;default:b=s.arraysupport.getScaledSize(10,e.get_LineThickness())}for(C=r.lineutility.CalcDistanceDouble(i,I),C<b&&(C=b),O=Math.trunc(C/b),D=i,M=_,P=I,N=0;N<O;N++)w=N*(b/C),p=(1-w)*(1-w)*D.x+2*(1-w)*w*M.x+w*w*P.x,x=(1-w)*(1-w)*D.y+2*(1-w)*w*M.y+w*w*P.y,R=new o.POINT2(p,x),c.push(R);for(C=r.lineutility.CalcDistanceDouble(I,y),O=Math.trunc(C/b),D=I,M=h,P=y,N=0;N<O;N++)w=N*(b/C),p=(1-w)*(1-w)*D.x+2*(1-w)*w*M.x+w*w*P.x,x=(1-w)*(1-w)*D.y+2*(1-w)*w*M.y+w*w*P.y,R=new o.POINT2(p,x),c.push(R);for(C=r.lineutility.CalcDistanceDouble(y,f),O=Math.trunc(C/b),D=y,M=E,P=f,N=0;N<O;N++)w=N*(b/C),p=(1-w)*(1-w)*D.x+2*(1-w)*w*M.x+w*w*P.x,x=(1-w)*(1-w)*D.y+2*(1-w)*w*M.y+w*w*P.y,R=new o.POINT2(p,x),c.push(R);for(C=r.lineutility.CalcDistanceDouble(f,l),O=Math.trunc(C/b),D=f,M=A,P=l,N=0;N<O;N++)w=N*(b/C),p=(1-w)*(1-w)*D.x+2*(1-w)*w*M.x+w*w*P.x,x=(1-w)*(1-w)*D.y+2*(1-w)*w*M.y+w*w*P.y,R=new o.POINT2(p,x),c.push(R)}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"drawCubicBezier2",new h.RendererException("Failed inside drawCubicBezier2",e))}return c}static ParallelLines2(e,t){let i=new Array;try{let a=new Array(2*e.length),n=new Array(6*e.length),s=0,r=e.length;for(s=0;s<r;s++)a[2*s]=e[s].x,a[2*s+1]=e[s].y;let c,u,L=e.length,d=0;try{let e=new g.TGLight;e.set_LineType(T.TacticalLines.CHANNEL),l.Channels.GetChannel1Double(e,a,a,n,L,L,t,d,c)}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"ParallelLines2",new h.RendererException("Failed inside ParallelLines2",e))}let E=0;for(r=n.length,s=0;s<r/3;s++)u=new o.POINT2(n[3*s],n[3*s+1],E),i.push(u)}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"ParallelLines2",new h.RendererException("Failed inside ParallelLines2",e))}return i}}t.clsMETOC=S},5108:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MilStdIconRenderer=void 0;const a=i(7334),n=i(3247),s=i(7300),l=i(7017),r=i(3874),o=i(6142),c=i(2421),T=i(7028),u=i(2466);class g{TAG="MilStdIconRenderer";static _instance;_initSuccess=!1;_SPSVGR;constructor(){this.init()}static getInstance(){return g._instance||(g._instance=new g),g._instance}init(){try{this._initSuccess||(o.SVGLookup.getInstance(),r.MSLookup.getInstance(),this._SPSVGR=a.SinglePointSVGRenderer.getInstance(),l.GENCLookup.getInstance(),this._initSuccess=!0)}catch(e){if(!(e instanceof Error))throw e;s.ErrorLogger.LogException(this.TAG,"init",e)}}isReady(){return this._initSuccess}CanRender(e,t){let i="";try{let t=u.SymbolUtilities.getBasicSymbolID(e),a=o.SVGLookup.getMainIconID(e),s=r.MSLookup.getInstance().getMSLInfo(e);if(null==s)i=`Cannot find ${t} in MSLookup`;else if(s.getDrawRule()===n.DrawRules.DONOTDRAW)i=`${t} (${s.getName()}) is DoNotDraw`;else{let n=c.SymbolID.getVersion(e);if(null!=o.SVGLookup.getInstance().getSVGLInfo(a,n))return!0;i=`Cannot find ${t} (${s.getName()}) in SVGLookup`}}catch(e){if(!(e instanceof Error))throw e;s.ErrorLogger.LogException("MilStdIconRenderer","CanRender",e)}return s.ErrorLogger.LogMessage("MilStdIconRenderer","CanRender()",i,T.LogLevel.FINE),!1}RenderSVG(e,t,i){let a,s=c.SymbolID.getSymbolSet(e),l=r.MSLookup.getInstance().getMSLInfo(e);return null!=l&&l.getDrawRule()===n.DrawRules.DONOTDRAW?null:(null!=i&&i instanceof Map==0&&(i=new Map),null!=t&&t instanceof Map==0&&(t=new Map),s===c.SymbolID.SymbolSet_ControlMeasure?null!=l&&(a=!1===u.SymbolUtilities.isMultiPoint(e)?this._SPSVGR.RenderSP(e,t,i):this._SPSVGR.RenderSP(e,null,i)):a=s===c.SymbolID.SymbolSet_Atmospheric||s===c.SymbolID.SymbolSet_Oceanographic||s===c.SymbolID.SymbolSet_MeteorologicalSpace?this._SPSVGR.RenderSP(e,t,i):this._SPSVGR.RenderUnit(e,t,i),a)}AddCustomSymbol(e,t){let i=!1;return e.getBasicSymbolID()===t.getID()?null==r.MSLookup.getInstance().getMSLInfo(e.getBasicSymbolID(),e.getVersion())&&null==o.SVGLookup.getInstance().getSVGLInfo(t.getID(),e.getVersion())&&r.MSLookup.getInstance().addCustomSymbol(e)&&(i=o.SVGLookup.getInstance().addCustomSymbol(t,e.getVersion())):s.ErrorLogger.LogMessage("Symbol Set and Entity Codes do not match",T.LogLevel.INFO,!1),i}}t.MilStdIconRenderer=g},5462:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MultiPointHandlerSVG=void 0;const a=i(9441),n=i(6001),s=i(7300),l=i(3254),r=i(1059),o=i(8795),c=i(7314),T=i(9625),u=i(4615),g=i(8113);class L{static GeoSVGize(e,t,i,r,T,g,d,_,h,E,A,I){let S=10,y=null,f=[],D=null,M=[],P=null,R=null,N=null,C=null,O=null,p=null,x=null,b=null,w=null,m=null,F=null,G=null,U=T.length;try{const e=l.RendererSettings.getInstance().getMPLabelFont();S=e.getSize();for(let e=0;e<U;e++){let t=L.ShapesToGeoSVG(r,T[e],d,_);t.svg&&t.bounds&&(y=t.bounds,N=T[e].getStroke().getLineWidth(),y.grow(Math.round(N/2)),null==D?D=y.clone():D.union(y),f.push(t.svg),t.fillPattern&&!C&&(C=t.fillPattern))}let t,i=g.length,s=null;for(let a=0;a<i;a++)if(t=g[a],t.getModifierString()){let i=t.getModifierPosition(),a=t.getTextJustify(),l="start";a===o.ShapeInfo.justify_left?l="start":a===o.ShapeInfo.justify_center?l="middle":a===o.ShapeInfo.justify_right&&(l="end");let r=t.getModifierAngle();s=new u.SVGTextInfo(t.getModifierString(),i,e,l,r);let c=s.getTextBounds(),T=new n.Rectangle(c.x,c.y,c.width,c.height);s&&(I&&I.intersects(T)||null==I)&&(M.push(s),T&&(P?P.union(T):P=T))}else if(t.getModifierImageInfo()){let e=t.getModifierImageInfo().getImageBounds(),i=new n.Rectangle(0,0,e.width,e.height),a=t.getModifierPosition();a.setLocation(a.x-i.getWidth()/2,a.y-i.getHeight()/2);let s=a.x,l=a.y;i.setLocation(s,l);let r=t.getModifierAngle();f.push('<image transform="translate('+s+","+l+") rotate("+r+')" href="'+t.getModifierImage()+'" />'),0!==r&&(e.x=a.x,e.y=a.y,e=u.SVGTextInfo.getRotatedRectangleBounds(e,a,-r,"middle"),i=new n.Rectangle(e.x,e.y,e.width,e.height)),i&&(I&&I.intersects(i)||null==I)&&(D?D.union(i):D=i)}if(D&&(R=D.clone()),P&&(R?R.union(P):R=P),R){let e=new a.Point2D;e.setLocation(R.getX(),R.getY());let t=new a.Point2D;t.setLocation(R.getX()+R.getWidth(),R.getY()+R.getHeight());let i=new a.Point2D;i.setLocation(R.getX()+R.getWidth(),R.getY());let n=new a.Point2D;n.setLocation(R.getX(),R.getY()+R.getHeight()),F=new a.Point2D(R.getX()+R.getWidth()/2,R.getY()+R.getHeight()),m=new a.Point2D(R.getX()+R.getWidth()/2,R.getY()),G=new a.Point2D(R.getX()+R.getWidth(),R.getY()+R.getHeight()/2),w=new a.Point2D(R.getX(),R.getY()+R.getHeight()/2),O=d.PixelsToGeo(e),b=d.PixelsToGeo(t),p=d.PixelsToGeo(i),x=d.PixelsToGeo(n),m=d.PixelsToGeo(m),F=d.PixelsToGeo(F),G=d.PixelsToGeo(G),w=d.PixelsToGeo(w),_&&(O=c.MultiPointHandler.NormalizeCoordToGECoord(O),b=c.MultiPointHandler.NormalizeCoordToGECoord(b),p=c.MultiPointHandler.NormalizeCoordToGECoord(p),x=c.MultiPointHandler.NormalizeCoordToGECoord(x),m=c.MultiPointHandler.NormalizeCoordToGECoord(m),F=c.MultiPointHandler.NormalizeCoordToGECoord(F),G=c.MultiPointHandler.NormalizeCoordToGECoord(G),w=c.MultiPointHandler.NormalizeCoordToGECoord(w))}else O=new a.Point2D(0,0),b=new a.Point2D(0,0),p=new a.Point2D(0,0),x=new a.Point2D(0,0),m=new a.Point2D(0,0),F=new a.Point2D(0,0),G=new a.Point2D(0,0),w=new a.Point2D(0,0)}catch(e){s.ErrorLogger.LogException("MultiPointHandler","GeoSVGize",e)}if(f&&U>0&&R){let a='<g transform="translate('+-1*R.getX()+","+-1*R.getY()+')">';for(let e=0;e<f.length;e++)a+=f[e];let n=this.renderTextElement(M,h,E);for(let e=0;e<n.length;e++)a+=n[e];a+="</g>";let s='<svg width="'+Math.ceil(R.getWidth())+'px" height="'+Math.ceil(R.getHeight())+'px" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" version="1.1">';return s+="<metadata>\n",s+="<id>"+e+"</id>\n",s+="<name>"+t+"</name>\n",s+="<description>"+i+"</description>\n",s+="<symbolID>"+r+"</symbolID>\n",s+="<geoTL>"+O.getX()+" "+O.getY()+"</geoTL>\n",s+="<geoBR>"+b.getX()+" "+b.getY()+"</geoBR>\n",s+="<geoTR>"+p.getX()+" "+p.getY()+"</geoTR>\n",s+="<geoBL>"+x.getX()+" "+x.getY()+"</geoBL>\n",s+="<north>"+m.getY()+"</north>\n",s+="<south>"+F.getY()+"</south>\n",s+="<east>"+G.getX()+"</east>\n",s+="<west>"+w.getX()+"</west>\n",s+="<wasClipped>"+A+"</wasClipped>\n",s+="<width>"+R.getWidth()+"</width>\n",s+="<height>"+R.getHeight()+"</height>\n",s+="</metadata>\n",C&&(s+=C),s+=a,s+="</svg>",s}return'<svg width="2px" height="2px" xmlns="http://www.w3.org/2000/svg" version="1.1"></svg>'}static renderTextElement(e,t,i){let a=[],n=e.length,s=null,o="#000000",c=l.RendererSettings.getInstance().getTextBackgroundMethod(),T=l.RendererSettings.getInstance().getTextOutlineWidth();if(t&&(o=t),i||(i=r.RendererUtilities.getIdealOutlineColor(new g.Color(o)).toHexString(!1)),c===l.RendererSettings.TextBackgroundMethod_OUTLINE)for(let t=0;t<n;t++)s=e[t],a.push(s.toSVGElement(o,i,T));else if(c===l.RendererSettings.TextBackgroundMethod_OUTLINE_QUICK)for(let t=0;t<n;t++)s=e[t],a.push(s.toSVGElement(o,i,T));else if(c===l.RendererSettings.TextBackgroundMethod_COLORFILL)for(let t=0;t<n;t++)s=e[t],a.push(s.getTextOutlineBounds().toSVGElement(null,null,i)),a.push(s.toSVGElement(o,null));else for(let t=0;t<n;t++)s=e[t],a.push(s.toSVGElement(o,null));return a}static ShapesToGeoSVG(e,t,i,a){let n=null,s=null,l=null,r=null,o=1,c=1,u=null,g=null;if(t.getLineColor()){let e=t.getLineColor();o=e.getAlpha()/255,l=e.toHexString(!1)}if(t.getFillColor()){let e=t.getFillColor();c=e.getAlpha()/255,s=e.toHexString(!1)}if(t.getPatternFillImageInfo()){let e=t.getPatternFillImageInfo().getImageBounds();g='<defs><pattern id="fillPattern" patternUnits="userSpaceOnUse" width="'+e.width+'" height="'+e.height+'"><image href="'+t.getPatternFillImage()+'" /></pattern></defs>'}let L=t.getStroke();null!==L&&(r=Math.round(L.getLineWidth()),u=L.getDashArray());let d=t.getPolylines();n=new T.Path,u&&n.setLineDash(u.toString());for(let e=0;e<d.length;e++){let t=d[e];for(let e=0;e<t.length;e++){let i=t[e];0===e?n.moveTo(i.x,i.y):u?n.dashedLineTo(i.x,i.y,u):n.lineTo(i.x,i.y)}}return g&&(s="url(#fillPattern)"),{svg:n.toSVGElement(l,r,s,o,c,"round"),bounds:n.getBounds(),fillPattern:g}}}t.MultiPointHandlerSVG=L},5467:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.IPathIterator=void 0,function(e){e.SEG_CLOSE=4,e.SEG_CUBICTO=3,e.SEG_LINETO=1,e.SEG_MOVETO=0,e.SEG_QUADTO=2,e.WIND_EVEN_ODD=0,e.WIND_NON_ZERO=1}(i||(t.IPathIterator=i={}))},5588:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeoPixelConversion3D=void 0;const a=i(4686);class n{static metersPerPixel(e){return a.GeoPixelConversion.metersPerPixel(e)}static lat2y(e,t,i,n){let s=Math.abs(e-i),l=0;return s>0&&(l=s*a.GeoPixelConversion.METERS_PER_DEG/n,e>i&&(l=-l)),l}static y2lat(e,t,i,n){let s=i;return 0!==e&&(s=i-e*n/a.GeoPixelConversion.METERS_PER_DEG),s}static long2x(e,t,i,a,s){let l=Math.abs(e-i),r=n.GetMetersPerDegAtLat(a),o=0;return l>0&&(o=l*r/s,e<i&&(o=-o)),o}static x2long(e,t,i,a,s){let l=n.GetMetersPerDegAtLat(a),r=i;return 0!==e&&(r=i+e*s/l),r}static Deg2Rad(e){return e*(2*Math.PI/360)}static GetMetersPerDegAtLat(e){return e=n.Deg2Rad(e),111412.84*Math.cos(e)+-93.5*Math.cos(3*e)+.118*Math.cos(5*e)}}t.GeoPixelConversion3D=n},5772:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Shape2=void 0;const a=i(8087),n=i(1358),s=i(7389),l=i(8795),r=i(5467);class o extends l.ShapeInfo{constructor(e){super(),this.setShapeType(e),this._Shape=new n.GeneralPath;let t=new a.BasicStroke;this.setStroke(t)}style=0;set_Style(e){this.style=e}get_Style(){return this.style}lineTo(e){this._Shape.lineTo(e.x,e.y)}moveTo(e){this._Shape.moveTo(e.x,e.y)}getBounds(){return this._Shape instanceof n.GeneralPath?this._Shape.getBounds():this.getBounds()}getPoints(){let e=new Array;for(let t=this.getShape().getPathIterator(null);!t.isDone();t.next()){let i=new Array(6),a=t.currentSegment(i);switch(a){case r.IPathIterator.SEG_MOVETO:case r.IPathIterator.SEG_LINETO:case r.IPathIterator.SEG_CLOSE:e.push(new s.POINT2(i[0],i[1],a));break;case r.IPathIterator.SEG_QUADTO:e.push(new s.POINT2(i[0],i[1],a)),e.push(new s.POINT2(i[2],i[3],a));break;case r.IPathIterator.SEG_CUBICTO:e.push(new s.POINT2(i[0],i[1],a)),e.push(new s.POINT2(i[2],i[3],a)),e.push(new s.POINT2(i[4],i[5],a))}}return e}}t.Shape2=o},5784:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SymbolInfo=void 0,t.SymbolInfo=class{_LineInfo;_TextInfo;constructor(...e){switch(e.length){case 0:break;case 2:{const[t,i]=e;this._LineInfo=i,this._TextInfo=t;break}default:throw Error("Invalid number of arguments")}}getTextInfoList(){return this._TextInfo}getLineInfoList(){return this._LineInfo}}},5938:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Ellipse=void 0;const a=i(6001),n=i(2517);t.Ellipse=class{rectangle;constructor(e,t,i,n){this.rectangle=new a.Rectangle(e,t,i,n)}getShapeType(){return n.ShapeTypes.ELLIPSE}getBounds(){return new a.Rectangle(this.rectangle.getX()-1,this.rectangle.getY()-1,this.rectangle.getWidth()+2,this.rectangle.getHeight()+2)}shift(e,t){this.rectangle.shift(e,t)}setPath(e){var t=this.rectangle.getX(),i=this.rectangle.getY(),a=this.rectangle.getWidth(),n=this.rectangle.getHeight(),s=.5522848,l=a/2*s,r=n/2*s,o=t+a,c=i+n,T=t+a/2,u=i+n/2;e.moveTo(t,u),e.bezierCurveTo(t,u-r,T-l,i,T,i),e.bezierCurveTo(T+l,i,o,u-r,o,u),e.bezierCurveTo(o,u+r,T+l,c,T,c),e.bezierCurveTo(T-l,c,t,u+r,t,u),e.closePath()}stroke(e){e.beginPath(),this.setPath(e),e.stroke()}fill(e){e.beginPath(),this.setPath(e),e.fill()}toSVGElement(e,t,i){var a='<ellipse cx="'+this.rectangle.getCenterX()+'" cy="'+this.rectangle.getCenterY();return a+='" rx="'+this.rectangle.getWidth()/2+'" ry="'+this.rectangle.getHeight()/2+'"',t?a+=' stroke-width="'+t+'"':e&&(a+=' stroke-width="2"'),e&&(a+=' stroke="'+e+'"'),(a+=i?' fill="'+i+'"':' fill="none"')+"/>"}}},5955:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeUtilities=void 0;const a=i(151),n=i(9441),s=i(3170),l=i(9625);t.ShapeUtilities=class{static grow(e,t){e.setRect(e.getX()-t,e.getY()-t,e.getWidth()+2*t,e.getHeight()+2*t)}static offset(...e){if(3===e.length)if(e[0]instanceof s.Rectangle2D){const[t,i,a]=e;t.setRect(t.getX()+i,t.getY()+a,t.getWidth(),t.getHeight())}else if(e[0]instanceof n.Point2D){const[t,i,a]=e;t.setLocation(t.getX()+i,t.getY()+a)}else if(e[0]instanceof a.Point){const[t,i,a]=e;t.setLocation(t.getX()+i,t.getY()+a)}else e[0]instanceof l.Path?console.log("ShapeUtilities.offset - Can't offset Path"):e[0]instanceof Path2D&&console.log("ShapeUtilities.offset - Can't offset Path2D")}}},6001:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Rectangle=void 0;const a=i(3170),n=i(2517);class s{x;y;width;height;bottom;right;static OUT_LEFT=1;static OUT_TOP=2;static OUT_RIGHT=4;static OUT_BOTTOM=8;constructor(e,t,i,a){this.x=e,this.y=t,this.width=i,this.height=a,this.bottom=t+a,this.right=e+i}getShapeType(){return n.ShapeTypes.RECTANGLE}getBounds(){return new s(this.x-1,this.y-1,this.width+2,this.height+2)}toRectangle2D(){return new a.Rectangle2D(this.x,this.y,this.width,this.height)}getX(){return this.x}getY(){return this.y}getWidth(){return this.width}getHeight(){return this.height}getBottom(){return this.bottom}getRight(){return this.right}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}setLocation(e,t){this.x=e,this.y=t,this.bottom=t+this.height,this.right=e+this.width}isEmpty(){return this.width<=0||this.height<=0}shift(e,t){this.x+=e,this.y+=t,this.right+=e,this.bottom+=t}shiftTL(e,t){this.x+=e,this.y+=t,this.height=this.bottom-this.y,this.width=this.right-this.x}shiftBR(e,t){this.right+=e,this.bottom+=t,this.height=this.bottom-this.y,this.width=this.right-this.x}grow(e){this.shiftTL(-e,-e),this.shiftBR(e,e)}union(e){e&&(e.y<this.y&&(this.y=e.y),e.x<this.x&&(this.x=e.x),e.bottom>this.bottom&&(this.bottom=e.bottom),e.right>this.right&&(this.right=e.right),this.width=this.right-this.x,this.height=this.bottom-this.y)}unionPoint(e){e&&(e.y<this.y&&(this.y=e.y),e.x<this.x&&(this.x=e.x),e.y>this.bottom&&(this.bottom=e.y),e.x>this.right&&(this.right=e.x),this.width=this.right-this.x,this.height=this.bottom-this.y)}contains(e,t,i,a){if(e&&t&&i&&a){if(this.isEmpty()||i<=0||a<=0)return!1;var n=this.getX(),s=this.getY();return e>=n&&t>=s&&e+i<=n+this.getWidth()&&t+a<=s+this.getHeight()}return!(!e||!t)&&(n=this.getX(),s=this.getY(),e>=n&&t>=s&&e<n+this.getWidth()&&t<s+this.getHeight())}containsPoint(e){if(e){var t=e.getX(),i=e.getY(),a=this.getX(),n=this.getY();return t>=a&&i>=n&&t<a+this.getWidth()&&i<n+this.getHeight()}return!1}containsRectangle(e){if(e){var t=e.getX(),i=e.getY(),a=e.getWidth(),n=e.getHeight();if(this.isEmpty()||a<=0||n<=0)return!1;var s=this.getX(),l=this.getY();return t>=s&&i>=l&&t+a<=s+this.getWidth()&&i+n<=l+this.getHeight()}return!1}outcode(e,t){var i=0;return this.width<=0?i|=s.OUT_LEFT|s.OUT_RIGHT:e<this.x?i|=s.OUT_LEFT:e>this.x+this.width&&(i|=s.OUT_RIGHT),this.height<=0?i|=s.OUT_TOP|s.OUT_BOTTOM:t<this.y?i|=s.OUT_TOP:t>this.y+this.height&&(i|=s.OUT_BOTTOM),i}intersectsLine(e,t,i,a){let n=0,l=0;if(0===(l=this.outcode(i,a)))return!0;for(;0!==(n=this.outcode(e,t));){if(n&l)return!1;if(n&(s.OUT_LEFT|s.OUT_RIGHT)){var r=this.getX();n&s.OUT_RIGHT&&(r+=this.getWidth()),t+=(r-e)*(a-t)/(i-e),e=r}else{var o=this.getY();n&s.OUT_BOTTOM&&(o+=this.getHeight()),e+=(o-t)*(i-e)/(a-t),t=o}}return!0}setPath(e){var t=this.getX(),i=this.getY(),a=this.getWidth(),n=this.getHeight();e.moveTo(t,i),e.lineTo(t+a,i),e.lineTo(t+a,i+n),e.lineTo(t,i+n),e.closePath()}stroke(e){e.strokeRect(this.getX(),this.getY(),this.getWidth(),this.getHeight())}fill(e){e.fillRect(this.getX(),this.getY(),this.getWidth(),this.getHeight())}clone(){return new s(this.x,this.y,this.width,this.height)}intersects(e){if(e){var t=this.width,i=this.height,a=e.width,n=e.height;if(a<=0||n<=0||t<=0||i<=0)return!1;var s=this.x,l=this.y,r=e.x,o=e.y;return n+=o,t+=s,i+=l,((a+=r)<r||a>s)&&(n<o||n>l)&&(t<s||t>r)&&(i<l||i>o)}return!1}toSVGElement(e,t,i){var a='<rect x="'+this.x+'" y="'+this.y;return a+='" width="'+this.width+'" height="'+this.height+'"',t?a+=' stroke-width="'+t+'"':e&&(a+=' stroke-width="2"'),e&&(a+=' stroke="'+e+'"'),(a+=i?' fill="'+i+'"':' fill="none"')+"/>"}}t.Rectangle=s},6142:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGLookup=void 0;const a=i(3170),n=i(3254),s=i(92),l=i(2421),r=i(7300),o=i(1059);class c{static _instance;static _initCalled=!1;static _isReady=!1;static _SVGLookupD;static _SVGLookupE;static svgd;static svge;static svgdJSON="/svgd.json";static svgeJSON="/svge.json";static async loadData(e){let t=c.svgdJSON,i=c.svgeJSON;e&&(t=e+t.substring(t.lastIndexOf("/")+1,t.length),i=e+i.substring(i.lastIndexOf("/")+1,i.length));let a=new Array;a.push(o.RendererUtilities.getData(t)),a.push(o.RendererUtilities.getData(i)),await Promise.all(a).then((e=>{c.svgd=e[0],c.svge=e[1]})).catch((e=>{throw e}))}constructor(){this.init()}static getInstance(){return c._instance||(c._instance=new c),c._instance}init(){if(!1===c._initCalled){c._initCalled=!0,c._SVGLookupD=new Map,c._SVGLookupE=new Map;try{this.populateLookup(c.svgd,l.SymbolID.Version_2525Dch1),this.populateLookup(c.svge,l.SymbolID.Version_2525E),c._SVGLookupD.size>0&&c._SVGLookupD.size>0&&(c._isReady=!0)}catch(e){throw c._initCalled=!1,e}}}isReady(){return c._isReady}populateLookup(e,t){let i,n;try{let r;r=t===l.SymbolID.Version_2525E?c._SVGLookupE:c._SVGLookupD;let o=e.svgdata.SVGElements.length;for(let t=0;t<o;t++){let l=e.svgdata.SVGElements[t];if(null!=l){let e=l.id,t=0,o=0,c=0,T=0;t=parseFloat(l.X),o=parseFloat(l.Y),c=parseFloat(l.Width),T=parseFloat(l.Height),n=l.SVG,i=new a.Rectangle2D(t,o,c,T),r.set(e,new s.SVGInfo(e,i,n))}}}catch(e){console.log(e.message)}}getSVGLInfo(e,t){if(t>=l.SymbolID.Version_2525E){if(c._SVGLookupE.has(e))return c._SVGLookupE.get(e)}else if(c._SVGLookupD.has(e))return c._SVGLookupD.get(e);return null}getSVGOctagon(){return c._SVGLookupD.has("octagon")?c._SVGLookupD.get("octagon"):null}static getFrameID(e){let t,i,a=l.SymbolID.getAffiliation(e),n=l.SymbolID.getStatus(e);a!==l.SymbolID.StandardIdentity_Affiliation_Pending&&a!==l.SymbolID.StandardIdentity_Affiliation_AssumedFriend&&a!==l.SymbolID.StandardIdentity_Affiliation_Suspect_Joker||(n=0),n>1&&(n=0);let s=l.SymbolID.getContext(e);if(l.SymbolID.getVersion(e)<l.SymbolID.Version_2525E){switch(l.SymbolID.getSymbolSet(e)){case 1:case 2:case 51:i="01";break;case 5:case 6:case 50:i="05";break;case 10:case 11:i="10";break;case 15:case 52:case 53:i="30";break;case 30:if(i="30",15e4===l.SymbolID.getEntityCode(e))return"octagon";break;case 20:i="20";break;case l.SymbolID.SymbolSet_DismountedIndividuals:i="27";break;case 35:case 36:case 54:i="35";break;case 40:i="40";break;case 60:i="60";break;default:i="00",s===l.SymbolID.StandardIdentity_Context_Exercise&&a>l.SymbolID.StandardIdentity_Affiliation_Unknown&&(a=l.SymbolID.StandardIdentity_Affiliation_Unknown)}t=s+"_"+a+i+"_"+n}else{let i=l.SymbolID.getFrameShape(e);if(i===l.SymbolID.FrameShape_Unknown&&(i=l.SymbolID.getDefaultFrameShape(e),s===l.SymbolID.StandardIdentity_Context_Exercise&&l.SymbolID.getSymbolSet(e)===l.SymbolID.SymbolSet_Unknown&&a>l.SymbolID.StandardIdentity_Affiliation_Unknown&&(a=l.SymbolID.StandardIdentity_Affiliation_Unknown)),l.SymbolID.getSymbolSet(e)===l.SymbolID.SymbolSet_SeaSurface&&15e4===l.SymbolID.getEntityCode(e)&&(i===l.SymbolID.FrameShape_LandEquipment_SeaSurface||i===l.SymbolID.FrameShape_Unknown))return"octagon";t=s+"_"+a+i+"_"+n}return t}static getMainIconID(e){let t=e.substring(4,6)+e.substring(10,16),i=l.SymbolID.getSymbolSet(e);if(i===l.SymbolID.SymbolSet_MineWarfare)n.RendererSettings.getInstance().getSeaMineRenderMethod()!==n.RendererSettings.SeaMineRenderMethod_ALT&&"36110600"!==t&&"36110700"!==t||(t+="_a");else if(i===l.SymbolID.SymbolSet_LandUnit)switch(l.SymbolID.getEntityCode(e)){case 111e3:case 111001:case 111002:case 111003:case 111004:case 111005:case 111500:case 120100:case 120400:case 120401:case 120402:case 120501:case 120502:case 120601:case 120801:case 121100:case 121101:case 121102:case 121103:case 121104:case 121105:case 121106:case 121300:case 121301:case 121302:case 121303:case 121802:case 130100:case 130101:case 130102:case 130103:case 130200:case 130302:case 140102:case 140103:case 140104:case 140105:case 140702:case 140703:case 141702:case 150504:case 150800:case 160200:case 161200:case 161300:case 161400:case 161700:case 161800:case 161900:case 162e3:case 162100:case 162200:case 163400:case 163700:case 163800:case 163900:case 164e3:case 164100:case 164200:case 164300:case 164400:case 164500:case 164600:case 165e3:t+=c.getPostFixForIcon(e)}else if(i===l.SymbolID.SymbolSet_LandEquipment)120111===l.SymbolID.getEntityCode(e)&&(t+=c.getPostFixForIcon(e));else if(i===l.SymbolID.SymbolSet_LandInstallation)switch(l.SymbolID.getEntityCode(e)){case 110300:case 111200:case 120103:case 120105:case 120106:case 120107:case 120701:case 120702:t+=c.getPostFixForIcon(e)}else if(i===l.SymbolID.SymbolSet_Activities)switch(l.SymbolID.getEntityCode(e)){case 110303:case 130201:case 131202:case 131208:t+=c.getPostFixForIcon(e)}else i===l.SymbolID.SymbolSet_Unknown?t="00000000":i!==l.SymbolID.SymbolSet_Air&&i!==l.SymbolID.SymbolSet_AirMissile&&i!==l.SymbolID.SymbolSet_Space&&i!==l.SymbolID.SymbolSet_SpaceMissile&&i!==l.SymbolID.SymbolSet_LandCivilianUnit_Organization&&i!==l.SymbolID.SymbolSet_DismountedIndividuals&&i!==l.SymbolID.SymbolSet_ControlMeasure&&i!==l.SymbolID.SymbolSet_SeaSurface&&i!==l.SymbolID.SymbolSet_SeaSubsurface&&i!==l.SymbolID.SymbolSet_Atmospheric&&i!==l.SymbolID.SymbolSet_Oceanographic&&i!==l.SymbolID.SymbolSet_MeteorologicalSpace&&i!==l.SymbolID.SymbolSet_SignalsIntelligence_Space&&i!==l.SymbolID.SymbolSet_SignalsIntelligence_Air&&i!==l.SymbolID.SymbolSet_SignalsIntelligence_Land&&i!==l.SymbolID.SymbolSet_SignalsIntelligence_SeaSurface&&i!==l.SymbolID.SymbolSet_SignalsIntelligence_SeaSubsurface&&i!==l.SymbolID.SymbolSet_CyberSpace&&(t="98100000");return t}static getPostFixForIcon(e){let t=l.SymbolID.getAffiliation(e),i="";return t===l.SymbolID.StandardIdentity_Affiliation_Friend||t===l.SymbolID.StandardIdentity_Affiliation_AssumedFriend?i+="_1":t===l.SymbolID.StandardIdentity_Affiliation_Neutral?i+="_2":t===l.SymbolID.StandardIdentity_Affiliation_Hostile_Faker||t===l.SymbolID.StandardIdentity_Affiliation_Suspect_Joker?i+="_3":t!==l.SymbolID.StandardIdentity_Affiliation_Unknown&&t!==l.SymbolID.StandardIdentity_Affiliation_Pending||(i+="_0"),i}static getMod1ID(e){let t;return l.SymbolID.getVersion(e)>=l.SymbolID.Version_2525E&&"0"!==e.charAt(20)?t=e.substring(20,21)+e.substring(16,18)+"_1":(t=l.SymbolID.getEntity(e)>=11?e.substring(4,6)+e.substring(16,18)+"1":e.substring(4,6)+"001",l.SymbolID.getSymbolSet(e)===l.SymbolID.SymbolSet_LandUnit&&98===l.SymbolID.getModifier1(e)&&(t+=c.getPostFixForIcon(e))),t}static getMod2ID(e){let t;if(l.SymbolID.getVersion(e)>=l.SymbolID.Version_2525E&&"0"!==e.charAt(21))t=e.substring(21,22)+e.substring(18,20)+"_2";else if(t=l.SymbolID.getEntity(e)>=11?e.substring(4,6)+e.substring(18,20)+"2":e.substring(4,6)+"002",l.SymbolID.getSymbolSet(e)===l.SymbolID.SymbolSet_LandUnit)switch(l.SymbolID.getModifier2(e)){case 60:case 62:case 84:case 89:t+=c.getPostFixForIcon(e)}return t}static getEchelonAmplifier(e){let t;return l.SymbolID.getVersion(e),l.SymbolID.Version_2525E,t=e.charAt(3)+e.substring(8,10),t}static getHQTFFD(e){let t;return l.SymbolID.getVersion(e),l.SymbolID.Version_2525E,t=e.substring(3,6)+e.charAt(7),t}static getOCA(e,t){if(t){let t=l.SymbolID.getStatus(e);return t===l.SymbolID.Status_Present_Damaged||t===l.SymbolID.Status_Present_Destroyed?t.toString():null}{let t;return l.SymbolID.getVersion(e),l.SymbolID.Version_2525E,t=e.substring(2,7)+"2",t}}static getAllKeys(){let e=new Array,t=c._SVGLookupD.keys();for(const i of t)e.push(i);return e}addCustomSymbol(e,t){try{e.getID(),t<l.SymbolID.Version_2525E?0==c._SVGLookupD.has(e.getID())&&c._SVGLookupD.set(e.getID(),e):t===l.SymbolID.Version_2525E&&0==c._SVGLookupE.has(e.getID())&&c._SVGLookupE.set(e.getID(),e)}catch(e){r.ErrorLogger.LogException("SVGLookup","addCUstomSymbol",e)}return!1}}t.SVGLookup=c},6507:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModifierRenderer=void 0;const a=i(8087),n=i(9441),s=i(3170),l=i(6001),r=i(7436),o=i(5938),c=i(4352),T=i(9625),u=i(8113),g=i(7017),L=i(2023),d=i(9866),_=i(6932),h=i(3874),E=i(7232),A=i(3254),I=i(1059),S=i(269),y=i(2571),f=i(3444),D=i(2421),M=i(2466),P=i(2723),R=i(5955),N=i(4615),C=i(2517);class O{static _instance;static _className="ModifierRenderer";static RS=A.RendererSettings.getInstance();static _modifierFont=O.RS.getLabelFont();static _modifierFontHeight=11;static _modifierFontDescent=2;static _bmp=new OffscreenCanvas(2,2);static _frc=this._bmp.getContext("2d");SettingsEventChanged(e){if(e===S.SettingsChangedEvent.EventType_FontChanged){O._modifierFont=A.RendererSettings.getInstance().getLabelFont(),O._frc.font=O._modifierFont.toString();let e=O._frc.measureText("Hj");O._modifierFontHeight=e.fontBoundingBoxAscent,O._modifierFontDescent=e.fontBoundingBoxDescent}}constructor(){}static getInstance(){return O._instance||(O._instance=new O,A.RendererSettings.getInstance().addEventListener(O._instance),O._instance.SettingsEventChanged(S.SettingsChangedEvent.EventType_FontChanged)),O._instance}static processUnitDisplayModifiers(e,t,i,a,g){let L,h,S,y,P,p,x,b,w=e.getSymbolBounds().clone(),m=e.getImageBounds(),F=e.getSymbolCenterPoint(),G=new n.Point2D(w.getCenterX(),w.getCenterY()),U=u.Color.BLACK,v=3,H=3,B=u.Color.BLACK,k=M.SymbolUtilities.getFillColorOfAffiliation(t),Y=-1,W=0,X=A.RendererSettings.getInstance().getDefaultPixelSize(),V=D.SymbolID.getSymbolSet(t);a.has(d.MilStdAttributes.Alpha)&&(Y=parseFloat(a.get(d.MilStdAttributes.Alpha))/255),a.has(d.MilStdAttributes.TextColor)&&(U=I.RendererUtilities.getColorFromHexString(a.get(d.MilStdAttributes.TextColor))),x=a.has(d.MilStdAttributes.TextBackgroundColor)?I.RendererUtilities.getColorFromHexString(a.get(d.MilStdAttributes.TextBackgroundColor)):I.RendererUtilities.getIdealOutlineColor(U),a.has(d.MilStdAttributes.LineColor)&&(B=I.RendererUtilities.getColorFromHexString(a.get(d.MilStdAttributes.LineColor))),a.has(d.MilStdAttributes.FillColor)&&(k=I.RendererUtilities.getColorFromHexString(a.get(d.MilStdAttributes.FillColor))),a.has(d.MilStdAttributes.PixelSize)&&(X=parseInt(a.get(d.MilStdAttributes.PixelSize))),v=X<=100?2:2+(X-100)/100;let z,K,Q,Z,J,j=D.SymbolID.getAmplifierDescriptor(t),q=new Array;if(new Array,j>=D.SymbolID.Mobility_WheeledLimitedCrossCountry&&(M.SymbolUtilities.hasModifier(t,_.Modifiers.R_MOBILITY_INDICATOR)||M.SymbolUtilities.hasModifier(t,_.Modifiers.AG_AUX_EQUIP_INDICATOR))){let e=.2*w.getWidth()+.5,i=0,a=0,n=0,s=0,u=0,g=0,L=0,d=2,h=e,E=e;if(i=w.getX()+1,a=w.getY(),u=w.getHeight(),g=Math.round(w.getWidth())-3,s=a+u+3,new Array,j>=D.SymbolID.Mobility_WheeledLimitedCrossCountry&&j<D.SymbolID.Mobility_ShortTowedArray&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.R_MOBILITY_INDICATOR))if(j===D.SymbolID.Mobility_WheeledLimitedCrossCountry)q.push(new r.Line(i,s,i+g,s)),q.push(new o.Ellipse(i,s+d,h,h)),q.push(new o.Ellipse(i+g-h,s+d,h,h));else if(j===D.SymbolID.Mobility_WheeledCrossCountry)q.push(new r.Line(i,s,i+g,s)),q.push(new o.Ellipse(i,s+d,h,h)),q.push(new o.Ellipse(i+g-h,s+d,h,h)),q.push(new o.Ellipse(i+g/2-h/2,s+d,h,h));else if(j===D.SymbolID.Mobility_Tracked)q.push(new c.RoundedRectangle(i,s,g,E,E/3*2));else if(j===D.SymbolID.Mobility_Wheeled_Tracked)q.push(new c.RoundedRectangle(i,s,g,E,E/3*2)),q.push(new o.Ellipse(i-h-h/3,s,h,h));else if(j===D.SymbolID.Mobility_Towed)q.push(new r.Line(i+h,s+h/2,i+g-h,s+h/2)),q.push(new o.Ellipse(i,s,h,h)),q.push(new o.Ellipse(i+g-h,s,h,h));else if(j===D.SymbolID.Mobility_Rail)q.push(new r.Line(i,s,i+g,s)),q.push(new o.Ellipse(i+h,s+d,h,h)),q.push(new o.Ellipse(i,s+d,h,h)),q.push(new o.Ellipse(i+g-h,s+d,h,h)),q.push(new o.Ellipse(i+g-h-h,s+d,h,h));else if(j===D.SymbolID.Mobility_OverSnow){let e=new T.Path;e.moveTo(i,s),e.lineTo(i+5,s+5),e.lineTo(i+g,s+5),q.push(e)}else if(j===D.SymbolID.Mobility_Sled){let e=new T.Path;e.moveTo(i,s),e.bezierCurveTo(i,s,i-E,s+E/2,i,s+E),e.lineTo(i+g,s+E),e.bezierCurveTo(i+g,s+E,i+g+E,s+E/2,i+g,s),q.push(e)}else if(j===D.SymbolID.Mobility_PackAnimals){let e=new T.Path;n=Math.round(w.getCenterX());let t=E/2;e.moveTo(n,s+E+2),e.lineTo(n-t,s),e.lineTo(n-2*t,s+E+2),e.moveTo(n,s+E+2),e.lineTo(n+t,s),e.lineTo(n+2*t,s+E+2),q.push(e)}else if(j===D.SymbolID.Mobility_Barge){let e=new T.Path;n=w.getCenterX();let t=(n-i)/2;e.moveTo(i+g,s),e.lineTo(i,s),e.bezierCurveTo(i+t,s+E,n+t,s+E,i+g,s),q.push(e)}else if(j===D.SymbolID.Mobility_Amphibious){let e=g/7,t=s,a=s+E/2,n=a+E/2,l=new T.Path;l.moveTo(i,a),l.bezierCurveTo(i,t,i+e,t,i+e,a),l.bezierCurveTo(i+e,n,i+2*e,n,i+2*e,a),l.bezierCurveTo(i+2*e,t,i+3*e,t,i+3*e,a),l.bezierCurveTo(i+3*e,n,i+4*e,n,i+4*e,a),l.bezierCurveTo(i+4*e,t,i+5*e,t,i+5*e,a),l.bezierCurveTo(i+5*e,n,i+6*e,n,i+6*e,a),l.bezierCurveTo(i+6*e,t,i+7*e,t,i+7*e,a),q.push(l)}if((j===D.SymbolID.Mobility_ShortTowedArray||j===D.SymbolID.Mobility_LongTowedArray)&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.AG_AUX_EQUIP_INDICATOR)){let e=.5*E+.5;e<5&&(H=1),s=a+u+e/7,W=e/7,n=w.getCenterX();let t=Math.round(.5*e);if(L=e/2+s+W,j===D.SymbolID.Mobility_ShortTowedArray)q.push(new r.Line(n,s-1,n,s+W+e+W)),q.push(new r.Line(i,L,i+g,L)),q.push(new l.Rectangle(i-t,s+W,e,e)),q.push(new l.Rectangle(Math.round(n-t),s+W,e,e)),q.push(new l.Rectangle(i+g-t,s+W,e,e));else if(j===D.SymbolID.Mobility_LongTowedArray){let a=i+(n-i)/2,o=n+(i+g-n)/2;q.push(new r.Line(a,s-1,a,s+W+e+W)),q.push(new r.Line(o,s-1,o,s+W+e+W)),q.push(new r.Line(i,L,i+g,L)),q.push(new l.Rectangle(i-t,s+W,e,e)),q.push(new l.Rectangle(n-t,s+W,e,e)),q.push(new l.Rectangle(i+g-t,s+W,e,e)),q.push(new l.Rectangle(a-t,s+W,e,e)),q.push(new l.Rectangle(o-t,s+W,e,e))}}if(null!=q&&q.length>0){b=q[0].getBounds();let e=q.length,t=null;for(var $=1;$<e;$++)t=q[$],b.union(t.getBounds());j===D.SymbolID.Mobility_ShortTowedArray||j===D.SymbolID.Mobility_LongTowedArray?b.grow(Math.ceil(H/2)):b.grow(Math.ceil(v/2)),m=m.createUnion(b.toRectangle2D())}}if(j===D.SymbolID.Leadership_Individual&&V===D.SymbolID.SymbolSet_DismountedIndividuals&&(D.SymbolID.getFrameShape(t)===D.SymbolID.FrameShape_DismountedIndividuals||D.SymbolID.getFrameShape(t)===D.SymbolID.FrameShape_Unknown)){K=new T.Path,D.SymbolID.getStandardIdentity(t);let e=D.SymbolID.getAffiliation(t),i=(D.SymbolID.getContext(t),0),a=0,l=w.getX(),r=w.getX()+w.getWidth();e!==D.SymbolID.StandardIdentity_Affiliation_Unknown&&e!==D.SymbolID.StandardIdentity_Affiliation_Pending||(i=.1012528735632184*w.getHeight(),a=.3583513488109785*(r-l)),e===D.SymbolID.StandardIdentity_Affiliation_Neutral&&(i=.2537878787878788*w.getHeight(),a=.2051402812352822*(r-l)),M.SymbolUtilities.isReality(t)||M.SymbolUtilities.isSimulation(t)?e===D.SymbolID.StandardIdentity_Affiliation_Friend||e===D.SymbolID.StandardIdentity_Affiliation_AssumedFriend?(i=.08*w.getHeight(),a=.282714524168219*(r-l)):e!==D.SymbolID.StandardIdentity_Affiliation_Hostile_Faker&&e!==D.SymbolID.StandardIdentity_Affiliation_Suspect_Joker||(l=w.getCenterX()-w.getWidth()/2*1.0653694149,r=w.getCenterX()+w.getWidth()/2*1.0653694149,i=.08*w.getHeight(),a=.4923255424955992*(r-l)):e===D.SymbolID.StandardIdentity_Affiliation_Unknown&&e!==D.SymbolID.StandardIdentity_Affiliation_Neutral||(i=.08*w.getHeight(),a=.282714524168219*(r-l)),Q=new n.Point2D(w.getCenterX(),w.getY()-i),Z=new n.Point2D(l,Q.getY()+a),J=new n.Point2D(r,Q.getY()+a),K.moveTo(Q.getX(),Q.getY()),K.lineTo(Z.getX(),Z.getY()),K.moveTo(Q.getX(),Q.getY()),K.lineTo(J.getX(),J.getY()),z=K.getBounds().toRectangle2D(),z=new s.Rectangle2D(Z.getX(),Q.getY(),J.getX()-Z.getX(),Z.getY()-Q.getY()),E.RectUtilities.grow(z,2),m=m.createUnion(z)}let ee,te,ie,ae,ne,se,le,re,oe,ce,Te,ue,ge=D.SymbolID.getAmplifierDescriptor(t);if(ge>10&&ge<29&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.B_ECHELON)&&(ee=M.SymbolUtilities.getEchelonText(ge)),null!=ee&&!1===M.SymbolUtilities.isInstallation(t)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.B_ECHELON)){let e=2,t=A.RendererSettings.getInstance().getTextOutlineWidth(),i=A.RendererSettings.getInstance().getLabelFont();S=new N.SVGTextInfo(ee,0,0,i.toString(),g),P=S.getTextBounds();let a=Math.round(w.getY()-e),n=Math.round(w.getX())+w.getWidth()/2-P.getWidth()/2;S.setLocation(n,a),P.grow(t),S.setLocation(n,a-t),m=m.createUnion(P)}if(D.SymbolID.getHQTFD(t),M.SymbolUtilities.isTaskForce(t)){let e=Math.round(w.getHeight()/4),i=Math.round(w.getWidth()/3);if(M.SymbolUtilities.hasRectangleFrame(t)||(e=Math.round(w.getHeight()/6)),ie=new s.Rectangle2D(w.getX()+i,w.getY()-e,i,e),te=new s.Rectangle2D(ie.getX()-1,ie.getY()-1,ie.getWidth()+2,ie.getHeight()+2),null!=P){let e=ie.getX(),t=ie.getWidth(),i=ie.getY(),a=ie.getHeight();P.getWidth()>ie.getWidth()&&(e=w.getX()+w.getWidth()/2-P.getWidth()/2-1,t=P.getWidth()+2),P.getHeight()>ie.getHeight()&&(i=P.getY()-1,a=P.getHeight()+2),ie=new s.Rectangle2D(e,i,t,a),te=new s.Rectangle2D(ie.getX()-1,ie.getY()-1,ie.getWidth()+2,ie.getHeight()+2)}m=m.createUnion(te)}if(M.SymbolUtilities.hasFDI(t)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.AB_FEINT_DUMMY_INDICATOR)){if(se=new n.Point2D(w.getX(),w.getY()),le=new n.Point2D(w.getX()+w.getWidth(),w.getY()),ne=new n.Point2D(Math.round(w.getCenterX()),Math.round(w.getY()-.5*w.getWidth())),ae=new s.Rectangle2D(se.getX(),ne.getY(),le.getX()-se.getX(),se.getY()-ne.getY()),null!=P){let e=Math.round(w.getY()-P.getHeight()-2);se.setLocation(se.getX(),se.getY()+e),ne.setLocation(ne.getX(),ne.getY()+e),le.setLocation(le.getX(),le.getY()+e),ae=new s.Rectangle2D(se.getX(),ne.getY(),le.getX()-se.getX(),se.getY()-ne.getY())}m=m.createUnion(ae)}let Le,de,_e,he,Ee,Ae,Ie,Se,ye,fe,De=0,Me=0,Pe=0,Re=0;if(Le=a.has(d.MilStdAttributes.EngagementBarColor)?I.RendererUtilities.getColorFromHexString(a.get(d.MilStdAttributes.EngagementBarColor)):k,M.SymbolUtilities.hasModifier(t,_.Modifiers.AO_ENGAGEMENT_BAR)&&i.has(_.Modifiers.AO_ENGAGEMENT_BAR)&&(re=i.get(_.Modifiers.AO_ENGAGEMENT_BAR)),null!=re&&(ue=new N.SVGTextInfo(re,0,0,O._modifierFont,g),Te=ue.getTextBounds(),Re=Te.getHeight(),De=null!=ae?ae.getY()-Re-4:null!=te?te.getY()-Re-4:null!=P?P.getY()-Re-4:M.SymbolUtilities.hasModifier(t,_.Modifiers.C_QUANTITY)&&i.has(_.Modifiers.C_QUANTITY)?w.getY()-2*Re-4:V===D.SymbolID.SymbolSet_LandInstallation?w.getY()-Re-8:w.getY()-Re-4,Te.getWidth()+4>w.getWidth()?(Pe=Te.getWidth()+4,Me=G.getX()-Pe/2):(Me=w.getX()+1,Pe=w.getWidth()-2),ue.setLocation(G.getX(),De+Re-ue.getDescent()),oe=new s.Rectangle2D(Me,De,Pe,Re),ce=E.RectUtilities.copyRect(oe),E.RectUtilities.grow(ce,1),m=m.createUnion(ce)),!1===O.RS.getDrawAffiliationModifierAsLabel()&&(de=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=de){let e=2,t=A.RendererSettings.getInstance().getTextOutlineWidth();y=new N.SVGTextInfo(de,0,0,A.RendererSettings.getInstance().getLabelFont().toString(),g),p=y.getTextBounds();let i=0,a=0;null!=P&&P.getMinX()+P.getWidth()>w.getMinX()+w.getWidth()&&(a=Math.round(w.getMinY()-e),i=P.getMinX()+P.getWidth()+e),null!=ce&&ce.getMinX()+ce.getWidth()>w.getMinX()+w.getWidth()?(a=Math.round(w.getMinY()-e),i=ce.getMinX()+ce.getWidth()+e+A.RendererSettings.getInstance().getTextOutlineWidth()):(a=Math.round(w.getMinY()-e),i=Math.round(w.getMinX()+w.getWidth()+e+A.RendererSettings.getInstance().getTextOutlineWidth())),y.setLocation(i,a),p.grow(t),R.ShapeUtilities.offset(p,0,-t),y.setLocation(i,a-t),m=m.createUnion(p)}if(M.SymbolUtilities.isHQ(t)&&(D.SymbolID.getAffiliation(t),D.SymbolID.getContext(t),_e=M.SymbolUtilities.hasRectangleFrame(t)?new n.Point2D(w.getX()+1,w.getY()+w.getHeight()):new n.Point2D(w.getX()+1,w.getY()+w.getHeight()/2),he=new n.Point2D(_e.getX(),_e.getY()+w.getHeight()),Ee=new s.Rectangle2D(_e.getX(),_e.getY(),2,he.getY()-_e.getY()),m=m.createUnion(new s.Rectangle2D(_e.getX(),_e.getY(),he.getX()-_e.getX(),he.getY()-_e.getY())),F.setLocation(he.getX(),he.getY())),i.has(_.Modifiers.Q_DIRECTION_OF_MOVEMENT)&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.Q_DIRECTION_OF_MOVEMENT)){let e=i.get(_.Modifiers.Q_DIRECTION_OF_MOVEMENT);if(null!=e&&M.SymbolUtilities.isNumber(e)){let a,l=parseFloat(e),r=i.has(_.Modifiers.Y_LOCATION);Ae=O.createDOMArrowPoints(t,w,new n.Point2D(F.x,F.y),l,r,g),Ie=new s.Rectangle2D(Ae[0].getX(),Ae[0].getY(),1,1);for(let e=1;e<6;e++)a=Ae[e],null!=a&&(Ie=Ie.createUnion(new s.Rectangle2D(a.getX(),a.getY(),1,1)));m=m.createUnion(Ie)}}let Ne=4;if(M.SymbolUtilities.hasModifier(t,_.Modifiers.AL_OPERATIONAL_CONDITION))if(null!=b&&(Ne=Math.round(b.getY()+b.getHeight()-(w.getY()+w.getHeight()))+4),A.RendererSettings.getInstance().getOperationalConditionModifierType()===A.RendererSettings.OperationalConditionModifierType_BAR){if(ye=O.processOperationalConditionIndicator(t,w,Ne),null!=ye){let e=ye.clone();R.ShapeUtilities.grow(e,2),Se=e,m=m.createUnion(Se)}}else fe=O.processOperationalConditionIndicatorSlash(t,w),null!=fe&&(Se=fe.getBounds().toRectangle2D(),m=m.createUnion(Se));if(e instanceof f.SVGSymbolInfo){let i,a="",s=I.RendererUtilities.colorToHexString(B,!1),l=(I.RendererUtilities.colorToHexString(k,!1),I.RendererUtilities.colorToHexString(U,!1)),o=I.RendererUtilities.colorToHexString(x,!1),c=v,g=A.RendererSettings.getInstance().getTextOutlineWidth();if(Y>=0&&Y<=1&&(i=Y.toString()),null!=Ee&&(a+=new r.Line(_e.getX(),_e.getY(),he.getX(),he.getY()).toSVGElement(s,v,null)),null!=P&&(a+=S.toSVGElement(l,o,g)),null!=p&&(a+=y.toSVGElement(l,o,g)),null!=te&&(a+=ie.toSVGElement(s,c,null)),null!=ce){let e=I.RendererUtilities.colorToHexString(Le,!1);a+=oe.toSVGElement(s,c,e),a+=ue.toSVGElement("#000000",null,0,"middle")}if(null!=ae){let e="6 4",t=[6,4];w.getHeight()<20&&(e="5 3");let i=I.RendererUtilities.getDistanceBetweenPoints(ne,se);t[1]=i/14*2,t[0]=i/14*3,e=t[0]+" "+t[1];let n=new T.Path;n.moveTo(ne.getX(),ne.getY()),n.lineTo(se.getX(),se.getY()),n.moveTo(ne.getX(),ne.getY()),n.lineTo(le.getX(),le.getY()),n.setLineDash(e),a+=n.toSVGElement(s,c,null)}if(null!=z){let e=2;X<100&&(e=1),a+=K.toSVGElement(s,e,null)}if(null!=Se&&null!=ye){let e;switch(D.SymbolID.getStatus(t)){case D.SymbolID.Status_Present_FullyCapable:e=u.Color.green;break;case D.SymbolID.Status_Present_Damaged:e=u.Color.yellow;break;case D.SymbolID.Status_Present_Destroyed:e=u.Color.red;break;case D.SymbolID.Status_Present_FullToCapacity:e=u.Color.blue}let i=I.RendererUtilities.colorToHexString(e,!1);a+=Se.toSVGElement(null,null,s),a+=ye.toSVGElement(null,null,i),Se=null,ye=null}if(null!=b){let e=c;j>30&&j<60||(e=H);for(let t=0;t<q.length;t++)q[t].getShapeType()!==C.ShapeTypes.RECTANGLE?a+=q[t].toSVGElement(s,e,"none"):a+=q[t].toSVGElement("none",0,s);b=null}if(L=e,a+=L.getSVG(),null!=Se&&null!=fe){let e=3;e=w.getWidth()/20,e<1&&(e=1),a+=fe.toSVGElement(s,e,null),Se=null,fe=null}if(null!=Ie){let e=new T.Path;e.moveTo(Ae[0].getX(),Ae[0].getY()),null!=Ae[1]&&e.lineTo(Ae[1].getX(),Ae[1].getY()),null!=Ae[2]&&e.lineTo(Ae[2].getX(),Ae[2].getY()),a+=e.toSVGElement(s,c,null),e=new T.Path,e.moveTo(Ae[3].getX(),Ae[3].getY()),e.lineTo(Ae[4].getX(),Ae[4].getY()),e.lineTo(Ae[5].getX(),Ae[5].getY()),a+=e.toSVGElement("none",0,s),Ie=null,Ae=null}h=new f.SVGSymbolInfo(a.toString().valueOf(),new n.Point2D(F.x,F.y),w,m)}return null!=h?h:null}static getYPositionForSCC(e){return.32}static createDOMArrowPoints(e,t,i,a,s,l){let r,o,c=new Array(6),T=40;T=M.SymbolUtilities.isCBRNEvent(e)?Math.round(t.getHeight()/2):M.SymbolUtilities.isHQ(e)&&M.SymbolUtilities.hasRectangleFrame(e)?Math.round(t.getHeight()):Math.round(.7*t.getHeight());let u=0,g=0,L=0,d=0,h=0,E=0;if(L=Math.round(i.getX()),d=Math.round(i.getY()),r=new n.Point2D(L,d),M.SymbolUtilities.hasModifier(e,_.Modifiers.Q_DIRECTION_OF_MOVEMENT)&&M.SymbolUtilities.isCBRNEvent(e)||M.SymbolUtilities.isLand(e))if(!1===M.SymbolUtilities.isHQ(e)){if(d=t.getY()+t.getHeight(),r=new n.Point2D(L,d),!0===s&&M.SymbolUtilities.isCBRNEvent(e)){let e=O._modifierFontHeight;e+=O.RS.getTextOutlineWidth(),r.setLocation(r.getX(),r.getY()+e)}d+=T,o=new n.Point2D(L,d)}else L=t.getX()+1,M.SymbolUtilities.hasRectangleFrame(e)?(d=t.getY()+t.getHeight(),r=new n.Point2D(L,d),d+=T,o=new n.Point2D(L,d)):(d=t.getY()+t.getHeight()/2,r=new n.Point2D(L,d),h=L,d=r.getY()+t.getHeight(),o=new n.Point2D(h,d));let A=0;A=(a-=90)*(Math.PI/180),u=L+T*Math.cos(A),g=d+T*Math.sin(A),h=Math.round(u),E=Math.round(g);let I=new Array,S=new n.Point2D(h,E);return I=null!=o?this.createDOMArrowHead(o,S):this.createDOMArrowHead(r,S),null!=I&&(c[0]=r,c[1]=o,c[2]=void 0,c[3]=I[0],c[4]=I[1],c[5]=I[2],I.length>=4&&null!=I[3]&&(c[2]=I[3])),c}static createDOMArrowHead(e,t){let i=new Array,a=e.getX(),s=e.getY(),l=t.getX(),r=t.getY(),o=l-a,c=r-s,T=Math.sqrt(o*o+c*c),u=.1*T,g=1.5*u,L=o/T,d=c/T,_=-d,h=l,E=r,A=l-g*L+u*_,I=r-g*d+u*L,S=l-g*L-u*_,y=r-g*d-u*L;i[0]=new n.Point2D(h,E),i[1]=new n.Point2D(A,I),i[2]=new n.Point2D(S,y);let f=(A+S)/2,D=(I+y)/2;return i[3]=new n.Point2D(f,D),i}static drawDOMArrow(e,t,i,n){new a.BasicStroke(n,a.BasicStroke.CAP_BUTT,a.BasicStroke.JOIN_MITER,10);let s=new T.Path;s.moveTo(t[0].getX(),t[0].getY()),null!=t[1]&&s.lineTo(t[1].getX(),t[1].getY()),null!=t[2]&&s.lineTo(t[2].getX(),t[2].getY()),s.moveTo(t[3].getX(),t[3].getY()),s.lineTo(t[4].getX(),t[4].getY()),s.lineTo(t[5].getX(),t[5].getY()),s.fill(e)}static processOperationalConditionIndicator(e,t,i){let a,n=0,l=0,r=t.getHeight();return n=D.SymbolID.getStatus(e),n!==D.SymbolID.Status_Present_FullyCapable&&n!==D.SymbolID.Status_Present_Damaged&&n!==D.SymbolID.Status_Present_Destroyed&&n!==D.SymbolID.Status_Present_FullToCapacity||(r>0&&(l=Math.round(r/5)),l<2&&(l=2),i+=Math.round(t.getY()+t.getHeight()),a=new s.Rectangle2D(t.getX()+2,i,Math.round(t.getWidth())-4,l)),a}static processOperationalConditionIndicatorSlash(e,t){let i,a=0;if(a=D.SymbolID.getStatus(e),a===D.SymbolID.Status_Present_Damaged||a===D.SymbolID.Status_Present_Destroyed){let n=M.SymbolUtilities.getUnitRatioWidth(e),s=M.SymbolUtilities.getUnitRatioHeight(e),l=t.getHeight()/s*1.47,r=t.getWidth()/n*.85,o=t.getCenterX(),c=t.getCenterY();return i=new T.Path,a===D.SymbolID.Status_Present_Damaged?(i.moveTo(o-r/2,c+l/2),i.lineTo(o+r/2,c-l/2)):a===D.SymbolID.Status_Present_Destroyed&&(i.moveTo(o-r/2,c+l/2),i.lineTo(o+r/2,c-l/2),i.moveTo(o-r/2,c-l/2),i.lineTo(o+r/2,c+l/2)),i}return i}static processUnknownTextModifiers(e,t,i,a,n){let s,r,o=0,c=0,T=-1,L=(u.Color.BLACK,new Array);a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let h=0,A=0,I=e.getSymbolBounds().clone(),S=e.getSymbolBounds().clone(),y=(e.getSymbolCenterPoint(),new l.Rectangle(e.getImageBounds().getX(),e.getImageBounds().getY(),e.getImageBounds().getWidth(),e.getImageBounds().getHeight()).toRectangle2D()),f=y.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),I=E.RectUtilities.toRectangle2D(y.getX(),I.getY(),y.getWidth(),I.getHeight());let R,N=!0;A=O._modifierFontHeight+.5,3*A>I.getHeight()&&(N=!0),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(R=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=R&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,R);let C,p,x=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=x&&""!==x&&i.set(_.Modifiers.AS_COUNTRY,x),i.has(_.Modifiers.C_QUANTITY)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.C_QUANTITY)){let e=i.get(_.Modifiers.C_QUANTITY);null!=e&&(p=new P.TextInfo(e,0,0,O._modifierFont,n),r=p.getTextBounds(),h=r.getWidth(),o=Math.round(S.getX()+.5*S.getWidth()-.5*h),c=Math.round(S.getY()-2-p.getDescent()),p.setLocation(o,c),L.push(p))}if(i.has(_.Modifiers.X_ALTITUDE_DEPTH)||i.has(_.Modifiers.Y_LOCATION)){let e,a;C=null,i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.X_ALTITUDE_DEPTH)&&(e=i.get(_.Modifiers.X_ALTITUDE_DEPTH)),i.has(_.Modifiers.Y_LOCATION)&&(a=i.get(_.Modifiers.Y_LOCATION)),null==e&&null!=a?C=a:null!=e&&null==a?C=e:null!=e&&null!=a&&(C=e+"  "+a),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),r=p.getTextBounds(),h=r.getWidth(),N?(o=I.getX()-r.getWidth()-7,c=I.getHeight(),c=.5*c+.5*A,c-=A+2,c=I.getY()+c):(o=Math.round(I.getX()-r.getWidth()-7),c=Math.round(I.getY()+A-p.getDescent())),p.setLocation(o,c),L.push(p))}if(i.has(_.Modifiers.G_STAFF_COMMENTS)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.G_STAFF_COMMENTS)&&(C=i.get(_.Modifiers.G_STAFF_COMMENTS),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),r=p.getTextBounds(),h=r.getWidth(),o=I.getX()+I.getWidth()+7,N?(c=I.getHeight(),c=.5*c+.5*A,c-=A+2,c=I.getY()+c):c=I.getY()+A-p.getDescent(),p.setLocation(o,c),L.push(p))),i.has(_.Modifiers.V_EQUIP_TYPE)||i.has(_.Modifiers.AD_PLATFORM_TYPE)||i.has(_.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME)){let e,a,s;i.has(_.Modifiers.V_EQUIP_TYPE)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.V_EQUIP_TYPE)&&(e=i.get(_.Modifiers.V_EQUIP_TYPE)),i.has(_.Modifiers.AD_PLATFORM_TYPE)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.AD_PLATFORM_TYPE)&&(a=i.get(_.Modifiers.AD_PLATFORM_TYPE)),i.has(_.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME)&&(s=i.get(_.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME)),C="",null!=e&&""!==e&&(C=e),null!=a&&""!==a&&(C+=" "+a),null!=s&&""!==s&&(C+=" "+s),null!=C&&(C=C.trim()),null!=C&&""!==C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),r=p.getTextBounds(),h=r.getWidth(),o=I.getX()-r.getWidth()-7,c=I.getHeight(),c=.5*c+.5*(A-p.getDescent()),c=I.getY()+c,p.setLocation(o,c),L.push(p))}if(i.has(_.Modifiers.H_ADDITIONAL_INFO_1)||i.has(_.Modifiers.AF_COMMON_IDENTIFIER)){C="";let e="",a="";e=i.get(_.Modifiers.H_ADDITIONAL_INFO_1),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(e=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),i.has(_.Modifiers.AF_COMMON_IDENTIFIER)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.AF_COMMON_IDENTIFIER)&&(a=i.get(_.Modifiers.AF_COMMON_IDENTIFIER)),C=e+" "+a,C=C.trim(),null!=C&&""!==C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),r=p.getTextBounds(),h=r.getWidth(),o=I.getX()+I.getWidth()+7,c=I.getHeight(),c=.5*c+.5*(A-p.getDescent()),c=I.getY()+c,p.setLocation(o,c),L.push(p))}if(i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(C=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),r=p.getTextBounds(),h=r.getWidth(),N?(o=I.getX()-h-7,c=I.getHeight(),c=.5*c+.5*A,c+=A+2-p.getDescent(),c=I.getY()+c):(o=I.getX()-h-7,c=I.getY()+I.getHeight()),p.setLocation(o,c),L.push(p))),(i.has(_.Modifiers.M_HIGHER_FORMATION)||i.has(_.Modifiers.AS_COUNTRY))&&(C="",i.has(_.Modifiers.M_HIGHER_FORMATION)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.M_HIGHER_FORMATION)&&(C+=i.get(_.Modifiers.M_HIGHER_FORMATION)),i.has(_.Modifiers.AS_COUNTRY)&&(C.length>0&&(C+=" "),C+=i.get(_.Modifiers.AS_COUNTRY)),""!==C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),r=p.getTextBounds(),h=r.getWidth(),o=I.getX()+I.getWidth()+7,N?(c=I.getHeight(),c=.5*c+.5*A,c+=A+2-p.getDescent(),c=I.getY()+c):c=I.getY()+I.getHeight(),p.setLocation(o,c),L.push(p))),i.has(_.Modifiers.Z_SPEED)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.Z_SPEED)&&(C=i.get(_.Modifiers.Z_SPEED),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),r=p.getTextBounds(),h=r.getWidth(),o=I.getX()-h-7,N?(c=I.getHeight(),c=.5*c+.5*A,c=c+2*(A+2)-2*p.getDescent(),c=Math.round(I.getY()+c)):c=Math.round(I.getY()+I.getHeight()+A+2),p.setLocation(o,c),L.push(p))),i.has(_.Modifiers.J_EVALUATION_RATING)||i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)||i.has(_.Modifiers.L_SIGNATURE_EQUIP)||i.has(_.Modifiers.N_HOSTILE)||i.has(_.Modifiers.P_IFF_SIF_AIS)){let e,a,s,l,T;C=null,i.has(_.Modifiers.J_EVALUATION_RATING)&&(e=i.get(_.Modifiers.J_EVALUATION_RATING)),i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.K_COMBAT_EFFECTIVENESS)&&(a=i.get(_.Modifiers.K_COMBAT_EFFECTIVENESS)),i.has(_.Modifiers.L_SIGNATURE_EQUIP)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.L_SIGNATURE_EQUIP)&&(s=i.get(_.Modifiers.L_SIGNATURE_EQUIP)),i.has(_.Modifiers.N_HOSTILE)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.N_HOSTILE)&&(l=i.get(_.Modifiers.N_HOSTILE)),i.has(_.Modifiers.P_IFF_SIF_AIS)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.P_IFF_SIF_AIS)&&(T=i.get(_.Modifiers.P_IFF_SIF_AIS)),C="",null!=e&&""!==e&&(C+=e),null!=a&&""!==a&&(C=C+" "+a),null!=s&&""!==s&&(C=C+" "+s),null!=l&&""!==l&&(C=C+" "+l),null!=T&&""!==T&&(C=C+" "+T),C.length>2&&" "===C.charAt(0)&&(C=C.substring(1)),C=C.trim(),""!==C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),r=p.getTextBounds(),h=r.getWidth(),o=I.getX()+I.getWidth()+7,N?(c=I.getHeight(),c=.5*c+.5*A,c=c+2*(A+2)-2*p.getDescent(),c=Math.round(I.getY()+c)):c=Math.round(I.getY()+I.getHeight()+A+2),p.setLocation(o,c),L.push(p))}if(i.has(_.Modifiers.W_DTG_1)&&(C=i.get(_.Modifiers.W_DTG_1),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),r=p.getTextBounds(),h=r.getWidth(),N?(o=I.getX()-h-7,c=I.getHeight(),c=.5*c+.5*A,c-=2*(A+2),c=I.getY()+c):(o=I.getX()-h-7,c=I.getY()-2-p.getDescent()),p.setLocation(o,c),L.push(p))),i.has(_.Modifiers.F_REINFORCED_REDUCED)||i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)){let e,a;C=null,i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER),i.delete(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.F_REINFORCED_REDUCED)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.F_REINFORCED_REDUCED)&&(a=i.get(_.Modifiers.F_REINFORCED_REDUCED)),null!=e&&""!==e&&(C=e),null!=a&&""!==a&&("R"===a.toUpperCase()?a="(+)":"D"===a.toUpperCase()?a="(-)":"RD"===a.toUpperCase()&&(a="("+String.fromCharCode(177)+")")),null!=a&&""!==a&&(C=null!=C&&""!==C?C+" "+a:a),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),r=p.getTextBounds(),h=r.getWidth(),N?(o=I.getX()+I.getWidth()+7,c=I.getHeight(),c=.5*c+.5*A,c-=2*(A+2),c=I.getY()+c):(o=I.getX()+I.getWidth()+7,c=I.getY()-2-p.getDescent()),p.setLocation(o,c),L.push(p))}return i.has(_.Modifiers.AA_SPECIAL_C2_HQ)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.AA_SPECIAL_C2_HQ)&&(C=i.get(_.Modifiers.AA_SPECIAL_C2_HQ),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),r=p.getTextBounds(),h=r.getWidth(),o=S.getX()+.5*S.getWidth()-.5*h,c=S.getHeight(),c=.5*c+.5*(A-p.getDescent()),c=S.getY()+c,p.setLocation(o,c),L.push(p))),s=O.shiftUnitPointsAndDraw(L,e,a),L=null,p=null,f=null,s}static processLandUnitTextModifiers(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=(u.Color.BLACK,new Array),L=O._modifierFontDescent;a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let h=0,A=0,I=e.getSymbolBounds(),S=e.getSymbolBounds().clone(),y=(e.getSymbolCenterPoint(),e.getImageBounds().clone()),f=y.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),I=E.RectUtilities.toRectangle2D(y.getX(),I.getY(),y.getWidth(),I.getHeight()),D.SymbolID.getSymbolSet(t);let R,N=!0;A=O._modifierFontHeight+.5,I.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(R=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=R&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,R);let C,p,x=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=x&&""!==x&&i.set(_.Modifiers.AS_COUNTRY,x),i.has(_.Modifiers.X_ALTITUDE_DEPTH)||i.has(_.Modifiers.Y_LOCATION)){let e,a;C=null,i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.X_ALTITUDE_DEPTH)&&(e=i.get(_.Modifiers.X_ALTITUDE_DEPTH)),i.has(_.Modifiers.Y_LOCATION)&&(a=i.get(_.Modifiers.Y_LOCATION)),null==e&&null!=a?C=a:null!=e&&null==a?C=e:null!=e&&null!=a&&(C=e+"  "+a),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()-l.getWidth()-7,o=I.getY()+(I.getHeight()/2-1-L),p.setLocation(r,o),T.push(p))}if(i.has(_.Modifiers.G_STAFF_COMMENTS)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.G_STAFF_COMMENTS)&&(C=i.get(_.Modifiers.G_STAFF_COMMENTS),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=A+2,o=I.getY()+o,p.setLocation(r,o),T.push(p))),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(C=null,i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(C=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),null!=C&&""!==C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*(A-L),o=I.getY()+o,p.setLocation(r,o),T.push(p))),i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(C=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getY()+(I.getHeight()/2+A+1-L),p.setLocation(r,o),T.push(p))),i.has(_.Modifiers.M_HIGHER_FORMATION)&&(C="",i.has(_.Modifiers.M_HIGHER_FORMATION)&&(C+=i.get(_.Modifiers.M_HIGHER_FORMATION)),""!==C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o+=A+2-L,o=I.getY()+o,p.setLocation(r,o),T.push(p))),i.has(_.Modifiers.Z_SPEED)&&(C=i.get(_.Modifiers.Z_SPEED),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getY()+(I.getHeight()/2+2*(A-L+2)),p.setLocation(r,o),T.push(p))),i.has(_.Modifiers.J_EVALUATION_RATING)||i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)||i.has(_.Modifiers.P_IFF_SIF_AIS)){let e,t,a;C="",i.has(_.Modifiers.J_EVALUATION_RATING)&&(e=i.get(_.Modifiers.J_EVALUATION_RATING)),i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)&&(t=i.get(_.Modifiers.K_COMBAT_EFFECTIVENESS)),i.has(_.Modifiers.P_IFF_SIF_AIS)&&(a=i.get(_.Modifiers.P_IFF_SIF_AIS)),null!=e&&""!==e&&(C+=e),null!=t&&""!==t&&(C=C+" "+t),null!=a&&""!==a&&(C=C+" "+a),C.length>2&&" "===C.charAt(0)&&(C=C.substring(1)),C=C.trim(),""!==C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o=o+2*(A+2)-2*L,o=Math.round(I.getY()+o),p.setLocation(r,o),T.push(p))}if(i.has(_.Modifiers.W_DTG_1)&&(C=i.get(_.Modifiers.W_DTG_1),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getY()+(I.getHeight()/2-2-L-A),p.setLocation(r,o),T.push(p))),i.has(_.Modifiers.F_REINFORCED_REDUCED)||i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)||i.has(_.Modifiers.AS_COUNTRY)){let e,t,a;C=null,i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER),i.delete(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.F_REINFORCED_REDUCED)&&(t=i.get(_.Modifiers.F_REINFORCED_REDUCED)),i.has(_.Modifiers.AS_COUNTRY)&&(a=i.get(_.Modifiers.AS_COUNTRY)),null!=e&&""!==e&&(C=e),null!=t&&""!==t&&("R"===t.toUpperCase()?t="(+)":"D"===t.toUpperCase()?t="(-)":"RD"===t.toUpperCase()&&(t="("+String.fromCharCode(177)+")")),null!=t&&""!==t&&(C=null!=C&&""!==C?C+" "+t:t),null!=a&&""!==a&&(C=null!=C&&""!==C?C+" "+a:a),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=2*(A+2),o=I.getY()+o,p.setLocation(r,o),T.push(p))}return i.has(_.Modifiers.AA_SPECIAL_C2_HQ)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.AA_SPECIAL_C2_HQ)&&(C=i.get(_.Modifiers.AA_SPECIAL_C2_HQ),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=S.getX()+.5*S.getWidth()-.5*h,o=S.getHeight(),o=.5*o+.5*(A-L),o=S.getY()+o,p.setLocation(r,o),T.push(p))),s=O.shiftUnitPointsAndDraw(T,e,a),T=null,p=null,f=null,s}static processLandUnitTextModifiersE(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=u.Color.BLACK,L=(I.RendererUtilities.getIdealOutlineColor(T),new Array),h=O._modifierFontDescent;a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let A=0,S=0,y=e.getSymbolBounds(),f=e.getSymbolBounds().clone(),R=(e.getSymbolCenterPoint(),e.getImageBounds().clone()),N=R.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),y=E.RectUtilities.toRectangle2D(R.getX(),y.getY(),R.getWidth(),y.getHeight()),D.SymbolID.getSymbolSet(t);let C,p=!0;S=O._modifierFontHeight+.5,y.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(C=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=C&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,C);let x,b,w=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=w&&""!==w&&i.set(_.Modifiers.AS_COUNTRY,w),i.has(_.Modifiers.X_ALTITUDE_DEPTH)||i.has(_.Modifiers.Y_LOCATION)){let e,a;x=null,i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.X_ALTITUDE_DEPTH)&&(e=i.get(_.Modifiers.X_ALTITUDE_DEPTH)),i.has(_.Modifiers.Y_LOCATION)&&(a=i.get(_.Modifiers.Y_LOCATION)),null==e&&null!=a?x=a:null!=e&&null==a?x=e:null!=e&&null!=a&&(x=e+"  "+a),null!=x&&(b=new P.TextInfo(x,0,0,O._modifierFont,n),l=b.getTextBounds(),A=l.getWidth(),r=y.getX()-A-7,o=y.getHeight(),o=.5*o+.5*S,o-=S+2,o=y.getY()+o,b.setLocation(r,o),L.push(b))}if(i.has(_.Modifiers.G_STAFF_COMMENTS)||i.has(_.Modifiers.AQ_GUARDED_UNIT)){let e,a;x=null,i.has(_.Modifiers.G_STAFF_COMMENTS)&&M.SymbolUtilities.hasModifier(t,_.Modifiers.G_STAFF_COMMENTS)&&(e=i.get(_.Modifiers.G_STAFF_COMMENTS)),i.has(_.Modifiers.AQ_GUARDED_UNIT)&&(a=i.get(_.Modifiers.AQ_GUARDED_UNIT)),null==e&&null!=a?x=a:null!=e&&null==a?x=e:null!=e&&null!=a&&(x=e+"  "+a),null!=x&&(b=new P.TextInfo(x,0,0,O._modifierFont,n),l=b.getTextBounds(),A=l.getWidth(),r=y.getX()+y.getWidth()+7,o=y.getHeight(),o=.5*o+.5*S,o-=S+2,o=y.getY()+o,b.setLocation(r,o),L.push(b))}if(i.has(_.Modifiers.H_ADDITIONAL_INFO_1)||i.has(_.Modifiers.AF_COMMON_IDENTIFIER)){let e,t;x=null,i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(e=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),i.has(_.Modifiers.AF_COMMON_IDENTIFIER)&&(t=i.get(_.Modifiers.AF_COMMON_IDENTIFIER)),null==e&&null!=t?x=t:null!=e&&null==t?x=e:null!=e&&null!=t&&(x=e+"  "+t),null!=x&&""!==x&&(b=new P.TextInfo(x,0,0,O._modifierFont,n),l=b.getTextBounds(),A=l.getWidth(),r=y.getX()+y.getWidth()+7,o=y.getHeight(),o=.5*o+.5*(S-h),o=y.getY()+o,b.setLocation(r,o),L.push(b))}if(i.has(_.Modifiers.V_EQUIP_TYPE)||i.has(_.Modifiers.AD_PLATFORM_TYPE)||i.has(_.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME)){let e,t,a;x="",i.has(_.Modifiers.V_EQUIP_TYPE)&&(e=i.get(_.Modifiers.V_EQUIP_TYPE)),i.has(_.Modifiers.AD_PLATFORM_TYPE)&&(t=i.get(_.Modifiers.AD_PLATFORM_TYPE)),i.has(_.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME)&&(a=i.get(_.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME)),null!=e&&""!==e&&(x+=e),null!=t&&""!==t&&(x=x+" "+t),null!=a&&""!==a&&(x=x+" "+a),x=x.trim(),null!=x&&""!==x&&(b=new P.TextInfo(x,0,0,O._modifierFont,n),l=b.getTextBounds(),A=l.getWidth(),r=y.getX()-A-7,o=y.getHeight(),o=.5*o+.5*(S-h),o=y.getY()+o,b.setLocation(r,o),L.push(b))}if(i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(x=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=x&&(b=new P.TextInfo(x,0,0,O._modifierFont,n),l=b.getTextBounds(),A=l.getWidth(),r=y.getX()-A-7,o=y.getHeight(),o=.5*o+.5*S,o+=S+2-h,o=y.getY()+o,b.setLocation(r,o),L.push(b))),i.has(_.Modifiers.M_HIGHER_FORMATION)&&(x="",i.has(_.Modifiers.M_HIGHER_FORMATION)&&(x+=i.get(_.Modifiers.M_HIGHER_FORMATION)),""!==x&&(b=new P.TextInfo(x,0,0,O._modifierFont,n),l=b.getTextBounds(),A=l.getWidth(),r=y.getX()+y.getWidth()+7,o=y.getHeight(),o=.5*o+.5*S,o+=S+2-h,o=y.getY()+o,b.setLocation(r,o),L.push(b))),i.has(_.Modifiers.Z_SPEED)&&(x=i.get(_.Modifiers.Z_SPEED),null!=x&&(b=new P.TextInfo(x,0,0,O._modifierFont,n),l=b.getTextBounds(),A=l.getWidth(),r=y.getX()-A-7,o=y.getHeight(),o=.5*o+.5*S,o=o+2*(S+2)-2*h,o=Math.round(y.getY()+o),b.setLocation(r,o),L.push(b))),i.has(_.Modifiers.J_EVALUATION_RATING)||i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)||i.has(_.Modifiers.L_SIGNATURE_EQUIP)||i.has(_.Modifiers.P_IFF_SIF_AIS)){let e,t,a,s;x="",i.has(_.Modifiers.J_EVALUATION_RATING)&&(e=i.get(_.Modifiers.J_EVALUATION_RATING)),i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)&&(t=i.get(_.Modifiers.K_COMBAT_EFFECTIVENESS)),i.has(_.Modifiers.L_SIGNATURE_EQUIP)&&(a=i.get(_.Modifiers.L_SIGNATURE_EQUIP)),i.has(_.Modifiers.P_IFF_SIF_AIS)&&(s=i.get(_.Modifiers.P_IFF_SIF_AIS)),null!=e&&""!==e&&(x+=e),null!=t&&""!==t&&(x=x+" "+t),null!=a&&""!==a&&(x=x+" "+a),null!=s&&""!==s&&(x=x+" "+s),x.length>2&&" "===x.charAt(0)&&(x=x.substring(1)),x=x.trim(),""!==x&&(b=new P.TextInfo(x,0,0,O._modifierFont,n),l=b.getTextBounds(),A=l.getWidth(),r=y.getX()+y.getWidth()+7,o=y.getHeight(),o=.5*o+.5*S,o=o+2*(S+2)-2*h,o=Math.round(y.getY()+o),b.setLocation(r,o),L.push(b))}if(i.has(_.Modifiers.W_DTG_1)&&(x=i.get(_.Modifiers.W_DTG_1),null!=x&&(b=new P.TextInfo(x,0,0,O._modifierFont,n),l=b.getTextBounds(),A=l.getWidth(),r=y.getX()-A-7,o=y.getHeight(),o=.5*o+.5*S,o-=2*(S+2),o=y.getY()+o,b.setLocation(r,o),L.push(b))),i.has(_.Modifiers.F_REINFORCED_REDUCED)||i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)||i.has(_.Modifiers.AS_COUNTRY)){let e,t,a;x=null,i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER),i.delete(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.F_REINFORCED_REDUCED)&&(t=i.get(_.Modifiers.F_REINFORCED_REDUCED)),i.has(_.Modifiers.AS_COUNTRY)&&(a=i.get(_.Modifiers.AS_COUNTRY)),null!=e&&""!==e&&(x=e),null!=t&&""!==t&&("R"===t.toUpperCase()?t="(+)":"D"===t.toUpperCase()?t="(-)":"RD"===t.toUpperCase()&&(t="("+String.fromCharCode(177)+")")),null!=t&&""!==t&&(x=null!=x&&""!==x?x+" "+t:t),null!=a&&""!==a&&(x=null!=x&&""!==x?x+" "+a:a),null!=x&&(b=new P.TextInfo(x,0,0,O._modifierFont,n),l=b.getTextBounds(),A=l.getWidth(),r=y.getX()+y.getWidth()+7,o=y.getHeight(),o=.5*o+.5*S,o-=2*(S+2),o=y.getY()+o,b.setLocation(r,o),L.push(b))}return i.has(_.Modifiers.AA_SPECIAL_C2_HQ)&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.AA_SPECIAL_C2_HQ)&&(x=i.get(_.Modifiers.AA_SPECIAL_C2_HQ),null!=x&&(b=new P.TextInfo(x,0,0,O._modifierFont,n),l=b.getTextBounds(),A=l.getWidth(),r=f.getX()+.5*f.getWidth()-.5*A,o=f.getHeight(),o=.5*o+.5*(S-h),o=f.getY()+o,b.setLocation(r,o),L.push(b))),s=O.shiftUnitPointsAndDraw(L,e,a),L=null,b=null,N=null,s}static processAirSpaceUnitTextModifiers(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=(u.Color.BLACK,new Array);O._modifierFontDescent,a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let L=0,h=0,A=e.getSymbolBounds(),I=(e.getSymbolBounds().clone(),e.getSymbolCenterPoint(),e.getImageBounds().clone()),S=I.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),A=E.RectUtilities.toRectangle2D(I.getX(),A.getY(),I.getWidth(),A.getHeight());let y,f=!0;h=O._modifierFontHeight+.5,A.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(y=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=y&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,y);let R,N,C=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=C&&""!==C&&i.set(_.Modifiers.AS_COUNTRY,C),i.has(_.Modifiers.G_STAFF_COMMENTS)||i.has(_.Modifiers.H_ADDITIONAL_INFO_1)){let e="",t="";i.has(_.Modifiers.G_STAFF_COMMENTS)&&(e=i.get(_.Modifiers.G_STAFF_COMMENTS)),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(t=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),R=e+" "+t,R=R.trim(),null!=R&&""!==R&&(N=new P.TextInfo(R,0,0,O._modifierFont,n),l=N.getTextBounds(),L=l.getWidth(),r=A.getX()+A.getWidth()+7,o=A.getY()+A.getHeight(),N.setLocation(r,o),T.push(N))}if(i.has(_.Modifiers.Z_SPEED)||i.has(_.Modifiers.X_ALTITUDE_DEPTH)){R="";let e="",t="";i.has(_.Modifiers.Z_SPEED)&&(e=i.get(_.Modifiers.Z_SPEED)),i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&(t=i.get(_.Modifiers.X_ALTITUDE_DEPTH)),R=e+" "+t,R=R.trim(),null!=R&&""!==R&&(N=new P.TextInfo(R,0,0,O._modifierFont,n),l=N.getTextBounds(),L=l.getWidth(),r=A.getX()+A.getWidth()+7,o=A.getY()+A.getHeight()-h,N.setLocation(r,o),T.push(N))}if(i.has(_.Modifiers.V_EQUIP_TYPE)&&(R=i.get(_.Modifiers.V_EQUIP_TYPE),null!=R&&""!==R&&(N=new P.TextInfo(R,0,0,O._modifierFont,n),l=N.getTextBounds(),L=l.getWidth(),r=A.getX()+A.getWidth()+7,o=A.getY()+A.getHeight()-2*h,N.setLocation(r,o),T.push(N))),M.SymbolUtilities.isAir(t)){if(i.has(_.Modifiers.P_IFF_SIF_AIS)&&(R=i.get(_.Modifiers.P_IFF_SIF_AIS),null!=R&&""!==R&&(N=new P.TextInfo(R,0,0,O._modifierFont,n),l=N.getTextBounds(),L=l.getWidth(),r=A.getX()+A.getWidth()+7,o=A.getY()+A.getHeight()-3*h,N.setLocation(r,o),T.push(N))),i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(R=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=R&&""!==R&&(N=new P.TextInfo(R,0,0,O._modifierFont,n),l=N.getTextBounds(),L=l.getWidth(),r=A.getX()+A.getWidth()+7,o=A.getY()+A.getHeight()-4*h,N.setLocation(r,o),T.push(N))),i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)||i.has(_.Modifiers.AS_COUNTRY)){R=null,R="";let e="",t="";i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.AS_COUNTRY)&&(t=i.get(_.Modifiers.AS_COUNTRY)),R=e+" "+t,R=R.trim(),""!==R&&(N=new P.TextInfo(R,0,0,O._modifierFont,n),l=N.getTextBounds(),L=l.getWidth(),r=A.getX()+A.getWidth()+7,o=A.getY()+A.getHeight()-5*h,N.setLocation(r,o),T.push(N))}}else if(i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(R=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=R&&""!==R&&(N=new P.TextInfo(R,0,0,O._modifierFont,n),l=N.getTextBounds(),L=l.getWidth(),r=A.getX()+A.getWidth()+7,o=A.getY()+A.getHeight()-3*h,N.setLocation(r,o),T.push(N))),i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)||i.has(_.Modifiers.AS_COUNTRY)){R=null,R="";let e="",t="";i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.AS_COUNTRY)&&(t=i.get(_.Modifiers.AS_COUNTRY)),R=e+" "+t,R=R.trim(),""!==R&&(N=new P.TextInfo(R,0,0,O._modifierFont,n),l=N.getTextBounds(),L=l.getWidth(),r=A.getX()+A.getWidth()+7,o=A.getY()+A.getHeight()-4*h,N.setLocation(r,o),T.push(N))}return s=O.shiftUnitPointsAndDraw(T,e,a),T=null,N=null,S=null,s}static processAirSpaceUnitTextModifiersE(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=(u.Color.BLACK,new Array);O._modifierFontDescent,a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let L=0,h=0,A=e.getSymbolBounds(),I=(e.getSymbolBounds().clone(),e.getSymbolCenterPoint(),e.getImageBounds().clone()),S=I.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),A=E.RectUtilities.toRectangle2D(I.getX(),A.getY(),I.getWidth(),A.getHeight());let y,f=!0;h=O._modifierFontHeight+.5,A.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(y=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=y&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,y);let R,N,C=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=C&&""!==C&&i.set(_.Modifiers.AS_COUNTRY,C),i.has(_.Modifiers.G_STAFF_COMMENTS)||i.has(_.Modifiers.H_ADDITIONAL_INFO_1)){let e="",t="";i.has(_.Modifiers.G_STAFF_COMMENTS)&&(e=i.get(_.Modifiers.G_STAFF_COMMENTS)),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(t=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),R=e+" "+t,R=R.trim(),null!=R&&""!==R&&(N=new P.TextInfo(R,0,0,O._modifierFont,n),l=N.getTextBounds(),L=l.getWidth(),r=A.getX()+A.getWidth()+7,o=A.getY()+A.getHeight(),N.setLocation(r,o),T.push(N))}if(i.has(_.Modifiers.Z_SPEED)||i.has(_.Modifiers.X_ALTITUDE_DEPTH)){R=null;let e="",t="";i.has(_.Modifiers.Z_SPEED)&&(e=i.get(_.Modifiers.Z_SPEED)),i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&(t=i.get(_.Modifiers.X_ALTITUDE_DEPTH)),R=t+" "+e,R=R.trim(),null!=R&&""!==R&&(N=new P.TextInfo(R,0,0,O._modifierFont,n),l=N.getTextBounds(),L=l.getWidth(),r=A.getX()+A.getWidth()+7,o=A.getY()+A.getHeight()-h,N.setLocation(r,o),T.push(N))}if(i.has(_.Modifiers.V_EQUIP_TYPE)||i.has(_.Modifiers.AF_COMMON_IDENTIFIER)){R=null;let e="",a="";i.has(_.Modifiers.V_EQUIP_TYPE)&&(e=i.get(_.Modifiers.V_EQUIP_TYPE)),i.has(_.Modifiers.AF_COMMON_IDENTIFIER)&&D.SymbolID.getSymbolSet(t)===D.SymbolID.SymbolSet_Air&&(a=i.get(_.Modifiers.AF_COMMON_IDENTIFIER)),R=e+" "+a,R=R.trim(),null!=R&&""!==R&&(N=new P.TextInfo(R,0,0,O._modifierFont,n),l=N.getTextBounds(),L=l.getWidth(),r=A.getX()+A.getWidth()+7,o=A.getY()+A.getHeight()-2*h,N.setLocation(r,o),T.push(N))}if(i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(R=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=R&&""!==R&&(N=new P.TextInfo(R,0,0,O._modifierFont,n),l=N.getTextBounds(),L=l.getWidth(),r=A.getX()+A.getWidth()+7,o=A.getY()+A.getHeight()-3*h,N.setLocation(r,o),T.push(N))),i.has(_.Modifiers.AS_COUNTRY)||i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)){R=null;let e="",t="";i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.AS_COUNTRY)&&(t=i.get(_.Modifiers.AS_COUNTRY)),R=e+" "+t,R=R.trim(),null!=R&&""!==R&&(N=new P.TextInfo(R,0,0,O._modifierFont,n),l=N.getTextBounds(),L=l.getWidth(),r=A.getX()+A.getWidth()+7,o=A.getY()+A.getHeight()-4*h,N.setLocation(r,o),T.push(N))}return s=O.shiftUnitPointsAndDraw(T,e,a),T=null,N=null,S=null,s}static processLandEquipmentTextModifiers(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=(u.Color.BLACK,new Array),L=O._modifierFontDescent;a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let h=0,A=0,I=e.getSymbolBounds(),S=e.getSymbolBounds().clone(),y=(e.getSymbolCenterPoint(),e.getImageBounds().clone()),f=y.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),I=E.RectUtilities.toRectangle2D(y.getX(),I.getY(),y.getWidth(),I.getHeight());let R,N=!0;A=O._modifierFontHeight+.5,I.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(R=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=R&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,R);let C,p,x=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=x&&""!==x&&i.set(_.Modifiers.AS_COUNTRY,x),i.has(_.Modifiers.C_QUANTITY)){let e=i.get(_.Modifiers.C_QUANTITY);null!=e&&(p=new P.TextInfo(e,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=Math.round(S.getX()+.5*S.getWidth()-.5*h),o=Math.round(S.getY()-2-L),p.setLocation(r,o),T.push(p))}if(i.has(_.Modifiers.X_ALTITUDE_DEPTH)||i.has(_.Modifiers.Y_LOCATION)){let e,t;C=null,i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&(e=i.get(_.Modifiers.X_ALTITUDE_DEPTH)),i.has(_.Modifiers.Y_LOCATION)&&(t=i.get(_.Modifiers.Y_LOCATION)),null==e&&null!=t?C=t:null!=e&&null==t?C=e:null!=e&&null!=t&&(C=e+"  "+t),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()-l.getWidth()-7,o=I.getHeight(),o=.5*o+.5*A,o-=A+2,o=I.getY()+o,p.setLocation(r,o),T.push(p))}if(i.has(_.Modifiers.G_STAFF_COMMENTS)||i.has(_.Modifiers.AQ_GUARDED_UNIT)){C="";let e="",t="";i.has(_.Modifiers.G_STAFF_COMMENTS)&&(e=i.get(_.Modifiers.G_STAFF_COMMENTS)),i.has(_.Modifiers.AQ_GUARDED_UNIT)&&(t=i.get(_.Modifiers.AQ_GUARDED_UNIT)),C=e+" "+t,C=C.trim(),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=A+2,o=I.getY()+o,p.setLocation(r,o),T.push(p))}if(i.has(_.Modifiers.H_ADDITIONAL_INFO_1)||i.has(_.Modifiers.AF_COMMON_IDENTIFIER)){C="";let e="",t="";e=i.get(_.Modifiers.H_ADDITIONAL_INFO_1),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(e=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),i.has(_.Modifiers.AF_COMMON_IDENTIFIER)&&(t=i.get(_.Modifiers.AF_COMMON_IDENTIFIER)),C=e+" "+t,C=C.trim(),null!=C&&""!==C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*(A-L),o=I.getY()+o,p.setLocation(r,o),T.push(p))}if(i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(C=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()-l.getWidth()-7,o=I.getHeight(),o=.5*o+.5*A,o+=A+2-L,o=I.getY()+o,p.setLocation(r,o),T.push(p))),i.has(_.Modifiers.Z_SPEED)&&(C=i.get(_.Modifiers.Z_SPEED),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getHeight(),o=.5*o+.5*A,o=o+2*(A+2)-L,o=Math.round(I.getY()+o),p.setLocation(r,o),T.push(p))),i.has(_.Modifiers.J_EVALUATION_RATING)||i.has(_.Modifiers.L_SIGNATURE_EQUIP)||i.has(_.Modifiers.N_HOSTILE)||i.has(_.Modifiers.P_IFF_SIF_AIS)){let e,a,s,c;C=null,i.has(_.Modifiers.J_EVALUATION_RATING)&&(e=i.get(_.Modifiers.J_EVALUATION_RATING)),i.has(_.Modifiers.L_SIGNATURE_EQUIP)&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.L_SIGNATURE_EQUIP)&&(a=i.get(_.Modifiers.L_SIGNATURE_EQUIP)),i.has(_.Modifiers.N_HOSTILE)&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.N_HOSTILE)&&(s=i.get(_.Modifiers.N_HOSTILE)),i.has(_.Modifiers.P_IFF_SIF_AIS)&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.P_IFF_SIF_AIS)&&(c=i.get(_.Modifiers.P_IFF_SIF_AIS)),C="",null!=e&&""!==e&&(C+=e),null!=a&&""!==a&&(C=C+" "+a),null!=s&&""!==s&&(C=C+" "+s),null!=c&&""!==c&&(C=C+" "+c),C.length>2&&" "===C.charAt(0)&&(C=C.substring(1)),C=C.trim(),""!==C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o+=A+2-L,o=I.getY()+o,p.setLocation(r,o),T.push(p))}if(i.has(_.Modifiers.W_DTG_1)||i.has(_.Modifiers.AR_SPECIAL_DESIGNATOR)){C="";let e="",t="";i.has(_.Modifiers.W_DTG_1)&&(e=i.get(_.Modifiers.W_DTG_1)),i.has(_.Modifiers.AR_SPECIAL_DESIGNATOR)&&(t=i.get(_.Modifiers.AR_SPECIAL_DESIGNATOR)),C=e+" "+t,C=C.trim(),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getHeight(),o=.5*o+.5*A,o-=2*(A+2),o=I.getY()+o,p.setLocation(r,o),T.push(p))}if(i.has(_.Modifiers.AS_COUNTRY)||i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)){let e,t;C="",i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER),i.delete(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.AS_COUNTRY)&&(t=i.get(_.Modifiers.AS_COUNTRY)),null!=e&&""!==e&&(C+=e),null!=t&&""!==t&&(C=C+" "+t),C=C.trim(),""!==C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=2*(A+2),o=I.getY()+o,p.setLocation(r,o),T.push(p))}if(i.has(_.Modifiers.V_EQUIP_TYPE)||i.has(_.Modifiers.AD_PLATFORM_TYPE)||i.has(_.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME)){let e,t,a;i.has(_.Modifiers.V_EQUIP_TYPE)&&(e=i.get(_.Modifiers.V_EQUIP_TYPE)),i.has(_.Modifiers.AD_PLATFORM_TYPE)&&(t=i.get(_.Modifiers.AD_PLATFORM_TYPE)),i.has(_.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME)&&(a=i.get(_.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME)),C="",null!=e&&""!==e&&(C+=e),null!=t&&""!==t&&(C=C+" "+t),null!=a&&""!==a&&(C=C+" "+a),C=C.trim(),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getHeight(),o=.5*o+.5*(A-L),o=I.getY()+o,p.setLocation(r,o),T.push(p))}return s=O.shiftUnitPointsAndDraw(T,e,a),T=null,p=null,f=null,s}static processLandEquipmentTextModifiersE(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=(u.Color.BLACK,new Array),L=O._modifierFontDescent;a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let h=0,A=0,I=e.getSymbolBounds(),S=e.getSymbolBounds().clone(),y=(e.getSymbolCenterPoint(),e.getImageBounds().clone()),f=y.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),I=E.RectUtilities.toRectangle2D(y.getX(),I.getY(),y.getWidth(),I.getHeight());let R,N=!0;A=O._modifierFontHeight+.5,I.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(R=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=R&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,R);let C,p,x=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=x&&""!==x&&i.set(_.Modifiers.AS_COUNTRY,x),i.has(_.Modifiers.C_QUANTITY)){let e=i.get(_.Modifiers.C_QUANTITY);null!=e&&(p=new P.TextInfo(e,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=Math.round(S.getX()+.5*S.getWidth()-.5*h),o=Math.round(S.getY()-2-L),p.setLocation(r,o),T.push(p))}if(i.has(_.Modifiers.X_ALTITUDE_DEPTH)||i.has(_.Modifiers.Y_LOCATION)){let e,t;C=null,i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&(e=i.get(_.Modifiers.X_ALTITUDE_DEPTH)),i.has(_.Modifiers.Y_LOCATION)&&(t=i.get(_.Modifiers.Y_LOCATION)),null==e&&null!=t?C=t:null!=e&&null==t?C=e:null!=e&&null!=t&&(C=e+"  "+t),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()-l.getWidth()-7,o=I.getHeight(),o=.5*o+.5*A,o-=A+2,o=I.getY()+o,p.setLocation(r,o),T.push(p))}if(i.has(_.Modifiers.G_STAFF_COMMENTS)||i.has(_.Modifiers.AQ_GUARDED_UNIT)){C="";let e="",t="";i.has(_.Modifiers.G_STAFF_COMMENTS)&&(e=i.get(_.Modifiers.G_STAFF_COMMENTS)),i.has(_.Modifiers.AQ_GUARDED_UNIT)&&(t=i.get(_.Modifiers.AQ_GUARDED_UNIT)),C=e+" "+t,C=C.trim(),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=A+2,o=I.getY()+o,p.setLocation(r,o),T.push(p))}if(i.has(_.Modifiers.H_ADDITIONAL_INFO_1)||i.has(_.Modifiers.AF_COMMON_IDENTIFIER)){C="";let e="",t="";e=i.get(_.Modifiers.H_ADDITIONAL_INFO_1),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(e=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),i.has(_.Modifiers.AF_COMMON_IDENTIFIER)&&(t=i.get(_.Modifiers.AF_COMMON_IDENTIFIER)),C=e+" "+t,C=C.trim(),null!=C&&""!==C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*(A-L),o=I.getY()+o,p.setLocation(r,o),T.push(p))}if(i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(C=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()-l.getWidth()-7,o=I.getHeight(),o=.5*o+.5*A,o+=A+2-L,o=I.getY()+o,p.setLocation(r,o),T.push(p))),i.has(_.Modifiers.M_HIGHER_FORMATION)&&(C="",i.has(_.Modifiers.M_HIGHER_FORMATION)&&(C+=i.get(_.Modifiers.M_HIGHER_FORMATION)),""!==C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o+=A+2-L,o=I.getY()+o,p.setLocation(r,o),T.push(p))),i.has(_.Modifiers.Z_SPEED)&&(C=i.get(_.Modifiers.Z_SPEED),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getHeight(),o=.5*o+.5*A,o=o+2*(A+2)-L,o=Math.round(I.getY()+o),p.setLocation(r,o),T.push(p))),i.has(_.Modifiers.J_EVALUATION_RATING)||i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)||i.has(_.Modifiers.L_SIGNATURE_EQUIP)||i.has(_.Modifiers.P_IFF_SIF_AIS)){let e,a,s,c;C=null,i.has(_.Modifiers.J_EVALUATION_RATING)&&(e=i.get(_.Modifiers.J_EVALUATION_RATING)),i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)&&(a=i.get(_.Modifiers.K_COMBAT_EFFECTIVENESS)),i.has(_.Modifiers.L_SIGNATURE_EQUIP)&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.L_SIGNATURE_EQUIP)&&(s=i.get(_.Modifiers.L_SIGNATURE_EQUIP)),i.has(_.Modifiers.P_IFF_SIF_AIS)&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.P_IFF_SIF_AIS)&&(c=i.get(_.Modifiers.P_IFF_SIF_AIS)),C="",null!=e&&""!==e&&(C+=e),null!=a&&""!==a&&(C+=a),null!=s&&""!==s&&(C=C+" "+s),null!=c&&""!==c&&(C=C+" "+c),C.length>2&&" "===C.charAt(0)&&(C=C.substring(1)),C=C.trim(),""!==C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o=o+2*(A+2)-2*L,o=Math.round(I.getY()+o),p.setLocation(r,o),T.push(p))}if(i.has(_.Modifiers.W_DTG_1)&&(C=i.get(_.Modifiers.W_DTG_1),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getHeight(),o=.5*o+.5*A,o-=2*(A+2),o=I.getY()+o,p.setLocation(r,o),T.push(p))),i.has(_.Modifiers.V_EQUIP_TYPE)||i.has(_.Modifiers.AD_PLATFORM_TYPE)||i.has(_.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME)){let e,t,a;i.has(_.Modifiers.V_EQUIP_TYPE)&&(e=i.get(_.Modifiers.V_EQUIP_TYPE)),i.has(_.Modifiers.AD_PLATFORM_TYPE)&&(t=i.get(_.Modifiers.AD_PLATFORM_TYPE)),i.has(_.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME)&&(a=i.get(_.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME)),C="",null!=e&&""!==e&&(C+=e),null!=t&&""!==t&&(C=C+" "+t),null!=a&&""!==a&&(C=C+" "+a),C=C.trim(),null!=C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getHeight(),o=.5*o+.5*(A-L),o=I.getY()+o,p.setLocation(r,o),T.push(p))}if(i.has(_.Modifiers.AS_COUNTRY)||i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)){let e,t;C="",i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER),i.delete(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.AS_COUNTRY)&&(t=i.get(_.Modifiers.AS_COUNTRY)),null!=e&&""!==e&&(C+=e),null!=t&&""!==t&&(C=C+" "+t),C=C.trim(),""!==C&&(p=new P.TextInfo(C,0,0,O._modifierFont,n),l=p.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=2*(A+2),o=I.getY()+o,p.setLocation(r,o),T.push(p))}return s=O.shiftUnitPointsAndDraw(T,e,a),T=null,p=null,f=null,s}static processLandInstallationTextModifiers(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=(u.Color.BLACK,new Array),L=O._modifierFontDescent;a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let h=0,A=0,I=e.getSymbolBounds(),S=(e.getSymbolBounds().clone(),e.getSymbolCenterPoint(),e.getImageBounds().clone()),y=S.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),I=E.RectUtilities.toRectangle2D(S.getX(),I.getY(),S.getWidth(),I.getHeight());let f,R=!0;A=O._modifierFontHeight+.5,I.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(f=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=f&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,f);let N,C,p=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=p&&""!==p&&i.set(_.Modifiers.AS_COUNTRY,p),i.has(_.Modifiers.G_STAFF_COMMENTS)&&(N="",i.has(_.Modifiers.G_STAFF_COMMENTS)&&(N=i.get(_.Modifiers.G_STAFF_COMMENTS)),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=A+2,o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(N="",i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(N=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),null!=N&&""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*(A-L),o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(N=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()-l.getWidth()-7,o=I.getHeight(),o=.5*o+.5*A,o+=A+2-L,o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.J_EVALUATION_RATING)||i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)||i.has(_.Modifiers.P_IFF_SIF_AIS)){let e,a,s;N=null,i.has(_.Modifiers.J_EVALUATION_RATING)&&(e=i.get(_.Modifiers.J_EVALUATION_RATING)),i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.K_COMBAT_EFFECTIVENESS)&&(a=i.get(_.Modifiers.K_COMBAT_EFFECTIVENESS)),i.has(_.Modifiers.P_IFF_SIF_AIS)&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.P_IFF_SIF_AIS)&&(s=i.get(_.Modifiers.P_IFF_SIF_AIS)),N="",null!=e&&""!==e&&(N+=e),null!=a&&""!==a&&(N=N+" "+a),null!=s&&""!==s&&(N=N+" "+s),N.length>2&&" "===N.charAt(0)&&(N=N.substring(1)),N=N.trim(),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o+=A+2-L,o=I.getY()+o,C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.W_DTG_1)&&(N="",N=i.get(_.Modifiers.W_DTG_1),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getHeight(),o=.5*o+.5*A,o-=A+2,o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)||i.has(_.Modifiers.AS_COUNTRY)){N="";let e="",t="";i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.AS_COUNTRY)&&(t=i.get(_.Modifiers.AS_COUNTRY)),N=e+" "+t,N=N.trim(),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=2*(A+2),o=I.getY()+o,C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.X_ALTITUDE_DEPTH)||i.has(_.Modifiers.Y_LOCATION)){let e,t;i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&(e=i.get(_.Modifiers.X_ALTITUDE_DEPTH)),i.has(_.Modifiers.Y_LOCATION)&&(t=i.get(_.Modifiers.Y_LOCATION)),N="",null!=e&&""!==e&&(N+=e),null!=t&&""!==t&&(N=N+" "+t),N=N.trim(),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getHeight(),o=.5*o+.5*(A-L),o=I.getY()+o,C.setLocation(r,o),T.push(C))}return s=O.shiftUnitPointsAndDraw(T,e,a),T=null,C=null,y=null,s}static processLandInstallationTextModifiersE(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=(u.Color.BLACK,new Array),L=O._modifierFontDescent;a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let h=0,A=0,I=e.getSymbolBounds(),S=(e.getSymbolBounds().clone(),e.getSymbolCenterPoint(),e.getImageBounds().clone()),y=S.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),I=E.RectUtilities.toRectangle2D(S.getX(),I.getY(),S.getWidth(),I.getHeight());let f,R=!0;A=O._modifierFontHeight+.5,I.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(f=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=f&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,f);let N,C,p=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=p&&""!==p&&i.set(_.Modifiers.AS_COUNTRY,p),i.has(_.Modifiers.G_STAFF_COMMENTS)||i.has(_.Modifiers.AQ_GUARDED_UNIT)){N="";let e="",t="";i.has(_.Modifiers.G_STAFF_COMMENTS)&&(e=i.get(_.Modifiers.G_STAFF_COMMENTS)),i.has(_.Modifiers.AQ_GUARDED_UNIT)&&(t=i.get(_.Modifiers.AQ_GUARDED_UNIT)),N=e+" "+t,N=N.trim(),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=A+2,o=I.getY()+o,C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(N="",i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(N=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),null!=N&&""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*(A-L),o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME)&&(N=i.get(_.Modifiers.AE_EQUIPMENT_TEARDOWN_TIME),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()-l.getWidth()-7,o=I.getY()+(I.getHeight()/2+A+1-L),C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(N=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()-l.getWidth()-7,o=I.getY()+(I.getHeight()/2+2*(A-L+2)),C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.M_HIGHER_FORMATION)&&(N="",i.has(_.Modifiers.M_HIGHER_FORMATION)&&(N+=i.get(_.Modifiers.M_HIGHER_FORMATION)),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o+=A+2-L,o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.J_EVALUATION_RATING)||i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)||i.has(_.Modifiers.P_IFF_SIF_AIS)){let e,a,s;N=null,i.has(_.Modifiers.J_EVALUATION_RATING)&&(e=i.get(_.Modifiers.J_EVALUATION_RATING)),i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.K_COMBAT_EFFECTIVENESS)&&(a=i.get(_.Modifiers.K_COMBAT_EFFECTIVENESS)),i.has(_.Modifiers.P_IFF_SIF_AIS)&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.P_IFF_SIF_AIS)&&(s=i.get(_.Modifiers.P_IFF_SIF_AIS)),N="",null!=e&&""!==e&&(N+=e),null!=a&&""!==a&&(N=N+" "+a),null!=s&&""!==s&&(N=N+" "+s),N.length>2&&" "===N.charAt(0)&&(N=N.substring(1)),N=N.trim(),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o=o+2*(A+2)-2*L,o=Math.round(I.getY()+o),C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.W_DTG_1)&&(N="",N=i.get(_.Modifiers.W_DTG_1),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getY()+(I.getHeight()/2-2-L-A),C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.AS_COUNTRY)||i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)){let e,t;N="",i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER),i.delete(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.AS_COUNTRY)&&(t=i.get(_.Modifiers.AS_COUNTRY)),null!=e&&""!==e&&(N+=e),null!=t&&""!==t&&(N=N+" "+t),N=N.trim(),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=2*(A+2),o=I.getY()+o,C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.X_ALTITUDE_DEPTH)||i.has(_.Modifiers.Y_LOCATION)){let e,t;i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&(e=i.get(_.Modifiers.X_ALTITUDE_DEPTH)),i.has(_.Modifiers.Y_LOCATION)&&(t=i.get(_.Modifiers.Y_LOCATION)),N="",null!=e&&""!==e&&(N+=e),null!=t&&""!==t&&(N=N+" "+t),N=N.trim(),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getY()+(I.getHeight()/2-1-L),C.setLocation(r,o),T.push(C))}return s=O.shiftUnitPointsAndDraw(T,e,a),T=null,C=null,y=null,s}static processDismountedIndividualsTextModifiers(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=(u.Color.BLACK,new Array),L=O._modifierFontDescent;a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let h=0,A=0,I=e.getSymbolBounds(),S=(e.getSymbolBounds().clone(),e.getSymbolCenterPoint(),e.getImageBounds().clone()),y=S.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),I=E.RectUtilities.toRectangle2D(S.getX(),I.getY(),S.getWidth(),I.getHeight());let f,R=!0;A=O._modifierFontHeight+.5,I.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(f=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=f&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,f);let N,C,p=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=p&&""!==p&&i.set(_.Modifiers.AS_COUNTRY,p),i.has(_.Modifiers.X_ALTITUDE_DEPTH)||i.has(_.Modifiers.Y_LOCATION)){let e,t;N=null,i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&(e=i.get(_.Modifiers.X_ALTITUDE_DEPTH)),i.has(_.Modifiers.Y_LOCATION)&&(t=i.get(_.Modifiers.Y_LOCATION)),null==e&&null!=t?N=t:null!=e&&null==t?N=e:null!=e&&null!=t&&(N=e+"  "+t),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()-l.getWidth()-7,o=I.getHeight(),o=.5*o+.5*A,o-=A+2,o=I.getY()+o,C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.G_STAFF_COMMENTS)&&(N=null,i.has(_.Modifiers.G_STAFF_COMMENTS)&&(N=i.get(_.Modifiers.G_STAFF_COMMENTS)),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=A+2,o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(N=null,i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(N=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),null!=N&&""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*(A-L),o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(N=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()-l.getWidth()-7,o=I.getHeight(),o=.5*o+.5*A,o+=A+2-L,o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.M_HIGHER_FORMATION)&&(N="",i.has(_.Modifiers.M_HIGHER_FORMATION)&&(N+=i.get(_.Modifiers.M_HIGHER_FORMATION)),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o+=A+2-L,o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.Z_SPEED)&&(N=i.get(_.Modifiers.Z_SPEED),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getHeight(),o=.5*o+.5*A,o=o+2*(A+2)-2*L,o=Math.round(I.getY()+o),C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.J_EVALUATION_RATING)||i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)||i.has(_.Modifiers.P_IFF_SIF_AIS)){let e,a,s;N=null,i.has(_.Modifiers.J_EVALUATION_RATING)&&(e=i.get(_.Modifiers.J_EVALUATION_RATING)),i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.K_COMBAT_EFFECTIVENESS)&&(a=i.get(_.Modifiers.K_COMBAT_EFFECTIVENESS)),i.has(_.Modifiers.P_IFF_SIF_AIS)&&M.SymbolUtilities.canSymbolHaveModifier(t,_.Modifiers.P_IFF_SIF_AIS)&&(s=i.get(_.Modifiers.P_IFF_SIF_AIS)),N="",null!=e&&""!==e&&(N+=e),null!=a&&""!==a&&(N=N+" "+a),null!=s&&""!==s&&(N=N+" "+s),N.length>2&&" "===N.charAt(0)&&(N=N.substring(1)),N=N.trim(),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o=o+2*(A+2)-2*L,o=Math.round(I.getY()+o),C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.W_DTG_1)&&(N=null,N=i.get(_.Modifiers.W_DTG_1),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getHeight(),o=.5*o+.5*A,o-=2*(A+2),o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.V_EQUIP_TYPE)||i.has(_.Modifiers.AF_COMMON_IDENTIFIER)){let e,t;i.has(_.Modifiers.V_EQUIP_TYPE)&&(e=i.get(_.Modifiers.V_EQUIP_TYPE)),i.has(_.Modifiers.AF_COMMON_IDENTIFIER)&&(t=i.get(_.Modifiers.AF_COMMON_IDENTIFIER)),N="",null!=e&&""!==e&&(N+=e),null!=t&&""!==t&&(N=N+" "+t),N=N.trim(),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getHeight(),o=.5*o+.5*(A-L),o=I.getY()+o,C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.AS_COUNTRY)||i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)){let e,t;N="",i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER),i.delete(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.AS_COUNTRY)&&(t=i.get(_.Modifiers.AS_COUNTRY)),null!=e&&""!==e&&(N+=e),null!=t&&""!==t&&(N=N+" "+t),N=N.trim(),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=2*(A+2),o=I.getY()+o,C.setLocation(r,o),T.push(C))}return s=O.shiftUnitPointsAndDraw(T,e,a),T=null,C=null,y=null,s}static processSeaSurfaceTextModifiers(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=(u.Color.BLACK,new Array),L=O._modifierFontDescent;a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let h=0,A=0,I=e.getSymbolBounds(),S=(e.getSymbolBounds().clone(),e.getSymbolCenterPoint(),e.getImageBounds().clone()),y=S.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),I=E.RectUtilities.toRectangle2D(S.getX(),I.getY(),S.getWidth(),I.getHeight());let f,R=!0;A=O._modifierFontHeight+.5,I.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(f=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=f&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,f);let N,C,p=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=p&&""!==p&&i.set(_.Modifiers.AS_COUNTRY,p),i.has(_.Modifiers.V_EQUIP_TYPE)&&(N=i.get(_.Modifiers.V_EQUIP_TYPE),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=A+2,o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.P_IFF_SIF_AIS)&&(N=null,i.has(_.Modifiers.P_IFF_SIF_AIS)&&(N=i.get(_.Modifiers.P_IFF_SIF_AIS)),null!=N&&""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*(A-L),o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.G_STAFF_COMMENTS)||i.has(_.Modifiers.H_ADDITIONAL_INFO_1)){N="";let e="",t="";i.has(_.Modifiers.G_STAFF_COMMENTS)&&(e+=i.get(_.Modifiers.G_STAFF_COMMENTS)),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(t+=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),N=e+" "+t,N=N.trim(),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o+=A+2-L,o=I.getY()+o,C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.Y_LOCATION)||i.has(_.Modifiers.Z_SPEED)){N=null;let e="",t="";i.has(_.Modifiers.Y_LOCATION)&&(e=i.get(_.Modifiers.Y_LOCATION)),i.has(_.Modifiers.Z_SPEED)&&(t=i.get(_.Modifiers.Z_SPEED)),N=e+" "+t,N=N.trim(),N.length>2&&" "===N.charAt(0)&&(N=N.substring(1)),N=N.trim(),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o=o+2*(A+2)-L,o=Math.round(I.getY()+o),C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.AQ_GUARDED_UNIT)||i.has(_.Modifiers.AR_SPECIAL_DESIGNATOR)){N=null;let e="",t="";i.has(_.Modifiers.AQ_GUARDED_UNIT)&&(e=i.get(_.Modifiers.AQ_GUARDED_UNIT)),i.has(_.Modifiers.AR_SPECIAL_DESIGNATOR)&&(t=i.get(_.Modifiers.AR_SPECIAL_DESIGNATOR)),N=e+" "+t,N=N.trim(),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getHeight(),o=.5*o+.5*A,o-=2*(A+2),o=I.getY()+o,o<=I.getY()+A&&(o=I.getY()+A),C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)||i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)||i.has(_.Modifiers.AS_COUNTRY)){N=null;let e="",t="",a="";i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER),i.delete(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(t=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1)),i.has(_.Modifiers.AS_COUNTRY)&&(a=i.get(_.Modifiers.AS_COUNTRY)),N=e+" "+t,N=N.trim()+" "+a,N=N.trim(),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=2*(A+2),o=I.getY()+o,C.setLocation(r,o),T.push(C))}return s=O.shiftUnitPointsAndDraw(T,e,a),T=null,C=null,y=null,s}static processSeaSurfaceTextModifiersE(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=(u.Color.BLACK,new Array),L=O._modifierFontDescent;a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let h=0,A=0,I=e.getSymbolBounds(),S=(e.getSymbolBounds().clone(),e.getSymbolCenterPoint(),e.getImageBounds().clone()),y=S.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),I=E.RectUtilities.toRectangle2D(S.getX(),I.getY(),S.getWidth(),I.getHeight());let f,R=!0;A=O._modifierFontHeight+.5,I.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(f=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=f&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,f);let N,C,p=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=p&&""!==p&&i.set(_.Modifiers.AS_COUNTRY,p),i.has(_.Modifiers.V_EQUIP_TYPE)&&(N=i.get(_.Modifiers.V_EQUIP_TYPE),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getY()+(I.getHeight()/2-1-L),C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.P_IFF_SIF_AIS)&&(N=null,i.has(_.Modifiers.P_IFF_SIF_AIS)&&(N=i.get(_.Modifiers.P_IFF_SIF_AIS)),null!=N&&""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getY()+(I.getHeight()/2+A+1-L),C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.G_STAFF_COMMENTS)||i.has(_.Modifiers.H_ADDITIONAL_INFO_1)){N="";let e="",t="";i.has(_.Modifiers.G_STAFF_COMMENTS)&&(e+=i.get(_.Modifiers.G_STAFF_COMMENTS)),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(t+=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),N=e+" "+t,N=N.trim(),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getY()+(I.getHeight()/2+2*(A-L+2)),C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.Y_LOCATION)||i.has(_.Modifiers.Z_SPEED)){N=null;let e="",t="";i.has(_.Modifiers.Y_LOCATION)&&(e=i.get(_.Modifiers.Y_LOCATION)),i.has(_.Modifiers.Z_SPEED)&&(t=i.get(_.Modifiers.Z_SPEED)),N=e+" "+t,N=N.trim(),N.length>2&&" "===N.charAt(0)&&(N=N.substring(1)),N=N.trim(),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getY()+(I.getHeight()/2+3*(A+2)-L),C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.AQ_GUARDED_UNIT)||i.has(_.Modifiers.AR_SPECIAL_DESIGNATOR)){N=null;let e="",t="";i.has(_.Modifiers.AQ_GUARDED_UNIT)&&(e=i.get(_.Modifiers.AQ_GUARDED_UNIT)),i.has(_.Modifiers.AR_SPECIAL_DESIGNATOR)&&(t=i.get(_.Modifiers.AR_SPECIAL_DESIGNATOR)),N=e+" "+t,N=N.trim(),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getY()+(I.getHeight()/2-2-L-2*A),o<=I.getY()+A&&(o=I.getY()+A-L),C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)||i.has(_.Modifiers.AS_COUNTRY)){let e,t;N=null,i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER),i.delete(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.AS_COUNTRY)&&(t=i.get(_.Modifiers.AS_COUNTRY)),null!=e&&""!==e&&(N=e),null!=t&&""!==t&&(N=null!=N&&""!==N?N+" "+t:t),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getY()+(I.getHeight()/2-2-L-2*A),C.setLocation(r,o),T.push(C))}return i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(N=null,i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(N=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1)),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getY()+(I.getHeight()/2-2-L-A),C.setLocation(r,o),T.push(C))),s=O.shiftUnitPointsAndDraw(T,e,a),T=null,C=null,y=null,s}static processSeaSubSurfaceTextModifiers(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=(u.Color.BLACK,new Array),L=O._modifierFontDescent;a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let h=0,A=0,I=e.getSymbolBounds(),S=(e.getSymbolBounds().clone(),e.getSymbolCenterPoint(),e.getImageBounds().clone()),y=S.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),I=E.RectUtilities.toRectangle2D(S.getX(),I.getY(),S.getWidth(),I.getHeight());let f,R=!0;A=O._modifierFontHeight+.5,I.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(f=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=f&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,f);let N,C,p=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=p&&""!==p&&i.set(_.Modifiers.AS_COUNTRY,p),i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)||i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)||i.has(_.Modifiers.AS_COUNTRY)){N=null;let e="",t="",a="";i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER),i.delete(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(t=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1)),i.has(_.Modifiers.AS_COUNTRY)&&(a=i.get(_.Modifiers.AS_COUNTRY)),N=e+" "+t,N=N.trim()+" "+a,N=N.trim(),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getMinY()+A-L,C.setLocation(r,o),T.push(C))}return i.has(_.Modifiers.V_EQUIP_TYPE)&&(N="",i.has(_.Modifiers.V_EQUIP_TYPE)&&(N=i.get(_.Modifiers.V_EQUIP_TYPE)),null!=N&&""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getMinY()-L+2*A,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&(N=i.get(_.Modifiers.X_ALTITUDE_DEPTH),null!=N&&""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getMinY()-L+3*A,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.G_STAFF_COMMENTS)&&(N=i.get(_.Modifiers.G_STAFF_COMMENTS),null!=N&&""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getMinY()-L+4*A,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(N=i.get(_.Modifiers.H_ADDITIONAL_INFO_1),null!=N&&""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getMinY()-L+5*A,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.AR_SPECIAL_DESIGNATOR)&&(N="",i.has(_.Modifiers.AR_SPECIAL_DESIGNATOR)&&(N=i.get(_.Modifiers.AR_SPECIAL_DESIGNATOR)),null!=N&&""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()-h-7,o=I.getMinY()+A-L,C.setLocation(r,o),T.push(C))),s=O.shiftUnitPointsAndDraw(T,e,a),T=null,C=null,y=null,s}static processSeaSubSurfaceTextModifiersE(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=(u.Color.BLACK,new Array),L=O._modifierFontDescent;a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let h=0,A=0,I=e.getSymbolBounds(),S=(e.getSymbolBounds().clone(),e.getSymbolCenterPoint(),e.getImageBounds().clone()),y=S.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),I=E.RectUtilities.toRectangle2D(S.getX(),I.getY(),S.getWidth(),I.getHeight());let f,R=!0;A=O._modifierFontHeight+.5,I.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(f=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=f&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,f);let N,C,p=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=p&&""!==p&&i.set(_.Modifiers.AS_COUNTRY,p),i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)||i.has(_.Modifiers.AS_COUNTRY)){let e,t;N=null,i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER),i.delete(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.AS_COUNTRY)&&(t=i.get(_.Modifiers.AS_COUNTRY)),null!=e&&""!==e&&(N=e),null!=t&&""!==t&&(N=null!=N&&""!==N?N+" "+t:t),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getMinY()+A-L,C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(N=null,i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(N=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1)),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getMinY()+2*A-L,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.V_EQUIP_TYPE)&&(N=i.get(_.Modifiers.V_EQUIP_TYPE),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getMinY()+3*A-L,C.setLocation(r,o),T.push(C))),(i.has(_.Modifiers.X_ALTITUDE_DEPTH)||i.has(_.Modifiers.P_IFF_SIF_AIS))&&(N="",i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&(N=i.get(_.Modifiers.X_ALTITUDE_DEPTH)),i.has(_.Modifiers.P_IFF_SIF_AIS)&&(N+=" "+i.get(_.Modifiers.P_IFF_SIF_AIS)),N=N.trim(),null!=N&&""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getMinY()+4*A-L,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.G_STAFF_COMMENTS)||i.has(_.Modifiers.H_ADDITIONAL_INFO_1)){N="";let e="",t="";i.has(_.Modifiers.G_STAFF_COMMENTS)&&(e+=i.get(_.Modifiers.G_STAFF_COMMENTS)),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(t+=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),N=e+" "+t,N=N.trim(),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getMinY()+5*A-L,C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.Y_LOCATION)||i.has(_.Modifiers.Z_SPEED)){N=null;let e="",t="";i.has(_.Modifiers.Y_LOCATION)&&(e=i.get(_.Modifiers.Y_LOCATION)),i.has(_.Modifiers.Z_SPEED)&&(t=i.get(_.Modifiers.Z_SPEED)),N=e+" "+t,N=N.trim(),N.length>2&&" "===N.charAt(0)&&(N=N.substring(1)),N=N.trim(),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()+I.getWidth()+7,o=I.getMinY()+6*A-L,C.setLocation(r,o),T.push(C))}return i.has(_.Modifiers.AR_SPECIAL_DESIGNATOR)&&(N=i.get(_.Modifiers.AR_SPECIAL_DESIGNATOR),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getX()-h-7,o=I.getY()+(I.getHeight()/2-2-L-2*A),o<=I.getY()+A&&(o=I.getY()+A-L),C.setLocation(r,o),T.push(C))),s=O.shiftUnitPointsAndDraw(T,e,a),T=null,C=null,y=null,s}static processActivitiesTextModifiers(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=(u.Color.BLACK,new Array),L=O._modifierFontDescent;a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let h=0,A=0,I=e.getSymbolBounds(),S=(e.getSymbolBounds().clone(),e.getSymbolCenterPoint(),e.getImageBounds().clone()),y=S.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),I=E.RectUtilities.toRectangle2D(S.getX(),I.getY(),S.getWidth(),I.getHeight());let f,R=!0;A=O._modifierFontHeight+.5,I.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(f=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=f&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,f);let N,C,p=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=p&&""!==p&&i.set(_.Modifiers.AS_COUNTRY,p),i.has(_.Modifiers.Y_LOCATION)&&(N=null,i.has(_.Modifiers.Y_LOCATION)&&(N=i.get(_.Modifiers.Y_LOCATION)),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()-l.getWidth()-7,o=I.getMinY()+(I.getHeight()/2-1-L),C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.G_STAFF_COMMENTS)&&(N=i.get(_.Modifiers.G_STAFF_COMMENTS),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getMinY()+(I.getHeight()/2-1-L),C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(N=null,i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(N=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),null!=N&&""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getMinY()+(I.getHeight()/2+A+1-L),C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.J_EVALUATION_RATING)&&(N=null,i.has(_.Modifiers.J_EVALUATION_RATING)&&(N=i.get(_.Modifiers.J_EVALUATION_RATING)),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getMinY()+(I.getHeight()/2+2*(A-L+2)),C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.W_DTG_1)&&(N=i.get(_.Modifiers.W_DTG_1),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()-h-7,o=I.getY()+(I.getHeight()/2-2-L-A),C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)||i.has(_.Modifiers.AS_COUNTRY)){N=null;let e="",t="";i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER),i.delete(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.AS_COUNTRY)&&(t=i.get(_.Modifiers.AS_COUNTRY)),N=e+" "+t,N=N.trim(),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getY()+(I.getHeight()/2-2-L-A),C.setLocation(r,o),T.push(C))}return s=O.shiftUnitPointsAndDraw(T,e,a),T=null,C=null,y=null,s}static processActivitiesTextModifiersE(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=(u.Color.BLACK,new Array),L=O._modifierFontDescent;a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let h=0,A=0,I=e.getSymbolBounds(),S=(e.getSymbolBounds().clone(),e.getSymbolCenterPoint(),e.getImageBounds().clone()),y=S.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),I=E.RectUtilities.toRectangle2D(S.getX(),I.getY(),S.getWidth(),I.getHeight());let f,R=!0;A=O._modifierFontHeight+.5,I.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(f=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=f&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,f);let N,C,p=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=p&&""!==p&&i.set(_.Modifiers.AS_COUNTRY,p),i.has(_.Modifiers.Y_LOCATION)&&(N=null,i.has(_.Modifiers.Y_LOCATION)&&(N=i.get(_.Modifiers.Y_LOCATION)),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()-l.getWidth()-7,o=I.getMinY()+(I.getHeight()/2-1-L),C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(N=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=A+2,o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.G_STAFF_COMMENTS)&&(N=i.get(_.Modifiers.G_STAFF_COMMENTS),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*(A-L),o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(N=null,i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(N=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),null!=N&&""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o+=A+2-L,o=I.getY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.J_EVALUATION_RATING)&&(N=null,i.has(_.Modifiers.J_EVALUATION_RATING)&&(N=i.get(_.Modifiers.J_EVALUATION_RATING)),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o=o+2*(A+2)-2*L,o=Math.round(I.getY()+o),C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.W_DTG_1)&&(N=i.get(_.Modifiers.W_DTG_1),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()-h-7,o=I.getY()+(I.getHeight()/2-2-L-A),C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)||i.has(_.Modifiers.AS_COUNTRY)){N=null;let e="",t="";i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER),i.delete(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.AS_COUNTRY)&&(t=i.get(_.Modifiers.AS_COUNTRY)),N=e+" "+t,N=N.trim(),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=2*(A+2),o=I.getY()+o,C.setLocation(r,o),T.push(C))}return s=O.shiftUnitPointsAndDraw(T,e,a),T=null,C=null,y=null,s}static processCyberSpaceTextModifiers(e,t,i,a,n){let s,l,r=0,o=0,c=-1,T=(u.Color.BLACK,new Array),L=O._modifierFontDescent;a.has(d.MilStdAttributes.Alpha)&&parseFloat(a.get(d.MilStdAttributes.Alpha));let h=0,A=0,I=e.getSymbolBounds(),S=(e.getSymbolBounds().clone(),e.getSymbolCenterPoint(),e.getImageBounds().clone()),y=S.clone();M.SymbolUtilities.getEchelonText(D.SymbolID.getAmplifierDescriptor(t)),M.SymbolUtilities.getStandardIdentityModifier(t),I=E.RectUtilities.toRectangle2D(S.getX(),I.getY(),S.getWidth(),I.getHeight());let f,R=!0;A=O._modifierFontHeight+.5,I.getHeight(),!0===O.RS.getDrawAffiliationModifierAsLabel()&&(f=M.SymbolUtilities.getStandardIdentityModifier(t)),null!=f&&i.set(_.Modifiers.E_FRAME_SHAPE_MODIFIER,f);let N,C,p=g.GENCLookup.getInstance().get3CharCode(D.SymbolID.getCountryCode(t));if(null!=p&&""!==p&&i.set(_.Modifiers.AS_COUNTRY,p),i.has(_.Modifiers.Y_LOCATION)&&(N=null,i.has(_.Modifiers.Y_LOCATION)&&(N=i.get(_.Modifiers.Y_LOCATION)),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()-h-7,o=I.getHeight(),o=.5*o+.5*(A-L),o=I.getMinY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.G_STAFF_COMMENTS)&&(N=i.get(_.Modifiers.G_STAFF_COMMENTS),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=A+2,o=I.getMinY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(N=null,i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(N=i.get(_.Modifiers.H_ADDITIONAL_INFO_1)),null!=N&&""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*(A-L),o=I.getMinY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)||i.has(_.Modifiers.V_EQUIP_TYPE)){N="";let e="",t="";i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(e=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1)),i.has(_.Modifiers.V_EQUIP_TYPE)&&(t=i.get(_.Modifiers.V_EQUIP_TYPE)),N=e+" "+t,N=N.trim(),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()-h-7,o=I.getHeight(),o=.5*o+.5*A,o+=A+2-L,o=I.getMinY()+o,C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.M_HIGHER_FORMATION)&&(N="",i.has(_.Modifiers.M_HIGHER_FORMATION)&&(N+=i.get(_.Modifiers.M_HIGHER_FORMATION)),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o+=A+2-L,o=I.getMinY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)||i.has(_.Modifiers.L_SIGNATURE_EQUIP)){let e,t;N=null,i.has(_.Modifiers.K_COMBAT_EFFECTIVENESS)&&(e=i.get(_.Modifiers.K_COMBAT_EFFECTIVENESS)),i.has(_.Modifiers.L_SIGNATURE_EQUIP)&&(t=i.get(_.Modifiers.L_SIGNATURE_EQUIP)),N=e+" "+t,N=N.trim(),""!==N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o=o+2*(A+2)-2*L,o=Math.round(I.getMinY()+o),C.setLocation(r,o),T.push(C))}if(i.has(_.Modifiers.W_DTG_1)&&(N=i.get(_.Modifiers.W_DTG_1),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()-h-7,o=I.getHeight(),o=.5*o+.5*A,o-=A+2,o=I.getMinY()+o,C.setLocation(r,o),T.push(C))),i.has(_.Modifiers.F_REINFORCED_REDUCED)||i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)||i.has(_.Modifiers.AS_COUNTRY)){let e,t,a;N=null,i.has(_.Modifiers.E_FRAME_SHAPE_MODIFIER)&&(e=i.get(_.Modifiers.E_FRAME_SHAPE_MODIFIER),i.delete(_.Modifiers.E_FRAME_SHAPE_MODIFIER)),i.has(_.Modifiers.F_REINFORCED_REDUCED)&&(t=i.get(_.Modifiers.F_REINFORCED_REDUCED)),i.has(_.Modifiers.AS_COUNTRY)&&(a=i.get(_.Modifiers.AS_COUNTRY)),null!=e&&""!==e&&(N=e),null!=t&&""!==t&&("R"===t.toUpperCase()?t="(+)":"D"===t.toUpperCase()?t="(-)":"RD"===t.toUpperCase()&&(t="("+String.fromCharCode(177)+")")),null!=t&&""!==t&&(N=null!=N&&""!==N?N+" "+t:t),null!=a&&""!==a&&(N=null!=N&&""!==N?N+" "+a:a),null!=N&&(C=new P.TextInfo(N,0,0,O._modifierFont,n),l=C.getTextBounds(),h=l.getWidth(),r=I.getMinX()+I.getWidth()+7,o=I.getHeight(),o=.5*o+.5*A,o-=2*(A+2),o=I.getMinY()+o,C.setLocation(r,o),T.push(C))}return s=O.shiftUnitPointsAndDraw(T,e,a),T=null,C=null,y=null,s}static ProcessTGSPWithSpecialModifierLayout(e,t,i,a,l,r){let o,c,u,g,h,A,S,y=0,N=0,C=0,p=0,x=O.RS.getTextOutlineWidth(),b=0,w=0,m=2,F=-1,G=l,U=D.SymbolID.getSymbolSet(t),v=D.SymbolID.getEntityCode(t),H=D.SymbolID.getEntity(t),B=D.SymbolID.getEntityType(t),k=D.SymbolID.getEntitySubtype(t),Y=new Array,W=!1,X=E.RectUtilities.copyRect(e.getSymbolBounds()),V=E.RectUtilities.copyRect(e.getSymbolBounds()),z=e.getSymbolCenterPoint(),K=e.getImageBounds().clone();if(null!=a){if(a.has(d.MilStdAttributes.PixelSize)){let e=parseInt(a.get(d.MilStdAttributes.PixelSize));m=e<=100?2:2+(e-100)/100}a.has(d.MilStdAttributes.Alpha)&&(F=parseFloat(a.get(d.MilStdAttributes.Alpha))/255)}z=new n.Point2D(Math.round(e.getSymbolCenterPoint().x),Math.round(e.getSymbolCenterPoint().y));let Q=!1;b=O._modifierFontHeight+.5,3*b>V.getHeight()&&(Q=!0);let Z,J,j,q,$=O._modifierFontDescent,ee=-1,te="";if(x=x>2?(x-1)/2:0,M.SymbolUtilities.isCBRNEvent(t)&&3*b>X.getHeight()&&(Q=!0),U===D.SymbolID.SymbolSet_ControlMeasure&&null!=i&&i.size>0)if(130500===v||130700===v)i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(te=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()+.5*X.getWidth(),y-=.5*w,N=X.getMinY()+.4*X.getHeight(),N+=.5*b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z)));else if(212800===v)i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(te=i.get(_.Modifiers.H_ADDITIONAL_INFO_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()+.5*X.getWidth(),y-=.5*w,N=X.getMinY()+.5*X.getHeight(),N+=.5*b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z)));else if(131300===v)i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(te=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()+.5*X.getWidth(),y-=.5*w,N=X.getMinY()+.25*X.getHeight(),N+=.5*b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z)));else if(131800===v||240900===v)i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(te=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),y=131800===v?X.getMinX()+.75*X.getWidth():X.getMinX()+X.getWidth(),N=X.getMinY()+.5*X.getHeight(),N+=.5*(b-$),Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z)));else if(131900===v)i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(te=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),y=X.getMinX()+(X.getWidth()+4),N=X.getMinY()+.5*X.getHeight(),N+=.5*(b-$),Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z)));else if(180100===v||180200===v)i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(te=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Z.getTextBounds().getWidth(),y=X.getMinX()+.5*X.getWidth(),y-=.5*w,N=X.getMinY()+.5*X.getHeight(),N=N+(.5*X.getHeight()-b)/2+b-$,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z)));else if(160300===v||132e3===v||240601===v||240602===v)i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&240601===v&&(te=i.get(_.Modifiers.H_ADDITIONAL_INFO_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),y=X.getCenterX()+.15*X.getWidth(),N=X.getMinY()+.75*X.getHeight(),N+=.5*b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))),i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&240601===v&&(te=i.get(_.Modifiers.X_ALTITUDE_DEPTH),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getCenterX()-.15*X.getWidth(),y-=w,N=X.getMinY()+.75*X.getHeight(),N+=.5*b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))),!i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)||160300!==v&&132e3!==v||(te=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),y=X.getCenterX()+.15*X.getWidth(),N=X.getMinY()+.25*X.getHeight(),N+=.5*b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))),240601!==v&&240602!==v||(i.has(_.Modifiers.AP_TARGET_NUMBER)&&(te=i.get(_.Modifiers.AP_TARGET_NUMBER)),240601===v&&i.has(_.Modifiers.AP1_TARGET_NUMBER_EXTENSION)&&(te=null!=te?te+"  "+i.get(_.Modifiers.AP1_TARGET_NUMBER_EXTENSION):i.get(_.Modifiers.AP1_TARGET_NUMBER_EXTENSION)),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),y=X.getCenterX()+.15*X.getWidth(),N=X.getMinY()+.25*X.getHeight(),N+=.5*b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z)));else if(132100===v)i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(te=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),y=X.getMinX()+(.5*X.getWidth()+4),N=X.getMinY()+.5*X.getHeight(),N+=.5*(b-$),Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z)));else if(M.SymbolUtilities.isCBRNEvent(t))i.has(_.Modifiers.N_HOSTILE)&&(te=i.get(_.Modifiers.N_HOSTILE),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),y=X.getMinX()+X.getWidth()+4,N=Q?X.getMinY()+(.5*X.getHeight()+.5*(b-$)+(b-$+2)):X.getMinY()+X.getHeight(),Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(te=i.get(_.Modifiers.H_ADDITIONAL_INFO_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),y=X.getMinX()+X.getWidth()+4,N=Q?X.getMinY()+(.5*X.getHeight()-.5*(b-$)+(-$-2)):X.getMinY()+b-$,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))),i.has(_.Modifiers.W_DTG_1)&&(te=i.get(_.Modifiers.W_DTG_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()-w-6,N=Q?X.getMinY()+(.5*X.getHeight()-.5*(b-$)+(-$-2)):X.getMinY()+b-$,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))),281500!==v&&281600!==v||!i.has(_.Modifiers.V_EQUIP_TYPE)||(te=i.get(_.Modifiers.V_EQUIP_TYPE),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()-w-6,N=X.getMinY()+(.5*X.getHeight()+.5*(b-$)),Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))),i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(te=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()-w-6,N=Q?X.getMinY()+(.5*X.getHeight()+.5*(b-$)+(b-$+2)):X.getMinY()+X.getHeight(),Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))),i.has(_.Modifiers.Y_LOCATION)&&(te=i.get(_.Modifiers.Y_LOCATION),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()+.5*X.getWidth(),y-=.5*w,N=Q?X.getMinY()+(.5*X.getHeight()+.5*(b-$)+2*(b+2)-$):X.getMinY()+X.getHeight()+b-$+2,ee=N+$,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))),i.has(_.Modifiers.C_QUANTITY)&&(te=i.get(_.Modifiers.C_QUANTITY),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()+.5*X.getWidth(),y-=.5*w,N=X.getMinY()-$,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z)));else if(270701===v){if(i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(te=i.get(_.Modifiers.H_ADDITIONAL_INFO_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()+.5*X.getWidth(),y-=.5*w,N=X.getMinY()-$,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))),i.has(_.Modifiers.W_DTG_1)&&(te=i.get(_.Modifiers.W_DTG_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()+.5*X.getWidth(),y-=.5*w,N=X.getMinY()+X.getHeight(),N+=b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))),i.has(_.Modifiers.N_HOSTILE)&&(te=i.get(_.Modifiers.N_HOSTILE),null!=te)){Z=new P.TextInfo(te,0,0,O._modifierFont,r);let e=new P.TextInfo(te,0,0,O._modifierFont,r);w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()+X.getWidth()+4,W=!0,C=X.getMinX(),C=C-w-6,N=X.getMinY()+.5*X.getHeight(),N+=.5*(b-$),p=N,Z.setLocation(Math.round(y),Math.round(N)),e.setLocation(Math.round(C),Math.round(p)),Y.push(Z),Y.push(e)}}else 21===H&&35===B?(z=M.SymbolUtilities.getCMSymbolAnchorPoint(t,E.RectUtilities.copyRect(X)).toPoint2D(),i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(te=i.get(_.Modifiers.H_ADDITIONAL_INFO_1),null!=te)&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()+X.getWidth()+4,N=z.y,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z)),0!==k&&1!==k&&4!==k&&7!==k&&8!==k&&15!==k||!i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)||(te=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null==te)||(Z=new P.TextInfo(te,0,0,O._modifierFont,r),new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()+X.getWidth()+4,N=z.y-b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))):282001===v||282002===v?i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&(te=i.get(_.Modifiers.X_ALTITUDE_DEPTH),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()+.7*X.getWidth(),N=X.getMinY()+b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))):21060===v?i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(te=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),y=X.getMinX()+(X.getWidth()+4),N=X.getMinY()+b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))):210300===v?i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(te=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),y=X.getMinX()-w-6,N=X.getMinY()+b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))):21060===v?i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&(te=i.get(_.Modifiers.X_ALTITUDE_DEPTH),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),y=X.getMinX()+(X.getWidth()+4),N=X.getMinY()+b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))):210800===v?i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&(te=i.get(_.Modifiers.X_ALTITUDE_DEPTH),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),y=X.getX()+.65*X.getWidth(),N=X.getY()+.25*X.getHeight(),N+=.5*b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))):211e3===v?i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(te=i.get(_.Modifiers.H_ADDITIONAL_INFO_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getX()+.5*X.getWidth()-w/2,N=X.getY()-2,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))):214900===v||215600===v?(i.has(_.Modifiers.W_DTG_1)&&(te=i.get(_.Modifiers.W_DTG_1),null!=te&&(Z=new P.TextInfo(te+" - ",0,0,O._modifierFont,r),y=X.getMinX()+(X.getWidth()+4),N=X.getMinY()+b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))),i.has(_.Modifiers.W1_DTG_2)&&(te=i.get(_.Modifiers.W1_DTG_2),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),y=X.getMinX()+(X.getWidth()+4),N=X.getMinY()+2*b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))),i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(te=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),y=X.getMinX()+(X.getWidth()+4),N=X.getMinY()+3*b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z)))):217e3===v?i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(te=i.get(_.Modifiers.H_ADDITIONAL_INFO_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getX()+.5*X.getWidth()-w/2,N=X.getY()+X.getHeight()+b+2,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))):250600===v&&i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(te=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=te&&(Z=new P.TextInfo(te,0,0,O._modifierFont,r),y=X.getX()+(X.getWidth()+4),N=X.getY()+.25*X.getHeight(),N+=.5*b,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z)));else if(U===D.SymbolID.SymbolSet_Atmospheric){let e;null!=i&&i.has(_.Modifiers.X_ALTITUDE_DEPTH)&&(e=i.get(_.Modifiers.X_ALTITUDE_DEPTH)),162300===v?(te="0"+String.fromCharCode(176)+":",te+=null!=e?e:"?",Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()+.5*X.getWidth(),y-=.5*w,N=X.getMinY()+.5*X.getHeight(),N+=.5*(b-O._modifierFontDescent),Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z)):162200===v?(te="X?",null!=e&&(te=e),Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()+.5*X.getWidth(),y-=.5*w,N=X.getMinY()+.5*X.getHeight(),N+=.5*(b-O._modifierFontDescent),Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z)):110102===v?(te="X?",null!=e&&(te=e),Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()+.5*X.getWidth(),y-=.5*w,N=X.getMinY()+.5*X.getHeight(),N-=$,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z)):110202===v&&(te="X?",null!=e&&(te=e),Z=new P.TextInfo(te,0,0,O._modifierFont,r),w=Math.round(Z.getTextBounds().getWidth()),y=X.getMinX()+.5*X.getWidth(),y-=.5*w,N=X.getMinY()+.5*X.getHeight(),N+=.5*b-b/2+b-$,Z.setLocation(Math.round(y),Math.round(N)),Y.push(Z))}if(null!=i&&i.has(_.Modifiers.Q_DIRECTION_OF_MOVEMENT)&&M.SymbolUtilities.isCBRNEvent(t)&&(te=i.get(_.Modifiers.Q_DIRECTION_OF_MOVEMENT),null!=te&&M.SymbolUtilities.isNumber(te))){let i,a=parseFloat(te),n=E.RectUtilities.copyRect(X);n=n.createUnion(new s.Rectangle2D(X.getCenterX(),ee,0,0)),J=O.createDOMArrowPoints(t,n,e.getSymbolCenterPoint(),a,!1,r),j=new s.Rectangle2D(J[0].getX(),J[0].getY(),1,1);for(let e=1;e<6;e++)i=J[e],null!=i&&(j=j.createUnion(new s.Rectangle2D(i.getX(),i.getY(),0,0)));K=K.createUnion(j)}if(M.SymbolUtilities.hasFDI(t)){if(A=new n.Point2D(X.getX(),X.getY()),S=new n.Point2D(X.getX()+X.getWidth(),X.getY()),h=new n.Point2D(Math.round(X.getCenterX()),Math.round(X.getY()-.5*X.getWidth())),g=new s.Rectangle2D(A.getX(),h.getY(),S.getX()-A.getX(),A.getY()-h.getY()),Z=new P.TextInfo("TEST",0,0,O._modifierFont,r),null!=Z&&M.SymbolUtilities.isCBRNEvent(t)){let e=Math.round(X.getY()-Z.getTextBounds().getHeight()-2);A.setLocation(A.getX(),A.getY()+e),h.setLocation(h.getX(),h.getY()+e),S.setLocation(S.getX(),S.getY()+e),g=new s.Rectangle2D(A.getX(),h.getY(),S.getX()-A.getX(),A.getY()-h.getY())}K=K.createUnion(g)}if(null!=Y&&Y.length>0){q=Y[0].getTextOutlineBounds();let e,t=Y.length;for(let i=1;i<t;i++)e=Y[i],q=q.createUnion(e.getTextOutlineBounds())}if(null!=q||null!=j||null!=g){if(null!=q&&(K=K.createUnion(q)),null!=j&&(K=K.createUnion(j)),null!=g&&(K=K.createUnion(g)),e instanceof L.ImageInfo&&(K.getMinX()<0||K.getMinY()<0)){let e,t=Math.abs(K.getMinX()),i=Math.abs(K.getMinY()),a=Y.length;for(let n=0;n<a;n++)e=Y[n],e.shift(t,i);if(null!=q&&E.RectUtilities.shift(q,t,i),null!=j){for(let e=0;e<6;e++){let a=J[e];null!=a&&a.setLocation(a.getX()+t,a.getY()+i)}E.RectUtilities.shift(j,t,i)}null!=g&&(R.ShapeUtilities.offset(g,t,i),R.ShapeUtilities.offset(A,t,i),R.ShapeUtilities.offset(h,t,i),R.ShapeUtilities.offset(S,t,i)),z.setLocation(z.getX()+t,z.getX()+i),E.RectUtilities.shift(V,t,i),E.RectUtilities.shift(K,t,i)}if(a.has(d.MilStdAttributes.TextColor)&&(G=I.RendererUtilities.getColorFromHexString(a.get(d.MilStdAttributes.TextColor))),a.has(d.MilStdAttributes.TextBackgroundColor)&&(u=I.RendererUtilities.getColorFromHexString(a.get(d.MilStdAttributes.TextBackgroundColor))),G=I.RendererUtilities.setColorAlpha(G,F),u=I.RendererUtilities.setColorAlpha(u,F),e instanceof f.SVGSymbolInfo){let t,i=I.RendererUtilities.colorToHexString(l,!1),a=m;F>-1&&(t=F.toString()),o=e;let n="";if(n+=o.getSVG(),n+=O.renderTextElements(Y,G,u),null!=j){let e=new T.Path;e.moveTo(J[0].getX(),J[0].getY()),null!=J[1]&&e.lineTo(J[1].getX(),J[1].getY()),null!=J[2]&&e.lineTo(J[2].getX(),J[2].getY()),n+=e.toSVGElement(i,a,null),e=new T.Path,e.moveTo(J[3].getX(),J[3].getY()),e.lineTo(J[4].getX(),J[4].getY()),e.lineTo(J[5].getX(),J[5].getY()),n+=e.toSVGElement(null,0,i),j=null,J=null}if(null!=g){let e="6 4",t=[6,4];V.getHeight()<20&&(e="5 3");let s=I.RendererUtilities.getDistanceBetweenPoints(h,A);t[1]=s/14*2,t[0]=s/14*3,e=t[0]+" "+t[1];let l=new T.Path;l.moveTo(h.getX(),h.getY()),l.lineTo(A.getX(),A.getY()),l.moveTo(h.getX(),h.getY()),l.lineTo(S.getX(),S.getY()),n+=l.toSVGElement(i,a,null)}c=new f.SVGSymbolInfo(n.toString().valueOf(),z,V,K)}return c}return null}static ProcessTGSPModifiers(e,t,i,a,l,r){let o,c,u,g,A,S,y,N=0,C=0,p=O.RS.getTextOutlineWidth(),x=0,b=0,w=-1,m=l,F=new Array,G=h.MSLookup.getInstance().getMSLInfo(t);a.has(d.MilStdAttributes.Alpha)&&(w=parseFloat(a.get(d.MilStdAttributes.Alpha))/255);let U=E.RectUtilities.copyRect(e.getSymbolBounds()),v=E.RectUtilities.copyRect(e.getSymbolBounds()),H=e.getSymbolCenterPoint(),B=E.RectUtilities.copyRect(e.getImageBounds());H=new n.Point2D(e.getSymbolCenterPoint().x,e.getSymbolCenterPoint().y);let k=!1;x=Math.round(O._modifierFontHeight+.5),3*x>v.getHeight()&&(k=!0);let Y,W,X=O._modifierFontDescent,V="";if(M.SymbolUtilities.getBasicSymbolID(t),p=p>2?(p-1)/2:0,null!=i&&i.size>0&&(G.getModifiers().includes(_.Modifiers.N_HOSTILE)&&i.has(_.Modifiers.N_HOSTILE)&&(V=i.get(_.Modifiers.N_HOSTILE),null!=V&&(Y=new P.TextInfo(V,0,0,O._modifierFont,r),N=U.getMinX()+U.getWidth()+4,k?C=U.getMinY()+U.getHeight():(C=U.getHeight()/3*2,C=U.getMinY()+C),Y.setLocation(N,C),F.push(Y))),G.getModifiers().includes(_.Modifiers.H_ADDITIONAL_INFO_1)&&i.has(_.Modifiers.H_ADDITIONAL_INFO_1)&&(V=i.get(_.Modifiers.H_ADDITIONAL_INFO_1),null!=V&&(Y=new P.TextInfo(V,0,0,O._modifierFont,r),b=Math.round(Y.getTextBounds().getWidth()),N=U.getMinX()+.5*U.getWidth(),N-=.5*b,C=U.getMinY()-X,Y.setLocation(N,C),F.push(Y))),G.getModifiers().includes(_.Modifiers.H1_ADDITIONAL_INFO_2)&&i.has(_.Modifiers.H1_ADDITIONAL_INFO_2)&&(V=i.get(_.Modifiers.H1_ADDITIONAL_INFO_2),null!=V&&(Y=new P.TextInfo(V,0,0,O._modifierFont,r),b=Math.round(Y.getTextBounds().getWidth()),N=U.getMinX()+.5*U.getWidth(),N-=.5*b,C=U.getMinY()+x-X+.07*U.getHeight(),Y.setLocation(N,C),F.push(Y))),G.getModifiers().includes(_.Modifiers.A_SYMBOL_ICON)&&(i.has(_.Modifiers.A_SYMBOL_ICON)?V=i.get(_.Modifiers.A_SYMBOL_ICON):321706===D.SymbolID.getEntityCode(t)&&(V="ALL?"),null!=V&&(Y=new P.TextInfo(V,0,0,O._modifierFont,r),b=Math.round(Y.getTextBounds().getWidth()),N=U.getMinX()+.5*U.getWidth(),N-=.5*b,C=U.getMinY()+x-X+.07*U.getHeight(),Y.setLocation(N,C),F.push(Y))),G.getModifiers().includes(_.Modifiers.W_DTG_1)&&i.has(_.Modifiers.W_DTG_1)&&(V=i.get(_.Modifiers.W_DTG_1),null!=V&&(Y=new P.TextInfo(V,0,0,O._modifierFont,r),b=Math.round(Y.getTextBounds().getWidth()),N=U.getMinX()-b-6,C=U.getMinY()+x-X,Y.setLocation(N,C),F.push(Y))),G.getModifiers().includes(_.Modifiers.W1_DTG_2)&&i.has(_.Modifiers.W1_DTG_2)&&(V=i.get(_.Modifiers.W1_DTG_2),null!=V&&(Y=new P.TextInfo(V,0,0,O._modifierFont,r),b=Math.round(Y.getTextBounds().getWidth()),N=U.getMinX()-b-6,C=2*(x-X+2),C=U.getMinY()+C,Y.setLocation(N,C),F.push(Y))),G.getModifiers().includes(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&i.has(_.Modifiers.T_UNIQUE_DESIGNATION_1)&&(V=i.get(_.Modifiers.T_UNIQUE_DESIGNATION_1),null!=V&&(Y=new P.TextInfo(V,0,0,O._modifierFont,r),N=U.getMinX()+U.getWidth()+4,C=U.getMinY()+x-X,Y.setLocation(N,C),F.push(Y))),G.getModifiers().includes(_.Modifiers.T1_UNIQUE_DESIGNATION_2)&&i.has(_.Modifiers.T1_UNIQUE_DESIGNATION_2)&&(V=i.get(_.Modifiers.T1_UNIQUE_DESIGNATION_2),null!=V&&(Y=new P.TextInfo(V,0,0,O._modifierFont,r),b=Math.round(Y.getTextBounds().getWidth()),N=U.getMinX()+.5*U.getWidth(),N-=.5*b,C=.55*U.getHeight(),C=U.getMinY()+C,Y.setLocation(N,C),F.push(Y)))),M.SymbolUtilities.hasFDI(t)){if(g=new n.Point2D(U.getX(),U.getY()),A=new n.Point2D(U.getX()+U.getWidth(),U.getY()),u=new n.Point2D(Math.round(U.getCenterX()),Math.round(U.getY()-.5*U.getWidth())),c=new s.Rectangle2D(g.getX(),u.getY(),A.getX()-g.getX(),g.getY()-u.getY()),Y=new P.TextInfo("TEST",0,0,O._modifierFont,r),null!=Y){let e=Math.round(U.getY()-Y.getTextBounds().getHeight()-2);g.setLocation(g.getX(),g.getY()+e),u.setLocation(u.getX(),u.getY()+e),A.setLocation(A.getX(),A.getY()+e),c=new s.Rectangle2D(g.getX(),u.getY(),A.getX()-g.getX(),g.getY()-u.getY())}B=B.createUnion(c)}if(null!=F&&F.length>0){W=F[0].getTextOutlineBounds();let e,t=F.length;for(let i=1;i<t;i++)e=F[i],W=W.createUnion(e.getTextOutlineBounds())}if(null!=c&&(W=null!=W?W.createUnion(c):c),null!=W){if(B=B.createUnion(W),e instanceof L.ImageInfo&&(B.getMinX()<0||B.getMinY()<0)){let e,t=Math.abs(B.getMinX()),i=Math.abs(B.getMinY()),a=F.length;for(let n=0;n<a;n++)e=F[n],e.shift(t,i);E.RectUtilities.shift(W,t,i),H.setLocation(H.getX()+t,H.getY()+i),E.RectUtilities.shift(v,t,i),E.RectUtilities.shift(B,t,i),null!=c&&(R.ShapeUtilities.offset(c,t,i),R.ShapeUtilities.offset(g,t,i),R.ShapeUtilities.offset(u,t,i),R.ShapeUtilities.offset(A,t,i))}if(a.has(d.MilStdAttributes.TextColor)&&(m=I.RendererUtilities.getColorFromHexString(a.get(d.MilStdAttributes.TextColor))),a.has(d.MilStdAttributes.TextBackgroundColor)&&(y=I.RendererUtilities.getColorFromHexString(a.get(d.MilStdAttributes.TextBackgroundColor))),m=I.RendererUtilities.setColorAlpha(m,w),y=I.RendererUtilities.setColorAlpha(y,w),e instanceof f.SVGSymbolInfo){let t,i=I.RendererUtilities.colorToHexString(l,!1),a=3;w>-1&&(t=w.toString()),o=e;let n="";if(n+=o.getSVG(),n+=O.renderTextElements(F,m,y),null!=c){let e="6 4",t=[6,4];v.getHeight()<20&&(e="5 3");let s=I.RendererUtilities.getDistanceBetweenPoints(u,g);t[1]=s/14*2,t[0]=s/14*3,e=t[0]+" "+t[1];let l=new T.Path;l.moveTo(u.getX(),u.getY()),l.lineTo(g.getX(),g.getY()),l.moveTo(u.getX(),u.getY()),l.lineTo(A.getX(),A.getY()),l.setLineDash(e),n+=l.toSVGElement(i,a,null)}S=new f.SVGSymbolInfo(n.toString().valueOf(),H,v,B)}}return S}static shiftUnitPointsAndDraw(e,t,i){let a=null,n=null,s=-1;null!=i&&i.has(d.MilStdAttributes.Alpha)&&(s=Number.parseInt(i.get(d.MilStdAttributes.Alpha)));let l,r=u.Color.BLACK,o=null,c=t.getSymbolBounds(),T=t.getSymbolCenterPoint(),g=t.getImageBounds(),_=t.getImageBounds();if(null!=e&&e.length>0){l=e[0].getTextOutlineBounds();let t,i=e.length;for(let a=1;a<i;a++)t=e[a],l.union(t.getTextOutlineBounds())}if(null!=l){if(g.union(l),t instanceof L.ImageInfo&&(g.getX()<0||g.getY()<0)){let t,i=Math.round(Math.abs(g.getX())),a=Math.round(Math.abs(g.getY())),n=e.length;for(let s=0;s<n;s++)t=e[s],t.shift(i,a);E.RectUtilities.shift(l,i,a),T.setLocation(T.getX()+i,T.getY()+a),E.RectUtilities.shift(c,i,a),E.RectUtilities.shift(g,i,a),E.RectUtilities.shift(_,i,a)}if(i.has(d.MilStdAttributes.TextColor)&&(r=I.RendererUtilities.getColorFromHexString(i.get(d.MilStdAttributes.TextColor))),i.has(d.MilStdAttributes.TextBackgroundColor)&&(o=I.RendererUtilities.getColorFromHexString(i.get(d.MilStdAttributes.TextBackgroundColor))),r=I.RendererUtilities.setColorAlpha(r,s),o=I.RendererUtilities.setColorAlpha(o,s),t instanceof f.SVGSymbolInfo){a=t;let i="";i+=O.renderTextElements(e,r,o),i+=a.getSVG(),n=new f.SVGSymbolInfo(i.toString().valueOf(),T,c,g)}}return n}static renderTextElement(e,t,i){let a="",n=I.RendererUtilities.colorToHexString(I.RendererUtilities.getIdealOutlineColor(t),!1);null!=i&&(n=I.RendererUtilities.colorToHexString(i,!1));let s=I.RendererUtilities.colorToHexString(t,!1);for(let t of e)a+=y.Shape2SVG.Convert(t,n,s,"2",null,null,null),a+="\n";return a.toString().valueOf()}static renderTextElements(e,t,i){let a,n=A.RendererSettings.getInstance().getLabelFont().getName()+", sans-serif",s=A.RendererSettings.getInstance().getLabelFont().getSize().toString();A.RendererSettings.getInstance().getLabelFont().isBold()&&(a="bold");let l="",r=I.RendererUtilities.colorToHexString(I.RendererUtilities.getIdealOutlineColor(t),!1);null!=i&&(r=I.RendererUtilities.colorToHexString(i,!1));let o=I.RendererUtilities.colorToHexString(t,!1);l+="\n<g",l+=' font-family="'+n+'"',l+=' font-size="'+s+'px"',null!=a&&(l+=' font-weight="'+a+'"'),l+=' alignment-baseline="alphabetic"',l+=">";for(let t of e)l+=y.Shape2SVG.ConvertForGroup(t,r,o,"2",null,null,null),l+="\n";return l+="</g>\n",l.toString().valueOf()}static renderText(e,t,i,a){let n,s,l=t.length,r=A.RendererSettings.getInstance().getTextBackgroundMethod(),o=A.RendererSettings.getInstance().getTextOutlineWidth();if(o>2&&(o=2),null==i&&(n=u.Color.BLACK),s=null!=a?a:I.RendererUtilities.getIdealOutlineColor(n),255!==n.getAlpha()&&255===s.getAlpha()&&(s=I.RendererUtilities.setColorAlpha(s,n.getAlpha()/255)),e.font=A.RendererSettings.getInstance().getLabelFont.toString(),e.lineWidth=o,e.fillStyle=n.toHexString(),e.strokeStyle=a.toHexString(),r===A.RendererSettings.TextBackgroundMethod_OUTLINE_QUICK){let i;if(o>0)for(var c=0;c<l;c++)i=t.at(c),i.strokeText(e);e.fillStyle=n.toHexString(!1);for(let i=0;i<l;i++)t.at(i).fillText(e)}else if(r===A.RendererSettings.TextBackgroundMethod_OUTLINE){let i;for(o>0&&(e.lineWidth=2*o+1),c=0;c<l;c++)i=t[c],o>0&&i.strokeText(e),i.fillText(e)}else if(r===A.RendererSettings.TextBackgroundMethod_COLORFILL){e.fillStyle=s.toHexString();for(let i=0;i<l;i++)t[i].getTextOutlineBounds().fill(e);e.fillStyle=n.toHexString();for(let i=0;i<l;i++)t[i].fillText(e)}else if(r===A.RendererSettings.TextBackgroundMethod_NONE)for(let i=0;i<l;i++)t[i].fillText(e)}static hasDisplayModifiers(e,t){let i=!1,a=D.SymbolID.getSymbolSet(e),n=D.SymbolID.getStatus(e),s=D.SymbolID.getContext(e);return a===D.SymbolID.SymbolSet_ControlMeasure?(!0===M.SymbolUtilities.isCBRNEvent(e)&&null!=t&&t.has(_.Modifiers.Q_DIRECTION_OF_MOVEMENT)||M.SymbolUtilities.hasFDI(e))&&(i=!0):a!==D.SymbolID.SymbolSet_Atmospheric&&a!==D.SymbolID.SymbolSet_Oceanographic&&a!==D.SymbolID.SymbolSet_MeteorologicalSpace&&(s>0&&(i=!0),D.SymbolID.getAmplifierDescriptor(e)>0&&(i=!0),null!=t&&(t.has(_.Modifiers.AO_ENGAGEMENT_BAR)||t.has(_.Modifiers.Q_DIRECTION_OF_MOVEMENT))&&(i=!0),D.SymbolID.getHQTFD(e)>0&&(i=!0),n>1&&(i=!0)),i}static hasTextModifiers(e,t){let i=D.SymbolID.getSymbolSet(e),a=D.SymbolID.getEntityCode(e);if(i===D.SymbolID.SymbolSet_Atmospheric)switch(a){case 110102:case 110202:case 162200:case 162300:return!0;default:return!1}else{if(i===D.SymbolID.SymbolSet_Oceanographic||i===D.SymbolID.SymbolSet_MeteorologicalSpace)return!1;if(i===D.SymbolID.SymbolSet_ControlMeasure)return h.MSLookup.getInstance().getMSLInfo(e).getModifiers().length>0&&null!=t&&t.size>0;if(null!=M.SymbolUtilities.getStandardIdentityModifier(e))return!0}let n=D.SymbolID.getCountryCode(e);return n>0&&""!==g.GENCLookup.getInstance().get3CharCode(n)||null!=t&&t.size>0}}t.ModifierRenderer=O},6612:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeUtilties=void 0;const a=i(6001);t.ShapeUtilties=class{static relativeCCW=function(e,t,i,a,n,s){var l=(n-=e)*(a-=t)-(s-=t)*(i-=e);return 0===l&&(l=n*i+s*a)>0&&(l=(n-=i)*i+(s-=a)*a)<0&&(l=0),l<0?-1:l>0?1:0};static linesIntersect=function(e,t,i,a,n,s,l,r){var o=this.relativeCCW(e,t,i,a,n,s),c=this.relativeCCW(e,t,i,a,l,r),T=this.relativeCCW(n,s,l,r,e,t),u=this.relativeCCW(n,s,l,r,i,a);return o*c<=0&&T*u<=0};static intersectRects=function(e,t){var i=Math.max(e.getX(),t.getX()),n=Math.max(e.getY(),t.getY()),s=Math.min(e.getX()+e.getWidth(),t.getX()+t.getWidth()),l=Math.min(e.getY()+e.getHeight(),t.getY()+t.getHeight());return new a.Rectangle(i,n,s-i,l-n)}}},6621:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clsChannelUtility=void 0;const a=i(8087),n=i(4305),s=i(8262),l=i(8485),r=i(1207),o=i(7389),c=i(8712),T=i(8101),u=i(2809),g=i(3515),L=i(8113),d=i(7950),_=i(7300),h=i(106),E=i(2421),A=i(8965),I=i(8678);class S{static _className="clsChannelUtility";static GetPartitions(e,t){try{let i=0,a=!1,n=new u.P1;if(!1===e[0])return 0;if(null==t)return 0;t.length=0,n.start=0;let s=e.length;for(i=0;i<s-1;i++)a=e[i+1],!1===a&&(n.end_Renamed=i,t.push(n),n=new u.P1,n.start=i+1);n.end_Renamed=i,t.push(n)}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"GetPartitions",new h.RendererException("Failed inside GetPartitions",e))}return t.length}static DrawGoodChannel2(e,t,i,a,n,r,c,u,g){let L=0;try{let d,_=e.get_LineType(),h=0;switch(_){case T.TacticalLines.LC:case T.TacticalLines.LC_HOSTILE:case T.TacticalLines.UNSP:case T.TacticalLines.DFENCE:case T.TacticalLines.SFENCE:case T.TacticalLines.DOUBLEA:case T.TacticalLines.LWFENCE:case T.TacticalLines.HWFENCE:case T.TacticalLines.SINGLEC:case T.TacticalLines.DOUBLEC:case T.TacticalLines.TRIPLE:h=_;break;case T.TacticalLines.SPT:case T.TacticalLines.MAIN:h=0===t?T.TacticalLines.CHANNEL_FLARED:T.TacticalLines.CHANNEL;break;case T.TacticalLines.CATK:case T.TacticalLines.CATKBYFIRE:h=T.TacticalLines.CHANNEL_DASHED;break;default:h=T.TacticalLines.CHANNEL}if(!0===r)if(0!==t)switch(_){case T.TacticalLines.SPT:h=T.TacticalLines.SPT_STRAIGHT;break;case T.TacticalLines.MAIN:h=T.TacticalLines.MAIN_STRAIGHT;break;default:h=_}else h=_;if(t<0)return L;if(i<0)return L;if(i<t)return L;let E,A,I,S=0,y=0,f=0,D=0;for(f=i-t+2,E=new Array(2*f),A=new Array(2*f),D=0,S=t;S<i+2;S++)E[D]=a[2*S],E[D+1]=a[2*S+1],A[D]=a[2*S],A[D+1]=a[2*S+1],D+=2;if(e.set_LineType(h),y=s.CELineArray.CGetLineCountDouble(e,E,f,n),d=new Array(3*y),y=l.Channels.GetChannel1Double(e,E,A,d,f,f,n/2,g,c),e.set_LineType(_),null==c&&null!=d){let e=d.length;for(S=0;S<e/3;S++)I=new o.POINT2(d[3*S],d[3*S+1],d[3*S+2]),S===d.length/3-1&&(I.style=5),u.push(I)}L=y>0?d.length:0,y>0&&(d[y-1]=5),E=null,A=null}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"DrawGoodChannel2",new h.RendererException("Failed inside DrawGoodChannel2",e))}return L}static DrawSegments(e,t,i,a,n,s,l){try{let r=0,o=0,c=i.length;for(r=0;r<c-1;r++)o=S.DrawGoodChannel2(e,i[r].start,i[r].end_Renamed,t,a,!1,n,s,l);o=S.DrawGoodChannel2(e,i[r].start,i[r].end_Renamed,t,a,!0,n,s,l)}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"DrawSegments",new h.RendererException("Failed inside DrawSegments",e))}}static DrawLCSingleLineSegments(e,t,i,a,n,s){try{for(let l of i){let i=l.end_Renamed-l.start+1,r=new Array;for(let e=0;e<i;e++)r.push(new o.POINT2(t[2*(e+l.start)],t[2*(e+l.start)+1]));let c=e.get_SymbolId();c=E.SymbolID.setAffiliation(c,E.SymbolID.StandardIdentity_Affiliation_Hostile_Faker),c=E.SymbolID.setEntityCode(c,d.EntityCode.EntityCode_FLOT);let u=new g.TGLight;u.set_LineType(T.TacticalLines.FLOT),u.set_Pixels(r),u.set_SymbolId(c),u.set_LineThickness(e.get_LineThickness());let _=A.clsRenderer2.GetLineArray(u,s,!1,n);if(null!=_){for(let e of _)e.setLineColor(L.Color.RED);a.push(..._)}}}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"DrawLCFlotSegments",new h.RendererException("Failed inside DrawLCFlotSegments",e))}}static getLCPixels(e,t){let i;try{if(e.get_LineType()!==T.TacticalLines.LC)return t;let a=e.Pixels,s=new o.POINT2,l=new o.POINT2;r.lineutility.CalcMBRPoints(a,a.length,s,l);let c=n.arraysupport.getScaledSize(21,e.get_LineThickness());if(l.x-s.x>=c)return t;if(l.y-s.y>=c)return t;let u=a[0].x,g=a[0].y,L=a[1].x,d=a[1].y;L=u<=L?u+c:u-c,d=g;let _=new o.POINT2(u,g),h=new o.POINT2(L,d);i=new Array,i.push(_),i.push(h)}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"getLCPixels",new h.RendererException("Failed inside getLCPixels",e))}return i}static DrawChannel(e,t,i,a,n,s,l){try{e=S.getLCPixels(i,e),r.lineutility.adjustCATKBYFIREControlPoint(t,e,45),i.get_LineType()===T.TacticalLines.LC&&i.isHostile()&&(t=T.TacticalLines.LC_HOSTILE);let o=0,c=new Array(2*e.length),u=e.length;for(o=0;o<u;o++)c[2*o]=e[o].x,c[2*o+1]=e[o].y;S.DrawChannel2(c,t,i,a,n,s,l)}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"DrawChannel",new h.RendererException("Failed inside DrawChannel",e))}}static GetPartitions2(e){let t;try{let i=new Array(2*e.Pixels.length),a=e.Pixels.length;for(let t=0;t<a;t++)i[2*t]=e.Pixels[t].x,i[2*t+1]=e.Pixels[t].y;let s=new Array(i.length/2-1);if(0===s.length)return null;let l=n.arraysupport.getScaledSize(3,e.get_LineThickness());I.clsUtility.GetSegments(i,s,l),t=new Array,S.GetPartitions(s,t)}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"GetPartitions2",new h.RendererException("Failed inside GetPartitions2",e))}return t}static DrawChannel2(e,t,i,s,r,o,u){try{let g,L,d=new c.ref,_=0,h=0,E=e.length,A=0;switch(d.value=new Array(1),d.value[0]=n.arraysupport.getScaledSize(20,i.get_LineThickness()),t){case T.TacticalLines.MAIN:case T.TacticalLines.CATK:case T.TacticalLines.CATKBYFIRE:case T.TacticalLines.AIRAOA:case T.TacticalLines.AAAAA:case T.TacticalLines.SPT:if(I.clsUtility.ReorderPixels(e),A=e.length/2,A<3)return;for(h=I.clsUtility.ChannelWidth(e,d)/2,A=e.length/2,g=new Array(e.length-2),_=0;_<A;_++)_<A-1&&(g[2*_]=e[2*_],g[2*_+1]=e[2*_+1]);break;case T.TacticalLines.LC:case T.TacticalLines.LC_HOSTILE:for(h=n.arraysupport.getScaledSize(40,i.get_LineThickness()),g=new Array(e.length),E=e.length,_=0;_<E;_++)g[_]=e[_];break;case T.TacticalLines.UNSP:case T.TacticalLines.DFENCE:case T.TacticalLines.SFENCE:case T.TacticalLines.DOUBLEA:case T.TacticalLines.LWFENCE:case T.TacticalLines.HWFENCE:case T.TacticalLines.SINGLEC:case T.TacticalLines.DOUBLEC:case T.TacticalLines.TRIPLE:for(i.set_lineCap(a.BasicStroke.CAP_BUTT),h=n.arraysupport.getScaledSize(30,i.get_LineThickness()),l.Channels.getShiftLines()&&(h=n.arraysupport.getScaledSize(60,i.get_LineThickness())),g=new Array(e.length),E=e.length,_=0;_<E;_++)g[_]=e[_]}let y=new Array(Math.trunc(g.length/2)-1);if(0===y.length)return;if(t===T.TacticalLines.LC||t===T.TacticalLines.LC_HOSTILE){L=new Array;let e=new Array;I.clsUtility.GetLCPartitions(g,n.arraysupport.getScaledSize(40,i.get_LineThickness()),L,e),S.DrawSegments(i,g,L,h,s,r,d.value[0]),e.length>0&&S.DrawLCSingleLineSegments(i,g,e,s,o,u)}else{let e=3;I.clsUtility.GetSegments(g,y,e),L=new Array,S.GetPartitions(y,L),S.DrawSegments(i,g,L,h,s,r,d.value[0])}}catch(e){if(!(e instanceof Error))throw e;_.ErrorLogger.LogException(S._className,"DrawChannel2",new h.RendererException("Failed inside DrawChannel2",e))}}}t.clsChannelUtility=S},6932:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Modifiers=void 0;class i{static A_SYMBOL_ICON="A_SYMBOL_ICON";static B_ECHELON="B_ECHELON";static C_QUANTITY="C_QUANTITY";static D_TASK_FORCE_INDICATOR="D_TASK_FORCE_INDICATOR";static E_FRAME_SHAPE_MODIFIER="E_FRAME_SHAPE_MODIFIER";static F_REINFORCED_REDUCED="F_REINFORCED_REDUCED";static G_STAFF_COMMENTS="G_STAFF_COMMENTS";static H_ADDITIONAL_INFO_1="H_ADDITIONAL_INFO_1";static H1_ADDITIONAL_INFO_2="H1_ADDITIONAL_INFO_2";static H2_ADDITIONAL_INFO_3="H2_ADDITIONAL_INFO_3";static J_EVALUATION_RATING="J_EVALUATION_RATING";static K_COMBAT_EFFECTIVENESS="K_COMBAT_EFFECTIVENESS";static L_SIGNATURE_EQUIP="L_SIGNATURE_EQUIP";static M_HIGHER_FORMATION="M_HIGHER_FORMATION";static N_HOSTILE="N_HOSTILE";static P_IFF_SIF_AIS="P_IFF_SIF_AIS";static Q_DIRECTION_OF_MOVEMENT="Q_DIRECTION_OF_MOVEMENT";static R_MOBILITY_INDICATOR="R_MOBILITY_INDICATOR";static R2_SIGNIT_MOBILITY_INDICATOR="R2_SIGNIT_MOBILITY_INDICATOR";static S_HQ_STAFF_INDICATOR="S_HQ_STAFF_INDICATOR";static S2_OFFSET_INDICATOR="S2_OFFSET_INDICATOR";static T_UNIQUE_DESIGNATION_1="T_UNIQUE_DESIGNATION_1";static T1_UNIQUE_DESIGNATION_2="T1_UNIQUE_DESIGNATION_2";static V_EQUIP_TYPE="V_EQUIP_TYPE";static W_DTG_1="W_DTG_1";static W1_DTG_2="W1_DTG_2";static X_ALTITUDE_DEPTH="X_ALTITUDE_DEPTH";static Y_LOCATION="Y_LOCATION";static Z_SPEED="Z_SPEED";static AA_SPECIAL_C2_HQ="AA_SPECIAL_C2_HQ";static AB_FEINT_DUMMY_INDICATOR="AB_FEINT_DUMMY_INDICATOR";static AD_PLATFORM_TYPE="AD_PLATFORM_TYPE";static AE_EQUIPMENT_TEARDOWN_TIME="AE_EQUIPMENT_TEARDOWN_TIME";static AF_COMMON_IDENTIFIER="AF_COMMON_IDENTIFIER";static AG_AUX_EQUIP_INDICATOR="AG_AUX_EQUIP_INDICATOR";static AH_AREA_OF_UNCERTAINTY="AH_AREA_OF_UNCERTAINTY";static AI_DEAD_RECKONING_TRAILER="AI_DEAD_RECKONING_TRAILER";static AJ_SPEED_LEADER="AJ_SPEED_LEADER";static AK_PAIRING_LINE="AK_PAIRING_LINE";static AL_OPERATIONAL_CONDITION="AL_OPERATIONAL_CONDITION";static AM_DISTANCE="AM_DISTANCE";static AN_AZIMUTH="AN_AZIMUTH";static AO_ENGAGEMENT_BAR="AO_ENGAGEMENT_BAR";static AP_TARGET_NUMBER="AP_TARGET_NUMBER";static AP1_TARGET_NUMBER_EXTENSION="AP1_TARGET_NUMBER_EXTENSION";static AQ_GUARDED_UNIT="AQ_GUARDED_UNIT";static AR_SPECIAL_DESIGNATOR="AR_SPECIAL_DESIGNATOR";static AS_COUNTRY="AS_COUNTRY";static AT_CAPACITY_OF_INSTALLATION="AT_CAPACITY_OF_INSTALLATION";static AV_LEADERSHIP="AV_LEADERSHIP";static AW_HEADQUARTERS_ELEMENT="AW_HEADQUARTERS_ELEMENT";static AX_INSTALLATION_COMPOSITION="AX_INSTALLATION_COMPOSITION";static AY_NETWORK_IDENTIFIER="AY_NETWORK_IDENTIFIER";static GetModifierList(){let e=new Array;return e.push(i.C_QUANTITY),e.push(i.D_TASK_FORCE_INDICATOR),e.push(i.F_REINFORCED_REDUCED),e.push(i.G_STAFF_COMMENTS),e.push(i.H_ADDITIONAL_INFO_1),e.push(i.H1_ADDITIONAL_INFO_2),e.push(i.J_EVALUATION_RATING),e.push(i.K_COMBAT_EFFECTIVENESS),e.push(i.L_SIGNATURE_EQUIP),e.push(i.M_HIGHER_FORMATION),e.push(i.N_HOSTILE),e.push(i.P_IFF_SIF_AIS),e.push(i.Q_DIRECTION_OF_MOVEMENT),e.push(i.R2_SIGNIT_MOBILITY_INDICATOR),e.push(i.T_UNIQUE_DESIGNATION_1),e.push(i.T1_UNIQUE_DESIGNATION_2),e.push(i.V_EQUIP_TYPE),e.push(i.W_DTG_1),e.push(i.W1_DTG_2),e.push(i.X_ALTITUDE_DEPTH),e.push(i.Y_LOCATION),e.push(i.Z_SPEED),e.push(i.AA_SPECIAL_C2_HQ),e.push(i.AD_PLATFORM_TYPE),e.push(i.AE_EQUIPMENT_TEARDOWN_TIME),e.push(i.AF_COMMON_IDENTIFIER),e.push(i.AH_AREA_OF_UNCERTAINTY),e.push(i.AI_DEAD_RECKONING_TRAILER),e.push(i.AJ_SPEED_LEADER),e.push(i.AM_DISTANCE),e.push(i.AN_AZIMUTH),e.push(i.AO_ENGAGEMENT_BAR),e.push(i.AP_TARGET_NUMBER),e.push(i.AP1_TARGET_NUMBER_EXTENSION),e.push(i.AQ_GUARDED_UNIT),e.push(i.AR_SPECIAL_DESIGNATOR),e}static GetSymbolCodeModifiersList(){let e=new Array;return e.push(i.A_SYMBOL_ICON),e.push(i.B_ECHELON),e.push(i.D_TASK_FORCE_INDICATOR),e.push(i.N_HOSTILE),e.push(i.R_MOBILITY_INDICATOR),e.push(i.S_HQ_STAFF_INDICATOR),e.push(i.AB_FEINT_DUMMY_INDICATOR),e.push(i.AG_AUX_EQUIP_INDICATOR),e.push(i.AJ_SPEED_LEADER),e.push(i.AL_OPERATIONAL_CONDITION),e.push(i.AS_COUNTRY),e}static GetUnitModifierList(){let e=new Array;return e.push(i.C_QUANTITY),e.push(i.F_REINFORCED_REDUCED),e.push(i.G_STAFF_COMMENTS),e.push(i.H_ADDITIONAL_INFO_1),e.push(i.J_EVALUATION_RATING),e.push(i.K_COMBAT_EFFECTIVENESS),e.push(i.L_SIGNATURE_EQUIP),e.push(i.M_HIGHER_FORMATION),e.push(i.N_HOSTILE),e.push(i.P_IFF_SIF_AIS),e.push(i.Q_DIRECTION_OF_MOVEMENT),e.push(i.R2_SIGNIT_MOBILITY_INDICATOR),e.push(i.T_UNIQUE_DESIGNATION_1),e.push(i.V_EQUIP_TYPE),e.push(i.W_DTG_1),e.push(i.W1_DTG_2),e.push(i.X_ALTITUDE_DEPTH),e.push(i.Y_LOCATION),e.push(i.Z_SPEED),e.push(i.AA_SPECIAL_C2_HQ),e.push(i.AD_PLATFORM_TYPE),e.push(i.AE_EQUIPMENT_TEARDOWN_TIME),e.push(i.AF_COMMON_IDENTIFIER),e.push(i.AJ_SPEED_LEADER),e.push(i.AK_PAIRING_LINE),e.push(i.AO_ENGAGEMENT_BAR),e.push(i.AP_TARGET_NUMBER),e.push(i.AP1_TARGET_NUMBER_EXTENSION),e.push(i.AQ_GUARDED_UNIT),e.push(i.AR_SPECIAL_DESIGNATOR),e.push(i.AS_COUNTRY),e}static GetControlMeasureModifierList(){let e=new Array;return e.push(i.C_QUANTITY),e.push(i.H_ADDITIONAL_INFO_1),e.push(i.H1_ADDITIONAL_INFO_2),e.push(i.N_HOSTILE),e.push(i.Q_DIRECTION_OF_MOVEMENT),e.push(i.T_UNIQUE_DESIGNATION_1),e.push(i.T1_UNIQUE_DESIGNATION_2),e.push(i.V_EQUIP_TYPE),e.push(i.W_DTG_1),e.push(i.W1_DTG_2),e.push(i.X_ALTITUDE_DEPTH),e.push(i.Y_LOCATION),e.push(i.AM_DISTANCE),e.push(i.AN_AZIMUTH),e.push(i.AP_TARGET_NUMBER),e.push(i.AP1_TARGET_NUMBER_EXTENSION),e.push(i.AS_COUNTRY),e}static getModifierName(e){switch(e){case i.A_SYMBOL_ICON:return"Symbol Icon";case i.B_ECHELON:return"Echelon";case i.C_QUANTITY:return"Quantity";case i.D_TASK_FORCE_INDICATOR:return"Task Force Indicator";case i.F_REINFORCED_REDUCED:return"Reinforce Reduced";case i.G_STAFF_COMMENTS:return"Staff Comments";case i.H_ADDITIONAL_INFO_1:return"Additional Info 1";case i.H1_ADDITIONAL_INFO_2:return"Additional Info 2";case i.J_EVALUATION_RATING:return"Evaluation Rating";case i.K_COMBAT_EFFECTIVENESS:return"Combat Effectiveness";case i.L_SIGNATURE_EQUIP:return"Signature Equipment";case i.M_HIGHER_FORMATION:return"Higher Formation";case i.N_HOSTILE:return"Hostile";case i.P_IFF_SIF_AIS:return"IFF SIF AIS";case i.Q_DIRECTION_OF_MOVEMENT:return"Direction of Movement";case i.R_MOBILITY_INDICATOR:return"Mobility Indicator";case i.R2_SIGNIT_MOBILITY_INDICATOR:return"Signals Intelligence Mobility Indicator";case i.S_HQ_STAFF_INDICATOR:return"HQ Staff";case i.S2_OFFSET_INDICATOR:return"Offset Indicator";case i.T_UNIQUE_DESIGNATION_1:return"Unique Designation 1";case i.T1_UNIQUE_DESIGNATION_2:return"Unique Designation 2";case i.V_EQUIP_TYPE:return"Equipment Type";case i.W_DTG_1:return"Date Time Group 1";case i.W1_DTG_2:return"Date Time Group 2";case i.X_ALTITUDE_DEPTH:return"Altitude Depth";case i.Y_LOCATION:return"Location";case i.Z_SPEED:return"Speed";case i.AA_SPECIAL_C2_HQ:return"Special C2 HQ";case i.AB_FEINT_DUMMY_INDICATOR:return"Feint Dummy Indicator";case i.AD_PLATFORM_TYPE:return"Platform Type";case i.AE_EQUIPMENT_TEARDOWN_TIME:return"Equipment Teardown Time";case i.AF_COMMON_IDENTIFIER:return"Common Identifier";case i.AG_AUX_EQUIP_INDICATOR:return"Auxiliary Equipment Indicator";case i.AH_AREA_OF_UNCERTAINTY:return"Area of Uncertainty";case i.AI_DEAD_RECKONING_TRAILER:return"Dead Reckoning Trailer";case i.AJ_SPEED_LEADER:return"Speed Leader";case i.AK_PAIRING_LINE:return"Pairing Line";case i.AL_OPERATIONAL_CONDITION:return"Operational Condition";case i.AM_DISTANCE:return"Distance";case i.AN_AZIMUTH:return"Azimuth";case i.AO_ENGAGEMENT_BAR:return"Engagement Bar";case i.AP_TARGET_NUMBER:return"Target Number";case i.AP1_TARGET_NUMBER_EXTENSION:return"Target Number Extension";case i.AQ_GUARDED_UNIT:return"Guarded Unit";case i.AR_SPECIAL_DESIGNATOR:return"Special Designator";case i.AS_COUNTRY:return"Country";default:return""}}static getModifierLetterCode(e){switch(e){case i.A_SYMBOL_ICON:return"A";case i.B_ECHELON:return"B";case i.C_QUANTITY:return"C";case i.D_TASK_FORCE_INDICATOR:return"D";case i.F_REINFORCED_REDUCED:return"F";case i.G_STAFF_COMMENTS:return"G";case i.H_ADDITIONAL_INFO_1:return"H";case i.H1_ADDITIONAL_INFO_2:return"H1";case i.J_EVALUATION_RATING:return"J";case i.K_COMBAT_EFFECTIVENESS:return"K";case i.L_SIGNATURE_EQUIP:return"L";case i.M_HIGHER_FORMATION:return"M";case i.N_HOSTILE:return"N";case i.P_IFF_SIF_AIS:return"P";case i.Q_DIRECTION_OF_MOVEMENT:return"Q";case i.R_MOBILITY_INDICATOR:return"R";case i.R2_SIGNIT_MOBILITY_INDICATOR:return"R2";case i.S_HQ_STAFF_INDICATOR:return"S";case i.S2_OFFSET_INDICATOR:return"S2";case i.T_UNIQUE_DESIGNATION_1:return"T";case i.T1_UNIQUE_DESIGNATION_2:return"T1";case i.V_EQUIP_TYPE:return"V";case i.W_DTG_1:return"W";case i.W1_DTG_2:return"W1";case i.X_ALTITUDE_DEPTH:return"X";case i.Y_LOCATION:return"Y";case i.Z_SPEED:return"Z";case i.AA_SPECIAL_C2_HQ:return"AA";case i.AB_FEINT_DUMMY_INDICATOR:return"AB";case i.AD_PLATFORM_TYPE:return"AD";case i.AE_EQUIPMENT_TEARDOWN_TIME:return"AE";case i.AF_COMMON_IDENTIFIER:return"AF";case i.AG_AUX_EQUIP_INDICATOR:return"AG";case i.AH_AREA_OF_UNCERTAINTY:return"AH";case i.AI_DEAD_RECKONING_TRAILER:return"AI";case i.AJ_SPEED_LEADER:return"AJ";case i.AK_PAIRING_LINE:return"AK";case i.AL_OPERATIONAL_CONDITION:return"AL";case i.AM_DISTANCE:return"AM";case i.AN_AZIMUTH:return"AN";case i.AO_ENGAGEMENT_BAR:return"AO";case i.AP_TARGET_NUMBER:return"AP";case i.AP1_TARGET_NUMBER_EXTENSION:return"AP1";case i.AQ_GUARDED_UNIT:return"AQ";case i.AR_SPECIAL_DESIGNATOR:return"AR";case i.AS_COUNTRY:return"AS";default:return""}}static getModifierDescription(e){switch(e){case i.A_SYMBOL_ICON:return"The innermost part of a symbol, comprised of an icon and optional modifiers, that represents a joint military object (see 5.3.4).\nDetermined by SIDC positions 11-20.";case i.B_ECHELON:return"A graphic amplifier in a unit symbol that identifies command level (see 5.3.7.1 and table D-III).";case i.C_QUANTITY:return'A text amplifier in an equipment symbol that identifies the number of items present.\nExamples include: "350 Beds" or "50 Gallons"';case i.D_TASK_FORCE_INDICATOR:return"A graphic amplifier that identifies a unit or activities symbol as a task force (see 5.3.7.2 and figure 13).\nDetermined by SIDC position 8.";case i.F_REINFORCED_REDUCED:return"A text modifier in a unit symbol that displays (+) for reinforced, (-) for reduced,(+) reinforced and reduced.\nR = reinforced,D = reduced, RD = reinforced and reduced";case i.G_STAFF_COMMENTS:case i.H_ADDITIONAL_INFO_1:return"A text modifier for units, equipment and installations; content is implementation specific.";case i.H1_ADDITIONAL_INFO_2:return"An alphanumeric text amplifier used to provide an up to a three-character letter field acronym to describe a point that is not already listed.";case i.J_EVALUATION_RATING:return'A text modifier for units, equipment, and installations that consists of\n a one letter reliability rating and a one-number credibility rating.\nReliability Ratings: A-completely reliable, B-usually reliable,\n C-fairly reliable, D-not usually reliable, E-unreliable,\n F-reliability cannot be judged.\nCredibility Ratings: 1-confirmed by other sources,\n2-probably true, 3-possibly true, 4-doubtfully true,\n5-improbable, 6-truth cannot be judged.\nExample "A1"';case i.K_COMBAT_EFFECTIVENESS:return"A text modifier for units and installations that indicates unit effectiveness or installation capability.FO - Fully Operational\nSO - Substantially operational\nMO - Marginally operational\nNO - Not operational\nUNK - Unknown";case i.L_SIGNATURE_EQUIP:return'A text modifier for hostile equipment; "!" indicates detectable electronic signatures.';case i.M_HIGHER_FORMATION:return"An amplifier for units that indicates number or title of higher echelon command (corps are designated by Roman numerals).";case i.N_HOSTILE:return'An amplifier for equipment; letters "ENY" denote hostile symbols.Determined by SIDC position 4.';case i.P_IFF_SIF_AIS:return"An amplifier displaying IFF/SIF/AIS Identification modes and codes.Alphanumeric - {4,4}\nMODE 1:##, where ## is a two-digit octal number (0-7). The rightmost digit is limited to 0-3.\n[1:##]\nNote: MODE' is not required when displaying.\nAlphanumeric - {6,6}\nMODE 2:####, where #### is a four-digit octal number (0-7).\n[2:####]\nAlphanumeric - {6,6}\nMODE 3:####, where #### is a four-digit octal number (0-7).\n[3:####]\nAlphanumeric - {6,6}\nMODE 5:####, where #### is a 4-digit hexadecimal number (0-F). The leftmost digit is limited from 0 to 3.\n[5:####]\nAlphanumeric - {8,8}\nMODE S:XXXXXX\n[S:XXXXXX]\nAlphanumeric - {x,x}\nAIS IMO:XXXXXX";case i.Q_DIRECTION_OF_MOVEMENT:return"An amplifier consisting of a line with arrow that identifies the direction of movement or intended movement of an object (see 5.3.7.9 and figure 14).\n";case i.R_MOBILITY_INDICATOR:return"An amplifier that depicts the mobility of an object not intrinsic to the entity itself (see 5.3.7.9, figure 14 and table IX).\nDetermined by SIDC positions 9-10";case i.R2_SIGNIT_MOBILITY_INDICATOR:return"An amplifier that indicates the mobility of a SIGINT unit.List of Values:\nM = Mobile,\nS = Static\nU = Uncertain.";case i.S_HQ_STAFF_INDICATOR:return"An amplifier for units, installations and activities that identifies them as a headquarters (see figure 14 and figure 13).\nDetermined by SIDC position 8.";case i.S2_OFFSET_INDICATOR:return"An amplifier used to indicate the offset or precise location of a single point symbol (see 5.3.7.5, 5.3.12, and figure 14).";case i.T_UNIQUE_DESIGNATION_1:return"An amplifier that uniquely identifies a particular symbol or track number. Identifies acquisitions number when used with SIGINT symbology.";case i.T1_UNIQUE_DESIGNATION_2:return"Lines - Second unique identifier for boundaries.\nLines - Other than phase lines that have a specific purpose, (for example, restrictive fire line RFL),\n    should have the primary purpose labelled on top of the line at both ends of the line inside the\n    lateral boundaries or as often as necessary for clarity.\nPoints - Provides the unit servicing the point";case i.V_EQUIP_TYPE:return"An amplifier for equipment that indicates types of equipment.\nExample: AH-64 for Attack Helicopter";case i.W_DTG_1:case i.W1_DTG_2:return'An amplifier for displaying a date-time group (DDHHMMSSZMONYYYY) or (DDHHMMZMMMYYYY) or "O/O" for On Order.\nField "W" is used to provide DTG or if used with field "W1" the start of a period of time.\nField "W1" is used to provide the end of a period of time.\nThe date-time group is composed of a group of six numeric digits with a time zone suffix and the standardized three-letter abbreviation for the month followed by four digits representing the year.\nThe first pair of digits represents the day; the second pair, the hour; the third pair, the minutes. For automated systems, two digits may be added before the time zone suffix and after the minutes to designate seconds (see 5.3.7.8).';case i.X_ALTITUDE_DEPTH:return"An amplifier that displays either altitude, flight level, depth for submerged objects or height of equipment or structures on the ground, the minimum, maximum and/or specific altitude (in feet or meters in relation to a reference datum) or depth (for submerged objects in feet below sea level). See 5.3.7.6 for content.";case i.Y_LOCATION:return"An amplifier that displays a symbol's location in degrees, minutes and decimal minutes (or in MGRS, GARS, or other applicable display formats).";case i.Z_SPEED:return"An amplifier that displays velocity (see 5.3.7.7).";case i.AA_SPECIAL_C2_HQ:return"A amplifier that is contained inside the frame in place of the main icon and contains the name of the special C2 Headquarters.";case i.AB_FEINT_DUMMY_INDICATOR:return"An amplifier that identifies an offensive or defensive unit, intended to draw the enemy's attention away from the area of the main attack.\nDetermined by SIDC position 8.";case i.AD_PLATFORM_TYPE:return"Electronic intelligence notation (ELNOT) or communications intelligence notation (CENOT)";case i.AE_EQUIPMENT_TEARDOWN_TIME:return"Equipment teardown time in minutes.";case i.AF_COMMON_IDENTIFIER:return'Example: "Hawk" for Hawk SAM system.';case i.AG_AUX_EQUIP_INDICATOR:return"Towed sonar array indicator: A graphic modifier for equipment that indicates the presence of a towed sonar array (see 5.3.7.10, figure 13 and table IX).\nDetermined by SIDC positions 9-10";case i.AH_AREA_OF_UNCERTAINTY:return"A graphic modifier for units, equipment and installations that indicates the area where an object is most likely to be, based on the object's last report and the reporting accuracy of the sensor that detected the object (see 5.3.7.12.1 and table D-III).";case i.AI_DEAD_RECKONING_TRAILER:return"A graphic amplifier for units and equipment that identifies where an object should be located at present, given its last reported course and speed (see 5.3.7.12.2).";case i.AJ_SPEED_LEADER:return"A graphic amplifier for units, equipment and installations that depicts the speed and direction of movement of an object (see 5.3.7.12.3 and figure 17).";case i.AK_PAIRING_LINE:return"A graphic amplifier for units, equipment and installations that connects two objects and is updated dynamically as the positions of the two objects change (see 5.3.7.12.4 and figure 17).";case i.AL_OPERATIONAL_CONDITION:return"A graphic amplifier for equipment or installations that indicates operational condition or capacity.";case i.AM_DISTANCE:return"An amplifier that displays a minimum, maximum, or a specific distance (range, radius, width, length, etc.), in meters.";case i.AN_AZIMUTH:return"An amplifier that displays an angle measured from true north to any other line in degrees.";case i.AO_ENGAGEMENT_BAR:return"An amplifier placed immediately atop the symbol.\nMay denote: 1) local/remote status 2) engagement status 3) weapon type.";case i.AP_TARGET_NUMBER:return"An amplifier used in Fire Support operations to uniquely designate targets in accordance with STANAG 2934.";case i.AP1_TARGET_NUMBER_EXTENSION:return"An amplifier used to identify a target number extension which is a sequentially assigned number identifying the individual elements in a target (MIL-STD-6017),";case i.AQ_GUARDED_UNIT:return"An amplifier used during ballistic missile defense. Some tracks are designated as guarded by a particular unit.";case i.AR_SPECIAL_DESIGNATOR:return"An amplifier that identifies special track designators.";case i.AS_COUNTRY:return"A three-letter code that indicates the country of origin of the organization (US systems shall use GENC).";default:return""}}static getModifierKey(e){switch(e){case"A":return i.A_SYMBOL_ICON;case"B":return i.B_ECHELON;case"C":return i.C_QUANTITY;case"D":return i.D_TASK_FORCE_INDICATOR;case"F":return i.F_REINFORCED_REDUCED;case"G":return i.G_STAFF_COMMENTS;case"H":return i.H_ADDITIONAL_INFO_1;case"H1":return i.H1_ADDITIONAL_INFO_2;case"J":return i.J_EVALUATION_RATING;case"K":return i.K_COMBAT_EFFECTIVENESS;case"L":return i.L_SIGNATURE_EQUIP;case"M":return i.M_HIGHER_FORMATION;case"N":return i.N_HOSTILE;case"P":return i.P_IFF_SIF_AIS;case"Q":return i.Q_DIRECTION_OF_MOVEMENT;case"R":return i.R_MOBILITY_INDICATOR;case"R2":return i.R2_SIGNIT_MOBILITY_INDICATOR;case"S":return i.S_HQ_STAFF_INDICATOR;case"S2":return i.S2_OFFSET_INDICATOR;case"T":return i.T_UNIQUE_DESIGNATION_1;case"T1":return i.T1_UNIQUE_DESIGNATION_2;case"V":return i.V_EQUIP_TYPE;case"W":return i.W_DTG_1;case"W1":return i.W1_DTG_2;case"X":return i.X_ALTITUDE_DEPTH;case"Y":return i.Y_LOCATION;case"Z":return i.Z_SPEED;case"AA":return i.AA_SPECIAL_C2_HQ;case"AB":return i.AB_FEINT_DUMMY_INDICATOR;case"AD":return i.AD_PLATFORM_TYPE;case"AE":return i.AE_EQUIPMENT_TEARDOWN_TIME;case"AF":return i.AF_COMMON_IDENTIFIER;case"AG":return i.AG_AUX_EQUIP_INDICATOR;case"AH":return i.AH_AREA_OF_UNCERTAINTY;case"AI":return i.AI_DEAD_RECKONING_TRAILER;case"AJ":return i.AJ_SPEED_LEADER;case"AK":return i.AK_PAIRING_LINE;case"AL":return i.AL_OPERATIONAL_CONDITION;case"AM":return i.AM_DISTANCE;case"AN":return i.AN_AZIMUTH;case"AO":return i.AO_ENGAGEMENT_BAR;case"AP":return i.AP_TARGET_NUMBER;case"AP1":return i.AP1_TARGET_NUMBER_EXTENSION;case"AQ":return i.AQ_GUARDED_UNIT;case"AR":return i.AR_SPECIAL_DESIGNATOR;case"AS":return i.AS_COUNTRY;default:return null}}}t.Modifiers=i},6940:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AffiliationColors=void 0;const a=i(8113);class n{static FriendlyUnitFillColor=new a.Color(128,224,255);static HostileUnitFillColor=new a.Color(255,128,128);static NeutralUnitFillColor=new a.Color(170,255,170);static UnknownUnitFillColor=new a.Color(255,255,128);static SuspectUnitFillColor=new a.Color(255,229,153);static FriendlyGraphicFillColor=new a.Color(128,224,255);static HostileGraphicFillColor=new a.Color(255,128,128);static NeutralGraphicFillColor=new a.Color(170,255,170);static UnknownGraphicFillColor=new a.Color(255,255,128);static SuspectGraphicFillColor=new a.Color(255,229,153);static FriendlyUnitLineColor=a.Color.BLACK;static HostileUnitLineColor=a.Color.BLACK;static NeutralUnitLineColor=a.Color.BLACK;static UnknownUnitLineColor=a.Color.BLACK;static SuspectUnitLineColor=a.Color.BLACK;static FriendlyGraphicLineColor=a.Color.BLACK;static HostileGraphicLineColor=a.Color.RED;static NeutralGraphicLineColor=a.Color.GREEN;static UnknownGraphicLineColor=a.Color.YELLOW;static SuspectGraphicLineColor=new a.Color(255,188,1);static ObstacleGreenDark=new a.Color(0,166,81);static ObstacleGreen=new a.Color(0,255,0);static WeatherRed=new a.Color(198,16,33);static WeatherBlue=new a.Color(0,0,255);static WeatherPurpleDark=new a.Color(128,0,128);static WeatherPurpleLight=new a.Color(226,159,255);static WeatherBrownDark=new a.Color(128,98,16);static WeatherBrownLight=new a.Color(210,176,106)}t.AffiliationColors=n},6967:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Polygon=void 0;const a=i(2876),n=i(151),s=i(9441),l=i(7940),r=i(3170),o=i(3586),c=i(9909);t.Polygon=class{static BUFFER_CAPACITY=4;npoints=0;xpoints;ypoints;bounds;constructor(...e){switch(e.length){case 0:this.xpoints=[],this.ypoints=[];break;case 3:{const[t,i,a]=e;if(a>t.length||a>i.length)throw Error("Parameter npoints is greater than array length");if(a<0)throw Error("Negative number of points");this.npoints=a,this.xpoints=this.copyOf(t,a),this.ypoints=this.copyOf(i,a);break}default:throw Error("Invalid number of arguments")}}copyOf(e,t){let i=[];try{for(let a=0;a<t;a++)i.push(e.at(a))}catch(e){throw new Error("Polygon.copyOf - "+e.message)}return i}reset(){this.npoints=0,this.bounds=null}invalidate(){this.bounds=null}addPoint(e,t){if(this.xpoints.push(e),this.ypoints.push(t),this.npoints++,null!=this.bounds){let i=new l.Rectangle(Math.min(this.bounds.getMinX(),e),Math.min(this.bounds.getMinY(),t),Math.max(this.bounds.getMaxX()-this.bounds.getMinX(),e-this.bounds.getMinX()),Math.max(this.bounds.getMaxY()-this.bounds.getMinY(),t-this.bounds.getMinY()));this.bounds.setRect(i)}}getBounds(){if(null!=this.bounds)return this.bounds;if(0==this.npoints)return new l.Rectangle;let e=this.xpoints[0],t=this.ypoints[0],i=e,a=t;for(let n=1;n<this.npoints;n++){let s=this.xpoints[n],l=this.ypoints[n];s<e?e=s:s>i&&(i=s),l<t?t=l:l>a&&(a=l)}return this.bounds=new l.Rectangle(e,t,i-e,a-t)}getBoundingBox(){return this.getBounds()}contains(...e){switch(e.length){case 1:if(e[0]instanceof r.Rectangle2D){const[t]=e;return this.contains(t.getX(),t.getY(),t.getWidth(),t.getHeight())}if(e[0]instanceof n.Point||e[0]instanceof s.Point2D){const[t]=e;return this.contains(t.getX(),t.getY())}throw"Invalid argument type";case 2:{const[t,i]=e;if(this.npoints<=2||!this.getBoundingBox().contains(t,i))return!1;let a=0,n=this.xpoints[this.npoints-1],s=this.ypoints[this.npoints-1],l=0,r=0;for(let e=0;e<this.npoints;n=l,s=r,e++){if(l=this.xpoints[e],r=this.ypoints[e],r===s)continue;let o=0;if(l<n){if(t>=n)continue;o=l}else{if(t>=l)continue;o=n}let c=0,T=0;if(r<s){if(i<r||i>=s)continue;if(t<o){a++;continue}c=t-l,T=i-r}else{if(i<s||i>=r)continue;if(t<o){a++;continue}c=t-n,T=i-s}c<T/(s-r)*(n-l)&&a++}return!!(1&a)}case 4:{const[t,i,a,n]=e;return this.npoints<=0||this.getBoundingBox().intersects(t,i,a,n),!1}default:throw Error("Invalid number of arguments")}}getBounds2D(){return null}intersects(...e){switch(e.length){case 1:{const[t]=e;return this.intersects(t.getX(),t.getY(),t.getWidth(),t.getHeight())}case 4:{const[t,i,a,n]=e;if(this.npoints<=0||!this.getBoundingBox().intersects(t,i,a,n))return!1;if(null!=this.bounds){let e=t,s=i,l=a,r=n,T=new o.Path;T.moveTo(e,s),T.lineTo(e+l,s),T.lineTo(e+l,s-r),T.lineTo(e,s-r),T.close();let u=new c.RectF,g=new c.RectF(this.bounds.x,this.bounds.y,this.bounds.x+this.bounds.width,this.bounds.y+this.bounds.height);return c.RectF.intersects(g,u)}return!1}default:throw Error("Invalid number of arguments")}}getPathIterator(...e){switch(e.length){case 1:{const[t]=e;let i=new a.PathIterator(null),n=0;if(this.npoints>0)for(i.moveTo(this.xpoints[0],this.ypoints[0]),n=1;n<this.npoints;n++)i.lineTo(this.xpoints[n],this.ypoints[n]);return i.reset(),i}case 2:{const[t,i]=e;return this.getPathIterator(t)}default:throw Error("Invalid number of arguments")}}}},7017:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GENCLookup=void 0;const a=i(7300),n=i(1059);class s{static gencJSON="/genc.json";static _instance;static _initCalled=!1;static _isReady=!1;static _GENCLookup;static genc;static async loadData(e){let t=s.gencJSON;e&&(t=e+t.substring(t.lastIndexOf("/")+1,t.length)),n.RendererUtilities.getData(t).then((e=>{this.genc=e})).catch((e=>{a.ErrorLogger.LogException("GENCLookup","loadData",e)}))}constructor(){this.init()}static getInstance(){return s._instance||(s._instance=new s),s._instance}isReady(){return s._isReady}init(){if(!1===s._initCalled){s._initCalled=!0,s._GENCLookup=new Map;try{let e=s.genc.genc.countries;for(let t of e)s._GENCLookup.set(t.numeric,t["3char"])}catch(e){if(!console)throw e;console.log(e.message)}}s._GENCLookup&&s._GENCLookup.size>0&&(s._isReady=!0)}get3CharCode(e){return s._GENCLookup&&s._GENCLookup.has(String(e))?s._GENCLookup.get(String(e)):""}}t.GENCLookup=s},7028:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0;class i{static OFF=new i("OFF",Number.MAX_VALUE);static SEVERE=new i("SEVERE",1e3);static WARNING=new i("WARNING",900);static INFO=new i("INFO",800);static CONFIG=new i("CONFIG",700);static FINE=new i("FINE",500);static FINER=new i("FINER",400);static FINEST=new i("FINEST",300);static ALL=new i("ALL",Number.MIN_VALUE);name;value=0;constructor(e,t){this.name=e,this.value=t}intValue(){return this.value}getName(){return this.name}}t.LogLevel=i},7142:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Graphics2D=void 0;const a=i(628),n=i(9303);t.Graphics2D=class{_font;_fontMetrics;_fontRenderContext;constructor(){this._font=new a.Font("arial",10,10),this._fontMetrics=new n.FontMetrics(this._font)}setFont(e){this._font=e,this._fontMetrics=new n.FontMetrics(this._font)}getFont(){return this._font}setFontMetrics(e){this._fontMetrics=e}getFontMetrics(){return this._fontMetrics}setColor(e){}setBackground(e){}setTransform(e){}getTransform(){return null}setStroke(e){}drawLine(e,t,i,a){}dispose(){}rotate(e,t,i){}clearRect(e,t,i,a){}drawString(e,t,i){}getFontRenderContext(){return this._fontRenderContext}}},7232:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RectUtilities=void 0;const a=i(7940),n=i(3170);t.RectUtilities=class{static makeRectangleFromRect(e,t,i,n){return new a.Rectangle(e,t,i-e,n-t)}static makeRectangle2DFromRect(e,t,i,a){return new n.Rectangle2D(e,t,i-e,a-t)}static copyRect(e){return new n.Rectangle2D(e.getX(),e.getY(),e.getWidth()+.5,e.getHeight()+.5)}static roundRect(e){let t=e.getX()-e.getX(),i=e.getY()-e.getY();return new n.Rectangle2D(e.getX(),e.getY(),Math.round(e.getWidth()+t+.5),Math.round(e.getHeight()+i+.5))}static grow(e,t){e.setRect(e.getX()-t,e.getY()-t,e.getWidth()+2*t,e.getHeight()+2*t)}static shift(e,t,i){e.setRect(e.getX()+t,e.getY()+i,e.getWidth(),e.getHeight())}static shiftBR(e,t,i){e.setRect(e.getX(),e.getY(),e.getWidth()+t,e.getHeight()+i)}static toRectangle(...e){switch(e.length){case 1:{const[t]=e;return null==t?null:t instanceof a.Rectangle?t:new a.Rectangle(t.getX(),t.getY(),t.getWidth(),t.getHeight())}case 4:{const[t,i,n,s]=e;return new a.Rectangle(t,i,n,s)}default:throw Error("Invalid number of arguments")}}static toRectangle2D(...e){switch(e.length){case 1:{const[t]=e;return null==t?null:new n.Rectangle2D(t.getX(),t.getY(),t.getWidth(),t.getHeight())}case 4:{const[t,i,a,s]=e;return new n.Rectangle2D(t,i,a,s)}default:throw Error("Invalid number of arguments")}}}},7300:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorLogger=void 0;const a=i(7028);class n{static LoggerName="ErrorLogger";static _level=a.LogLevel.INFO;static _LoggingEnabled=!1;static dateFormatOptions={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};static getLoggingStatus(){return n._LoggingEnabled}static getStackTrace(e){try{return e.stack}catch(e){if(e instanceof Error)return n.LogException("ErrorLogger","getStackTrace",e),"Error - couldn't retrieve stack trace";throw e}}static EnableLogging(e){n._LoggingEnabled=e}static setLoggingPath(e){}static CleanupOldFiles(e){}static setLevel(...e){switch(e.length){case 1:{const[t]=e;n.setLevel(t,!1);break}case 2:{const[t,i]=e;n._level=t;break}default:throw Error("Invalid number of arguments")}}static setUseParentHandlers(e){}static getLevel(){return n._level}static getFileName(){return""}static Entering(...e){if(console)switch(e.length){case 2:{const[t,i]=e;n._level.intValue()<=a.LogLevel.FINER.intValue()&&console.log("Entering: "+t+"."+i);break}case 3:if(e[2]instanceof Array){const[t,i,s]=e;if(n._level.intValue()<=a.LogLevel.FINER.intValue()&&(console.log("Entering: "+t+"."+i+"with params:"),null!=s))for(let e of s)console.log(e.toString())}else{const[t,i,s]=e;n._level.intValue()<=a.LogLevel.FINER.intValue()&&console.log("Entering: "+t+"."+i+" - "+s.toString())}break;default:throw Error("Invalid number of arguments")}}static Exiting(...e){if(console)switch(e.length){case 2:{const[t,i]=e;n._level.intValue()<=a.LogLevel.FINER.intValue()&&console.log("Exiting: "+t+"."+i);break}case 3:{const[t,i,s]=e;n._level.intValue()<=a.LogLevel.FINER.intValue()&&console.log("Entering: "+t+"."+i+" - "+s.toString());break}default:throw Error("Invalid number of arguments")}}static LogMessage(...e){if(console)switch(e.length){case 1:{const[t]=e;n.LogMessage(t,a.LogLevel.INFO,!1);break}case 2:{const[t,i]=e;n.LogMessage(t,a.LogLevel.INFO,i);break}case 3:if(e[2]instanceof Boolean){const[t,i,a]=e;i.intValue()>=n._level.intValue()&&(console.log((new Date).toLocaleString("en-US",this.dateFormatOptions)+n.LoggerName),console.log("INFO: "+t))}else{const[t,i,s]=e;n.LogMessage(t,i,s,a.LogLevel.INFO,!1)}break;case 4:if(e[3]instanceof Boolean){const[t,i,s,l]=e;n.LogMessage(t,i,s,a.LogLevel.INFO,l)}else{const[t,i,a,s]=e;n.LogMessage(t,i,a,s,!1)}break;case 5:{const[t,i,a,s,l]=e;s.intValue()>=n._level.intValue()&&(console.log((new Date).toLocaleString("en-US",this.dateFormatOptions)+t+"."+i),console.log(s.toString()+": "+a));break}case 6:if(e[4]instanceof Array){const[t,i,a,s,l,r]=e;if(s.intValue()>=n._level.intValue()){console.log((new Date).toLocaleString("en-US",this.dateFormatOptions)+t+"."+i),console.log(s.toString()+": "+a);for(let e of l)console.log(e.toString())}}else{const[t,i,a,s,l,r]=e;let o=new Array(1);o[0]=l,n.LogMessage(t,i,a,s,o,r)}break;default:throw Error("Invalid number of arguments")}}static LogException(...e){switch(e.length){case 3:{const[t,i,s]=e;n.LogException(t,i,s,a.LogLevel.INFO,!1);break}case 4:if(e[3]instanceof Boolean){const[t,i,s,l]=e;n.LogException(t,i,s,a.LogLevel.INFO,l)}else{const[t,i,a,s]=e;n.LogException(t,i,a,s,!1)}break;case 5:{const[t,i,a,s,l]=e;if(s.intValue()>=n._level.intValue()){if(!console)throw a;console.error((new Date).toLocaleString("en-US",this.dateFormatOptions)+t+"."+i),console.error(s.toString()+": "+a.message),console.error(n.getStackTrace(a))}break}default:throw Error("Invalid number of arguments")}}static PrintList(e){let t="";for(let i of e)t+=i.toString()+"\n";return t}static PrintObjectMap(e){let t="";if(null!=e)for(let[i,a]of e)t+=i+" : "+a+"\n";return t}static PrintStringMap(e){let t="";if(null!=e)for(let[i,a]of e)t+=i+" : "+a+"\n";return t}}t.ErrorLogger=n},7314:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MultiPointHandler=void 0;const a=i(7389),n=i(3515),s=i(979),l=i(8087),r=i(628),o=i(9441),c=i(7940),T=i(3170),u=i(8113),g=i(4513),L=i(3247),d=i(7300),_=i(7017),h=i(7028),E=i(3874),A=i(9866),I=i(8003),S=i(6932),y=i(9596),f=i(3254),D=i(1059),M=i(8795),P=i(2421),R=i(2466),N=i(4686),C=i(8675),O=i(8739),p=i(3886),x=i(5784),b=i(7787),w=i(960),m=i(5462),F=i(1036);class G{static _maxPixelWidth=1920;static _minPixelWidth=720;static NormalizeGECoordsToGEExtents(e,t,i){try{let a,n=0,s=0,l=0,r=i.length;for(n=0;n<r;n++){for(a=i[n],s=a.getX(),l=a.getY();s<e;)s+=360;for(;s>t;)s-=360;a=new o.Point2D(s,l),i[n]=a}}catch(e){if(!(e instanceof Error))throw e}}static NormalizeCoordToGECoord(e){let t;try{let i=e.getX(),a=e.getY();for(;i<-180;)i+=360;for(;i>180;)i-=360;t=new o.Point2D(i,a)}catch(e){if(!(e instanceof Error))throw e}return t}static getBoundingRectangle(e,t){let i="";try{let t=0,a=0,n=0,s=0,l=e.split(" "),r=l.length,o=0;for(t=Number.MAX_VALUE,a=-Number.MAX_VALUE,n=-Number.MAX_VALUE,s=Number.MAX_VALUE,o=0;o<r;o++){let e=l[o].split(","),i=parseFloat(e[1].trim()),r=parseFloat(e[0].trim());r<t&&(t=r),r>a&&(a=r),i>n&&(n=i),i<s&&(s=i)}i=t.toString()+","+s.toString()+","+a.toString()+","+n.toString()}catch(e){if(!(e instanceof Error))throw e;console.log("Failed to create bounding rectangle in MultiPointHandler.getBoundingRect")}return i}static getControlPoint(e){let t;try{let i,a=Number.MAX_VALUE,n=-Number.MAX_VALUE,s=-Number.MAX_VALUE,l=Number.MAX_VALUE,r=e.length;for(let t=0;t<r;t++)i=e[t],i.getX()<a&&(a=i.getX()),i.getX()>n&&(n=i.getX()),i.getY()>s&&(s=i.getY()),i.getY()<l&&(l=i.getY());t=new o.Point2D(a,s)}catch(e){if(!(e instanceof Error))throw e;console.log("Failed to create control point in MultiPointHandler.getControlPoint")}return t}static getGeoUL(e){let t;try{let i,a=0,n=e[0].getX(),s=e[0].getY(),l=e[0].getX(),r=e[0].getY(),c=e.length;for(a=1;a<c;a++)i=e[a],i.getX()<n&&(n=i.getX()),i.getX()>l&&(l=i.getX()),i.getY()>s&&(s=i.getY()),i.getY()<r&&(r=i.getY());if(l-n>180)for(n=180,c=e.length,a=0;a<c;a++)i=e[a],i.getX()>0&&i.getX()<n&&(n=i.getX());t=new o.Point2D(n,s)}catch(e){if(!(e instanceof Error))throw e;console.log("Failed to create control point in MultiPointHandler.getControlPoint")}return t}static getBboxFromCoords(e){let t;try{let i,a=0,n=e[0].getX(),s=e[0].getY(),l=e[0].getX(),r=e[0].getY();for(a=1;a<e.length;a++)i=e[a],i.getX()<n&&(n=i.getX()),i.getX()>l&&(l=i.getX()),i.getY()>s&&(s=i.getY()),i.getY()<r&&(r=i.getY());if(l-n>180)for(n=180,l=-180,a=0;a<e.length;a++)i=e[a],i.getX()>0&&i.getX()<n&&(n=i.getX()),i.getX()<0&&i.getX()>l&&(l=i.getX());t=n.toString()+","+r.toString()+","+l.toString()+","+s.toString()}catch(e){if(!(e instanceof Error))throw e;console.log("Failed to create control point in MultiPointHandler.getBboxFromCoords")}return t}static crossesIDL(e){let t,i=G.getControlPoint(e).getX(),a=e.length;for(let n=0;n<a;n++)if(t=e[n],Math.abs(t.getX()-i)>180)return!0;return!1}static ShouldClipSymbol(e){let t=P.SymbolID.getStatus(e);if(R.SymbolUtilities.isTacticalGraphic(e)&&t===P.SymbolID.Status_Planned_Anticipated_Suspect)return!0;if(R.SymbolUtilities.isWeather(e))return!0;let i=parseInt(R.SymbolUtilities.getBasicSymbolID(e));return 25341100===i||25260200===i||25110100===i||25110200===i||25110300===i||25140100===i||25140200===i||25151e3===i||25151100===i||25172e3===i||25151202===i||25151203===i||25141200===i||25270800===i||25270801===i||25170100===i||25170200===i||25170300===i||25170400===i||25170500===i||25170600===i||25170700===i||25270100===i||25270200===i||25270300===i||25270400===i||25290100===i||25290201===i||25290202===i||25290203===i||25290204===i||25290301===i||25290302===i||25290303===i||25290304===i||25290305===i||25290306===i||25290307===i||25290308===i||25290309===i||25341100===i||25290400===i||25282003===i||25270602===i||25271500===i||25271600===i||25290900===i||25271700===i||25271800===i||25271900===i||25272e3===i||25240301===i||25240302===i||25240303===i||25240701===i||25240702===i||25240703===i||25151800===i||25330300===i||25330301===i||25330302===i||25330303===i||25330400===i||25330401===i||25330402===i||25330403===i||25151205===i||25341500===i||25340600===i||25340700===i||25271200===i||25271202===i||25341200===i}static getReasonableScale(e,t){try{let i=e.split(","),n=parseFloat(i[0]),s=parseFloat(i[2]),l=parseFloat(i[3]),r=(parseFloat(i[1]),new a.POINT2(n,l)),o=new a.POINT2(s,l),c=0;c=-180===n&&180===s||180===n&&-180===s?20037508.5:w.mdlGeodesic.geodesic_distance(r,o,null,null);let T=c/(G._maxPixelWidth/f.RendererSettings.getInstance().getDeviceDPI()/N.GeoPixelConversion.INCHES_PER_METER);if(t<T)return T;let u=c/(G._minPixelWidth/f.RendererSettings.getInstance().getDeviceDPI()/N.GeoPixelConversion.INCHES_PER_METER);if(t>u)return u}catch(e){}return t}static RenderSymbol(e,t,i,a,l,r,T,u,g,_){let S,y,f=!0,D="",M="",P=l.split(" "),R=new n.TGLight,N=new Array,p=new Array,x=new Array,b=P.length,w=G.canRenderMultiPoint(a,u,b);if("true"!==w){let t="";return t+='{"type":"error","error":"There was an error creating the MilStdSymbol '+a+" - ID: "+e+" - ",t+=w,t+='"}',d.ErrorLogger.LogMessage("MultiPointHandler","RenderSymbol",w,h.LogLevel.FINE),t}E.MSLookup.getInstance().getMSLInfo(a).getDrawRule()!=L.DrawRules.AREA10&&(b=Math.min(b,E.MSLookup.getInstance().getMSLInfo(a).getMaxPointCount()));for(let e=0;e<b;e++){let t=P[e].split(","),i=parseFloat(t[1].trim()),a=parseFloat(t[0].trim());x.push(new o.Point2D(a,i))}let U,v,H,B=0,k=0,Y=0,W=0,X=0,V=0,z=0,K=0,Q=0,Z=0,J=0;if(null!=T&&""!==T){let e,t;if(T.includes(" ")){H=new Array;let e,t=0,i=0,a=T.split(" ");for(let n of a)e=n.split(","),t=parseFloat(e[0]),i=parseFloat(e[1]),H.push(new o.Point2D(t,i));v=G.getGeoUL(H),B=v.getX(),Y=v.getY();let n,s,l=G.getBboxFromCoords(H);r=G.getReasonableScale(l,r),y=new C.PointConverter(B,Y,r);let c=H.length;for(J=0;J<c;J++)s=H[J],n=y.GeoToPixels(s),t=n.getX(),i=n.getY(),t<20&&(t=20),i<20&&(i=20),n.setLocation(t,i),H[J]=n}else e=T.split(","),B=parseFloat(e[0]),k=parseFloat(e[2]),Y=parseFloat(e[3]),W=parseFloat(e[1]),r=G.getReasonableScale(T,r),y=new C.PointConverter(B,Y,r);null==H&&(t=new o.Point2D(B,Y),U=y.GeoToPixels(t),z=U.getX(),K=U.getY(),t=new o.Point2D(k,W),U=y.GeoToPixels(t),Q=U.getY(),Z=U.getX(),X=Math.abs(Z-z),V=Math.abs(Q-K),S=new c.Rectangle(z,K,X,V))}else S=null;if(null==y){let e=G.getGeoUL(x);y=new C.PointConverter(e.getX(),e.getY(),r)}let j=new Array;j.push(new o.Point2D(B,Y)),j.push(new o.Point2D(k,W)),!1===G.ShouldClipSymbol(a)&&!1===G.crossesIDL(x)&&(S=null,H=null),R.set_SymbolId(a),R.set_Pixels(null);try{let n=new I.MilStdSymbol(a,null,x,null);if(_==F.WebRenderer.OUTPUT_FORMAT_GEOSVG&&(g.set(A.MilStdAttributes.UseDashArray,"true"),g.set(A.MilStdAttributes.UsePatternFill,"true")),null!=u||null!=g?G.populateModifiers(u,g,n):n.setFillColor(null),null==H?s.clsRenderer.renderWithPolylines(n,y,S):s.clsRenderer.renderWithPolylines(n,y,H),N=n.getSymbolShapes(),p=n.getModifierShapes(),_===F.WebRenderer.OUTPUT_FORMAT_JSON)D+='{"type":"symbol",',M=G.JSONize(N,p,y,!0,f),D+=M,D+="}";else if(_===F.WebRenderer.OUTPUT_FORMAT_KML){var q=n.getTextColor();null==q&&(q=n.getLineColor()),M=G.KMLize(e,t,i,a,N,p,y,f,q),D+=M}else if(_===F.WebRenderer.OUTPUT_FORMAT_GEOJSON)D+='{"type":"FeatureCollection","features":',M=G.GeoJSONize(N,p,y,f,n.getTextColor(),n.getTextBackgroundColor()),D+=M,D=D.slice(0,-1),D+=',{"type": "Feature","geometry": { "type": "Polygon","coordinates": [ ]}',D+=',"properties":{"id":"',D+=e,D+='","name":"',D+=t,D+='","description":"',D+=i,D+='","symbolID":"',D+=a,D+='","wasClipped":"',D+=n.get_WasClipped().toString(),D+='"}}]}';else if(_===F.WebRenderer.OUTPUT_FORMAT_GEOSVG){let s=n.getTextColor()?n.getTextColor().toHexString(!1):"",l=n.getTextBackgroundColor()?n.getTextBackgroundColor().toHexString(!1):"";D=m.MultiPointHandlerSVG.GeoSVGize(e,t,i,a,N,p,y,f,s,l,n.get_WasClipped())}}catch(e){if(!(e instanceof Error))throw e;{let t=O.JavaRendererUtilities.getStackTrace(e);D="",D+='{"type":"error","error":"There was an error creating the MilStdSymbol '+a+": - ",D+=e.message+" - ",D+=t,D+='"}',d.ErrorLogger.LogException("MultiPointHandler","RenderSymbol",e)}}return d.ErrorLogger.LogMessage("MultiPointHandler","RenderSymbol()","exit RenderSymbol",h.LogLevel.FINER),D.toString()}static RenderSymbolAsMilStdSymbol(e,t,i,a,l,r,T,u,g){let _,A,S,y,f,M,P,R,N=l.split(" "),O=new n.TGLight,p=new Array,x=N.length,b=0,w=0,m=0,F=0,U=0,v=0,H=0,B=0,k=0,Y=0,W=0;if(null!=T&&""!==T){let e,t;if(T.includes(" ")){R=new Array;let e,t,i,a=0,n=0,s=T.split(" ");for(let t of s)e=t.split(","),a=parseFloat(e[0]),n=parseFloat(e[1]),R.push(new o.Point2D(a,n));P=G.getGeoUL(R),b=P.getX(),m=P.getY(),f=new C.PointConverter(b,m,r);let l=R.length;for(W=0;W<l;W++)i=R[W],t=f.GeoToPixels(i),a=t.getX(),n=t.getY(),a<20&&(a=20),n<20&&(n=20),t.setLocation(a,n),R[W]=t}else e=T.split(","),b=parseFloat(e[0]),w=parseFloat(e[2]),m=parseFloat(e[3]),F=parseFloat(e[1]),r=G.getReasonableScale(T,r),f=new C.PointConverter(b,m,r);null==R&&(t=new o.Point2D(b,m),M=f.GeoToPixels(t),H=M.getX(),B=M.getY(),t=new o.Point2D(w,F),M=f.GeoToPixels(t),k=M.getY(),Y=M.getX(),U=Math.abs(Y-H),v=Math.abs(k-B),A=0===U||0===v?null:new c.Rectangle(H,B,U,v))}else A=null;let X=G.canRenderMultiPoint(a,u,x);if("true"!==X)return d.ErrorLogger.LogMessage("MultiPointHandler","RenderSymbolAsMilStdSymbol",X,h.LogLevel.WARNING),_;E.MSLookup.getInstance().getMSLInfo(a).getDrawRule()!=L.DrawRules.AREA10&&(x=Math.min(x,E.MSLookup.getInstance().getMSLInfo(a).getMaxPointCount()));for(let e=0;e<x;e++){let t=N[e].split(","),i=parseFloat(t[1].trim()),a=parseFloat(t[0].trim());p.push(new o.Point2D(a,i))}if(null==f){let e=G.getGeoUL(p);f=new C.PointConverter(e.getX(),e.getY(),r)}let V=new Array;V.push(new o.Point2D(b,m)),V.push(new o.Point2D(w,F)),!1===G.ShouldClipSymbol(a)&&!1===G.crossesIDL(p)&&(A=null,R=null),O.set_SymbolId(a),O.set_Pixels(null);try{let e,t,i;if(_=new I.MilStdSymbol(a,null,p,null),null!=u||null!=g?G.populateModifiers(u,g,_):_.setFillColor(null),null!=_.getFillColor()){let t=_.getFillColor();e=D.RendererUtilities.colorToHexString(t,!1)}null==R?s.clsRenderer.renderWithPolylines(_,f,A):s.clsRenderer.renderWithPolylines(_,f,R),S=_.getSymbolShapes(),y=_.getModifierShapes();for(let e of S)t=e.getPolylines(),i=G.ConvertPolylinePixelsToCoords(t,f,true),e.setPolylines(i);for(let e of y){let t=e.getModifierPosition();null==t&&(t=e.getGlyphPosition());let i=f.PixelsToGeo(t);i=G.NormalizeCoordToGECoord(i);let a=i.getY(),n=i.getX();e.setModifierPosition(new o.Point2D(n,a))}_.setModifierShapes(y),_.setSymbolShapes(S)}catch(e){if(!(e instanceof Error))throw e;console.log(e.message),console.log("Symbol Code: "+a),console.log(e.stack)}return _}static ConvertPolylinePixelsToCoords(e,t,i){let a,n=new Array,s=0,l=0;try{for(let r of e){a=new Array;for(let e of r){let n=t.PixelsToGeo(e);i&&(n=G.NormalizeCoordToGECoord(n)),s=n.getY(),l=n.getX(),a.push(new o.Point2D(l,s))}n.push(a)}}catch(e){if(!(e instanceof Error))throw e;console.log(e.message),console.log(e.stack)}return n}static RenderSymbol2D(e,t,i,a,l,r,T,u,g,_,S){let f,D,M="",P="",R=l.split(" "),N=(new n.TGLight,new Array),C=new Array,O=new Array,p=R.length,x=G.canRenderMultiPoint(a,g,p);if("true"!==x){let t="";return t+='{"type":"error","error":"There was an error creating the MilStdSymbol '+a+" - ID: "+e+" - ",t+=x,t+='"}',d.ErrorLogger.LogMessage("MultiPointHandler","RenderSymbol2D",x,h.LogLevel.FINE),t}let b=0,w=0,U=0,v=0;if(null==u||""===u)return console.log("Bad bbox value: "+u),console.log('bbox is viewable area of the map.  Passed in the format of a string "lowerLeftX,lowerLeftY,upperRightX,upperRightY." example: "-50.4,23.6,-42.2,24.2"'),"ERROR - Bad bbox value: "+u;{let e=u.split(",");b=parseFloat(e[0]),w=parseFloat(e[2]),U=parseFloat(e[3]),v=parseFloat(e[1]),D=new y.PointConversion(r,T,U,b,v,w)}E.MSLookup.getInstance().getMSLInfo(a).getDrawRule()!=L.DrawRules.AREA10&&(p=Math.min(p,E.MSLookup.getInstance().getMSLInfo(a).getMaxPointCount()));for(let e=0;e<p;e++){let t=R[e].split(","),i=parseFloat(t[1].trim()),a=parseFloat(t[0].trim());O.push(new o.Point2D(a,i))}try{let n,l=new I.MilStdSymbol(a,null,O,null);S==F.WebRenderer.OUTPUT_FORMAT_GEOSVG&&(_.set(A.MilStdAttributes.UseDashArray,"true"),_.set(A.MilStdAttributes.UsePatternFill,"true")),null!=g&&0!==g.size?G.populateModifiers(g,_,l):l.setFillColor(null);let r=0,T=0,u=0,L=0,d=0,h=0,E=!1;if(G.ShouldClipSymbol(a)||G.crossesIDL(O)){let e=new o.Point2D(b,U);n=D.GeoToPixels(e),r=n.getX(),T=n.getY();let t=new o.Point2D(w,v);n=D.GeoToPixels(t),u=n.getY(),L=n.getX(),d=Math.abs(L-r),h=Math.abs(u-T),f=new c.Rectangle(r,T,d,h)}if(s.clsRenderer.renderWithPolylines(l,D,f),N=l.getSymbolShapes(),C=l.getModifierShapes(),S===F.WebRenderer.OUTPUT_FORMAT_JSON)M+='{"type":"symbol",',M+=P,M+="}";else if(S===F.WebRenderer.OUTPUT_FORMAT_KML){var H=l.getTextColor();null==H&&(H=l.getLineColor()),P=G.KMLize(e,t,i,a,N,C,D,E,H),M+=P}else if(S===F.WebRenderer.OUTPUT_FORMAT_GEOJSON)M+='{"type":"FeatureCollection","features":',P=G.GeoJSONize(N,C,D,E,l.getTextColor(),l.getTextBackgroundColor()),M+=P,M=M.slice(0,-1),M+=',{"type": "Feature","geometry": { "type": "Polygon","coordinates": [ ]}',M+=',"properties":{"id":"',M+=e,M+='","name":"',M+=t,M+='","description":"',M+=i,M+='","symbolID":"',M+=a,M+='","wasClipped":"',M+=l.get_WasClipped().toString(),M+='"}}]}';else if(S===F.WebRenderer.OUTPUT_FORMAT_GEOSVG){let n=l.getTextColor()?l.getTextColor().toHexString(!1):"",s=l.getTextBackgroundColor()?l.getTextBackgroundColor().toHexString(!1):"";M=m.MultiPointHandlerSVG.GeoSVGize(e,t,i,a,N,C,D,E,n,s,l.get_WasClipped())}}catch(e){if(!(e instanceof Error))throw e;M="",M+='{"type":"error","error":"There was an error creating the MilStdSymbol '+a+": - ",M+=e.message+" - ",M+=d.ErrorLogger.getStackTrace(e),M+='"}'}return M.toString()}static RenderSymbol2DX(e,t,i,a,l,r,c,T,u,g,L,d,_){let h,E="",A="",S=l.split(" "),f=new n.TGLight,D=new Array,M=0,P=0,R=0,N=0;if(null==T||""===T)return console.log("Bad bbox value: "+T),console.log('bbox is viewable area of the map.  Passed in the format of a string "lowerLeftX,lowerLeftY,upperRightX,upperRightY." example: "-50.4,23.6,-42.2,24.2"'),"ERROR - Bad bbox value: "+T;{let e=T.split(",");M=parseFloat(e[0]),P=parseFloat(e[2]),R=parseFloat(e[3]),N=parseFloat(e[1]),h=new y.PointConversion(r,c,R,M,N,P)}let C=S.length;for(let e=0;e<C;e++){let t=S[e].split(","),i=parseFloat(t[1].trim()),a=parseFloat(t[0].trim());D.push(new o.Point2D(a,i))}try{let e=new I.MilStdSymbol(a,null,D,null);null!=u&&0!==u.size?G.populateModifiers(u,g,e):e.setFillColor(null),s.clsRenderer.renderWithPolylines(e,h,undefined),L=e.getSymbolShapes(),d=e.getModifierShapes();let t=!1;_===F.WebRenderer.OUTPUT_FORMAT_JSON&&(E+='{"type":"symbol",',A=G.JSONize(L,d,h,!1,t),E+=A,E+="}")}catch(e){if(!(e instanceof Error))throw e;E="",E+='{"type":"error","error":"There was an error creating the MilStdSymbol '+a+": - ",E+=e.message+" - ",E+='"}'}return console.log("Symbol Code: "+a),console.log("BBOX: "+T),null!=l&&console.log("Geo Points: "+l),null!=f&&null!=f.get_Pixels()&&console.log("Pixel: "+f.get_Pixels().toString()),null!=T&&console.log("geo bounds: "+T),null!=E&&console.log(E.toString()),E.toString()}static MilStdSymbolToSymbolInfo(e){let t,i,a,n,s=new Array,l=new Array,r=e.getSymbolShapes(),o=e.getModifierShapes(),c=r.length,T=o.length;for(let e=0;e<c;e++)n=r[e],null!=n.getPolylines()&&(a=new p.LineInfo,a.setFillColor(n.getFillColor()),a.setLineColor(n.getLineColor()),a.setPolylines(n.getPolylines()),a.setStroke(n.getStroke()),l.push(a));for(let e=0;e<T;e++)i=new b.TextInfo,n=o[e],null!=n.getModifierString()&&(i.setModifierString(n.getModifierString()),i.setModifierStringPosition(n.getModifierPosition()),i.setModifierStringAngle(n.getModifierAngle()),s.push(i));return t=new x.SymbolInfo(s,l),t}static populateModifiers(e,t,i){let a,n,s=new Map,l=null,r=null,o=null,c=null,T=null,L=null,h=null,E=0,I="",y=i.getUseDashArray(),f=i.getUseFillPattern(),M=0,N=!1,C=50,O=!0;try{if(null!=e){if(e.has(S.Modifiers.C_QUANTITY)&&s.set(S.Modifiers.C_QUANTITY,e.get(S.Modifiers.C_QUANTITY)),e.has(S.Modifiers.H_ADDITIONAL_INFO_1)&&s.set(S.Modifiers.H_ADDITIONAL_INFO_1,e.get(S.Modifiers.H_ADDITIONAL_INFO_1)),e.has(S.Modifiers.H1_ADDITIONAL_INFO_2)&&s.set(S.Modifiers.H1_ADDITIONAL_INFO_2,e.get(S.Modifiers.H1_ADDITIONAL_INFO_2)),e.has(S.Modifiers.H2_ADDITIONAL_INFO_3)&&s.set(S.Modifiers.H2_ADDITIONAL_INFO_3,e.get(S.Modifiers.H2_ADDITIONAL_INFO_3)),e.has(S.Modifiers.N_HOSTILE)&&(null==e.get(S.Modifiers.N_HOSTILE)?s.set(S.Modifiers.N_HOSTILE,""):s.set(S.Modifiers.N_HOSTILE,e.get(S.Modifiers.N_HOSTILE))),e.has(S.Modifiers.Q_DIRECTION_OF_MOVEMENT)&&s.set(S.Modifiers.Q_DIRECTION_OF_MOVEMENT,e.get(S.Modifiers.Q_DIRECTION_OF_MOVEMENT)),e.has(S.Modifiers.T_UNIQUE_DESIGNATION_1)&&s.set(S.Modifiers.T_UNIQUE_DESIGNATION_1,e.get(S.Modifiers.T_UNIQUE_DESIGNATION_1)),e.has(S.Modifiers.T1_UNIQUE_DESIGNATION_2)&&s.set(S.Modifiers.T1_UNIQUE_DESIGNATION_2,e.get(S.Modifiers.T1_UNIQUE_DESIGNATION_2)),e.has(S.Modifiers.V_EQUIP_TYPE)&&s.set(S.Modifiers.V_EQUIP_TYPE,e.get(S.Modifiers.V_EQUIP_TYPE)),e.has(S.Modifiers.AS_COUNTRY)?s.set(S.Modifiers.AS_COUNTRY,e.get(S.Modifiers.AS_COUNTRY)):P.SymbolID.getCountryCode(i.getSymbolID())>0&&""!==_.GENCLookup.getInstance().get3CharCode(P.SymbolID.getCountryCode(i.getSymbolID()))&&s.set(S.Modifiers.AS_COUNTRY,_.GENCLookup.getInstance().get3CharCode(P.SymbolID.getCountryCode(i.getSymbolID()))),e.has(S.Modifiers.AP_TARGET_NUMBER)&&s.set(S.Modifiers.AP_TARGET_NUMBER,e.get(S.Modifiers.AP_TARGET_NUMBER)),e.has(S.Modifiers.W_DTG_1)&&s.set(S.Modifiers.W_DTG_1,e.get(S.Modifiers.W_DTG_1)),e.has(S.Modifiers.W1_DTG_2)&&s.set(S.Modifiers.W1_DTG_2,e.get(S.Modifiers.W1_DTG_2)),e.has(S.Modifiers.Y_LOCATION)&&s.set(S.Modifiers.Y_LOCATION,e.get(S.Modifiers.Y_LOCATION)),e.has(S.Modifiers.X_ALTITUDE_DEPTH)){l=new Array;let t=e.get(S.Modifiers.X_ALTITUDE_DEPTH).split(",");for(let e of t)""!==e&&l.push(parseFloat(e))}if(e.has(S.Modifiers.AM_DISTANCE)){o=new Array;let t=e.get(S.Modifiers.AM_DISTANCE).split(",");for(let e of t)""!==e&&o.push(parseFloat(e))}if(e.has(S.Modifiers.AN_AZIMUTH)){r=new Array;let t=e.get(S.Modifiers.AN_AZIMUTH).split(",");for(let e of t)""!==e&&r.push(parseFloat(e))}}if(null!=t&&(t.has(A.MilStdAttributes.FillColor)&&(c=String(t.get(A.MilStdAttributes.FillColor))),t.has(A.MilStdAttributes.LineColor)&&(T=String(t.get(A.MilStdAttributes.LineColor))),t.has(A.MilStdAttributes.LineWidth)&&(E=parseInt(t.get(A.MilStdAttributes.LineWidth))),t.has(A.MilStdAttributes.TextColor)&&(L=String(t.get(A.MilStdAttributes.TextColor))),t.has(A.MilStdAttributes.TextBackgroundColor)&&(h=String(t.get(A.MilStdAttributes.TextBackgroundColor))),t.has(A.MilStdAttributes.AltitudeMode)&&(I=t.get(A.MilStdAttributes.AltitudeMode)),t.has(A.MilStdAttributes.UseDashArray)&&(y="true"===t.get(A.MilStdAttributes.UseDashArray).toLowerCase()),t.has(A.MilStdAttributes.UsePatternFill)&&(f="true"===t.get(A.MilStdAttributes.UsePatternFill).toLowerCase()),t.has(A.MilStdAttributes.PatternFillType)&&(M=parseInt(t.get(A.MilStdAttributes.PatternFillType))),t.has(A.MilStdAttributes.HideOptionalLabels)&&(N="true"===t.get(A.MilStdAttributes.HideOptionalLabels).toLowerCase()),t.has(A.MilStdAttributes.AltitudeUnits)&&(n=g.DistanceUnit.parse(t.get(A.MilStdAttributes.AltitudeUnits))),t.has(A.MilStdAttributes.DistanceUnits)&&(a=g.DistanceUnit.parse(t.get(A.MilStdAttributes.DistanceUnits))),t.has(A.MilStdAttributes.PixelSize)&&(C=parseInt(t.get(A.MilStdAttributes.PixelSize)),i.setUnitSize(C)),t.has(A.MilStdAttributes.KeepUnitRatio)&&(O="true"===t.get(A.MilStdAttributes.KeepUnitRatio).toLowerCase(),i.setKeepUnitRatio(O))),i.setModifierMap(s),null!=c&&""!==c&&i.setFillColor(D.RendererUtilities.getColorFromHexString(c)),null!=T&&""!==T?(i.setLineColor(D.RendererUtilities.getColorFromHexString(T)),i.setTextColor(D.RendererUtilities.getColorFromHexString(T))):null==i.getLineColor()&&i.setLineColor(u.Color.black),E>0&&i.setLineWidth(E),null!=L&&""!==L?i.setTextColor(D.RendererUtilities.getColorFromHexString(L)):null==i.getTextColor()&&i.setTextColor(u.Color.black),null!=h&&""!==h&&i.setTextBackgroundColor(D.RendererUtilities.getColorFromHexString(h)),null!=I&&i.setAltitudeMode(I),i.setUseDashArray(y),i.setUseFillPattern(f),i.setHideOptionalLabels(N),i.setAltitudeUnit(n),i.setDistanceUnit(a),null!=l&&i.setModifiers_AM_AN_X(S.Modifiers.X_ALTITUDE_DEPTH,l),null!=o&&i.setModifiers_AM_AN_X(S.Modifiers.AM_DISTANCE,o),null!=r&&i.setModifiers_AM_AN_X(S.Modifiers.AN_AZIMUTH,r),"25242200"===R.SymbolUtilities.getBasicSymbolID(i.getSymbolID())&&null!=i.getModifiers_AM_AN_X(S.Modifiers.AN_AZIMUTH)&&null!=i.getModifiers_AM_AN_X(S.Modifiers.AM_DISTANCE)){let e,t=i.getModifiers_AM_AN_X(S.Modifiers.AN_AZIMUTH).length;i.getModifiers_AM_AN_X(S.Modifiers.AM_DISTANCE).length<t/2+1&&(e=i.getModifiers_AM_AN_X(S.Modifiers.AM_DISTANCE),0!==e[0]&&e.splice(0,0,0))}}catch(e){if(!(e instanceof Error))throw e;d.ErrorLogger.LogException("MPH.populateModifiers","PopulateModifiers",e)}return!0}static KMLize(e,t,i,a,n,s,l,r,o){let c,T="",u=n.length;T+='<Folder id="'+e+'">',T+="<name><![CDATA["+t+"]]></name>",T+="<visibility>1</visibility>";for(let e=0;e<u;e++)T+=G.ShapeToKMLString(t,i,a,n[e],l,r);let g=s.length;for(let e=0;e<g;e++)c=s[e],T+=G.LabelToKMLString(c,l,r,o);return T+="</Folder>",T.toString()}static JSONize(e,t,i,a,n){let s,l="",r="",o="",c="",T=e.length;for(let t=0;t<T;t++){c.length>0&&(c+=",");let s=G.ShapeToJSONString(e[t],i,a,n);s.length>0&&(s.startsWith("line",2)?(r.length>0&&(r+=","),r+=s):s.startsWith("polygon",2)&&(l.length>0&&(l+=","),l+=s))}c+='"polygons": ['+l+'],"lines": ['+r+"],";let u=t.length;o="";for(let e=0;e<u;e++){s=t[e],a&&G.AdjustModifierPointToCenter(s);let l=G.LabelToJSONString(s,i,n);l.length>0&&(o.length>0&&(o+=","),o+=l)}return c+='"labels": ['+o+"]",c}static getIdealTextBackgroundColor(e){try{if(new Array(3),null!=e){let t=f.RendererSettings.getInstance().getTextBackgroundAutoColorThreshold();return 255-Math.trunc(.299*e.getRed()+.587*e.getGreen()+.114*e.getBlue())<t?new u.Color(0,0,0,e.getAlpha()):new u.Color(255,255,255,e.getAlpha())}}catch(e){if(!(e instanceof Error))throw e;d.ErrorLogger.LogException("SymbolDraw","getIdealtextBGColor",e)}return u.Color.WHITE}static LabelToGeoJSONString(e,t,i,a,n){let s="",l=G.getIdealTextBackgroundColor(a);null!=n&&(l=n);let c=new o.Point2D(e.getModifierPosition().getX(),e.getModifierPosition().getY()),T=t.PixelsToGeo(c);i&&(T=G.NormalizeCoordToGECoord(T));let u=Math.round(1e8*T.getY())/1e8,g=Math.round(1e8*T.getX())/1e8,L=e.getModifierAngle();c.setLocation(g,u),e.setGlyphPosition(c);let d=e.getModifierString(),_=e.getTextJustify(),h="left";0===_?h="left":1===_?h="center":2===_&&(h="right");let E=f.RendererSettings.getInstance();return null==d||""===d?"":(s+='{"type":"Feature","properties":{"label":"',s+=d,s+='","pointRadius":0,"fontColor":"',s+=D.RendererUtilities.colorToHexString(a,!1),s+='","fontSize":"',s+=E.getMPLabelFont().getSize().toString()+'pt"',s+=',"fontFamily":"',s+=E.getMPLabelFont().getName(),s+=", sans-serif",E.getMPLabelFont().getType()===r.Font.BOLD?s+='","fontWeight":"bold"':s+='","fontWeight":"normal"',s+=',"labelAlign":"',s+=h,s+='","labelBaseline":"alphabetic',s+='","labelXOffset":0',s+=',"labelYOffset":0',s+=',"labelOutlineColor":"',s+=D.RendererUtilities.colorToHexString(l,!1),s+='","labelOutlineWidth":',s+="4",s+=',"rotation":',s+=L,s+=',"angle":',s+=L,s+="},",s+='"geometry":{"type":"Point","coordinates":[',s+=g,s+=",",s+=u,s+="]",s+="}}",s.toString())}static ShapeToGeoJSONString(e,t,i){let a,n,s,r="",c="",T="",u=e.getLineColor(),g=e.getFillColor();a=e.getShapeType()===M.ShapeInfo.SHAPE_TYPE_FILL||null!=g||null!=e.getPatternFillImage()?'"Polygon"':'"MultiLineString"',s=e.getStroke();let L=4;null!=s&&(L=Math.trunc(s.getLineWidth())),c+='"properties":{',c+='"label":"",',null!=u&&(c+='"strokeColor":"'+D.RendererUtilities.colorToHexString(u,!1)+'",',c+='"lineOpacity":'+(u.getAlpha()/255).toString()+","),null!=g&&(c+='"fillColor":"'+D.RendererUtilities.colorToHexString(g,!1)+'",',c+='"fillOpacity":'+(g.getAlpha()/255).toString()+","),null!=e.getPatternFillImage()&&(c+='"fillPattern":"'+e.getPatternFillImage()+'",'),null!=s.getDashArray()&&(n='"strokeDasharray":['+s.getDashArray().toString()+"],",c+=n);let d=s.getEndCap();c+='"lineCap":'+d+",";let _=L.toString();if(c+='"strokeWidth":'+_+",",c+='"strokeWeight":'+_,c+="},",c+='"style":{',null!=u&&(c+='"stroke":"'+D.RendererUtilities.colorToHexString(u,!1)+'",',c+='"line-opacity":'+(u.getAlpha()/255).toString()+","),null!=g&&(c+='"fill":"'+D.RendererUtilities.colorToHexString(g,!1)+'",',c+='"fill-opacity":'+(g.getAlpha()/255).toString()+","),null!=s.getDashArray()){let e=s.getDashArray();if(n=e[0].toString(),e.length>1)for(let t=1;t<e.length;t++)n=n+" "+e[t].toString();n='"stroke-dasharray":"'+n+'",',c+=n,n=null}d===l.BasicStroke.CAP_SQUARE?c+='"stroke-linecap":"square",':d===l.BasicStroke.CAP_ROUND?c+='"stroke-linecap":"round",':d===l.BasicStroke.CAP_BUTT&&(c+='"stroke-linecap":"butt",'),_=L.toString(),c+='"stroke-width":'+_,c+="}",T+='"geometry":{"type":',T+=a,T+=',"coordinates":[';let h=e.getPolylines();for(let e=0;e<h.length;e++){let a=h[e];i=G.normalizePoints(a,t),T+="[";for(let e=0;e<a.length;e++){let n=a[e],s=t.PixelsToGeo(n);i&&(s=G.NormalizeCoordToGECoord(s));let l=Math.round(1e8*s.getY())/1e8,r=Math.round(1e8*s.getX())/1e8;i&&null!=g&&r>0&&(r-=360),n=new o.Point2D(r,l),a[e]=n,T+="[",T+=r,T+=",",T+=l,T+="]",e<a.length-1&&(T+=",")}T+="]",e<h.length-1&&(T+=",")}return T+="]}",r+='{"type":"Feature",',r+=c.toString(),r+=",",r+=T.toString(),r+="}",r.toString()}static ImageToGeoJSONString(e,t,i){let a="",n=new o.Point2D(e.getModifierPosition().getX(),e.getModifierPosition().getY()),s=t.PixelsToGeo(n);i&&(s=G.NormalizeCoordToGECoord(s));let l=Math.round(1e8*s.getY())/1e8,r=Math.round(1e8*s.getX())/1e8,c=e.getModifierAngle();n.setLocation(r,l),e.setGlyphPosition(n);let T=e.getModifierImage();return f.RendererSettings.getInstance(),null==T?"":(a+='{"type":"Feature","properties":{"image":"',a+=T,a+='","rotation":',a+=c,a+=',"angle":',a+=c,a+="},",a+='"geometry":{"type":"Point","coordinates":[',a+=r,a+=",",a+=l,a+="]",a+="}}",a.toString())}static GeoJSONize(e,t,i,a,n,s){let l,r="";r+="[";let o=e.length;for(let t=0;t<o;t++){let n=null,s=e[t];null!=s&&void 0!==s&&(n=G.ShapeToGeoJSONString(s,i,a)),null!=n&&n.length>0&&(r+=n),null!=n&&t<o-1&&(r+=",")}let c=t.length;for(let e=0;e<c;e++){let o;l=t[e],o=null!=t[e].getModifierImage()?G.ImageToGeoJSONString(l,i,a):G.LabelToGeoJSONString(l,i,a,n,s),o.length>0&&(r+=",",r+=o)}return r+="]",r.toString()}static MakeWWReady(e,t,i,a){let n,s=e.length;for(let t=0;t<s;t++)n=G.ShapeToWWReady(e[t],i,a),e[t]=n;let l,r=t.length;for(let e=0;e<r;e++)l=t[e],l=G.LabelToWWReady(l,i,a),t[e]=l}static normalizePoints(e,t){let i=new Array,a=e.length;for(let n=0;n<a;n++){let a=e[n],s=t.PixelsToGeo(a);s=G.NormalizeCoordToGECoord(s);let l=s.getY(),r=s.getX(),c=new o.Point2D(r,l);i.push(c)}return G.crossesIDL(i)}static IsOnePointSymbolCode(e){return R.SymbolUtilities.getBasicSymbolID(e),"CAKE-----------"===e||"CYLINDER-------"===e||"RADARC---------"===e}static ShapeToKMLString(e,t,i,a,n,s){let l,r,o,c,T,u="",g=4;i=O.JavaRendererUtilities.normalizeSymbolCode(i),u+="<Placemark>",u+="<description><![CDATA[<b>"+e+"</b><br/>\n"+t+"]]></description>",u+="<Style>",l=a.getLineColor(),null!=l&&(o=D.RendererUtilities.colorToHexString(a.getLineColor(),!1).substring(1),T=a.getStroke(),null!=T&&(g=T.getLineWidth()),o=O.JavaRendererUtilities.ARGBtoABGR(o),u+="<LineStyle>",u+="<color>"+o+"</color>",u+="<colorMode>normal</colorMode>",u+="<width>"+g.toString()+"</width>",u+="</LineStyle>"),r=a.getFillColor();let L=a.getPatternFillImage();null==r&&null==L||(u+="<PolyStyle>",null!=r&&(c=D.RendererUtilities.colorToHexString(a.getFillColor(),!1).substring(1),c=O.JavaRendererUtilities.ARGBtoABGR(c),u+="<color>"+c+"</color>",u+="<colorMode>normal</colorMode>"),null!=L&&(u+="<shader>"+L+"</shader>"),u+="<fill>1</fill>",u+=null!=l?"<outline>1</outline>":"<outline>0</outline>",u+="</PolyStyle>"),u+="</Style>";let d=a.getPolylines(),_=d.length;u+="<MultiGeometry>";for(let e=0;e<_;e++){let t=d[e];if(s=G.normalizePoints(t,n),null!=l&&null==r){u+="<LineString>",u+="<tessellate>1</tessellate>",u+="<altitudeMode>clampToGround</altitudeMode>",u+="<coordinates>";let e=t.length;for(let i=0;i<e;i++){let e=t[i],a=n.PixelsToGeo(e);s&&(a=G.NormalizeCoordToGECoord(a));let l=Math.round(1e8*a.getY())/1e8;u+=Math.round(1e8*a.getX())/1e8,u+=",",u+=l,i<t.length-1&&(u+=" ")}u+="</coordinates>",u+="</LineString>"}if(null!=r){0===e&&(u+="<Polygon>"),u+=1===e&&_>1?"<innerBoundaryIs>":"<outerBoundaryIs>",u+="<LinearRing>",u+="<altitudeMode>clampToGround</altitudeMode>",u+="<tessellate>1</tessellate>",u+="<coordinates>";let a=Number.MIN_VALUE;if(!1===s&&G.IsOnePointSymbolCode(i)){let e=t.length;for(let i=0;i<e;i++){let e=t[i],l=n.PixelsToGeo(e).getX();if(a!==Number.MIN_VALUE&&Math.abs(l-a)>180){s=!0;break}a=l}}let l=t.length;for(let e=0;e<l;e++){let i=t[e],a=n.PixelsToGeo(i),l=Math.round(1e8*a.getY())/1e8,r=Math.round(1e8*a.getX())/1e8;s&&r>0&&(r-=360),u+=r,u+=",",u+=l,e<t.length-1&&(u+=" ")}u+="</coordinates>",u+="</LinearRing>",u+=1===e&&_>1?"</innerBoundaryIs>":"</outerBoundaryIs>",e===_-1&&(u+="</Polygon>")}}return u+="</MultiGeometry>",u+="</Placemark>",u.toString()}static ShapeToWWReady(e,t,i){let a=e.getPolylines(),n=a.length;for(let s=0;s<n;s++){let n=a[s];if(null!=e.getLineColor()){let e=n.length;for(let a=0;a<e;a++){let e=n[a],s=t.PixelsToGeo(e);i&&(s=G.NormalizeCoordToGECoord(s)),n[a]=s}}if(null!=e.getFillColor()){let e=n.length;for(let i=0;i<e;i++){let e=n[i],a=t.PixelsToGeo(e);n[i]=a}}}return e}static LabelToWWReady(e,t,i){try{let a=new o.Point2D(e.getGlyphPosition().getX(),e.getGlyphPosition().getY()),n=t.PixelsToGeo(a);i&&(n=G.NormalizeCoordToGECoord(n)),n.getY(),n.getX(),Math.round(e.getModifierAngle());let s=e.getModifierString();if(null==s||""===s)return null;e.setModifierPosition(n)}catch(e){if(!(e instanceof Error))throw e;console.error(e.message),console.log(e.stack)}return e}static AdjustModifierPointToCenter(e){try{let t=e.getTextLayout().getBounds();new T.Rectangle2D(t.getX(),t.getY(),t.getWidth(),t.getHeight())}catch(e){if(!(e instanceof Error))throw e;console.error(e.message),console.log(e.stack)}}static ShapeToJSONString(e,t,i,a){let n,s,l,r="";null!=e.getLineColor()&&(s=D.RendererUtilities.colorToHexString(e.getLineColor(),!1).substring(1),i&&(s=O.JavaRendererUtilities.ARGBtoABGR(s))),null!=e.getFillColor()&&(n=D.RendererUtilities.colorToHexString(e.getFillColor(),!1).substring(1),i&&(n=O.JavaRendererUtilities.ARGBtoABGR(n))),l=e.getStroke();let c=4;null!=l&&(c=l.getLineWidth());let T=e.getPolylines(),u=T.length;for(let e=0;e<u;e++){let i=T[e];r+=null!=n?'{"polygon":[':'{"line":[';let l=i.length;for(let e=0;e<l;e++){let n=i[e],s=t.PixelsToGeo(n);a&&(s=G.NormalizeCoordToGECoord(s));let l=s.getY(),c=s.getX();n=new o.Point2D(c,l),i[e]=n,r+="[",r+=c,r+=",",r+=l,r+="]",e<i.length-1&&(r+=",")}r+="]",null!=s&&(r+=',"lineColor":"',r+=s,r+='"'),null!=n&&(r+=',"fillColor":"',r+=n,r+='"'),r+=',"lineWidth":"',r+=c.toString(),r+='"',r+="}",e<T.length-1&&(r+=",")}return r.toString()}static LabelToKMLString(e,t,i,a){let n="",s=new o.Point2D(e.getModifierPosition().getX(),e.getModifierPosition().getY()),l=t.PixelsToGeo(s);i&&(l=G.NormalizeCoordToGECoord(l));let r=Math.round(1e8*l.getY())/1e8,c=Math.round(1e8*l.getX())/1e8,T=Math.round(e.getModifierAngle()),u=e.getModifierString(),g=D.RendererUtilities.colorToHexString(a,!1).substring(1);g=O.JavaRendererUtilities.ARGBtoABGR(g);let L=f.RendererSettings.getInstance().getKMLLabelScale();return L>0&&null!=u&&""!==u?(n+="<Placemark>",n+="<name><![CDATA["+u+"]]></name>",n+="<Style>",n+="<IconStyle>",n+="<scale>.7</scale>",n+="<heading>"+T+"</heading>",n+="<Icon>",n+="<href></href>",n+="</Icon>",n+="</IconStyle>",n+="<LabelStyle>",n+="<color>"+g+"</color>",n+="<scale>"+L.toString()+"</scale>",n+="</LabelStyle>",n+="</Style>",n+="<Point>",n+="<extrude>1</extrude>",n+="<altitudeMode>relativeToGround</altitudeMode>",n+="<coordinates>",n+=c,n+=",",n+=r,n+="</coordinates>",n+="</Point>",n+="</Placemark>",n.toString()):""}static LabelToJSONString(e,t,i){let a="";a+='{"label":';let n=new o.Point2D(e.getGlyphPosition().getX(),e.getGlyphPosition().getY()),s=t.PixelsToGeo(n);i&&(s=G.NormalizeCoordToGECoord(s));let l=s.getY(),r=s.getX(),c=e.getModifierAngle();n.setLocation(r,l),e.setGlyphPosition(n);let T=e.getModifierString();return null==T||""===T?"":(a+="[",a+=r,a+=",",a+=l,a+="]",a+=',"text":"',a+=T,a+='"',a+=',"angle":"',a+=c,a+='"}',a.toString())}static canRenderMultiPoint(e,t,i){try{let a=R.SymbolUtilities.getBasicSymbolID(e),n=E.MSLookup.getInstance().getMSLInfo(e);if(null==n)return P.SymbolID.getVersion(e)===P.SymbolID.Version_2525E?"Basic ID: "+a+" not recognized in version E (13)":"Basic ID: "+a+" not recognized in version D (11)";let s=n.getDrawRule();if(s===L.DrawRules.DONOTDRAW)return"Basic ID: "+a+" has no draw rule";if(!R.SymbolUtilities.isMultiPoint(e))return"Basic ID: "+a+" is not a multipoint symbol";if(i<n.getMinPointCount())return"Basic ID: "+a+" requires a minimum of "+n.getMinPointCount().toString()+" points. "+i.toString()+" are present.";let l=new Array,r=new Array;if(t.has(S.Modifiers.AM_DISTANCE)){let e=t.get(S.Modifiers.AM_DISTANCE).split(",");for(let t of e)""!==t&&l.push(parseFloat(t))}if(t.has(S.Modifiers.AN_AZIMUTH)){let e=t.get(S.Modifiers.AN_AZIMUTH).split(",");for(let t of e)""!==t&&r.push(parseFloat(t))}return G.hasRequiredModifiers(e,s,l,r)}catch(e){if(e instanceof Error)return d.ErrorLogger.LogException("MultiPointHandler","canRenderMultiPoint",e),"false: "+e.message;throw e}}static hasRequiredModifiers(e,t,i,a){let n=e;try{return t>700?t===L.DrawRules.CIRCULAR1?null!=i&&i.length>0?"true":(n+=" requires a modifiers object that has 1 distance/AM value.",n):t===L.DrawRules.RECTANGULAR2?null!=i&&i.length>=2&&null!=a&&a.length>=1?"true":(n+=" requires a modifiers object that has 2 distance/AM values and 1 azimuth/AN value.",n):t===L.DrawRules.ARC1?null!=i&&i.length>=1&&null!=a&&a.length>=2?"true":(n+=" requires a modifiers object that has 2 distance/AM values and 2 azimuth/AN values per sector.  The first sector can have just one AM value although it is recommended to always use 2 values for each sector.",n):t===L.DrawRules.CIRCULAR2?null!=i&&i.length>0?"true":(n+=" requires a modifiers object that has at least 1 distance/AM value",n):t===L.DrawRules.RECTANGULAR1?null!=i&&i.length>0?"true":(n+=" requires a modifiers object that has 1 distance/AM value.",n):t===L.DrawRules.ELLIPSE1?null!=i&&i.length>=2&&null!=a&&a.length>=1?"true":(n+=" requires a modifiers object that has 2 distance/AM values and 1 azimuth/AN value.",n):t===L.DrawRules.RECTANGULAR3?null!=i&&i.length>=1?"true":(n+=" requires a modifiers object that has 1 distance/AM value.",n):"true":t===L.DrawRules.POINT17?null!=i&&i.length>=2&&null!=a&&a.length>=1?"true":(n+=" requires a modifiers object that has 2 distance/AM values and 1 azimuth/AN value.",n):t===L.DrawRules.POINT18?null!=i&&i.length>=2&&null!=a&&a.length>=2?"true":(n+=" requires a modifiers object that has 2 distance/AM values and 2 azimuth/AN values.",n):t===L.DrawRules.CORRIDOR1?null!=i&&i.length>0?"true":(n+=" requires a modifiers object that has 1 distance/AM value.",n):"true"}catch(e){if(e instanceof Error)return d.ErrorLogger.LogException("MultiPointHandler","hasRequiredModifiers",e),"true";throw e}}}t.MultiPointHandler=G},7334:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SinglePointSVGRenderer=void 0;const a=i(151),n=i(9441),s=i(3170),l=i(6507),r=i(3247),o=i(7300),c=i(9866),T=i(3874),u=i(7232),g=i(3254),L=i(1059),d=i(92),_=i(6142),h=i(3444),E=i(2421),A=i(2466),I=i(5955);class S{TAG="SinglePointSVGRenderer";static _instance;static RENDERER_ID="2525D";_buffer;_fontRenderContext;constructor(){}init(){try{_.SVGLookup.getInstance(),l.ModifierRenderer.getInstance(),null!=this._buffer&&void 0!==this._buffer||(this._buffer=new OffscreenCanvas(8,8),this._fontRenderContext=this._buffer.getContext("2d"))}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException("SinglePointRenderer","init",e)}}static getInstance(){return S._instance||(S._instance=new S,S._instance.init()),S._instance}render(e,t,i){let a;return null==t&&(t=new Map),a=E.SymbolID.getSymbolSet(e)===E.SymbolID.SymbolSet_ControlMeasure||E.SymbolID.getSymbolSet(e)===E.SymbolID.SymbolSet_Atmospheric||E.SymbolID.getSymbolSet(e)===E.SymbolID.SymbolSet_Oceanographic||E.SymbolID.getSymbolSet(e)===E.SymbolID.SymbolSet_MeteorologicalSpace?this.RenderSP(e,t,i):this.RenderUnit(e,t,i),a}RenderUnit(e,t,i){let r=null,d=null;try{let S=null,y=null;E.SymbolID.getSymbolSet(e)==E.SymbolID.SymbolSet_MineWarfare&&g.RendererSettings.getInstance().getSeaMineRenderMethod()==g.RendererSettings.SeaMineRenderMethod_MEDAL&&(S=L.RendererUtilities.colorToHexString(A.SymbolUtilities.getLineColorOfAffiliation(e),!1),y=L.RendererUtilities.colorToHexString(A.SymbolUtilities.getFillColorOfAffiliation(e),!0));let f=null,D=-1,M=null,P=null,R=null,N=null,C=null,O=null,p=null,x=null,b=0,w=0,m=0,F=0,G=null,U=null,v=null,H=!1,B=!1,k=50,Y=!0,W=!1,X=!1,V=E.SymbolID.getVersion(e);try{null!=i&&(k=i.has(c.MilStdAttributes.PixelSize)?parseInt(i.get(c.MilStdAttributes.PixelSize)):g.RendererSettings.getInstance().getDefaultPixelSize(),i.has(c.MilStdAttributes.KeepUnitRatio)&&(Y="true"===i.get(c.MilStdAttributes.KeepUnitRatio).toLowerCase()),i.has(c.MilStdAttributes.DrawAsIcon)&&(W="true"===i.get(c.MilStdAttributes.DrawAsIcon).toLowerCase()),W?(Y=!1,H=!1,B=!1):(H=l.ModifierRenderer.hasDisplayModifiers(e,t),B=l.ModifierRenderer.hasTextModifiers(e,t)),i.has(c.MilStdAttributes.LineColor)&&(S=i.get(c.MilStdAttributes.LineColor)),i.has(c.MilStdAttributes.FillColor)&&(y=i.get(c.MilStdAttributes.FillColor)),i.has(c.MilStdAttributes.IconColor)&&(f=i.get(c.MilStdAttributes.IconColor)),i.has(c.MilStdAttributes.Alpha)&&(D=parseFloat(i.get(c.MilStdAttributes.Alpha))))}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException("MilStdIconRenderer","RenderUnit",e)}{let o=E.SymbolID.getVersion(e);M=_.SVGLookup.getFrameID(e),P=_.SVGLookup.getMainIconID(e),R=_.SVGLookup.getMod1ID(e),N=_.SVGLookup.getMod2ID(e),C=_.SVGLookup.getInstance().getSVGLInfo(M,o),O=_.SVGLookup.getInstance().getSVGLInfo(P,o),null==C&&(M=_.SVGLookup.getFrameID(A.SymbolUtilities.reconcileSymbolID(e)),C=_.SVGLookup.getInstance().getSVGLInfo(M,o),null==C&&(M=_.SVGLookup.getFrameID(E.SymbolID.setSymbolSet(e,E.SymbolID.SymbolSet_Unknown)),C=_.SVGLookup.getInstance().getSVGLInfo(M,o))),null==O&&("000000"===P.substring(2,8)==0&&null==T.MSLookup.getInstance().getMSLInfo(e)?O=_.SVGLookup.getInstance().getSVGLInfo("98100000",o):E.SymbolID.getSymbolSet(e)===E.SymbolID.SymbolSet_Unknown&&(O=_.SVGLookup.getInstance().getSVGLInfo("00000000",o))),g.RendererSettings.getInstance().getScaleMainIcon()&&(O=L.RendererUtilities.scaleIcon(e,O)),p=_.SVGLookup.getInstance().getSVGLInfo(R,o),x=_.SVGLookup.getInstance().getSVGLInfo(N,o),b=Math.round(C.getBbox().getY()),w=Math.round(C.getBbox().getX()),m=Math.round(C.getBbox().getWidth()),F=Math.round(C.getBbox().getHeight()),U=null!=S||null!=y?L.RendererUtilities.setSVGFrameColors(e,C.getSVG(),L.RendererUtilities.getColorFromHexString(S),L.RendererUtilities.getColorFromHexString(y)):C.getSVG(),"octagon"===M&&(X=!0,U=U.replace('<g id="octagon">','<g id="octagon" display="none">')),v=new s.Rectangle2D(w,b,m,F);let c=u.RectUtilities.copyRect(v),D=-1;if(k>0&&!0===Y){let t=A.SymbolUtilities.getUnitRatioHeight(e),i=A.SymbolUtilities.getUnitRatioWidth(e);!0===X&&(t=1,i=1),k=t>i?k/1.5*t:k/1.5*i}if(k>0){let e=k,t=c.getHeight(),i=c.getWidth();D=Math.min(e/t,e/i),v=u.RectUtilities.makeRectangle2DFromRect(0,0,i*D,t*D)}let G="";if(null!=C){G+='<g transform="translate('+C.getBbox().getX()*-D+","+C.getBbox().getY()*-D+") scale("+D+","+D+')">',null!=C&&(G+=U);let e="";null!=f&&(f=L.RendererUtilities.colorToHexString(L.RendererUtilities.getColorFromHexString(f),!1),null!=f&&"#000000"!=f&&""!=f?e=' stroke="'+f+'" fill="'+f+'" ':f=null);let t="<g"+e+">";null!=O&&(t+=O.getSVG()),null!=p&&(t+=p.getSVG()),null!=x&&(t+=x.getSVG()),f&&(t=t.replaceAll("#000000",f)),t+="</g>",G+=t+"</g>"}let W=new a.Point(306,396);I.ShapeUtilities.offset(W,-w,-b),W=new a.Point(W.x*D,W.y*D),new a.Point(W.x,W.y),u.RectUtilities.shift(v,0,-v.getY());let V=new n.Point2D(v.getCenterX(),v.getCenterY());r=new h.SVGSymbolInfo(G.toString().valueOf(),V,v,v),H=l.ModifierRenderer.hasDisplayModifiers(e,t),B=l.ModifierRenderer.hasTextModifiers(e,t),H&&(d=l.ModifierRenderer.processUnitDisplayModifiers(r,e,t,i,this._fontRenderContext),null!=d&&(r=d,d=null))}if(B)switch(null==t&&(t=new Map),E.SymbolID.getSymbolSet(e)){case E.SymbolID.SymbolSet_LandUnit:case E.SymbolID.SymbolSet_LandCivilianUnit_Organization:d=V>=E.SymbolID.Version_2525E?l.ModifierRenderer.processLandUnitTextModifiersE(r,e,t,i,this._fontRenderContext):l.ModifierRenderer.processLandUnitTextModifiers(r,e,t,i,this._fontRenderContext);break;case E.SymbolID.SymbolSet_LandEquipment:case E.SymbolID.SymbolSet_SignalsIntelligence_Land:d=V>=E.SymbolID.Version_2525E?l.ModifierRenderer.processLandEquipmentTextModifiersE(r,e,t,i,this._fontRenderContext):l.ModifierRenderer.processLandEquipmentTextModifiers(r,e,t,i,this._fontRenderContext);break;case E.SymbolID.SymbolSet_LandInstallation:d=V>=E.SymbolID.Version_2525E?l.ModifierRenderer.processLandInstallationTextModifiersE(r,e,t,i,this._fontRenderContext):l.ModifierRenderer.processLandInstallationTextModifiers(r,e,t,i,this._fontRenderContext);break;case E.SymbolID.SymbolSet_DismountedIndividuals:d=l.ModifierRenderer.processDismountedIndividualsTextModifiers(r,e,t,i,this._fontRenderContext);break;case E.SymbolID.SymbolSet_Space:case E.SymbolID.SymbolSet_SpaceMissile:case E.SymbolID.SymbolSet_Air:case E.SymbolID.SymbolSet_AirMissile:case E.SymbolID.SymbolSet_SignalsIntelligence_Air:d=V>=E.SymbolID.Version_2525E?l.ModifierRenderer.processAirSpaceUnitTextModifiersE(r,e,t,i,this._fontRenderContext):l.ModifierRenderer.processAirSpaceUnitTextModifiers(r,e,t,i,this._fontRenderContext);break;case E.SymbolID.SymbolSet_SignalsIntelligence_Space:if(V<E.SymbolID.Version_2525E)d=l.ModifierRenderer.processAirSpaceUnitTextModifiers(r,e,t,i,this._fontRenderContext);else{let a=E.SymbolID.getFrameShape(e);d=a===E.SymbolID.FrameShape_Space||a===E.SymbolID.FrameShape_Air?l.ModifierRenderer.processAirSpaceUnitTextModifiersE(r,e,t,i,this._fontRenderContext):a===E.SymbolID.FrameShape_LandEquipment_SeaSurface?l.ModifierRenderer.processLandEquipmentTextModifiersE(r,e,t,i,this._fontRenderContext):a===E.SymbolID.FrameShape_SeaSubsurface?l.ModifierRenderer.processSeaSubSurfaceTextModifiersE(r,e,t,i,this._fontRenderContext):l.ModifierRenderer.processLandEquipmentTextModifiersE(r,e,t,i,this._fontRenderContext)}break;case E.SymbolID.SymbolSet_SeaSurface:case E.SymbolID.SymbolSet_SignalsIntelligence_SeaSurface:d=V>=E.SymbolID.Version_2525E?l.ModifierRenderer.processSeaSurfaceTextModifiersE(r,e,t,i,this._fontRenderContext):l.ModifierRenderer.processSeaSurfaceTextModifiers(r,e,t,i,this._fontRenderContext);break;case E.SymbolID.SymbolSet_SeaSubsurface:case E.SymbolID.SymbolSet_SignalsIntelligence_SeaSubsurface:d=V>=E.SymbolID.Version_2525E?l.ModifierRenderer.processSeaSubSurfaceTextModifiersE(r,e,t,i,this._fontRenderContext):l.ModifierRenderer.processSeaSubSurfaceTextModifiers(r,e,t,i,this._fontRenderContext);break;case E.SymbolID.SymbolSet_Activities:d=V>=E.SymbolID.Version_2525E?l.ModifierRenderer.processActivitiesTextModifiersE(r,e,t,i,this._fontRenderContext):l.ModifierRenderer.processActivitiesTextModifiers(r,e,t,i,this._fontRenderContext);break;case E.SymbolID.SymbolSet_CyberSpace:d=l.ModifierRenderer.processCyberSpaceTextModifiers(r,e,t,i,this._fontRenderContext);break;case E.SymbolID.SymbolSet_MineWarfare:break;case E.SymbolID.SymbolSet_Unknown:default:d=l.ModifierRenderer.processUnknownTextModifiers(r,e,t,i,this._fontRenderContext)}null!=d&&(r=d),d=null;let z=0;B&&(z=2);let K,Q=r.getImageBounds().getWidth()+z,Z=r.getImageBounds().getHeight(),J="";D>=0&&D<=255&&(J=' opacity="'+D/255+'"'),G='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+Q+'" height="'+Z+'" viewBox="0 0 '+Q+" "+Z+'"'+J+">\n";let j=-1*r.getImageBounds().getX(),q=-1*r.getImageBounds().getY(),$=r.getSymbolCenterPoint(),ee=r.getImageBounds();(j>0||q>0)&&(I.ShapeUtilities.offset($,j,q),I.ShapeUtilities.offset(v,j,q),I.ShapeUtilities.offset(ee,j,q),K='<g transform="translate('+j+","+q+')">\n'),ee.setRect(ee.getX(),ee.getY(),Q,Z),r=new h.SVGSymbolInfo(r.getSVG(),$,v,ee);let te="";te+=G,te+=this.makeDescTag(r),te+=this.makeMetadataTag(e,r),null!=K&&(te+=K),te+=r.getSVG(),null!=K&&(te+="\n</g>"),te+="\n</svg>",r=new h.SVGSymbolInfo(te.toString().valueOf(),$,v,ee)}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException("SinglePointRenderer","renderUnit",e)}return r}RenderSP(e,t,i){let a=null,n=50,s=null,S=null,y=-1,f=!0,D=!1,M=!1,P=!1,R=!1,N=null,C=null,O=null,p=null,x=null,b=0,w=0,m=0,F=0,G=null,U=0,v=null,H=0;try{N=T.MSLookup.getInstance().getMSLInfo(e);let o=E.SymbolID.getSymbolSet(e),B=E.SymbolID.getEntityCode(e),k=0,Y=!1;if(null!=N&&(H=N.getDrawRule()),g.RendererSettings.getInstance().getActionPointDefaultFill()&&((A.SymbolUtilities.isActionPoint(e)||H===r.DrawRules.POINT10||180100===B||180200===B||180400===B)&&E.SymbolID.getSymbolSet(e)===E.SymbolID.SymbolSet_ControlMeasure&&(s="#000000",Y=!0),null==s&&(s=L.RendererUtilities.colorToHexString(A.SymbolUtilities.getDefaultLineColor(e),!1))),null!=i&&(i.has(c.MilStdAttributes.PixelSize)&&(n=parseInt(i.get(c.MilStdAttributes.PixelSize))),i.has(c.MilStdAttributes.LineColor)&&(s=i.get(c.MilStdAttributes.LineColor)),i.has(c.MilStdAttributes.FillColor)&&(S=i.get(c.MilStdAttributes.FillColor)),i.has(c.MilStdAttributes.Alpha)&&(y=parseInt(i.get(c.MilStdAttributes.Alpha))),i.has(c.MilStdAttributes.DrawAsIcon)&&(D="true"===i.get(c.MilStdAttributes.DrawAsIcon).toLowerCase()),i.has(c.MilStdAttributes.KeepUnitRatio)&&(f="true"===i.get(c.MilStdAttributes.KeepUnitRatio).toLowerCase()),!0!==D&&!0!==Y&&(R=i.has(c.MilStdAttributes.OutlineSymbol)?"true"===i.get(c.MilStdAttributes.OutlineSymbol).toLowerCase():g.RendererSettings.getInstance().getOutlineSPControlMeasures()),A.SymbolUtilities.isMultiPoint(e)&&(R=!1)),f&&(n=N.getDrawRule()==r.DrawRules.POINT1?Math.ceil(n/1.5*1.5):Math.ceil(n/1.5*1.2)),o===E.SymbolID.SymbolSet_ControlMeasure&&270701===B&&(k=E.SymbolID.getModifier1(e),k>=13&&k<=50||(e=E.SymbolID.setModifier1(e,13))),null==a){let t,i=E.SymbolID.getVersion(e);C=_.SVGLookup.getMainIconID(e),O=_.SVGLookup.getInstance().getSVGLInfo(C,i),p=_.SVGLookup.getMod1ID(e),x=_.SVGLookup.getInstance().getSVGLInfo(p,i);let l,o,c=0;if(R&&null!=O&&(c=L.RendererUtilities.findWidestStrokeWidth(O.getSVG())),b=Math.round(O.getBbox().getY()),w=Math.round(O.getBbox().getX()),m=Math.round(O.getBbox().getWidth()),F=Math.round(O.getBbox().getHeight()),Y){let t;t=null!=S?S:L.RendererUtilities.colorToHexString(A.SymbolUtilities.getFillColorOfAffiliation(e),!1),O=new d.SVGInfo(O.getID(),O.getBbox(),O.getSVG().replaceAll('fill="none"','fill="'+t+'"'))}if(N.getSymbolSet()!==E.SymbolID.SymbolSet_ControlMeasure||null==s&&null==S?l=O.getSVG():(l=R?L.RendererUtilities.setSVGSPCMColors(e,O.getSVG(),L.RendererUtilities.getIdealOutlineColor(L.RendererUtilities.getColorFromHexString(s)),L.RendererUtilities.getColorFromHexString(S),!0):"",l+=L.RendererUtilities.setSVGSPCMColors(e,O.getSVG(),L.RendererUtilities.getColorFromHexString(s),L.RendererUtilities.getColorFromHexString(S),!1)),270701===E.SymbolID.getEntityCode(e)&&null!=x&&(R&&(l+=L.RendererUtilities.setSVGSPCMColors(p,x.getSVG(),L.RendererUtilities.getIdealOutlineColor(L.RendererUtilities.getColorFromHexString("#00A651")),L.RendererUtilities.getColorFromHexString("#00A651"),!0)),l+=L.RendererUtilities.setSVGSPCMColors(p,x.getSVG(),L.RendererUtilities.getColorFromHexString(s),L.RendererUtilities.getColorFromHexString(S),!1)),n>0){v=u.RectUtilities.toRectangle2D(w,b,m,F),t=u.RectUtilities.copyRect(v);let e=n,i=t.getHeight(),a=t.getWidth();U=Math.min(e/i,e/a),v=u.RectUtilities.toRectangle2D(0,0,a*U,i*U),a=v.getWidth(),i=v.getHeight(),c>.1*i?c=.1*i:c>.1*a&&(c=.1*a)}let T=0;N.getSymbolSet()===E.SymbolID.SymbolSet_ControlMeasure&&R&&0!==c&&(o=u.RectUtilities.toRectangle2D(0,0,(t.getWidth()+c)*U,(t.getHeight()+c)*U),v=o,T=c/2,u.RectUtilities.grow(t,T));let g="";N.getSymbolSet()===E.SymbolID.SymbolSet_ControlMeasure&&N.getDrawRule()===r.DrawRules.POINT1&&(g=' stroke-linejoin="round" ');let I="";null!=O&&(I+='<g transform="translate('+t.getX()*-U+","+t.getY()*-U+") scale("+U+","+U+')"'+g+">",I+=l,I+="</g>");let y=A.SymbolUtilities.getCMSymbolAnchorPoint(e,u.RectUtilities.makeRectangle2DFromRect(0,0,v.getWidth(),v.getHeight()));a=new h.SVGSymbolInfo(I.toString().valueOf(),y.toPoint2D(),v,v)}let W=null;if(M=l.ModifierRenderer.hasDisplayModifiers(e,t),P=l.ModifierRenderer.hasTextModifiers(e,t),A.SymbolUtilities.isMultiPoint(e)&&(P=!1,M=!1),!1===D&&(P||M)){let n,r=L.RendererUtilities.getColorFromHexString(s);n=A.SymbolUtilities.isSPWithSpecialModifierLayout(e)?l.ModifierRenderer.ProcessTGSPWithSpecialModifierLayout(a,e,t,i,r,this._fontRenderContext):l.ModifierRenderer.ProcessTGSPModifiers(a,e,t,i,r,this._fontRenderContext),W=n instanceof h.SVGSymbolInfo?n:null}null!=W&&(a=W),W=null;let X,V="";y>=0&&y<=255&&(V=' opacity="'+y/255+'"'),G='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+a.getImageBounds().getWidth()+'" height="'+a.getImageBounds().getHeight()+'" viewBox="0 0 '+a.getImageBounds().getWidth()+" "+a.getImageBounds().getHeight()+'"'+V+">\n";let z=-1*a.getImageBounds().getX(),K=-1*a.getImageBounds().getY(),Q=a.getSymbolCenterPoint(),Z=a.getImageBounds();(z>0||K>0)&&(I.ShapeUtilities.offset(Q,z,K),I.ShapeUtilities.offset(v,z,K),I.ShapeUtilities.offset(Z,z,K),X='<g transform="translate('+z+","+K+')">\n'),a=new h.SVGSymbolInfo(a.getSVG(),Q,v,Z);let J="";J+=G,J+=this.makeDescTag(a),J+=this.makeMetadataTag(e,a),null!=X&&(J+=X),J+=a.getSVG(),null!=X&&(J+="\n</g>"),J+="\n</svg>",a=new h.SVGSymbolInfo(J.toString().valueOf(),Q,v,Z)}catch(t){if(t instanceof Error)return o.ErrorLogger.LogException("MilStdIconRenderer","RenderSP",t),o.ErrorLogger.LogMessage(" SymbolID: "+e),null;throw t}return a}RenderModifier(e,t){let i=null,a=null,n=-1,l=null,r=null,d=null,I=0,S=0,y=0,f=0,D=null,M=null,P=0,R=null,N=null,C=!1,O=-1,p=!1;try{l=T.MSLookup.getInstance().getMSLInfo(e),null!=t&&(i=L.RendererUtilities.colorToHexString(A.SymbolUtilities.getLineColorOfAffiliation(e),!1),t.has(c.MilStdAttributes.LineColor)&&(i=t.get(c.MilStdAttributes.LineColor)),t.has(c.MilStdAttributes.FillColor)&&(a=t.get(c.MilStdAttributes.FillColor)),t.has(c.MilStdAttributes.Alpha)&&(n=parseInt(t.get(c.MilStdAttributes.Alpha))),t.has(c.MilStdAttributes.DrawAsIcon)&&(C="true"===t.get(c.MilStdAttributes.DrawAsIcon).toLowerCase()),t.has(c.MilStdAttributes.PixelSize)&&(O=parseInt(t.get(c.MilStdAttributes.PixelSize)),l.getSymbolSet()==E.SymbolID.SymbolSet_ControlMeasure&&270701==E.SymbolID.getEntityCode(e)&&(O=Math.floor(.9*O)))),!1===C&&(p=t.has(c.MilStdAttributes.OutlineSymbol)?"true"===t.get(c.MilStdAttributes.OutlineSymbol).toLowerCase():g.RendererSettings.getInstance().getOutlineSPControlMeasures())}catch(e){o.ErrorLogger.LogException("MilStdIconRenderer","RenderModifier2-Getting Attributes",e)}try{let t=null,n=E.SymbolID.getVersion(e),o=null;r=_.SVGLookup.getMod1ID(e),d=_.SVGLookup.getInstance().getSVGLInfo(r,n),I=Math.round(d.getBbox().getY()),S=Math.round(d.getBbox().getX()),y=Math.round(d.getBbox().getWidth()),f=Math.round(d.getBbox().getHeight());let c="";if(l.getSymbolSet()!=E.SymbolID.SymbolSet_ControlMeasure||null==i&&null==a?c=d.getSVG():(p&&(c+=L.RendererUtilities.setSVGSPCMColors(r,d.getSVG(),L.RendererUtilities.getIdealOutlineColor(L.RendererUtilities.getColorFromHexString(i)),L.RendererUtilities.getColorFromHexString(a),!0)),c+=L.RendererUtilities.setSVGSPCMColors(r,d.getSVG(),L.RendererUtilities.getColorFromHexString(i),L.RendererUtilities.getColorFromHexString(a))),O>0){R=u.RectUtilities.toRectangle2D(S,I,y,f),o=u.RectUtilities.copyRect(R);let e=O,t=o.getHeight(),i=o.getWidth();P=Math.min(e/t,e/i),R=u.RectUtilities.makeRectangle2DFromRect(0,0,i*P,t*P)}let T,g=0;p&&(u.RectUtilities.grow(o,3),g=3),T=new s.Rectangle2D(0,0,Math.floor(R.getWidth()+2*g),Math.floor(R.getHeight()+2*g)),R=u.RectUtilities.makeRectangle2DFromRect(g,g,T.width-g,T.height-g),D='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="'+T.getX()+" "+T.getY()+" "+T.getWidth()+" "+T.getHeight()+'" width="'+T.getWidth()+'" height="'+T.getHeight()+'">',M=D+'<g transform="translate('+(d.getBbox().getX()*-P+g)+","+(d.getBbox().getY()*-P+g)+") scale("+P+","+P+')">'+c+"</g></svg>";let C=A.SymbolUtilities.getCMSymbolAnchorPoint(e,u.RectUtilities.toRectangle2D(g,g,R.getWidth(),R.getHeight()));return t=new h.SVGSymbolInfo(M,C.toPoint2D(),R,R),R=null,N=null,t}catch(e){o.ErrorLogger.LogException("MilStdIconRenderer","RenderSP",e)}return null}makeDescTag(e){let t="";if(null!=e){let i=e.getSymbolBounds(),a=e.getImageBounds();t+="<desc>"+e.getSymbolCenterX()+" "+e.getSymbolCenterY()+" ",t+=i.getX()+" "+i.getY()+" "+i.getWidth()+" "+i.getHeight()+" ",t+=a.getX()+" "+a.getY()+" "+a.getWidth()+" "+a.getHeight(),t+="</desc>\n"}return t.toString().valueOf()}makeMetadataTag(e,t){let i="";if(null!=t){let a=t.getSymbolBounds(),n=t.getImageBounds();i+="<metadata>\n",i+="<symbolID>"+e+"</symbolID>\n",i+="<anchor>"+t.getSymbolCenterX()+" "+t.getSymbolCenterY()+"</anchor>\n",i+="<symbolBounds>"+a.getX()+" "+a.getY()+" "+a.getWidth()+" "+a.getHeight()+"</symbolBounds>\n",i+="<imageBounds>"+n.getX()+" "+n.getY()+" "+n.getWidth()+" "+n.getHeight()+"</imageBounds>\n",i+="</metadata>\n"}return i.toString().valueOf()}getSVGString(e,t){let i,a=E.SymbolID.getVersion(e),n=_.SVGLookup.getInstance().getSVGLInfo(A.SymbolUtilities.getBasicSymbolID(e),a),s=n.getSVG();return t&&(s=s.replace('<g id="'+A.SymbolUtilities.getBasicSymbolID(e)+'">','<g id="'+A.SymbolUtilities.getBasicSymbolID(e)+'_outline">')),i=n.getBbox().getMaxY()>400?'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 612 792">':'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 400 400">',s=i+s+"</svg>",s}}t.SinglePointSVGRenderer=S},7389:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.POINT2=void 0,t.POINT2=class{x=0;y=0;style=0;segment=0;constructor(...e){switch(e.length){case 0:this.x=0,this.y=0,this.style=0;break;case 1:{const[t]=e;this.x=t.x,this.y=t.y,this.segment=t.segment,this.style=t.style;break}case 2:{const[t,i]=e;this.x=t,this.y=i,this.style=0;break}case 3:{const[t,i,a]=e;this.x=t,this.y=i,this.style=a;break}case 4:{const[t,i,a,n]=e;this.x=t,this.y=i,this.segment=a,this.style=n;break}default:throw Error("Invalid number of arguments")}}getX(){return this.x}getY(){return this.y}}},7436:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Line=void 0;const a=i(7706),n=i(2517),s=i(6001),l=i(6612);t.Line=class{pt1;pt2;rectangle;constructor(e,t,i,n){this.pt1=new a.Point(e,t),this.pt2=new a.Point(i,n),this.rectangle=new s.Rectangle(e,t,1,1),this.rectangle.unionPoint(new a.Point(i,n))}getShapeType(){return n.ShapeTypes.LINE}getBounds(){return new s.Rectangle(this.rectangle.getX(),this.rectangle.getY(),this.rectangle.getWidth(),this.rectangle.getHeight())}getP1(){return this.pt1}getP2(){return this.pt2}shift(e,t){this.rectangle.shift(e,t),this.pt1.shift(e,t),this.pt2.shift(e,t)}intersectsLine(e){return l.ShapeUtilties.linesIntersect(this.getP1().getX(),this.getP1().getY(),this.getP2().getX(),this.getP2().getY(),e.getP1().getX(),e.getP1().getY(),e.getP2().getX(),e.getP2().getY())}setPath(e){e.moveTo(this.pt1.getX(),this.pt1.getY()),e.lineTo(this.pt2.getX(),this.pt2.getY())}stroke(e){e.beginPath(),e.moveTo(this.pt1.getX(),this.pt1.getY()),e.lineTo(this.pt2.getX(),this.pt2.getY()),e.stroke()}fill(e){e.beginPath(),e.moveTo(this.pt1.getX(),this.pt1.getY()),e.lineTo(this.pt2.getX(),this.pt2.getY()),e.fill()}toSVGElement(e,t,i){var a='<line x1="'+this.pt1.getX()+'" y1="'+this.pt1.getY();return a+='" x2="'+this.pt2.getX()+'" y2="'+this.pt2.getY()+'"',t?a+=' stroke-width="'+t+'"':e&&(a+=' stroke-width="2"'),e&&(a+=' stroke="'+e+'"'),(a+=i?' fill="'+i+'"':' fill="none"')+"/>"}}},7706:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Point=void 0;const a=i(9441);class n{x=0;y=0;constructor(e,t){this.x=e,this.y=t}getShapeType(){return"POINT"}getX(){return this.x}getY(){return this.y}setLocation(e,t){this.x=e,this.y=t}shift(e,t){this.x+=e,this.y+=t}toStringFormatted(){return"{x:"+this.x+", y:"+this.y+"}"}clone(){return new n(this.x,this.y)}setPath(e){let t=this.x,i=this.y;e.moveTo(t,i),e.lineTo(t+1,i),e.lineTo(t+1,i+1),e.lineTo(t,i+1),e.closePath()}stroke(e){e.beginPath(),this.setPath(e),e.stroke()}fill(e){e.beginPath(),this.setPath(e),e.fill()}toPoint2D(){return new a.Point2D(this.x,this.y)}}t.Point=n},7787:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextInfo=void 0,t.TextInfo=class{_ModifierString;_ModifierStringPosition;_ModifierStringAngle=0;constructor(){}setModifierString(e){this._ModifierString=e}getModifierString(){return this._ModifierString}setModifierStringPosition(e){this._ModifierStringPosition=e}getModifierStringPosition(){return this._ModifierStringPosition}setModifierStringAngle(e){this._ModifierStringAngle=e}getModifierStringAngle(){return this._ModifierStringAngle}}},7940:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Rectangle=void 0;const a=i(9441),n=i(3170),s=i(151);class l{static OUT_LEFT=1;static OUT_TOP=2;static OUT_RIGHT=4;static OUT_BOTTOM=8;x=0;y=0;width=0;height=0;constructor(...e){switch(e.length){case 0:this.x=0,this.y=0,this.width=0,this.height=0;break;case 4:{const[t,i,a,n]=e;this.x=t,this.y=i,this.width=a,this.height=n;break}default:throw Error("Invalid number of arguments")}}getShapeType(){return"RECTANGLE"}getBounds(){return new l(Math.trunc(this.x),Math.trunc(this.y),Math.trunc(this.width),Math.trunc(this.height))}getPathIterator(e){return null}intersects(...e){switch(e.length){case 1:{const[t]=e;return!(this.x+this.width<t.x||this.x>t.x+t.width||this.y+this.height<t.y||this.y>t.y+t.height)}case 4:{const[t,i,a,n]=e;return!(this.x+this.width<t||this.x>t+a||this.y+this.height<i||this.y>i+n)}default:throw Error("Invalid number of arguments")}}contains(...e){switch(e.length){case 1:{const[t]=e;return this.x<=t.getX()&&t.getX()<=this.x+this.width&&this.y<=t.getY()&&t.getY()<=this.y+this.height}case 2:{const[t,i]=e;return this.x<=t&&t<=this.x+this.width&&this.y<=i&&i<=this.y+this.height}case 4:{const[t,i,a,n]=e;return!(!this.contains(t,i)||!this.contains(t+a,i+n))}default:throw Error("Invalid number of arguments")}}getBounds2D(){return new n.Rectangle2D(this.x,this.y,this.width,this.height)}getX(){return this.x}getY(){return this.y}getMinX(){return this.x}getMinY(){return this.y}getMaxX(){return this.x+this.width}getMaxY(){return this.y+this.height}getHeight(){return this.height}getWidth(){return this.width}getBottom(){return this.y+this.height}getRight(){return this.x+this.width}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}grow(e,t){this.x=this.x-e,this.y=this.y-t,this.width=this.width+2*e,this.height=this.height+2*t}setRect(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height}setLocation(e,t){this.x=e,this.y=t}isEmpty(){return this.width<=0||this.height<=0}shift(e,t){this.x+=e,this.y+=t}shiftTL(e,t){let i=new a.Point2D(this.x+this.width,this.y+this.height);this.x+=e,this.y+=t,this.height=i.getY()-this.y,this.width=i.getX()-this.x}shiftBR(e,t){this.width+=e,this.height+=t,this.width<0&&(this.width=0),this.height<0&&(this.height=0)}union(e){let t=new a.Point2D(this.x+this.width,this.y+this.height),i=new a.Point2D(e.x+e.width,e.y+e.height);e&&(e.y<this.y&&(this.y=e.y),e.x<this.x&&(this.x=e.x),i.getY()>t.getY()&&(this.height=i.getY()-t.getY()),i.getX()>t.getX()&&(this.width=i.getX()-t.getX()))}unionPoint(e){if(e){let t=new s.Point(this.x,this.y),i=new s.Point(this.x+this.width,this.y+this.height);e.y<t.y&&(t.y=e.y),e.x<t.x&&(t.x=e.x),e.y>i.y&&(i.y=e.y),e.x>i.x&&(i.x=e.x),this.x=t.x,this.y=t.y,this.width=i.x-this.x,this.height=i.y-this.y}}containsPoint(e){if(e){var t=e.getX(),i=e.getY(),a=this.getX(),n=this.getY();return t>=a&&i>=n&&t<a+this.getWidth()&&i<n+this.getHeight()}return!1}containsRectangle(e){if(e){var t=e.getX(),i=e.getY(),a=e.getWidth(),n=e.getHeight();if(this.isEmpty()||a<=0||n<=0)return!1;var s=this.getX(),l=this.getY();return t>=s&&i>=l&&t+a<=s+this.getWidth()&&i+n<=l+this.getHeight()}return!1}outcode(e,t){var i=0;return this.width<=0?i|=l.OUT_LEFT|l.OUT_RIGHT:e<this.x?i|=l.OUT_LEFT:e>this.x+this.width&&(i|=l.OUT_RIGHT),this.height<=0?i|=l.OUT_TOP|l.OUT_BOTTOM:t<this.y?i|=l.OUT_TOP:t>this.y+this.height&&(i|=l.OUT_BOTTOM),i}intersectsLine(e,t,i,a){let n=0,s=0;if(0===(s=this.outcode(i,a)))return!0;for(;0!==(n=this.outcode(e,t));){if(n&s)return!1;if(n&(l.OUT_LEFT|l.OUT_RIGHT)){var r=this.getX();n&l.OUT_RIGHT&&(r+=this.getWidth()),t+=(r-e)*(a-t)/(i-e),e=r}else{var o=this.getY();n&l.OUT_BOTTOM&&(o+=this.getHeight()),e+=(o-t)*(i-e)/(a-t),t=o}}return!0}setPath(e){var t=this.getX(),i=this.getY(),a=this.getWidth(),n=this.getHeight();e.moveTo(t,i),e.lineTo(t+a,i),e.lineTo(t+a,i+n),e.lineTo(t,i+n),e.closePath()}stroke(e){e.strokeRect(this.getX(),this.getY(),this.getWidth(),this.getHeight())}fill(e){e.fillRect(this.getX(),this.getY(),this.getWidth(),this.getHeight())}clone(){return new l(this.x,this.y,this.width,this.height)}toSVGElement(e,t,i){var a='<rect x="'+this.x+'" y="'+this.y;return a+='" width="'+this.width+'" height="'+this.height+'"',t?a+=' stroke-width="'+t+'"':e&&(a+=' stroke-width="2"'),e&&(a+=' stroke="'+e+'"'),(a+=i?' fill="'+i+'"':' fill="none"')+"/>"}}t.Rectangle=l},7950:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EntityCode=void 0;class i{static EntityCode_FLOT=140100;static EntityCode_BioContaminatedArea=271700;static EntityCode_ChemContaminatedArea=271800;static EntityCode_NuclearContaminatedArea=271900;static EntityCode_RadiologicalContaminatedArea=272e3;static EntityCode_BioEvent=281400;static EntityCode_ChemicalEvent=281300;static EntityCode_NuclearEvent=281500;static EntityCode_RadiologicalEvent=281700;static EntityCode_AnchoragePoint=120304;static getSymbolForContaminationArea(e){switch(e){case i.EntityCode_BioContaminatedArea:return i.EntityCode_BioEvent;case i.EntityCode_ChemContaminatedArea:return i.EntityCode_ChemicalEvent;case i.EntityCode_NuclearContaminatedArea:return i.EntityCode_NuclearEvent;case i.EntityCode_RadiologicalContaminatedArea:return i.EntityCode_RadiologicalEvent;default:return-1}}}t.EntityCode=i},8003:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MilStdSymbol=void 0;const a=i(8113),n=i(7300),s=i(6932),l=i(3254),r=i(2466),o=i(6940),c=i(1059);class T{_Properties=null;_X_Altitude=null;_AM_Distance=null;_AN_Azimuth=null;_symbolID="";_UUID="";_SymbolShapes=null;_ModifierShapes=null;_Coordinates=null;_UnitSize=50;_scale=0;_KeepUnitRatio=!0;_LineWidth=3;_LineColor=null;_FillColor=null;_TextColor=null;_TextBackgroundColor=null;_Rotation=0;_Outline=!1;_OutLineColor;_OutLineWidth=0;_tp;_fs=!0;_patternFillType=0;static _AltitudeMode="";static _AltitudeUnit;static _DistanceUnit;static _useDashArray=!0;static _hideOptionalLabels=!1;static _DrawAffiliationModifierAsLabel=!0;static _UseLineInterpolation=!1;_Tag;constructor(e,t,i,a,n=!0){this._Properties=null==a?new Map:a,this._UUID=t,this.setCoordinates(i),this.setSymbolID(e),this.setLineColor(r.SymbolUtilities.getDefaultLineColor(this._symbolID)),this.setTextColor(r.SymbolUtilities.getLineColorOfAffiliation(e)),r.SymbolUtilities.hasDefaultFill(this._symbolID)&&this.setFillColor(r.SymbolUtilities.getFillColorOfAffiliation(this._symbolID)),T._DrawAffiliationModifierAsLabel=l.RendererSettings.getInstance().getDrawAffiliationModifierAsLabel(),T._UseLineInterpolation=l.RendererSettings.getInstance().getUseLineInterpolation(),this._KeepUnitRatio=n}getFillStyle(){return this._tp}setFillStyle(e){this._tp=e}getUseFillPattern(){return this._fs}setUseFillPattern(e){this._fs=e}getPatternFillType(){return this._patternFillType}setPatternFillType(e){this._patternFillType=e}getAltitudeMode(){return T._AltitudeMode}setAltitudeMode(e){T._AltitudeMode=e}getAltitudeUnit(){return T._AltitudeUnit}setAltitudeUnit(e){T._AltitudeUnit=e}getDistanceUnit(){return T._DistanceUnit}setDistanceUnit(e){T._DistanceUnit=e}getUseDashArray(){return T._useDashArray}setUseDashArray(e){T._useDashArray=e}getHideOptionalLabels(){return T._hideOptionalLabels}setHideOptionalLabels(e){T._hideOptionalLabels=e}setUseLineInterpolation(e){T._UseLineInterpolation=e}getUseLineInterpolation(){return T._UseLineInterpolation}setUnitSize(e){this._UnitSize=e}getUnitSize(){return this._UnitSize}setKeepUnitRatio(e){this._KeepUnitRatio=e}getKeepUnitRatio(){return this._KeepUnitRatio}setDrawAffiliationModifierAsLabel(e){T._DrawAffiliationModifierAsLabel=e}getDrawAffiliationModifierAsLabel(){return T._DrawAffiliationModifierAsLabel}getModifierMap(){return this._Properties}setModifierMap(e){this._Properties=e}getModifier(...e){switch(e.length){case 1:{const[t]=e;return this._Properties.has(t)?this._Properties.get(t):this.getModifier(t,0)}case 2:{const[t,i]=e;if(this._Properties.has(t))return this._Properties.get(t);if(t===s.Modifiers.AM_DISTANCE||t===s.Modifiers.AN_AZIMUTH||t===s.Modifiers.X_ALTITUDE_DEPTH){let e=this.getModifier_AM_AN_X(t,i);return null!=e&&"null"!==e&&""!==e?e:null}return null}default:throw Error("Invalid number of arguments")}}setModifier(...e){switch(e.length){case 2:{const[t,i]=e;""!==i&&(t!==s.Modifiers.AM_DISTANCE||t===s.Modifiers.AN_AZIMUTH||t===s.Modifiers.X_ALTITUDE_DEPTH?this._Properties.set(t,i):this.setModifier(t,i,0));break}case 3:{const[t,i,a]=e;if(""!==i)if(t!==s.Modifiers.AM_DISTANCE&&t!==s.Modifiers.AN_AZIMUTH&&t!==s.Modifiers.X_ALTITUDE_DEPTH)this._Properties.set(t,i);else{let e=Number.parseFloat(i);null!=e&&this.setModifier_AM_AN_X(t,e,a)}break}default:throw Error("Invalid number of arguments")}}getModifier_AM_AN_X(e,t){let i;if(e===s.Modifiers.AM_DISTANCE)i=this._AM_Distance;else if(e===s.Modifiers.AN_AZIMUTH)i=this._AN_Azimuth;else{if(e!==s.Modifiers.X_ALTITUDE_DEPTH)return null;i=this._X_Altitude}if(null!=i&&i.length>t){let e=0;return e=i[t],null!=e?e.toString():null}return null}setModifier_AM_AN_X(e,t,i){if(e===s.Modifiers.AM_DISTANCE||e===s.Modifiers.AN_AZIMUTH||e===s.Modifiers.X_ALTITUDE_DEPTH){let a;e===s.Modifiers.AM_DISTANCE?(null==this._AM_Distance&&(this._AM_Distance=new Array),a=this._AM_Distance):e===s.Modifiers.AN_AZIMUTH?(null==this._AN_Azimuth&&(this._AN_Azimuth=new Array),a=this._AN_Azimuth):e===s.Modifiers.X_ALTITUDE_DEPTH&&(null==this._X_Altitude&&(this._X_Altitude=new Array),a=this._X_Altitude),i+1>a.length?a.push(t):a[i]=t}}getModifiers_AM_AN_X(e){return e===s.Modifiers.AM_DISTANCE?this._AM_Distance:e===s.Modifiers.AN_AZIMUTH?this._AN_Azimuth:e===s.Modifiers.X_ALTITUDE_DEPTH?this._X_Altitude:null}setModifiers_AM_AN_X(e,t){e===s.Modifiers.AM_DISTANCE?this._AM_Distance=t:e===s.Modifiers.AN_AZIMUTH?this._AN_Azimuth=t:e===s.Modifiers.X_ALTITUDE_DEPTH&&(this._X_Altitude=t)}setFillColor(e){this._FillColor=e}getFillColor(){return this._FillColor}setTextColor(e){this._TextColor=e,l.RendererSettings.getInstance().getTextBackgroundMethod()!=l.RendererSettings.TextBackgroundMethod_NONE&&null==this._TextBackgroundColor&&(this._TextBackgroundColor=new a.Color(c.RendererUtilities.getIdealOutlineColor(this._TextColor)))}getTextColor(){return this._TextColor}setTextBackgroundColor(e){this._TextBackgroundColor=e}getTextBackgroundColor(){return this._TextBackgroundColor}setLineWidth(e){this._LineWidth=e}getLineWidth(){return this._LineWidth}setLineColor(e){r.SymbolUtilities.isGreenProtectionGraphic(this.getSymbolID())?this._LineColor=o.AffiliationColors.ObstacleGreen:null!=e&&(this._LineColor=e)}getLineColor(){return this._LineColor}setOutlineColor(e){this._OutLineColor=e}getOutlineColor(){return this._OutLineColor}setTag(e){this._Tag=e}getTag(){return this._Tag}setCoordinates(e){this._Coordinates=e}getCoordinates(){return this._Coordinates}setModifierShapes(e){this._ModifierShapes=e}getModifierShapes(){return this._ModifierShapes}setSymbolShapes(e){this._SymbolShapes=e}getSymbolShapes(){return this._SymbolShapes}getSymbolID(){return this._symbolID}getUUID(){return this._UUID}setUUID(e){this._UUID=e}setSymbolID(e){let t=this._symbolID;try{null!=e&&""!==e&&t!==e&&(this._symbolID=e)}catch(e){if(!(e instanceof Error))throw e;n.ErrorLogger.LogException("MilStdSymbol","setSymbolID - Did not fall under TG or FE",e)}}_wasClipped=!1;set_WasClipped(e){this._wasClipped=e}get_WasClipped(){return this._wasClipped}}t.MilStdSymbol=T},8087:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BasicStroke=void 0;const a=i(1358),n=i(4305),s=i(1207),l=i(7389),r=i(8712),o=i(8101);class c{static JOIN_MITER=0;static JOIN_ROUND=1;static JOIN_BEVEL=2;static CAP_BUTT=0;static CAP_ROUND=1;static CAP_SQUARE=2;width;join=0;cap=0;miterlimit;dash;dash_phase;constructor(e=1,t=c.CAP_SQUARE,i=c.JOIN_MITER,a=10,n=null,s=0){if(e<0)throw Error("negative width");if(t!==c.CAP_BUTT&&t!==c.CAP_ROUND&&t!==c.CAP_SQUARE)throw Error("illegal end cap value");if(i===c.JOIN_MITER){if(a<1)throw Error("miter limit < 1")}else if(i!==c.JOIN_ROUND&&i!==c.JOIN_BEVEL)throw Error("illegal line join value");if(null!=n){if(s<0)throw Error("negative dash phase");let e=!0,t=0;null!=n&&(t=n.length);for(let i=0;i<t;i++){let t=n[i];if(t>0)e=!1;else if(t<0)throw Error("negative dash length")}if(e)throw Error("dash lengths all zero")}this.width=e,this.cap=t,this.join=i,this.miterlimit=a,null!=n&&(this.dash=n.map((e=>e))),this.dash_phase=s}createStrokedShape(e){let t,i=e.getPathIterator(null).getPoints(),n=0,s=new a.GeneralPath,l=new Array(i.length),r=i.length;for(n=0;n<r;n++)t=i[n],l[n]=t;for(i=c.GetInteriorPoints(l,i.length,o.TacticalLines.DEPTH_AREA,this.width),n=0;n<r;n++)t=i[n],0===n?s.moveTo(t.x,t.y):s.lineTo(t.x,t.y);return s}getLineWidth(){return this.width}getEndCap(){return this.cap}getLineJoin(){return this.join}getMiterLimit(){return this.miterlimit}getDashArray(){return null==this.dash?null:this.dash.map((e=>e))}getDashPhase(){return this.dash_phase}hashCode(){let e=this.width;if(e=31*e+this.join,e=31*e+this.cap,e=31*e+this.miterlimit,null!=this.dash){e=31*e+this.dash_phase;let t=this.dash.length;for(let i=0;i<t;i++)e=31*e+this.dash[i]}return e}static GetInteriorPoints(e,t,i,a){let o,c,T,u,g=0,L=-1,d=new r.ref,_=new r.ref,h=(new r.ref,new r.ref,-1),E=new Array,A=0,I=0;for(g=0;g<t;g++){let r,S,y,f;switch(0===g||g===t-1?(o=e[t-2],c=e[0],T=e[1]):(o=e[g-1],c=e[g],T=e[g+1]),L=g-1,L<0&&(L=t-1),h=n.arraysupport.GetInsideOutsideDouble2(o,c,e,t,L,i),h){case 0:r=s.lineutility.ExtendDirectedLine(o,c,o,1,a),S=s.lineutility.ExtendDirectedLine(o,c,c,1,a);break;case 1:r=s.lineutility.ExtendDirectedLine(o,c,o,0,a),S=s.lineutility.ExtendDirectedLine(o,c,c,0,a);break;case 2:r=s.lineutility.ExtendDirectedLine(o,c,o,3,a),S=s.lineutility.ExtendDirectedLine(o,c,c,3,a);break;case 3:r=s.lineutility.ExtendDirectedLine(o,c,o,2,a),S=s.lineutility.ExtendDirectedLine(o,c,c,2,a)}switch(L=g,g===t-1&&(L=0),h=n.arraysupport.GetInsideOutsideDouble2(c,T,e,t,L,i),h){case 0:y=s.lineutility.ExtendDirectedLine(c,T,c,1,a),f=s.lineutility.ExtendDirectedLine(c,T,T,1,a);break;case 1:y=s.lineutility.ExtendDirectedLine(c,T,c,0,a),f=s.lineutility.ExtendDirectedLine(c,T,T,0,a);break;case 2:y=s.lineutility.ExtendDirectedLine(c,T,c,3,a),f=s.lineutility.ExtendDirectedLine(c,T,T,3,a);break;case 3:y=s.lineutility.ExtendDirectedLine(c,T,c,2,a),f=s.lineutility.ExtendDirectedLine(c,T,T,2,a)}o.x!==c.x||c.x!==T.x?(s.lineutility.CalcTrueSlopeDouble2(r,S,d),s.lineutility.CalcTrueSlopeDouble2(y,f,_),d.value[0]!==_.value[0]?(A=S.y-d.value[0]*S.x,I=f.y-_.value[0]*f.x,u=s.lineutility.CalcTrueIntersectDouble2(d.value[0],A,_.value[0],I,1,1,0,0),E.push(u)):(u=new l.POINT2(S),E.push(u))):(u=new l.POINT2(S),E.push(u))}return E}}t.BasicStroke=c},8101:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TacticalLines=void 0,t.TacticalLines=class{static PZ=22138e3;static LZ=22137e3;static DZ=22135e3;static FAADZ=22232e3;static MEZ=22234e3;static LOMEZ=22234100;static HIMEZ=22234200;static ROZ=22231e3;static AARROZ=25171100;static UAROZ=25171200;static WEZ=25171300;static FEZ=25171400;static JEZ=25171500;static WFZ=22235e3;static EZ=22136e3;static AIRFIELD=221311e3;static BASE_CAMP_REVD=11120500;static BASE_CAMP=13120500;static GUERILLA_BASE_REVD=11120600;static GUERILLA_BASE=13120600;static HIDACZ=22233e3;static FPF=2426e4;static ENCIRCLE=22624e3;static LAA=22131e4;static DRCL=2349e4;static BYPASS=213e5;static BYDIF=23212e3;static BYIMP=23213e3;static LINTGT=2425e4;static BLOCK=211e5;static LINTGTS=24211e3;static BREACH=212e5;static CANALIZE=214e5;static MNFLDDIS=23174e3;static DISRUPT=211e6;static EASY=23211e3;static CONTAIN=216e5;static CLEAR=215e5;static ISOLATE=2114e5;static OCCUPY=2116e5;static PENETRATE=2117e5;static RETAIN=2119e5;static SECURE=2121e5;static SEIZE=2123e5;static ASLTXING=23221e3;static GAP=23163e3;static COVER=21223e4;static SCREEN=21221e4;static GUARD=21222e4;static SARA=22139e3;static FIX=2111e5;static PDF=22422e3;static ATKBYFIRE=22533e3;static SPTBYFIRE=22534e3;static CLUSTER=23157e3;static TURN=23173e3;static PLANNED=23191e3;static ESR1=23192e3;static ESR2=23193e3;static ROADBLK=23194e3;static FOXHOLE=2334e4;static PAA=2431e5;static CONVOY=25211e3;static HCONVOY=25212e3;static FORDIF=23225e3;static MSDZ=2341e4;static STRIKWARN=272101;static RETIRE=212e6;static RIP=2118e5;static TRIP=2311e5;static NAVIGATION=2622e4;static MSR=25221e3;static ASR=25222e3;static LL=22125e3;static EWL=110300;static FERRY=23223e3;static FORDSITE=23224e3;static MFLANE=23226e3;static RAFT=23227e3;static FOLSP=21121e4;static ATDITCH=23131100;static ATDITCHC=23131200;static ATWALL=23134e3;static ATDITCHM=23132e3;static DELAY=218e5;static DIRATKAIR=22522100;static DIRATKGND=22522210;static DIRATKSPT=22522220;static WITHDRAW=2124e5;static CORDONSEARCH=2125e5;static CORDONKNOCK=2126e5;static WDRAWUP=21241e4;static CFL=2422e4;static LOD=22526e3;static PL=22124e3;static FEBA=25140400;static FSCL=2421e4;static BCL_REVD=25260400;static BCL=1325260400;static ICL=25300100;static IFF_OFF=25190100;static IFF_ON=25190200;static RFL=2424e4;static FCL=22523e3;static LOA=22525e3;static BRDGHD=22623e3;static BRDGHD_GE=22623001;static PLD=22528e3;static FLOT=22122e3;static AMBUSH=22611e3;static LLTR=22225e3;static SAAFR=22223e3;static AC=22221e3;static MRR=22222e3;static SL=25170400;static TC=25170600;static SC=22224e3;static MNFLDFIX=23172e3;static MNFLDBLK=23171e3;static MSR_ONEWAY=25330301;static MSR_ALT=25330303;static MSR_TWOWAY=25330302;static ASR_ONEWAY=25330401;static ASR_ALT=25330403;static ASR_TWOWAY=25330402;static ROUTE_ONEWAY=25330501;static ROUTE_ALT=25330502;static BEARING=264e5;static BEARING_EW=220101;static BEARING_J=220107;static BEARING_RDF=220108;static ELECTRO=2641e4;static ACOUSTIC=2642e4;static ACOUSTIC_AMB=220104;static TORPEDO=2643e4;static OPTICAL=2644e4;static BOUNDARY=22121e3;static HOLD=22612e3;static HOLD_GE=22612001;static RELEASE=22613e3;static ABATIS=2312e4;static LINE=23112e3;static FOLLA=2112e5;static AIRAOA=22521200;static AAAAA=22521300;static MAIN=22521410;static MAIN_STRAIGHT=22521411;static LC=22123e3;static LC_HOSTILE=22123002;static IL=22524e3;static LDLC=22527e3;static SPT=22521420;static SPT_STRAIGHT=22521421;static CATK=217e5;static CATKBYFIRE=2171e4;static TRIPLE=231117300;static DOUBLEC=231117200;static SINGLEC=231117100;static HWFENCE=231116e3;static LWFENCE=231115e3;static UNSP=231111e3;static DOUBLEA=231114e3;static SFENCE=231112e3;static DFENCE=231113e3;static CHANNEL=231113001;static CHANNEL_FLARED=231113002;static CHANNEL_DASHED=231113003;static OVERHEAD_WIRE=232e5;static PAA_RECTANGULAR=24326100;static BATTLE=22431e3;static STRONG=2335e4;static ASSY=22132e3;static FFA=24323100;static FFA_RECTANGULAR=24323200;static FFA_CIRCULAR=24323300;static FSA=24321100;static FSA_RECTANGULAR=24321200;static FSA_CIRCULAR=24321300;static NOTACK=25200300;static RFA=24325100;static RFA_RECTANGULAR=24325200;static RFA_CIRCULAR=24325300;static PAA_CIRCULAR=24326200;static ATI=24331100;static ATI_RECTANGULAR=24331200;static ATI_CIRCULAR=24331300;static CFFZ=24332100;static CFFZ_RECTANGULAR=24332200;static CFFZ_CIRCULAR=24332300;static SENSOR=24333100;static SENSOR_RECTANGULAR=24333200;static SENSOR_CIRCULAR=24333300;static CENSOR=24334100;static CENSOR_RECTANGULAR=24334200;static CENSOR_CIRCULAR=24334300;static DA=24335100;static DA_RECTANGULAR=24335200;static DA_CIRCULAR=24335300;static CFZ=24336100;static CFZ_RECTANGULAR=24336200;static CFZ_CIRCULAR=24336300;static ZOR=24337100;static ZOR_RECTANGULAR=24337200;static ZOR_CIRCULAR=24337300;static TBA=24338100;static TBA_RECTANGULAR=24338200;static TBA_CIRCULAR=24338300;static TVAR=24339100;static TVAR_RECTANGULAR=24339200;static TVAR_CIRCULAR=24339300;static TAI=22626e3;static OBJ=22535e3;static BSA=25351e3;static DSA=25352e3;static CSA=25310800;static EA=22133e3;static NAI=22625e3;static FARP=2533e4;static FORT_REVD=22134e3;static FORT=1322134e3;static ACA=24322100;static ACA_RECTANGULAR=24322200;static ACA_CIRCULAR=24322300;static AT=2433e4;static SMOKE=24314e3;static SERIES=24313e3;static BOMB=24315e3;static DHA_REVD=2531e4;static DHA=132531e4;static EPW=2532e4;static RHA=2534e4;static RSA=25353e3;static GENERAL=22131e3;static JTAA=150501;static SAA=150502;static SGAA=150503;static PNO=22431100;static ASSAULT=22531e3;static ATKPOS=22532e3;static AO=22621e3;static AIRHEAD=22622e3;static PEN=22536e3;static DEPICT=23162e3;static MINED=23164e3;static MINE_LINE=290101;static FENCED=270801;static UXO=2318e4;static FORTL=2333e4;static OBSAREA=23115e3;static ZONE=23113e3;static OBSFAREA=23114e3;static NFA=24324100;static NFA_RECTANGULAR=24324200;static NFA_CIRCULAR=24324300;static CHEM=2346e4;static BIO=2345e4;static RAD=2344e4;static NUC=271900;static NFL=2423e4;static MFP=24225e3;static TGMF=24226e3;static RECTANGULAR=24311e3;static CIRCULAR=24312e3;static BDZ=25170800;static KILLBOXBLUE=24351e3;static KILLBOXBLUE_RECTANGULAR=24352e3;static KILLBOXBLUE_CIRCULAR=24353e3;static KILLBOXPURPLE=24361e3;static KILLBOXPURPLE_RECTANGULAR=24362e3;static KILLBOXPURPLE_CIRCULAR=24363e3;static RANGE_FAN=243111e3;static RANGE_FAN_FILL=243111001;static RANGE_FAN_SECTOR=243112e3;static LAUNCH_AREA=25200101;static DEFENDED_AREA_CIRCULAR=25200201;static DEFENDED_AREA_RECTANGULAR=25200202;static SHIP_AOI_CIRCULAR=25200401;static SHIP_AOI_RECTANGULAR=25200402;static CF=31131e3;static UCF=31131100;static CFG=31131200;static CFY=31131300;static WF=31132e3;static WFG=31132200;static WFY=31132300;static UWF=31132100;static OCCLUDED=31133e3;static UOF=31133100;static OFY=31133200;static SF=31134e3;static USF=31134100;static SFG=31134200;static SFY=31134300;static TROUGH=31141e3;static UPPER_TROUGH=45110402;static INSTABILITY=31144e3;static SHEAR=31145e3;static ITC=31146e3;static CONVERGENCE=31147e3;static ITD=31148e3;static RIDGE=31142e3;static SQUALL=31143e3;static JET=3143e4;static JET_GE=31430001;static STREAM=3144e4;static STREAM_GE=31440001;static IFR=3171e4;static MVFR=3172e4;static TURBULENCE=3173e4;static ICING=3174e4;static NON_CONVECTIVE=3175e4;static CONVECTIVE=31751e3;static FROZEN=3176e4;static THUNDERSTORMS=3177e4;static FOG=3178e4;static SAND=3179e4;static FREEFORM=3171e5;static ISOBAR=3181e4;static ISOBAR_GE=31810001;static UPPER_AIR=3182e4;static UPPER_AIR_GE=31820001;static ISOTHERM=3183e4;static ISOTHERM_GE=31830001;static ISOTACH=3184e4;static ISOTACH_GE=31840001;static ISODROSOTHERM=3185e4;static ISODROSOTHERM_GE=31850001;static ISOPLETHS=3186e4;static ISOPLETHS_GE=31860001;static OPERATOR_FREEFORM=3187e4;static LVO=32151e3;static UNDERCAST=32152e3;static LRO=32153e3;static ICE_EDGE=32154e3;static ICE_EDGE_GE=32154001;static ESTIMATED_ICE_EDGE=32155e3;static ESTIMATED_ICE_EDGE_GE=32155001;static ICE_EDGE_RADAR=32156e3;static ICE_EDGE_RADAR_GE=32156001;static CRACKS=32161e3;static CRACKS_GE=32161001;static CRACKS_SPECIFIC_LOCATION=32162e3;static CRACKS_SPECIFIC_LOCATION_GE=32162001;static ICE_OPENINGS_LEAD=32163e3;static ICE_OPENINGS_LEAD_GE=32163001;static ICE_OPENINGS_FROZEN=32164e3;static ICE_OPENINGS_FROZEN_GE=32164001;static DEPTH_CURVE=32212e3;static DEPTH_CURVE_GE=32212001;static DEPTH_CONTOUR=32213e3;static DEPTH_CONTOUR_GE=32213001;static DEPTH_AREA=32214e3;static COASTLINE=32221e3;static COASTLINE_GE=32221001;static ISLAND=32222e3;static BEACH=32223e3;static WATER=32224e3;static FORESHORE_LINE=32225100;static FORESHORE_AREA=32225200;static ANCHORAGE_LINE=32231400;static ANCHORAGE_AREA=32231500;static PIER=32231700;static PIER_GE=32231701;static FISH_TRAPS=32232400;static DRYDOCK=32233100;static LOADING_FACILITY_LINE=32233400;static LOADING_FACILITY_AREA=32233500;static RAMP_ABOVE_WATER=32233600;static RAMP_ABOVE_WATER_GE=32233601;static RAMP_BELOW_WATER=32233700;static RAMP_BELOW_WATER_GE=32233701;static JETTY_ABOVE_WATER=32234100;static JETTY_ABOVE_WATER_GE=32234101;static JETTY_BELOW_WATER=32234200;static JETTY_BELOW_WATER_GE=32234201;static SEAWALL=32234300;static SEAWALL_GE=32234301;static PERCHES=32244200;static LEADING_LINE=32246e3;static UNDERWATER_HAZARD=32253e3;static FOUL_GROUND=32254200;static KELP=32255200;static BREAKERS=32259e3;static REEF=32251e4;static DISCOLORED_WATER=322512e3;static EBB_TIDE=32272e3;static EBB_TIDE_GE=32272001;static FLOOD_TIDE=32273e3;static FLOOD_TIDE_GE=32273001;static RESTRICTED_AREA=3253e4;static PIPE=3268e4;static TRAINING_AREA=3255e4;static VDR_LEVEL_12=32311e3;static VDR_LEVEL_23=32312e3;static VDR_LEVEL_34=32313e3;static VDR_LEVEL_45=32314e3;static VDR_LEVEL_56=32315e3;static VDR_LEVEL_67=32316e3;static VDR_LEVEL_78=32317e3;static VDR_LEVEL_89=32318e3;static VDR_LEVEL_910=32319e3;static BEACH_SLOPE_FLAT=32321e3;static BEACH_SLOPE_GENTLE=32322e3;static BEACH_SLOPE_MODERATE=32323e3;static BEACH_SLOPE_STEEP=32324e3;static SOLID_ROCK=32411100;static CLAY=32411200;static VERY_COARSE_SAND=32411300;static COARSE_SAND=32411400;static MEDIUM_SAND=32411500;static FINE_SAND=32411600;static VERY_FINE_SAND=32411700;static VERY_FINE_SILT=32411800;static FINE_SILT=32411900;static MEDIUM_SILT=324111e3;static COARSE_SILT=324111100;static BOULDERS=324111200;static OYSTER_SHELLS=324111300;static PEBBLES=324111400;static SAND_AND_SHELLS=324111500;static BOTTOM_SEDIMENTS_LAND=324111600;static BOTTOM_SEDIMENTS_NO_DATA=324111700;static BOTTOM_ROUGHNESS_SMOOTH=32412100;static BOTTOM_ROUGHNESS_MODERATE=32412200;static BOTTOM_ROUGHNESS_ROUGH=32412300;static CLUTTER_LOW=32413100;static CLUTTER_MEDIUM=32413200;static CLUTTER_HIGH=32413300;static IMPACT_BURIAL_0=32414100;static IMPACT_BURIAL_10=32414200;static IMPACT_BURIAL_20=32414300;static IMPACT_BURIAL_75=32414400;static IMPACT_BURIAL_100=32414500;static BOTTOM_CATEGORY_A=32415100;static BOTTOM_CATEGORY_B=32415200;static BOTTOM_CATEGORY_C=32415300;static BOTTOM_TYPE_A1=32416100;static BOTTOM_TYPE_A2=32416200;static BOTTOM_TYPE_A3=32416300;static BOTTOM_TYPE_B1=32416400;static BOTTOM_TYPE_B2=32416500;static BOTTOM_TYPE_B3=32416600;static BOTTOM_TYPE_C1=32416700;static BOTTOM_TYPE_C2=32416800;static BOTTOM_TYPE_C3=32416900;static SWEPT_AREA=3254e4;static OIL_RIG_FIELD=3267e4;static SUBMERGED_CRIB=3262e4;static CABLE=3261e4;static MARITIME_LIMIT=3251e4;static MARITIME_AREA=3252e4;static CANAL=3263e4;static OPERATOR_DEFINED=3256e4;static RECTANGULAR_TARGET=240804;static CUED_ACQUISITION=25200600;static RADAR_SEARCH=25200700;static GENERIC_LINE=25110400;static GENERIC_AREA=25120700;static HOL=25141800;static BHL=2514190;static ROUTE=25330500;static FPOL=25344100;static RPOL=25344200}},8113:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Color=void 0;class i{static white=new i(255,255,255);static WHITE=i.white;static lightGray=new i(192,192,192);static LIGHT_GRAY=i.lightGray;static gray=new i(128,128,128);static GRAY=i.gray;static darkGray=new i(64,64,64);static DARK_GRAY=i.darkGray;static black=new i(0,0,0);static BLACK=i.black;static red=new i(255,0,0);static RED=i.red;static pink=new i(255,175,175);static PINK=i.pink;static orange=new i(255,128,0);static ORANGE=i.orange;static yellow=new i(255,255,0);static YELLOW=i.yellow;static green=new i(0,255,0);static GREEN=i.green;static magenta=new i(255,0,255);static MAGENTA=i.magenta;static cyan=new i(0,255,255);static CYAN=i.cyan;static blue=new i(0,0,255);static BLUE=i.blue;_A=255;_R=0;_G=0;_B=0;getColorsFromHexString(e){try{if(null==e||0===e.length)return null;let t=e,i="0123456789ABCDEF";"#"===e.charAt(0)&&(e=e.substring(1)),"0x"!==e.substring(0,2)&&"0X"!==e.substring(0,2)||(e=e.substring(2));let a,n=(e=e.toUpperCase()).length,s=0,l=0,r=0;if(8===n||6===n){a=new Array(n/2);for(let o=0;o<n;o+=2){if(l=i.indexOf(e.charAt(o)),r=i.indexOf(e.charAt(o+1)),-1===l||-1===r)throw Error("Bad hex value: "+t);a[s]=16*l+r,s++}return a}throw Error("Bad hex value: "+e)}catch(t){throw t instanceof Error?Error("Bad hex value: "+e):t}return null}constructor(...e){switch(e.length){case 1:if(e[0]instanceof i){const[t]=e;null!=t?(this._A=t.getAlpha(),this._R=t.getRed(),this._G=t.getGreen(),this._B=t.getBlue()):(this._A=255,this._R=0,this._G=0,this._B=0)}else if("string"==typeof e[0]){const[t]=e;let i=this.getColorsFromHexString(t);null==i||4!==i.length&&3!==i.length||(4===i.length?(this._A=i[0],this._R=i[1],this._G=i[2],this._B=i[3]):(this._A=255,this._R=i[0],this._G=i[1],this._B=i[2]))}else if("number"==typeof e[0]){const[t]=e;this._A=this.getAlphaFromColor(t),this._R=this.getRedFromColor(t),this._G=this.getGreenFromColor(t),this._B=this.getBlueFromColor(t)}else this._A=255,this._R=0,this._G=0,this._B=0;break;case 3:{const[t,i,a]=e;this._A=255,this._R=t,this._G=i,this._B=a;break}case 4:{const[t,i,a,n]=e;this._A=n,this._R=t,this._G=i,this._B=a;break}case 0:this._A=255,this._R=0,this._G=0,this._B=0;break;default:throw new Error("Color() - Invalid number of arguments")}}static makeColor(e,t,a){let n=null;try{n=new i(e,t,a)}catch(e){console.log(e.message)}return n}toRGB(){return 65536*this._R+256*this._G+this._B}toARGB(){let e=0;return e=(this._A<<24)+((255&this._R)<<16)+((255&this._G)<<8)+(255&this._B),e}convert(e){var t="0123456789ABCDEF";return isNaN(e)?"00":t.charAt((e-e%16)/16)+t.charAt(e%16)}toHexString(e=!1){return!1===e?"#"+this.convert(this._R)+this.convert(this._G)+this.convert(this._B):"#"+this.convert(this._A)+this.convert(this._R)+this.convert(this._G)+this.convert(this._B)}toString(){return"Color{A="+this._A.toString()+",R="+this._R.toString()+",G="+this._G.toString()+",B="+this._B.toString()+"}"}getRed(){return this._R}getGreen(){return this._G}getBlue(){return this._B}getAlpha(){return this._A}setAlpha(e){this._A=e}toInt(){return this.toARGB()}getAlphaFromColor(e){let t=255;return e>16777215&&(t=e>>>24),t}getRedFromColor(e){let t=255;return t=e>>16&255,t}getGreenFromColor(e){let t=255;return t=e>>8&255,t}getBlueFromColor(e){let t=255;return t=255&e,t}}t.Color=i},8262:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CELineArray=void 0;const a=i(4305),n=i(8485),s=i(8443),l=i(2864),r=i(1207),o=i(7389),c=i(8101),T=i(7300),u=i(106);class g{static _className="CELineArray";static CGetLineCountDouble(e,t,i,L){let d=0;try{let T=0,u=0,g=0,_=new Array(i),h=new Array(i),E=new Array(i),A=(new Array(2*i+2),0);if(i<=0)return-1;for(r.lineutility.InitializePOINT2Array(_),r.lineutility.InitializePOINT2Array(E),r.lineutility.InitializePOINT2Array(h),A=0;A<i;A++)_[A].x=t[T],T++,_[A].y=t[T],T++;for(A=0;A<i;A++)h[A]=new o.POINT2(_[A]),E[A]=new o.POINT2(_[A]);switch(e.get_LineType()){case c.TacticalLines.CHANNEL:case c.TacticalLines.CHANNEL_FLARED:case c.TacticalLines.CHANNEL_DASHED:d=2*i;break;case c.TacticalLines.MAIN:case c.TacticalLines.MAIN_STRAIGHT:case c.TacticalLines.AIRAOA:case c.TacticalLines.SPT:case c.TacticalLines.SPT_STRAIGHT:case c.TacticalLines.CATK:d=2*i+8;break;case c.TacticalLines.CATKBYFIRE:d=2*i+17;break;case c.TacticalLines.AAAAA:d=2*i+19;break;case c.TacticalLines.LC:E=n.Channels.GetChannelArray2Double(1,E,1,i,e.get_LineType(),L),h=n.Channels.GetChannelArray2Double(1,h,0,i,e.get_LineType(),L),g=l.flot.GetFlotCountDouble(E,a.arraysupport.getScaledSize(20,e.get_LineThickness()),i),u=l.flot.GetFlotCountDouble(h,a.arraysupport.getScaledSize(20,e.get_LineThickness()),i),d=g+u;break;default:d=s.countsupport.GetCountersDouble(e,i,_,null)}}catch(t){if(!(t instanceof Error))throw t;T.ErrorLogger.LogException(g._className,"CGetLineCountDouble",new u.RendererException("Failed inside CGetLineCount "+e.get_LineType().toString(),t))}return d}static CIsChannel(e){let t=0;try{switch(e){case c.TacticalLines.CATK:case c.TacticalLines.CATKBYFIRE:case c.TacticalLines.LC:case c.TacticalLines.AIRAOA:case c.TacticalLines.AAAAA:case c.TacticalLines.MAIN:case c.TacticalLines.MAIN_STRAIGHT:case c.TacticalLines.SPT:case c.TacticalLines.SPT_STRAIGHT:case c.TacticalLines.UNSP:case c.TacticalLines.SFENCE:case c.TacticalLines.DFENCE:case c.TacticalLines.DOUBLEA:case c.TacticalLines.LWFENCE:case c.TacticalLines.HWFENCE:case c.TacticalLines.SINGLEC:case c.TacticalLines.DOUBLEC:case c.TacticalLines.TRIPLE:case c.TacticalLines.CHANNEL:case c.TacticalLines.CHANNEL_FLARED:case c.TacticalLines.CHANNEL_DASHED:t=1;break;default:t=0}}catch(t){if(!(t instanceof Error))throw t;T.ErrorLogger.LogException(g._className,"CIsChannel",new u.RendererException("Failed inside CIsChannel "+e.toString(),t))}return t}static _client="";static setClient(e){g._client=e,n.Channels.setClient(e)}static getClient(){return g._client}}t.CELineArray=g},8276:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayout=void 0;const a=i(1358),n=i(7940);t.TextLayout=class{_font;_str="";constructor(e,t,i){this._font=t,this._str=e}getOutline(e){return new a.GeneralPath}getPixelBounds(e,t,i){return null}getBounds(){let e=this._font.getSize()/2*this._str.length,t=this._font.getSize();return new n.Rectangle(0,0,e,t)}}},8443:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.countsupport=void 0;const a=i(4305),n=i(2864),s=i(1207),l=i(7389),r=i(8101),o=i(7300),c=i(106),T=i(3254),u=i(8485);class g{static maxLength=100;static minLength=2.5;static _className="countsupport";static GetCountersDouble(e,t,i,T){let L=0;try{let o,c,d=e.get_LineType(),_=0,h=t,E=new Array(4),A=0,I=new Array(2);for(o=new Array(t),c=new Array(t),_=0;_<t;_++)o[_]=new l.POINT2(i[_]),c[_]=new l.POINT2(i[_]);switch(s.lineutility.InitializePOINT2Array(I),s.lineutility.InitializePOINT2Array(E),d){case r.TacticalLines.OVERHEAD_WIRE:L=15*t;break;case r.TacticalLines.REEF:L=t=g.GetReefCount(i,a.arraysupport.getScaledSize(40,e.get_LineThickness()),h);break;case r.TacticalLines.RESTRICTED_AREA:L=t=g.GetRestrictedAreaCount(i,a.arraysupport.getScaledSize(15,e.get_LineThickness()),h);break;case r.TacticalLines.TRAINING_AREA:L=t+=30;break;case r.TacticalLines.PIPE:L=g.GetPipeCount(i,a.arraysupport.getScaledSize(20,e.get_LineThickness()),h);break;case r.TacticalLines.ANCHORAGE_AREA:case r.TacticalLines.ANCHORAGE_LINE:L=n.flot.GetAnchorageCountDouble(i,a.arraysupport.getScaledSize(20,e.get_LineThickness()),t);break;case r.TacticalLines.LRO:L=g.GetXPointsCount(i,a.arraysupport.getScaledSize(30,e.get_LineThickness()),t)+g.GetLVOCount(i,a.arraysupport.getScaledSize(30,e.get_LineThickness()),t);break;case r.TacticalLines.LVO:L=g.GetLVOCount(i,a.arraysupport.getScaledSize(20,e.get_LineThickness()),t);break;case r.TacticalLines.ICING:L=t=g.GetIcingCount(i,a.arraysupport.getScaledSize(15,e.get_LineThickness()),t);break;case r.TacticalLines.FLOT:case r.TacticalLines.MVFR:case r.TacticalLines.UNDERCAST:h=t,L=t=n.flot.GetFlotCountDouble(i,a.arraysupport.getScaledSize(20,e.get_LineThickness()),t);break;case r.TacticalLines.ITD:L=t=g.GetITDQty(i,a.arraysupport.getScaledSize(15,e.get_LineThickness()),t)+t;break;case r.TacticalLines.CONVERGENCE:L=t=g.GetConvergenceQty(i,a.arraysupport.getScaledSize(10,e.get_LineThickness()),t)+t;break;case r.TacticalLines.RIDGE:L=t=g.GetFORTLCountDouble(e,i,h);break;case r.TacticalLines.TROUGH:case r.TacticalLines.UPPER_TROUGH:case r.TacticalLines.INSTABILITY:case r.TacticalLines.SHEAR:L=t=g.GetSquallQty(i,6,a.arraysupport.getScaledSize(30,e.get_LineThickness()),h);break;case r.TacticalLines.CABLE:L=t=g.GetSquallQty(i,6,a.arraysupport.getScaledSize(20,e.get_LineThickness()),h);break;case r.TacticalLines.SQUALL:L=t=g.GetSquallQty(i,5,a.arraysupport.getScaledSize(30,e.get_LineThickness()),h)+2*h;break;case r.TacticalLines.USF:case r.TacticalLines.SFG:case r.TacticalLines.SFY:case r.TacticalLines.SF:L=t=n.flot.GetSFCountDouble(i,t);break;case r.TacticalLines.OFY:h=t,L=t=n.flot.GetOFYCountDouble(i,a.arraysupport.getScaledSize(80,e.get_LineThickness()),t);break;case r.TacticalLines.UCF:case r.TacticalLines.CF:case r.TacticalLines.CFG:case r.TacticalLines.CFY:L=g.GetFORTLCountDouble(e,i,h),L+=h;break;case r.TacticalLines.FOLLA:case r.TacticalLines.FOLSP:L=16;break;case r.TacticalLines.ROADBLK:case r.TacticalLines.FERRY:L=8;break;case r.TacticalLines.NAVIGATION:case r.TacticalLines.IL:case r.TacticalLines.PLANNED:case r.TacticalLines.ESR1:case r.TacticalLines.ESR2:case r.TacticalLines.FORDSITE:case r.TacticalLines.FOXHOLE:L=4;break;case r.TacticalLines.TRIP:L=35;break;case r.TacticalLines.AMBUSH:L=53;break;case r.TacticalLines.CLUSTER:L=28;break;case r.TacticalLines.CONTAIN:L=40;break;case r.TacticalLines.BYIMP:L=18;break;case r.TacticalLines.SPTBYFIRE:L=16;break;case r.TacticalLines.BLOCK:case r.TacticalLines.MNFLDBLK:L=4;break;case r.TacticalLines.PAA_RECTANGULAR:L=5;break;case r.TacticalLines.RECTANGULAR_TARGET:L=9;break;case r.TacticalLines.PENETRATE:L=7;break;case r.TacticalLines.ASLTXING:case r.TacticalLines.GAP:case r.TacticalLines.BYPASS:case r.TacticalLines.EASY:case r.TacticalLines.BREACH:case r.TacticalLines.CANALIZE:L=12;break;case r.TacticalLines.MNFLDDIS:L=22;break;case r.TacticalLines.WITHDRAW:case r.TacticalLines.WDRAWUP:case r.TacticalLines.DELAY:case r.TacticalLines.RETIRE:case r.TacticalLines.FPOL:case r.TacticalLines.RPOL:L=23;break;case r.TacticalLines.SEIZE:L=37;break;case r.TacticalLines.RIP:L=29;break;case r.TacticalLines.DIRATKSPT:case r.TacticalLines.ABATIS:L=t+3;break;case r.TacticalLines.FPF:case r.TacticalLines.LINTGT:case r.TacticalLines.LINTGTS:L=t+4;break;case r.TacticalLines.CHANNEL:case r.TacticalLines.CHANNEL_FLARED:case r.TacticalLines.CHANNEL_DASHED:L=2*t;break;case r.TacticalLines.SARA:L=16;break;case r.TacticalLines.COVER:case r.TacticalLines.SCREEN:case r.TacticalLines.GUARD:case r.TacticalLines.PDF:case r.TacticalLines.ATKBYFIRE:L=14;break;case r.TacticalLines.RAFT:case r.TacticalLines.MFLANE:L=8;break;case r.TacticalLines.DIRATKGND:L=t+10;break;case r.TacticalLines.DIRATKAIR:L=t+9;break;case r.TacticalLines.DISRUPT:case r.TacticalLines.CLEAR:L=20;break;case r.TacticalLines.MSDZ:L=300;break;case r.TacticalLines.CONVOY:case r.TacticalLines.HCONVOY:L=10;break;case r.TacticalLines.ISOLATE:case r.TacticalLines.CORDONKNOCK:case r.TacticalLines.CORDONSEARCH:L=50;break;case r.TacticalLines.OCCUPY:L=32;break;case r.TacticalLines.SECURE:L=29;break;case r.TacticalLines.RETAIN:L=75;break;case r.TacticalLines.TURN:L=29;break;case r.TacticalLines.AIRFIELD:L=t+5;break;case r.TacticalLines.FENCED:L=t;break;case r.TacticalLines.MSR_ALT:case r.TacticalLines.ASR_ALT:case r.TacticalLines.ROUTE_ALT:L=9*t;break;case r.TacticalLines.MSR_TWOWAY:case r.TacticalLines.ASR_TWOWAY:L=11*t;break;case r.TacticalLines.MSR_ONEWAY:case r.TacticalLines.ASR_ONEWAY:case r.TacticalLines.ROUTE_ONEWAY:L=6*t;break;case r.TacticalLines.WF:case r.TacticalLines.UWF:t=n.flot.GetFlotCount2Double(e,i,t),L=t+=h;break;case r.TacticalLines.WFG:case r.TacticalLines.WFY:L=t=n.flot.GetFlotCount2Double(e,i,t);break;case r.TacticalLines.FORDIF:{A=s.lineutility.CalcDistanceToLineDouble(i[0],i[1],i[2]);let t=a.arraysupport.getScaledSize(10,e.get_LineThickness());if(L=Math.trunc(A/(t/2)*3)+6,null!=T){let e=T.getWidth(),i=T.getHeight();A=Math.sqrt(e*e+i*i),L=Math.trunc(A/(t/2))+6}break}case r.TacticalLines.ATDITCH:case r.TacticalLines.ATDITCHC:case r.TacticalLines.ATDITCHM:L=g.GetDitchCountDouble(i,h,d);break;case r.TacticalLines.CATK:case r.TacticalLines.MAIN:case r.TacticalLines.MAIN_STRAIGHT:case r.TacticalLines.AIRAOA:case r.TacticalLines.SPT:case r.TacticalLines.SPT_STRAIGHT:L=2*t+8;break;case r.TacticalLines.CATKBYFIRE:L=2*t+17;break;case r.TacticalLines.AAAAA:L=2*t+19;break;case r.TacticalLines.LLTR:case r.TacticalLines.SAAFR:case r.TacticalLines.AC:case r.TacticalLines.SC:case r.TacticalLines.MRR:case r.TacticalLines.SL:case r.TacticalLines.TC:L=(t=6*(h-1))+26*h*2;break;case r.TacticalLines.ATWALL:case r.TacticalLines.LINE:case r.TacticalLines.OBSAREA:case r.TacticalLines.OBSFAREA:case r.TacticalLines.STRONG:case r.TacticalLines.ZONE:case r.TacticalLines.ENCIRCLE:case r.TacticalLines.FORT_REVD:case r.TacticalLines.FORT:case r.TacticalLines.FORTL:L=g.GetFORTLCountDouble(e,i,h);break;case r.TacticalLines.TRIPLE:case r.TacticalLines.DOUBLEC:case r.TacticalLines.SINGLEC:case r.TacticalLines.HWFENCE:case r.TacticalLines.LWFENCE:case r.TacticalLines.UNSP:case r.TacticalLines.DOUBLEA:case r.TacticalLines.SFENCE:case r.TacticalLines.DFENCE:L=u.Channels.GetTripleCountDouble(i,t,d);break;case r.TacticalLines.LC:o=u.Channels.GetChannelArray2Double(1,o,1,t,d,Math.trunc(a.arraysupport.getScaledSize(20,e.get_LineThickness()))),c=u.Channels.GetChannelArray2Double(1,c,0,t,d,Math.trunc(a.arraysupport.getScaledSize(20,e.get_LineThickness()))),L=n.flot.GetFlotCountDouble(o,a.arraysupport.getScaledSize(20,e.get_LineThickness()),t)+n.flot.GetFlotCountDouble(c,a.arraysupport.getScaledSize(20,e.get_LineThickness()),t);break;case r.TacticalLines.OCCLUDED:case r.TacticalLines.UOF:h=t,t=n.flot.GetOccludedCountDouble(i,t),L=t+=h;break;case r.TacticalLines.FIX:case r.TacticalLines.MNFLDFIX:L=i.length>1?g.GetDISMFixCountDouble(i[0],i[1],T):0;break;case r.TacticalLines.BYDIF:if(null!=T){g.GetByDifSegment(i,I);let e=new l.POINT2(T.getMinX(),T.getMinY()),t=new l.POINT2(T.getMaxX(),T.getMaxY()),a=s.lineutility.BoundOneSegment(I[0],I[1],e,t);L=null!=a?g.GetDISMFixCountDouble(a[0],a[1],T):20}else L=g.GetDISMFixCountDouble(i[0],i[1],T);break;default:L=t}}catch(t){if(!(t instanceof Error))throw t;o.ErrorLogger.LogException(g._className,"GetCountersDouble",new c.RendererException("Failed inside GetCountersDouble "+e.get_LineType().toString(),t))}return Math.trunc(L)}static GetReefCount(e,t,i){let a=0;try{let n=0;for(let l=0;l<i-1;l++)n=s.lineutility.CalcDistanceDouble(e[l],e[l+1]),a+=5*Math.trunc(n/t);a+=2*i}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(g._className,"GetReefCount",new c.RendererException("Failed inside GetReefCount",e))}return a}static GetRestrictedAreaCount(e,t,i){let a=0;try{let n=0;for(let l=0;l<i-1;l++)n=s.lineutility.CalcDistanceDouble(e[l],e[l+1]),a+=4*Math.trunc(n/t);a+=2*i}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(g._className,"GetRestrictedAreaCount",new c.RendererException("Failed inside GetRestrictedAreaCount",e))}return a}static GetPipeCount(e,t,i){let a=0;try{let n=0;for(let l=0;l<i-1;l++)n=s.lineutility.CalcDistanceDouble(e[l],e[l+1]),a+=3*Math.trunc(n/t);a+=2*i}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(g._className,"GetPipeCount",new c.RendererException("Failed inside GetPipeCount",e))}return a}static GetXPointsCount(e,t,i){let a=0;try{let n=0,l=0,r=0;for(n=0;n<i-1;n++)l=s.lineutility.CalcDistanceDouble(e[n],e[n+1]),r=Math.trunc((l-t/2)/t),a+=4*r}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(g._className,"GetXPointsCount",new c.RendererException("Failed inside GetXPointsCount",e))}return a}static GetLVOCount(e,t,i){let a=0;try{let n=0,l=0,r=0;for(r=0;r<i-1;r++)n=s.lineutility.CalcDistanceDouble(e[r],e[r+1]),l=Math.trunc((n-t)/t)+1,a+=37*l}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(g._className,"GetLVOCount",new c.RendererException("Failed inside GetLVOCount",e))}return a}static GetIcingCount(e,t,i){let a=2*i;try{let n=0;for(let l=0;l<i-1;l++)n=s.lineutility.CalcDistanceDouble(e[l],e[l+1]),n=n/t*4,a+=n}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(g._className,"GetIcingCount",new c.RendererException("Failed inside GetIcingCount",e))}return a}static GetITDQty(e,t,i){let a=0;try{let n=0,l=0,r=0;for(n=0;n<i-1;n++)l=s.lineutility.CalcDistanceDouble(e[n],e[n+1]),r=2*Math.trunc(l/t),r<2&&(r=2),a+=r}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(g._className,"GetITDQty",new c.RendererException("Failed inside GetITDQty",e))}return a}static GetConvergenceQty(e,t,i){let a=i;try{let n=0,l=0;for(n=0;n<i-1;n++)l=s.lineutility.CalcDistanceDouble(e[n],e[n+1]),a+=4*Math.trunc(l/t)}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(g._className,"GetConvergenceQty",new c.RendererException("Failed inside GetConvergenceQty",e))}return a}static GetDitchCountDouble(e,t,i){let a=0;try{let n=0,l=0,o=0;for(a=t,n=0;n<t-1;n++)o=s.lineutility.CalcDistanceDouble(e[n],e[n+1]),l=Math.trunc((o-1)/12),o>24?i===r.TacticalLines.ATDITCHM?a+=5*l+1:a+=4*l:a+=2}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(g._className,"GetDitchcountDouble",new c.RendererException("Failed inside GetDitchCountDouble "+i.toString(),e))}return a}static GetSquallQty(e,t,i,a){let n=0;try{let l=0,r=0,o=0;for(l=0;l<a-1;l++)r=s.lineutility.CalcDistanceDouble(e[l],e[l+1]),o=Math.trunc(r/i),n+=o*t,0===o&&(n+=2);n<a&&(n=a)}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(g._className,"GetSquallQty",new c.RendererException("Failed inside GetSquallQty",e))}return n}static GetSquallSegQty(e,t,i,a){let n=0;try{let l=s.lineutility.CalcDistanceDouble(e,t);n=Math.trunc(l/a)*i}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(g._className,"GetSquallSegQty",new c.RendererException("Failed inside GetSquallSegQty",e))}return n}static GetFORTLCountDouble(e,t,i){let n=0;try{let l=0,o=0,c=0;switch(e.get_LineType()){case r.TacticalLines.UCF:case r.TacticalLines.CF:case r.TacticalLines.CFG:case r.TacticalLines.CFY:c=a.arraysupport.getScaledSize(60,e.get_LineThickness());break;case r.TacticalLines.RIDGE:default:c=a.arraysupport.getScaledSize(20,e.get_LineThickness())}for(l=0;l<i-1;l++){switch(o=s.lineutility.CalcDistanceDouble(t[l],t[l+1]),e.get_LineType()){case r.TacticalLines.CFG:o=o/c*13;break;case r.TacticalLines.CFY:o=o/c*17;break;default:o=o/c*10}o<4&&(o=4),n+=Math.trunc(o)}n+=10+i}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(g._className,"GetFORTLCountDouble",new c.RendererException("Failed inside GetFORTLCountDouble",e))}return n}static GetByDifSegment(e,t){try{let i=new l.POINT2;null==t&&(t=new Array(2),s.lineutility.InitializePOINT2Array(t)),i.x=(e[0].x+e[1].x)/2,i.y=(e[0].y+e[1].y)/2,t[0].x=e[0].x-i.x+e[2].x,t[0].y=e[0].y-i.y+e[2].y,t[1].x=e[1].x-i.x+e[2].x,t[1].y=e[1].y-i.y+e[2].y}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(g._className,"GetByDifSegment",new c.RendererException("Failed inside GetByDifSegment",e))}}static GetDISMFixCountDouble(e,t,i){let a=0;try{let n=new Array(2),r=0,o=0,c=0,u=0;if(n[0]=new l.POINT2(e),n[1]=new l.POINT2(t),null!=i){let a=new l.POINT2(i.getMinX(),i.getMinY()),r=new l.POINT2(i.getMaxX(),i.getMaxY());n=s.lineutility.BoundOneSegment(e,t,a,r)}if(null==n)return 0;r=Math.sqrt((n[1].x-n[0].x)*(n[1].x-n[0].x)+(n[1].y-n[0].y)*(n[1].y-n[0].y)),o=r/15;let L=T.RendererSettings.getInstance().getDeviceDPI()/96;o>g.maxLength*L&&(o=g.maxLength*L),o<g.minLength*L&&(o=g.minLength*L),c=o/1.5,u=Math.trunc(r/c)-3,u<0&&(u=0),n=null,a=20+3*u}catch(e){if(!(e instanceof Error))throw e;o.ErrorLogger.LogException(g._className,"GetDISMFixCount",new c.RendererException("Failed inside GetDISMFixCount",e))}return a}}t.countsupport=g},8485:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Channels=void 0;const a=i(4305),n=i(3694),s=i(2864),l=i(1207),r=i(7389),o=i(8712),c=i(5772),T=i(8101),u=i(8113),g=i(7300),L=i(106),d=i(3254);class _{static maxLength=100;static minLength=5;static _className="Channels";static _client="";static setClient(e){_._client=e}static _shiftLines=!0;static getShiftLines(){return _._shiftLines}static ConnectArrayTrueDouble(e,t,i,a){try{let s=0,l=0,o=0,c=0,T=0,u=0,g=0,L=new r.POINT2(i[0]),d=new r.POINT2(i[0]),h=new r.POINT2(i[0]),E=new n.CChannelPoints2;for(L=new r.POINT2(i[0]),d=new r.POINT2(i[1]),l=d.x-L.x,c=d.y-L.y,0===l&&(c>0&&(u=6),c<0&&(u=4)),0===c&&(l>0&&(u=0),l<0&&(u=2)),l<0&&c>0&&(u=3),l>0&&c>0&&(u=0),l<0&&c<0&&(u=3),l>0&&c<0&&(u=0),E=_.GetTrueEndPointDouble(e,i[0],i[1],u),a[0]=new n.CChannelPoints2(E),s=1;s<t;s++){if(L=new r.POINT2(i[s-1]),d=new r.POINT2(i[s]),h=new r.POINT2(i[s+1]),l=d.x-L.x,o=h.x-d.x,c=d.y-L.y,T=h.y-d.y,l>0&&o>0)switch(u){case 0:case 3:case 4:case 7:g=0;break;case 1:case 2:case 5:case 6:g=3}if(l>0&&0===o)switch(u){case 0:case 3:case 4:case 7:T>0&&(g=1),T<0&&(g=0);break;case 1:case 2:case 5:case 6:T>0&&(g=2),T<0&&(g=3)}if(l<0&&0===o)switch(u){case 0:case 3:case 4:case 7:T>0&&(g=3),T<0&&(g=2);break;case 1:case 2:case 5:case 6:T>0&&(g=0),T<0&&(g=1)}if(0===l&&o>0)switch(u){case 0:case 3:case 4:case 7:c>0&&(g=2),c<0&&(g=0);break;case 1:case 2:case 5:case 6:c>0&&(g=1),c<0&&(g=3)}if(0===l&&o<0)switch(u){case 0:case 3:case 4:case 7:c>0&&(g=3),c<0&&(g=1);break;case 1:case 2:case 5:case 6:c>0&&(g=0),c<0&&(g=2)}if(l<0&&o<0)switch(u){case 0:case 3:case 4:case 7:g=3;break;case 1:case 2:case 5:case 6:g=0}if(l>0&&o<0)switch(u){case 0:case 3:case 4:case 7:g=1;break;case 1:case 2:case 5:case 6:g=2}if(l<0&&o>0)switch(u){case 0:case 3:case 4:case 7:g=2;break;case 1:case 2:case 5:case 6:g=1}if(0===l&&0===o)switch(u){case 4:T<0&&(g=0);break;case 6:T>0&&(g=0);break;case 5:T<0&&(g=3);break;case 7:T>0&&(g=3)}if(a[s]=_.ConnectTrueDouble2(e,L,d,h,g),0===o)switch(g){case 0:case 2:T>0&&(u=6),T<0&&(u=4);break;case 1:case 3:T>0&&(u=7),T<0&&(u=5)}if(o>0)switch(g){case 0:case 2:u=0;break;case 1:case 3:u=1}if(o<0)switch(g){case 0:case 2:u=2;break;case 1:case 3:u=3}}E=_.GetTrueEndPointDouble(e,i[t],i[t-1],u),a[t]=new n.CChannelPoints2(E)}catch(e){if(!(e instanceof Error))throw e;g.ErrorLogger.LogException(_._className,"ConnectArrayTrueDouble",new L.RendererException("Failed inside ConnectArrayTrueDouble",e))}return a}static GetChannel2Double(e,t,i,a){try{a=_.ConnectArrayTrueDouble(Math.trunc(e/2),Math.trunc(t)-1,i,a)}catch(e){if(!(e instanceof Error))throw e;g.ErrorLogger.LogException(_._className,"GetChannel2Double",new L.RendererException("Failed inside GetChannel2Double",e))}return a}static GetLowerChannelLineDouble(e,t,i){try{let a=0;for(a=0;a<t;a++)i[a]=new r.POINT2(e[a].m_Line1)}catch(e){if(!(e instanceof Error))throw e;g.ErrorLogger.LogException(_._className,"GetLowerChannelLineDouble",new L.RendererException("GetLowerChannelLineDouble",e))}return i}static GetUpperChannelLineDouble(e,t,i){try{let a=0;for(a=0;a<t;a++)i[a]=new r.POINT2(e[a].m_Line2)}catch(e){if(!(e instanceof Error))throw e;g.ErrorLogger.LogException(_._className,"GetUpperChannelLineDouble",new L.RendererException("Failed inside GetUpperChannelLineDouble",e))}return i}static FenceType(e){let t=0;try{switch(e){case T.TacticalLines.TRIPLE:case T.TacticalLines.DOUBLEC:case T.TacticalLines.SINGLEC:case T.TacticalLines.HWFENCE:case T.TacticalLines.LWFENCE:case T.TacticalLines.UNSP:case T.TacticalLines.DOUBLEA:case T.TacticalLines.SFENCE:case T.TacticalLines.DFENCE:t=1;break;default:t=0}}catch(t){if(!(t instanceof Error))throw t;g.ErrorLogger.LogException(_._className,"FenceType",new L.RendererException("Failed inside FenceType "+e.toString(),t))}return t}static GetTripleCountDouble(e,t,i){let a=0;try{let n=0,s=0,r=0;for(n=0;n<t-1;n++)r=l.lineutility.CalcDistanceDouble(e[n],e[n+1]),s=r<=10?0:Math.trunc((r-10)/10),a+=s;switch(i){case T.TacticalLines.SINGLEC:case T.TacticalLines.DOUBLEC:case T.TacticalLines.TRIPLE:a=6*t+37*a;break;case T.TacticalLines.HWFENCE:case T.TacticalLines.LWFENCE:case T.TacticalLines.UNSP:case T.TacticalLines.DOUBLEA:case T.TacticalLines.SFENCE:case T.TacticalLines.DFENCE:a=4*t+4*a;break;default:a=2*t}}catch(e){if(!(e instanceof Error))throw e;g.ErrorLogger.LogException(_._className,"GetTripleCountDouble",new L.RendererException("Failed inside GetTripleCountDouble "+i.toString(),e))}return a}static CoordIL2Double(e,t,i,a,n,s){let o=new Array(a);try{let c=0,u=20,g=new Array(a),L=new Array(a);for(l.lineutility.InitializePOINT2Array(o),c=0;c<a;c++)g[c]=new r.POINT2(t[c]);if(u=s,n!==T.TacticalLines.LC&&n!==T.TacticalLines.LC_HOSTILE&&(u/=2),L=_.GetChannel2Double(u*e,a,g,L),1===i)for(g=_.GetUpperChannelLineDouble(L,a,g),c=0;c<a;c++)o[c]=new r.POINT2(g[c]);if(0===i)for(g=_.GetLowerChannelLineDouble(L,a,g),c=0;c<a;c++)o[c]=new r.POINT2(g[c])}catch(e){if(!(e instanceof Error))throw e;g.ErrorLogger.LogException(_._className,"CoordIL2Double",new L.RendererException("Failed inside CoordIL2Double",e))}return o}static GetAXADDouble(e,t,i,a,n,s,o,c,u){try{let g=0,L=i+n+8,d=0,_=0,h=new r.POINT2(a[0]),E=new r.POINT2(a[0]),A=new r.POINT2(a[0]),I=new r.POINT2(a[0]),S=new r.POINT2,y=new r.POINT2,f=new r.POINT2(s),D=new r.POINT2(a[n-1]),M=new r.POINT2(t[i-1]),P=l.lineutility.CalcDistanceDouble(t[i-1],t[i-2]);if(c===T.TacticalLines.CATKBYFIRE&&P>45){let e=l.lineutility.MidPointDouble(t[i-2],a[n-2],0);s=l.lineutility.ExtendAlongLineDouble(s,e,45),t[i-1]=l.lineutility.ExtendAlongLineDouble(t[i-1],t[i-2],45),a[n-1]=l.lineutility.ExtendAlongLineDouble(a[n-1],a[n-2],45)}for(g=0;g<i;g++)o[g]=new r.POINT2(t[g]);for(o[i-1].style=5,g=0;g<n;g++)o[i+g]=new r.POINT2(a[g]);for(g=L-8;g<L;g++)o[g]=new r.POINT2(a[0]);switch(A.x=Math.trunc((t[i-1].x+a[n-1].x)/2),A.y=Math.trunc((t[i-1].y+a[n-1].y)/2),d=t[i-1].x-a[n-1].x,_=t[i-1].y-a[n-1].y,d*=d,_*=_,h=new r.POINT2(s),E=l.lineutility.GetOffsetPointDouble(A,h,-Math.trunc(u*e)),o[L-9].style=5,o[L-8]=new r.POINT2(h),S.x=a[n-1].x,S.y=a[n-1].y,y.x=t[i-1].x,y.y=t[i-1].y,I=l.lineutility.GetOffsetPointDouble(S,y,Math.trunc(u*e)),o[L-7]=new r.POINT2(I),o[L-6]=new r.POINT2(t[i-1]),o[L-5]=new r.POINT2(E),o[L-4]=new r.POINT2(a[n-1]),S.x=t[i-1].x,S.y=t[i-1].y,y.x=a[n-1].x,y.y=a[n-1].y,I=l.lineutility.GetOffsetPointDouble(S,y,Math.trunc(u*e)),o[L-3]=new r.POINT2(I),o[L-2]=new r.POINT2(h),o[L-1]=new r.POINT2(h),o[L-1].style=5,c){case T.TacticalLines.SPT_STRAIGHT:case T.TacticalLines.SPT:case T.TacticalLines.AAAAA:case T.TacticalLines.AIRAOA:case T.TacticalLines.CATK:case T.TacticalLines.CATKBYFIRE:o[L-6].style=5,o[L-5].style=5}c===T.TacticalLines.CATKBYFIRE&&P>45&&(a[n-1].x=D.x,a[n-1].y=D.y,t[i-1].x=M.x,t[i-1].y=M.y,s.x=f.x,s.y=f.y)}catch(e){if(!(e instanceof Error))throw e;g.ErrorLogger.LogException(_._className,"GetAXADDouble",new L.RendererException("Failed inside GetAXADDouble "+c.toString(),e))}}static GetChannelArray2Double(e,t,i,a,n,s){try{switch(n){case T.TacticalLines.LC:case T.TacticalLines.LC_HOSTILE:case T.TacticalLines.AIRAOA:case T.TacticalLines.AAAAA:case T.TacticalLines.CATK:case T.TacticalLines.CATKBYFIRE:case T.TacticalLines.MAIN:case T.TacticalLines.MAIN_STRAIGHT:case T.TacticalLines.SPT:case T.TacticalLines.SPT_STRAIGHT:case T.TacticalLines.TRIPLE:case T.TacticalLines.DOUBLEC:case T.TacticalLines.SINGLEC:case T.TacticalLines.HWFENCE:case T.TacticalLines.LWFENCE:case T.TacticalLines.DOUBLEA:case T.TacticalLines.UNSP:case T.TacticalLines.SFENCE:case T.TacticalLines.DFENCE:case T.TacticalLines.CHANNEL:case T.TacticalLines.CHANNEL_FLARED:case T.TacticalLines.CHANNEL_DASHED:t=_.CoordIL2Double(e,t,i,a,n,s)}}catch(e){if(!(e instanceof Error))throw e;g.ErrorLogger.LogException(_._className,"GetChannelArray2Double",new L.RendererException("Failed inside GetChannelArray2Double "+n.toString(),e))}return t}static GetTrueEndPointDouble(e,t,i,a){let s=new n.CChannelPoints2;try{let n=new r.POINT2,c=new r.POINT2,T=0,u=0,g=0,L=0,d=0,_=e,h=0,E=new o.ref;if(h=l.lineutility.CalcTrueLinesDouble(e,t,i,E),T=E.value[0],u=E.value[1],L=E.value[3],d=E.value[5],0===h)switch(a){case 4:case 6:s.m_Line1.x=t.x-_,s.m_Line1.y=t.y,s.m_Line2.x=t.x+_,s.m_Line2.y=t.y;break;case 5:case 7:s.m_Line1.x=t.x+_,s.m_Line1.y=t.y,s.m_Line2.x=t.x-_,s.m_Line2.y=t.y}if(0===T)switch(a){case 0:case 2:s.m_Line1.x=t.x,s.m_Line1.y=t.y-_,s.m_Line2.x=t.x,s.m_Line2.y=t.y+_;break;case 1:case 3:s.m_Line1.x=t.x,s.m_Line1.y=t.y+_,s.m_Line2.x=t.x,s.m_Line2.y=t.y-_}if(0!==h&&0!==T)switch(g=t.y+t.x/T,n=l.lineutility.CalcTrueIntersectDouble2(T,L,-1/T,g,1,1,0,0),c=l.lineutility.CalcTrueIntersectDouble2(T,d,-1/T,g,1,1,0,0),a){case 0:case 2:n.y<c.y?(s.m_Line1=n,s.m_Line2=c):(s.m_Line1=c,s.m_Line2=n);break;case 1:case 3:n.y>c.y?(s.m_Line1=n,s.m_Line2=c):(s.m_Line1=c,s.m_Line2=n)}}catch(e){if(!(e instanceof Error))throw e;g.ErrorLogger.LogException(_._className,"GetTrueEndPointDouble",new L.RendererException("Failed inside GetTrueEndPointDouble",e))}return s}static ConnectTrueDouble2(e,t,i,a,s){let r=new n.CChannelPoints2;try{let n=0,c=0,T=0,u=0,g=0,L=0,d=0,_=0,h=e,E=new o.ref,A=0,I=0,S=new o.ref,y=new o.ref;switch(A=l.lineutility.CalcTrueLinesDouble(e,t,i,E),0!==A&&(n=E.value[0],c=E.value[1],L=E.value[5],g=E.value[3]),I=l.lineutility.CalcTrueLinesDouble(e,i,a,E),0!==I&&(T=E.value[0],u=E.value[1],_=E.value[5],d=E.value[3]),s){case 0:l.lineutility.CalcTrueIntersectDouble(n,L,T,_,i,A,I,h,0,S,y),r.m_Line1.x=S.value[0],r.m_Line1.y=y.value[0],l.lineutility.CalcTrueIntersectDouble(n,g,T,d,i,A,I,h,3,S,y),r.m_Line2.x=S.value[0],r.m_Line2.y=y.value[0];break;case 1:l.lineutility.CalcTrueIntersectDouble(n,L,T,d,i,A,I,h,1,S,y),r.m_Line1.x=S.value[0],r.m_Line1.y=y.value[0],l.lineutility.CalcTrueIntersectDouble(n,g,T,_,i,A,I,h,2,S,y),r.m_Line2.x=S.value[0],r.m_Line2.y=y.value[0];break;case 2:l.lineutility.CalcTrueIntersectDouble(n,g,T,_,i,A,I,h,2,S,y),r.m_Line1.x=S.value[0],r.m_Line1.y=y.value[0],l.lineutility.CalcTrueIntersectDouble(n,L,T,d,i,A,I,h,1,S,y),r.m_Line2.x=S.value[0],r.m_Line2.y=y.value[0];break;case 3:l.lineutility.CalcTrueIntersectDouble(n,g,T,d,i,A,I,h,3,S,y),r.m_Line1.x=S.value[0],r.m_Line1.y=y.value[0],l.lineutility.CalcTrueIntersectDouble(n,L,T,_,i,A,I,h,0,S,y),r.m_Line2.x=S.value[0],r.m_Line2.y=y.value[0]}}catch(e){if(!(e instanceof Error))throw e;g.ErrorLogger.LogException(_._className,"ConnectTrueDouble2",new L.RendererException("Failed inside ConnectTrueDouble2",e))}return r}static GetChannel1Double(e,t,i,n,h,E,A,I,S){let y=-1;try{let g,L,f,D,M,P=e.get_LineType(),R=0,N=0,C=1,O=40*C,p=0,x=0,b=0,w=h,m=E,F=0,G=0,U=0,v=0,H=0,B=0,k=0,Y=0,W=0,X=0,V=Math.PI,z=0,K=0,Q=13,Z=6,J=0,j=0,q=A/4,$=new Array(E),ee=new Array(h),te=new Array(1);l.lineutility.InitializePOINT2Array($),l.lineutility.InitializePOINT2Array(ee),l.lineutility.InitializePOINT2Array(te);let ie=new r.POINT2,ae=new r.POINT2,ne=new r.POINT2,se=new r.POINT2,le=new r.POINT2,re=new r.POINT2,oe=new r.POINT2,ce=new Array(3),Te=new Array(4),ue=new Array(37);l.lineutility.InitializePOINT2Array(Te),l.lineutility.InitializePOINT2Array(ue);let ge=new r.POINT2,Le=new r.POINT2($[0]),de=new r.POINT2,_e=new r.POINT2,he=new r.POINT2;if(A<5&&(A=5),E<2||h<2)return-1;for(R=0;R<E;R++)$[R].x=i[v],v++,$[R].y=i[v],v++,R===E-2&&(he.x=$[R].x,he.y=$[R].y),R===E-1&&(_e.x=$[R].x,_e.y=$[R].y),$[R].style=0;for(v=0,l.lineutility.CalcDistanceDouble(_e,he),R=0;R<h;R++)ee[R].x=t[H],H++,ee[R].y=t[H],H++,ee[R].style=0;H=0,te[0]=new r.POINT2(ee[h-1]),oe=new r.POINT2($[0]);let Ee=_._shiftLines;switch(P){case T.TacticalLines.LC:case T.TacticalLines.LC_HOSTILE:case T.TacticalLines.UNSP:case T.TacticalLines.LWFENCE:case T.TacticalLines.HWFENCE:case T.TacticalLines.SINGLEC:case T.TacticalLines.DOUBLEC:case T.TacticalLines.TRIPLE:break;default:Ee=!1}switch(P){case T.TacticalLines.CATK:case T.TacticalLines.AIRAOA:case T.TacticalLines.AAAAA:case T.TacticalLines.SPT:case T.TacticalLines.SPT_STRAIGHT:case T.TacticalLines.MAIN:case T.TacticalLines.MAIN_STRAIGHT:case T.TacticalLines.CATKBYFIRE:x=I,O=Math.trunc(Math.sqrt(x*x+A/2*A/2)),ee[h-1]=l.lineutility.ExtendAlongLineDouble(ee[h-1],ee[h-2],x),$[E-1]=l.lineutility.ExtendAlongLineDouble($[E-1],$[E-2],x)}switch(ge=new r.POINT2($[0]),de=new r.POINT2(ee[0]),P){case T.TacticalLines.MAIN:case T.TacticalLines.MAIN_STRAIGHT:case T.TacticalLines.SPT:case T.TacticalLines.SPT_STRAIGHT:case T.TacticalLines.CATK:case T.TacticalLines.CATKBYFIRE:case T.TacticalLines.TRIPLE:case T.TacticalLines.DOUBLEC:case T.TacticalLines.SINGLEC:case T.TacticalLines.HWFENCE:case T.TacticalLines.LWFENCE:case T.TacticalLines.UNSP:case T.TacticalLines.DOUBLEA:case T.TacticalLines.DFENCE:case T.TacticalLines.SFENCE:case T.TacticalLines.CHANNEL:case T.TacticalLines.CHANNEL_FLARED:case T.TacticalLines.CHANNEL_DASHED:for(N=_.GetTripleCountDouble(ee,h,P),D=new Array(h),R=0;R<h;R++)D[R]=new r.POINT2(ee[R]);for(M=new Array(h),R=0;R<h;R++)M[R]=new r.POINT2(ee[R]);switch(P){case T.TacticalLines.TRIPLE:case T.TacticalLines.DOUBLEC:case T.TacticalLines.SINGLEC:case T.TacticalLines.HWFENCE:case T.TacticalLines.LWFENCE:case T.TacticalLines.UNSP:case T.TacticalLines.DOUBLEA:case T.TacticalLines.DFENCE:case T.TacticalLines.SFENCE:for($=new Array(E),R=0;R<m;R++)$[R]=new r.POINT2(D[R]);for(ee=new Array(h),R=0;R<w;R++)ee[R]=new r.POINT2(D[R]);for(D=new Array(h),R=0;R<w;R++)D[R]=new r.POINT2(M[R])}if(l.lineutility.moveSingleCPixels(P,ee),l.lineutility.moveSingleCPixels(P,$),l.lineutility.MoveChannelPixels(ee),l.lineutility.MoveChannelPixels($),Ee&&(A*=2),ee=_.GetChannelArray2Double(C,ee,1,h,P,A),$=_.GetChannelArray2Double(C,$,0,E,P,A),Ee)if(P===T.TacticalLines.SINGLEC)$=D;else if(P===T.TacticalLines.DOUBLEC)for(Y=0;Y<ee.length;Y++)ee[Y]=l.lineutility.MidPointDouble($[Y],D[Y],0);else T.TacticalLines.TRIPLE,ee=D;break;case T.TacticalLines.LC:case T.TacticalLines.LC_HOSTILE:if(Ee){for(D=new Array(h),R=0;R<h;R++)D[R]=new r.POINT2(ee[R]);A*=2}ee=_.GetChannelArray2Double(C,ee,1,h,P,A),$=_.GetChannelArray2Double(C,$,0,E,P,A),Ee&&(P===T.TacticalLines.LC_HOSTILE?$=D:ee=D),ee[0].x>ee[1].x&&ee[0].y!==ee[1].y?(F=1,l.lineutility.ReversePointsDouble2($,E)):ee[0].x>ee[1].x&&ee[0].y===ee[1].y?(F=0,l.lineutility.ReversePointsDouble2(ee,h)):ee[0].x<ee[1].x||ee[0].y>ee[1].y&&ee[0].x===ee[1].x?(F=1,l.lineutility.ReversePointsDouble2($,E)):ee[0].y<ee[1].y&&ee[0].x===ee[1].x&&(F=0,l.lineutility.ReversePointsDouble2(ee,h));break;case T.TacticalLines.AAAAA:case T.TacticalLines.AIRAOA:for(D=new Array(h),R=0;R<h;R++)D[R]=new r.POINT2(ee[R]);ee=_.GetChannelArray2Double(C,ee,1,h,P,A),$=_.GetChannelArray2Double(C,$,0,E,P,A),ge=new r.POINT2($[E-1]),de=new r.POINT2(ee[h-1]),$[E-1]=new r.POINT2(de),ee[h-1]=new r.POINT2(ge)}switch(P){case T.TacticalLines.LC:case T.TacticalLines.LC_HOSTILE:if(G=s.flot.GetFlotCountDouble(ee,a.arraysupport.getScaledSize(20,e.get_LineThickness()),h),U=s.flot.GetFlotCountDouble($,a.arraysupport.getScaledSize(20,e.get_LineThickness()),E),G<=0||U<=0)return 0;for(p=h,p<G&&(p=G),L=new Array(p),l.lineutility.InitializePOINT2Array(L),p=E,p<U&&(p=U),f=new Array(p),l.lineutility.InitializePOINT2Array(f),R=0;R<h;R++)L[R]=new r.POINT2(ee[R]);for(R=0;R<E;R++)f[R]=new r.POINT2($[R]);if(G=s.flot.GetFlotDouble(L,a.arraysupport.getScaledSize(20,e.get_LineThickness()),h),U=s.flot.GetFlotDouble(f,a.arraysupport.getScaledSize(20,e.get_LineThickness()),E),g=new Array(G+U),l.lineutility.InitializePOINT2Array(g),N=U+G,1===F){for(R=0;R<G;R++)g[R]=new r.POINT2(L[R]),g[R].style=25;for(G>0&&(g[G-1].style=5),R=0;R<U;R++)g[R+G]=new r.POINT2(f[R]),g[R+G].style=26;G+U>0&&(g[G+U-1].style=5)}if(0===F){for(R=0;R<G;R++)g[R]=new r.POINT2(L[R]),g[R].style=26;for(G>0&&(g[G-1].style=5),R=0;R<U;R++)g[R+G]=new r.POINT2(f[R]),g[R+G].style=25;G+U>0&&(g[G+U-1].style=5)}break;case T.TacticalLines.TRIPLE:case T.TacticalLines.DOUBLEC:case T.TacticalLines.SINGLEC:case T.TacticalLines.HWFENCE:case T.TacticalLines.LWFENCE:case T.TacticalLines.UNSP:case T.TacticalLines.DOUBLEA:case T.TacticalLines.SFENCE:case T.TacticalLines.DFENCE:case T.TacticalLines.CHANNEL:case T.TacticalLines.CHANNEL_FLARED:case T.TacticalLines.CHANNEL_DASHED:for(g=new Array(N),l.lineutility.InitializePOINT2Array(g),Y=0;Y<g.length;Y++)g[Y].x=t[0],g[Y].y=t[1];switch(P){case T.TacticalLines.TRIPLE:case T.TacticalLines.HWFENCE:case T.TacticalLines.CHANNEL:case T.TacticalLines.CHANNEL_FLARED:case T.TacticalLines.CHANNEL_DASHED:case T.TacticalLines.SINGLEC:for(R=0;R<E;R++)g[R]=new r.POINT2($[R]);break;case T.TacticalLines.DOUBLEC:if(D[0].x<D[1].x)for(R=0;R<E;R++)g[R]=new r.POINT2(D[R]);else for(R=0;R<E;R++)g[R]=new r.POINT2(ee[R]);break;case T.TacticalLines.LWFENCE:for(R=0;R<E;R++)g[R]=new r.POINT2(D[R]),g[R].style=5;break;case T.TacticalLines.UNSP:for(R=0;R<E;R++)g[R]=new r.POINT2(D[R]),g[R].style=5;break;case T.TacticalLines.DOUBLEA:for(R=0;R<E;R++)g[R]=new r.POINT2(D[R]);break;default:for(R=0;R<E;R++)g[R]=new r.POINT2(D[R])}switch(g[E-1].style=5,P){case T.TacticalLines.TRIPLE:case T.TacticalLines.HWFENCE:case T.TacticalLines.CHANNEL:case T.TacticalLines.CHANNEL_FLARED:case T.TacticalLines.CHANNEL_DASHED:for(R=0;R<h;R++)g[E+R]=new r.POINT2(ee[R]);break;case T.TacticalLines.DOUBLEC:if(D[0].x<D[1].x)for(R=0;R<h;R++)g[E+R]=new r.POINT2(ee[R]);else for(R=0;R<h;R++)g[E+R]=new r.POINT2(D[R]);break;case T.TacticalLines.SINGLEC:for(R=0;R<h;R++)g[E+R]=new r.POINT2($[R]);break;case T.TacticalLines.LWFENCE:for(R=0;R<h;R++)g[E+R]=new r.POINT2(ee[R]);break;case T.TacticalLines.UNSP:for(R=0;R<h;R++)g[E+R]=new r.POINT2(D[R]),g[E+R].style=5;break;case T.TacticalLines.DOUBLEA:for(R=0;R<h;R++)g[E+R]=new r.POINT2(D[R]);break;default:for(R=0;R<h;R++)g[E+R]=new r.POINT2(D[R])}if(g[E+h-1].style=5,j=E+h,P!==T.TacticalLines.CHANNEL&&P!==T.TacticalLines.CHANNEL_DASHED&&P!==T.TacticalLines.CHANNEL_FLARED&&P!==T.TacticalLines.SPT_STRAIGHT&&P!==T.TacticalLines.MAIN_STRAIGHT){let t=0;for(t=Ee?A/8:A/4,Y=0;Y<h-1;Y++){let i=t+a.arraysupport.getScaledSize(2,e.get_LineThickness()/2);for(K=l.lineutility.CalcDistanceDouble(D[Y],D[Y+1]),W=Math.trunc(K/i),b=K-i*W,z=l.lineutility.CalcSegmentAngleDouble(D[Y],D[Y+1]),z+=V/2,R=0;R<W;R++){if(P===T.TacticalLines.SFENCE){if(R%4==0)continue}else if(R%2==0)continue;let e=R;if(e*=1+b/K,!0===Ee&&P===T.TacticalLines.DOUBLEC)Le.x=ee[Y].x+Math.trunc(e*(ee[Y+1].x-ee[Y].x)/W),Le.y=ee[Y].y+Math.trunc(e*(ee[Y+1].y-ee[Y].y)/W);else if(!1===Ee)Le.x=D[Y].x+Math.trunc(e*(D[Y+1].x-D[Y].x)/W),Le.y=D[Y].y+Math.trunc(e*(D[Y+1].y-D[Y].y)/W);else{Le.x=ee[Y].x+Math.trunc(e*(ee[Y+1].x-ee[Y].x)/W),Le.y=ee[Y].y+Math.trunc(e*(ee[Y+1].y-ee[Y].y)/W);let t=new r.POINT2;t.x=$[Y].x+Math.trunc(e*($[Y+1].x-$[Y].x)/W),t.y=$[Y].y+Math.trunc(e*($[Y+1].y-$[Y].y)/W),Le=l.lineutility.MidPointDouble(Le,t,0)}switch(P){case T.TacticalLines.SINGLEC:case T.TacticalLines.DOUBLEC:case T.TacticalLines.TRIPLE:for(X=1;X<37;X++)J=10*X*V/180,ue[X-1].x=Le.x+t*Math.cos(J),ue[X-1].y=Le.y+t/2*Math.sin(J),ue[X-1].style=0;for(l.lineutility.RotateGeometryDouble(ue,36,180*z/V),ue[36]=new r.POINT2(ue[35]),ue[36].style=5,X=0;X<37;X++)g[j]=new r.POINT2(ue[X]),j++;break;case T.TacticalLines.HWFENCE:case T.TacticalLines.LWFENCE:case T.TacticalLines.DOUBLEA:case T.TacticalLines.UNSP:case T.TacticalLines.SFENCE:case T.TacticalLines.DFENCE:for(Te[0].x=Le.x-t,Te[0].y=Le.y-t,Te[0].style=0,Te[1].x=Le.x+t,Te[1].y=Le.y+t,Te[1].style=5,Te[2].x=Le.x-t,Te[2].y=Le.y+t,Te[2].style=0,Te[3].x=Le.x+t,Te[3].y=Le.y-t,Te[3].style=5,k++,l.lineutility.RotateGeometryDouble(Te,4,Math.trunc(180*z/V)),X=0;X<4;X++){switch(g[j]=new r.POINT2(Te[X]),P){case T.TacticalLines.SFENCE:2!==k&&3!==k&&4!==k&&5!==k||(g[j].style=5);break;case T.TacticalLines.DFENCE:3!==k&&4!==k&&5!==k||(g[j].style=5)}j++}5===k&&(k=0)}}0===W&&g.length>j&&(g[j]=new r.POINT2(D[Y]),j++,g[j]=new r.POINT2(D[Y+1]),g[j].style=5,j++)}g=l.lineutility.ResizeArray(g,j),N=g.length}if(1===_.FenceType(P))if(j<=E+h)for(R=0;R<E+h;R++)5!==g[R].style&&(g[R].style=0);else for(R=j-1;R<g.length;R++)g[R].style=5;break;case T.TacticalLines.SPT:case T.TacticalLines.SPT_STRAIGHT:case T.TacticalLines.CATK:case T.TacticalLines.CATKBYFIRE:case T.TacticalLines.AIRAOA:case T.TacticalLines.AAAAA:case T.TacticalLines.MAIN:case T.TacticalLines.MAIN_STRAIGHT:{for(N=P!==T.TacticalLines.CATKBYFIRE?E+h+8:E+h+17,P===T.TacticalLines.AAAAA&&(N=E+h+19),g=new Array(N),l.lineutility.InitializePOINT2Array(g),Y=0;Y<g.length;Y++)g[Y].x=t[0],g[Y].y=t[1];if(P!==T.TacticalLines.CATK&&P!==T.TacticalLines.CATKBYFIRE)for(R=0;R<N;R++)g[R].style=0;if(_.GetAXADDouble(C,$,E,ee,h,te[0],g,P,q),P===T.TacticalLines.CATK||P===T.TacticalLines.CATKBYFIRE)for(R=0;R<N;R++)5!==g[R].style&&(g[R].style=1);if(P===T.TacticalLines.AAAAA){let e=!1,t=new o.ref,i=new o.ref,a=0,n=0,s=0,c=0;oe=new r.POINT2($[E-2]),ie=new r.POINT2($[E-1]);let T=l.lineutility.CalcDistanceDouble(oe,ie);n=l.lineutility.CalcTrueSlopeDouble(oe,ie,i),c=oe.y-i.value[0]*oe.x,oe=new r.POINT2(ee[h-2]),ie=new r.POINT2(ee[h-1]),a=l.lineutility.CalcTrueSlopeDouble(oe,ie,t),s=oe.y-t.value[0]*oe.x;let u=l.lineutility.CalcDistanceDouble(oe,ie);le=l.lineutility.CalcTrueIntersectDouble2(i.value[0],c,t.value[0],s,n,a,oe.x,oe.y),(T<=A||u<=A)&&(e=!0,le=l.lineutility.MidPointDouble(oe,ie,0)),Q=l.lineutility.CalcDistanceDouble(oe,ie),Z=30,Q<90&&(Z=Q/3),ne=new r.POINT2(D[h-2]),se=new r.POINT2(D[h-1]),K=A/4;let L=d.RendererSettings.getInstance().getDeviceDPI()/96;for(K>_.maxLength*L&&(K=_.maxLength*L),K<_.minLength*L&&(K=_.minLength*L),ne.x!==se.x?(oe=l.lineutility.ExtendDirectedLine(ne,se,le,3,2*K),g[E+h+8]=oe,g[E+h+8].style=0,ie=l.lineutility.ExtendDirectedLine(ne,se,le,2,2*K),g[E+h+9]=ie,g[E+h+9].style=5):(oe=l.lineutility.ExtendDirectedLine(ne,se,le,1,2*K),g[E+h+8]=oe,g[E+h+8].style=0,ie=l.lineutility.ExtendDirectedLine(ne,se,le,0,2*K),g[E+h+9]=ie,g[E+h+9].style=5,le=l.lineutility.MidPointDouble(oe,ie,0)),l.lineutility.GetArrowHead4Double(oe,ie,K,K,ce,0),R=0;R<3;R++)g[E+h+10+R]=ce[R];if(g[E+h+12].style=5,ne=l.lineutility.ExtendTrueLinePerpDouble(oe,ie,oe,K/2,0),se=l.lineutility.ExtendTrueLinePerpDouble(oe,ie,oe,-K/2,0),g[E+h+13]=ne,g[E+h+14]=se,g[E+h+14].style=5,oe=new r.POINT2($[E-2]),ie=new r.POINT2($[E-1]),ne=l.lineutility.ExtendLine2Double(oe,le,Z,0),g[E+h+15]=new r.POINT2(ne),oe=new r.POINT2(ee[E-2]),ie=new r.POINT2(ee[E-1]),ne=l.lineutility.ExtendLine2Double(oe,le,Z,5),g[E+h+16]=new r.POINT2(ne),oe=new r.POINT2($[E-2]),ie=new r.POINT2($[E-1]),ne=l.lineutility.ExtendLine2Double(ie,le,Z,0),g[E+h+17]=new r.POINT2(ne),oe=new r.POINT2(ee[E-2]),ie=new r.POINT2(ee[E-1]),ne=l.lineutility.ExtendLine2Double(ie,le,Z,5),g[E+h+18]=new r.POINT2(ne),e)for(X=E+h+14;X<E+E+19;X++)g[X].style=5}let e=0,i=0;if(P===T.TacticalLines.CATKBYFIRE)for(i=l.lineutility.CalcDistanceDouble(he,_e),i>45&&(x-=45),i>20?(ie=l.lineutility.ExtendLineDouble(ee[h-2],ee[h-1],5+x),ae=l.lineutility.ExtendLineDouble($[E-2],$[E-1],5+x)):(ie=l.lineutility.ExtendLineDouble(ee[h-2],ee[h-1],-50),ae=l.lineutility.ExtendLineDouble($[E-2],$[E-1],-50)),ne=l.lineutility.ExtendLine2Double(ae,ie,10+Math.abs(x/2),18),se=l.lineutility.ExtendLine2Double(ie,ae,10+Math.abs(x/2),5),le=l.lineutility.MidPointDouble(ie,ae,17),g[N-9]=new r.POINT2(ne),g[N-6]=new r.POINT2(se),i>20?(ie=l.lineutility.ExtendLineDouble(ee[h-2],ee[h-1],15+x),ae=l.lineutility.ExtendLineDouble($[E-2],$[E-1],15+x)):(ie=l.lineutility.ExtendLineDouble(ee[h-2],ee[h-1],-50),ae=l.lineutility.ExtendLineDouble($[E-2],$[E-1],-50)),ne=l.lineutility.ExtendLine2Double(ae,ie,Math.abs(x/2),18),se=l.lineutility.ExtendLine2Double(ie,ae,Math.abs(x/2),18),re=l.lineutility.MidPointDouble(ie,ae,18),g[N-8]=new r.POINT2(ne),g[N-7]=new r.POINT2(se),g[N-5]=new r.POINT2(re),le.x===re.x&&le.y===re.y&&(e=_._client.startsWith("cpof")?30:15,le=l.lineutility.ExtendLine2Double(he,te[0],10,17),ie=l.lineutility.ExtendTrueLinePerpDouble(_e,le,le,e,18),ae=l.lineutility.ExtendTrueLinePerpDouble(_e,le,le,-e,5),g[N-9]=new r.POINT2(ie),g[N-6]=new r.POINT2(ae),re=_._client.startsWith("cpof")||i>30?l.lineutility.ExtendLine2Double(he,te[0],20,17):l.lineutility.ExtendLine2Double(he,te[0],e,17),e-=10,ie=l.lineutility.ExtendTrueLinePerpDouble(_e,re,re,e,18),ae=l.lineutility.ExtendTrueLinePerpDouble(_e,re,re,-e,18),g[N-8]=new r.POINT2(ie),g[N-7]=new r.POINT2(ae),g[N-5]=new r.POINT2(re)),e=_._client.startsWith("cpof")||i>30?30:10,ie=l.lineutility.ExtendLine2Double(le,re,e,e),g[N-4]=new r.POINT2(ie),l.lineutility.GetArrowHead4Double(re,ie,Math.trunc(e/2),Math.trunc(e/2),ce,18),R=0;R<3;R++)g[N-R-1]=new r.POINT2(ce[R]),g[N-R-1].style=18;break}}if(P===T.TacticalLines.CHANNEL_DASHED)for(R=0;R<N;R++)5!==g[R].style&&(g[R].style=18);if(null==S){for(Y=0;Y<g.length;Y++)n[3*Y]=g[Y].x,n[3*Y+1]=g[Y].y,n[3*Y+2]=g[Y].style;return g.length}let Ae=null,Ie=!0,Se=!0;for(R=0;R<N;R++){switch(null==Ae&&(Ae=new c.Shape2(c.Shape2.SHAPE_TYPE_POLYLINE)),P){case T.TacticalLines.CATK:case T.TacticalLines.CATKBYFIRE:Ae.set_Style(1)}switch(P){case T.TacticalLines.LC:case T.TacticalLines.LC_HOSTILE:!1===Se?R>0?5===g[R].style?(Ae.lineTo(g[R]),null!=Ae&&null!=Ae.getShape()&&S.push(Ae),Se=!0):Ae.lineTo(g[R]):Ae.moveTo(g[R]):(Ae=new c.Shape2(c.Shape2.SHAPE_TYPE_POLYLINE),Ae.moveTo(g[R]),Ae.set_Style(g[R].style),25===g[R].style&&Ae.setLineColor(u.Color.RED),Se=!1);break;case T.TacticalLines.CATK:case T.TacticalLines.CATKBYFIRE:case T.TacticalLines.AAAAA:case T.TacticalLines.SPT:case T.TacticalLines.SPT_STRAIGHT:case T.TacticalLines.AIRAOA:if(Ie){if(R>0&&5===g[R].style&&5===g[R-1].style&&R!==N-1)continue;Ae.moveTo(g[R]),Ie=!1}else Ae.lineTo(g[R]),5===g[R].style&&(Ie=!0);R===N-1&&null!=Ae&&null!=Ae.getShape()&&S.push(Ae);break;case T.TacticalLines.UNSP:case T.TacticalLines.SFENCE:case T.TacticalLines.DFENCE:case T.TacticalLines.LWFENCE:case T.TacticalLines.HWFENCE:if(0===R&&(Ae.moveTo(g[R]),5===g[R].style))continue;R>0&&R<N-1&&(5===g[R-1].style?Ae.moveTo(g[R]):0===g[R-1].style&&Ae.lineTo(g[R]),5===g[R].style&&Ae.moveTo(g[R]),R===N-2&&0===g[R].style&&(Ae.moveTo(g[R]),Ae.lineTo(g[R+1]))),R===N-1&&null!=Ae&&null!=Ae.getShape()&&S.push(Ae);break;default:Ie?(0===R&&Ae.set_Style(g[R].style),Ae.moveTo(g[R]),Ie=!1):(Ae.lineTo(g[R]),5===g[R].style&&(Ie=!0)),R===N-1&&null!=Ae&&null!=Ae.getShape()&&S.push(Ae)}}let ye=_.getAXADFillShapes(P,g);null!=ye&&ye.length>0&&S.unshift(...ye),y=B}catch(t){if(!(t instanceof Error))throw t;g.ErrorLogger.LogException(_._className,"GetChannel1Double",new L.RendererException("Failed inside GetChannel1Double "+e.get_LineType().toString(),t))}return y}static getAXADFillShapes(e,t){let i;try{let a,n=new Array,s=0,l=t.length,r=0;switch(e){case T.TacticalLines.CHANNEL:case T.TacticalLines.CHANNEL_FLARED:case T.TacticalLines.CHANNEL_DASHED:{for(s=0;s<l/2;s++)n.push(t[s]);for(s=l-1;s>=l/2;s--)n.push(t[s]);a=new c.Shape2(c.Shape2.SHAPE_TYPE_FILL),a.moveTo(n[0]);let e=n.length;for(s=1;s<e;s++)a.lineTo(n[s]);break}case T.TacticalLines.AIRAOA:case T.TacticalLines.SPT:case T.TacticalLines.CATK:case T.TacticalLines.SPT_STRAIGHT:for(s=0;s<(l-8)/2;s++)n.push(t[s]);for(n.push(t[l-6]),n.push(t[l-7]),n.push(t[l-8]),n.push(t[l-3]),n.push(t[l-4]),s=l-9;s>=(l-8)/2;s--)n.push(t[s]);for(a=new c.Shape2(c.Shape2.SHAPE_TYPE_FILL),a.moveTo(n[0]),r=n.length,s=1;s<r;s++)a.lineTo(n[s]);break;case T.TacticalLines.MAIN_STRAIGHT:case T.TacticalLines.MAIN:for(s=0;s<(l-8)/2;s++)n.push(t[s]);for(n.push(t[l-6]),n.push(t[l-5]),s=l-9;s>=(l-8)/2;s--)n.push(t[s]);for(a=new c.Shape2(c.Shape2.SHAPE_TYPE_FILL),a.moveTo(n[0]),r=n.length,s=1;s<r;s++)a.lineTo(n[s]);break;case T.TacticalLines.AAAAA:for(s=0;s<(l-19)/2;s++)n.push(t[s]);for(n.push(t[l-17]),n.push(t[l-18]),n.push(t[l-19]),n.push(t[l-14]),n.push(t[l-15]),s=l-20;s>=(l-19)/2;s--)n.push(t[s]);for(a=new c.Shape2(c.Shape2.SHAPE_TYPE_FILL),a.moveTo(n[0]),r=n.length,s=1;s<r;s++)a.lineTo(n[s]);break;case T.TacticalLines.CATKBYFIRE:for(s=0;s<(l-17)/2;s++)n.push(t[s]);for(n.push(t[l-15]),n.push(t[l-16]),n.push(t[l-17]),n.push(t[l-12]),n.push(t[l-13]),s=l-18;s>=(l-17)/2;s--)n.push(t[s]);for(a=new c.Shape2(c.Shape2.SHAPE_TYPE_FILL),a.moveTo(n[0]),r=n.length,s=1;s<r;s++)a.lineTo(n[s])}null!=a&&(i=new Array,a.setLineColor(null),i.push(a))}catch(e){if(!(e instanceof Error))throw e;g.ErrorLogger.LogException(_._className,"getAXADfillShapes",new L.RendererException("Failed inside getAXADFillShapes",e))}return i}}t.Channels=_},8624:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Area=void 0;const a=i(1358),n=i(5467),s=i(9485),l=i(9441),r=i(6967),o=i(3170),c=i(1207),T=i(7389),u=i(7300),g=i(106);class L extends a.GeneralPath{static _className="Area";constructor(e){if(e instanceof r.Polygon){super();const t=e;let i=0,a=t.npoints;for(i=0;i<a;i++)0===i?this.moveTo(t.xpoints[i],t.ypoints[i]):this.lineTo(t.xpoints[i],t.ypoints[i])}else{super();let t,i=0,a=e.getPathIterator(null).getPoints(),s=a.length;for(i=0;i<s;i++)switch(t=a[i],t.style){case n.IPathIterator.SEG_MOVETO:this.moveTo(t.x,t.y);break;case n.IPathIterator.SEG_LINETO:this.lineTo(t.x,t.y)}}}static reorderPointsByDistance(e,t){try{var i=0,a=0,n=0,s=-1,l=new Map,r=new Array,o=e.getP1(),d=new T.POINT2(o.getX(),o.getY()),_=null;for(n=0;n<t.length;n++)_=new T.POINT2(t.at(n).getX(),t.at(n).getY()),a=c.lineutility.CalcDistanceDouble(d,_),l.set(n,a);for(;l.size>0;){for(n=0;n<t.length;n++)if(l.has(n)){s=n,i=l.get(n);break}for(n=0;n<t.length;n++)l.has(n)&&(a=l.get(n))<i&&(i=a,s=n);r.push(t.at(s)),l.delete(s)}for(t.length=0,n=0;n<r.length;n++)t.push(r.at(n))}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(L._className,"reorderPointsByDistance",new g.RendererException("Failed inside reorderPointsByDistance",e))}}getMBR(e){let t=0,i=e[0].x,a=e[0].y,n=e[0].x,s=e[0].y,l=e.length;for(t=1;t<l;t++)e[t].x<i&&(i=e[t].x),e[t].x>n&&(n=e[t].x),e[t].y<a&&(a=e[t].y),e[t].y>s&&(s=e[t].y);return new o.Rectangle2D(i,a,n-i,s-a)}static isVertical(e){return e.getX1()===e.getX2()}static adjustVerticalLine(e){let t=e.getP1(),i=e.getP1();if(L.isVertical(e)){let a=e.getX2()+.001,n=e.getY2();i.setLocation(a,n),e.setLine(t,i)}}static getLineIntersectPoints(e,t){let i;try{let a,r,o,c=0,u=0;L.adjustVerticalLine(t);let g,d=new Array,_=0,h=0,E=0,A=0,I=0,S=0,y=e.length;for(c=0;c<y-1;c++)if(r=new l.Point2D(e[c]),o=new l.Point2D(e[c+1]),a=new s.Line2D(r,o),L.adjustVerticalLine(a),r=a.getP1(),o=a.getP2(),E=(t.getY1()-t.getY2())/(t.getX1()-t.getX2()),A=(r.getY()-o.getY())/(r.getX()-o.getX()),t.intersectsLine(a))if(E===A)d.push(r),d.push(o);else if(I=t.getY1()-E*t.getX1(),S=a.getY1()-A*a.getX1(),_=(S-I)/(E-A),h=E*_+I,Math.abs(o.getX()-_)<.001&&Math.abs(o.getY()-h)<.001){let t=new l.Point2D(e[c]),i=new l.Point2D(e[(c+2)%(e.length-1)]);(t.getY()>E*t.getX()+I&&i.getY()>E*i.getX()+I||t.getY()<E*t.getX()+I&&i.getY()<E*i.getX()+I)&&d.push(new l.Point2D(_,h))}else d.push(new l.Point2D(_,h));for(L.reorderPointsByDistance(t,d),i=new Array,y=d.length,u=0;u<y;u++)g=d[u],u%2==0?i.push(new T.POINT2(g.getX(),g.getY(),n.IPathIterator.SEG_MOVETO)):i.push(new T.POINT2(g.getX(),g.getY(),n.IPathIterator.SEG_LINETO));d.length=0}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(L._className,"getLineIntersectPoints",new g.RendererException("Failed inside getLineIntersectPoints",e))}return i}intersect(e){try{let t,i,a=0,l=e.getPathIterator(null).getPoints(),r=this.getPathIterator(null).getPoints();for(let e=0;e<l.length-1;e++){let t=l[e],i=l[e+1];t.x===i.x&&t.y===i.y&&(l.splice(e+1,1),e--)}l[0].x===l[l.length-1].x&&l[0].y===l[l.length-1].y||l.push(new T.POINT2(l[0]));let o,c,u=this.getMBR(l),g=new Array,d=r.length;for(a=0;a<d-1;a++)if(t=new s.Line2D(r[a].x,r[a].y,r[a+1].x,r[a+1].y),i=t.getBounds2D(),!1!==i.intersects(u)&&(o=L.getLineIntersectPoints(l,t),null!=o))for(const e of o)g.push(e);for(this.getPathIterator(null).getPoints().length=0,d=g.length,a=0;a<d;a++)switch(c=g[a],c.style){case n.IPathIterator.SEG_MOVETO:this.moveTo(c.x,c.y);break;case n.IPathIterator.SEG_LINETO:this.lineTo(c.x,c.y)}this.getPathIterator(null).reset()}catch(e){if(!(e instanceof Error))throw e;u.ErrorLogger.LogException(L._className,"intersect",new g.RendererException("Failed inside intersect",e))}}}t.Area=L},8675:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PointConverter=void 0;const a=i(151),n=i(9441),s=i(4686);t.PointConverter=class{_controlLat=0;_controlLong=0;_scale=0;_metersPerPixel=0;_normalize=!0;set_normalize(e){this._normalize=e}constructor(...e){switch(e.length){case 3:{const[t,i,a]=e;try{this._controlLat=i,this._controlLong=t,this._scale=a,this._metersPerPixel=s.GeoPixelConversion.metersPerPixel(a)}catch(e){throw Error,e}break}case 5:{const[t,i,a,n,l]=e;try{this._controlLat=i,this._controlLong=t,this._scale=l,this._metersPerPixel=s.GeoPixelConversion.metersPerPixel(l),i<n&&(this._metersPerPixel=-this._metersPerPixel)}catch(e){throw Error,e}break}default:throw Error("Invalid number of arguments")}}PixelsToGeo(...e){const[t]=e;try{let e=s.GeoPixelConversion.y2lat(t.getY(),this._scale,this._controlLat,this._metersPerPixel),i=s.GeoPixelConversion.x2long(t.getX(),this._scale,this._controlLong,e,this._metersPerPixel);return t instanceof a.Point?new a.Point(i,e):new n.Point2D(i,e)}catch(e){throw Error,e}}GeoToPixels(...e){const[t]=e;try{let e=s.GeoPixelConversion.lat2y(t.getY(),this._scale,this._controlLat,this._metersPerPixel),i=s.GeoPixelConversion.long2x(t.getX(),this._scale,this._controlLong,t.getY(),this._metersPerPixel,this._normalize);return t instanceof a.Point?new a.Point(i,e):new n.Point2D(i,e)}catch(e){throw Error,e}}}},8678:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clsUtility=void 0;const a=i(8087),n=i(9485),s=i(9441),l=i(6967),r=i(4305),o=i(1207),c=i(7389),T=i(8712),u=i(5772),g=i(8101),L=i(960),d=i(2809),_=i(8113),h=i(3247),E=i(7300),A=i(3874),I=i(106),S=i(1059),y=i(2421),f=i(979),D=i(498),M=i(4738);class P{static _className="clsUtility";static POINT2ToPoint2D(e){if(null==e)return null;let t=e.x,i=e.y;return new s.Point2D(t,i)}static linesOutsideClipBounds(e,t){try{if(P.isAutoshape(e))return!1;let i,a,s,l,r=t.getMinX(),o=t.getMaxX(),c=t.getMinY(),T=t.getMaxY(),u=0,g=e.Pixels.length;for(u=0;u<g-1;u++){if(i=e.Pixels[u],a=e.Pixels[u+1],t.contains(i.x,i.y))return!1;if(t.contains(a.x,a.y))return!1;if(l=new n.Line2D(i.x,i.y,a.x,a.y),s=new n.Line2D(r,c,o,c),l.intersectsLine(s))return!1;if(s=new n.Line2D(o,c,o,T),l.intersectsLine(s))return!1;if(s=new n.Line2D(o,T,r,T),l.intersectsLine(s))return!1;if(s=new n.Line2D(r,T,r,c),l.intersectsLine(s))return!1}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"linesOutsideClipBounds",new I.RendererException("Failed inside linesOutsideClipBounds",e))}return!0}static GetMinPoints(e){let t=-1;switch(e){case g.TacticalLines.RECTANGULAR:case g.TacticalLines.CUED_ACQUISITION:case g.TacticalLines.CIRCULAR:case g.TacticalLines.BDZ:case g.TacticalLines.FSA_CIRCULAR:case g.TacticalLines.NOTACK:case g.TacticalLines.FFA_CIRCULAR:case g.TacticalLines.NFA_CIRCULAR:case g.TacticalLines.RFA_CIRCULAR:case g.TacticalLines.ACA_CIRCULAR:case g.TacticalLines.PAA_CIRCULAR:case g.TacticalLines.ATI_CIRCULAR:case g.TacticalLines.CFFZ_CIRCULAR:case g.TacticalLines.SENSOR_CIRCULAR:case g.TacticalLines.CENSOR_CIRCULAR:case g.TacticalLines.DA_CIRCULAR:case g.TacticalLines.CFZ_CIRCULAR:case g.TacticalLines.ZOR_CIRCULAR:case g.TacticalLines.TBA_CIRCULAR:case g.TacticalLines.TVAR_CIRCULAR:case g.TacticalLines.KILLBOXBLUE_CIRCULAR:case g.TacticalLines.KILLBOXPURPLE_CIRCULAR:case g.TacticalLines.LAUNCH_AREA:case g.TacticalLines.DEFENDED_AREA_CIRCULAR:case g.TacticalLines.SHIP_AOI_CIRCULAR:case g.TacticalLines.RANGE_FAN:case g.TacticalLines.RANGE_FAN_SECTOR:case g.TacticalLines.RADAR_SEARCH:t=1;break;case g.TacticalLines.PAA_RECTANGULAR:case g.TacticalLines.FSA_RECTANGULAR:case g.TacticalLines.SHIP_AOI_RECTANGULAR:case g.TacticalLines.DEFENDED_AREA_RECTANGULAR:case g.TacticalLines.FFA_RECTANGULAR:case g.TacticalLines.RFA_RECTANGULAR:case g.TacticalLines.NFA_RECTANGULAR:case g.TacticalLines.ACA_RECTANGULAR:case g.TacticalLines.ATI_RECTANGULAR:case g.TacticalLines.CFFZ_RECTANGULAR:case g.TacticalLines.SENSOR_RECTANGULAR:case g.TacticalLines.CENSOR_RECTANGULAR:case g.TacticalLines.DA_RECTANGULAR:case g.TacticalLines.CFZ_RECTANGULAR:case g.TacticalLines.ZOR_RECTANGULAR:case g.TacticalLines.TBA_RECTANGULAR:case g.TacticalLines.TVAR_RECTANGULAR:case g.TacticalLines.KILLBOXBLUE_RECTANGULAR:case g.TacticalLines.KILLBOXPURPLE_RECTANGULAR:t=2;break;case g.TacticalLines.SPTBYFIRE:case g.TacticalLines.RIP:case g.TacticalLines.GAP:case g.TacticalLines.ASLTXING:case g.TacticalLines.MSDZ:t=4;break;case g.TacticalLines.BYPASS:case g.TacticalLines.BLOCK:case g.TacticalLines.BREACH:case g.TacticalLines.CANALIZE:case g.TacticalLines.CLEAR:case g.TacticalLines.CONTAIN:case g.TacticalLines.DELAY:case g.TacticalLines.DISRUPT:case g.TacticalLines.PENETRATE:case g.TacticalLines.RETIRE:case g.TacticalLines.FPOL:case g.TacticalLines.RPOL:case g.TacticalLines.SCREEN:case g.TacticalLines.COVER:case g.TacticalLines.GUARD:case g.TacticalLines.SEIZE:case g.TacticalLines.WITHDRAW:case g.TacticalLines.WDRAWUP:case g.TacticalLines.SARA:case g.TacticalLines.PDF:case g.TacticalLines.IL:case g.TacticalLines.ATKBYFIRE:case g.TacticalLines.AMBUSH:case g.TacticalLines.RELEASE:case g.TacticalLines.HOL:case g.TacticalLines.BHL:case g.TacticalLines.MNFLDBLK:case g.TacticalLines.MNFLDDIS:case g.TacticalLines.TURN:case g.TacticalLines.PLANNED:case g.TacticalLines.ESR1:case g.TacticalLines.ESR2:case g.TacticalLines.ROADBLK:case g.TacticalLines.TRIP:case g.TacticalLines.EASY:case g.TacticalLines.BYDIF:case g.TacticalLines.BYIMP:case g.TacticalLines.FORDSITE:case g.TacticalLines.FORDIF:case g.TacticalLines.IFR:case g.TacticalLines.MVFR:case g.TacticalLines.TURBULENCE:case g.TacticalLines.ICING:case g.TacticalLines.NON_CONVECTIVE:case g.TacticalLines.CONVECTIVE:case g.TacticalLines.FROZEN:case g.TacticalLines.THUNDERSTORMS:case g.TacticalLines.FOG:case g.TacticalLines.SAND:case g.TacticalLines.FREEFORM:case g.TacticalLines.DEPTH_AREA:case g.TacticalLines.ISLAND:case g.TacticalLines.BEACH:case g.TacticalLines.WATER:case g.TacticalLines.FISH_TRAPS:case g.TacticalLines.SWEPT_AREA:case g.TacticalLines.OIL_RIG_FIELD:case g.TacticalLines.FOUL_GROUND:case g.TacticalLines.KELP:case g.TacticalLines.BEACH_SLOPE_MODERATE:case g.TacticalLines.BEACH_SLOPE_STEEP:case g.TacticalLines.ANCHORAGE_AREA:case g.TacticalLines.TRAINING_AREA:case g.TacticalLines.FORESHORE_AREA:case g.TacticalLines.DRYDOCK:case g.TacticalLines.LOADING_FACILITY_AREA:case g.TacticalLines.PERCHES:case g.TacticalLines.UNDERWATER_HAZARD:case g.TacticalLines.DISCOLORED_WATER:case g.TacticalLines.BEACH_SLOPE_FLAT:case g.TacticalLines.BEACH_SLOPE_GENTLE:case g.TacticalLines.MARITIME_AREA:case g.TacticalLines.OPERATOR_DEFINED:case g.TacticalLines.SUBMERGED_CRIB:case g.TacticalLines.VDR_LEVEL_12:case g.TacticalLines.VDR_LEVEL_23:case g.TacticalLines.VDR_LEVEL_34:case g.TacticalLines.VDR_LEVEL_45:case g.TacticalLines.VDR_LEVEL_56:case g.TacticalLines.VDR_LEVEL_67:case g.TacticalLines.VDR_LEVEL_78:case g.TacticalLines.VDR_LEVEL_89:case g.TacticalLines.VDR_LEVEL_910:case g.TacticalLines.SOLID_ROCK:case g.TacticalLines.CLAY:case g.TacticalLines.VERY_COARSE_SAND:case g.TacticalLines.COARSE_SAND:case g.TacticalLines.MEDIUM_SAND:case g.TacticalLines.FINE_SAND:case g.TacticalLines.VERY_FINE_SAND:case g.TacticalLines.VERY_FINE_SILT:case g.TacticalLines.FINE_SILT:case g.TacticalLines.MEDIUM_SILT:case g.TacticalLines.COARSE_SILT:case g.TacticalLines.BOULDERS:case g.TacticalLines.OYSTER_SHELLS:case g.TacticalLines.PEBBLES:case g.TacticalLines.SAND_AND_SHELLS:case g.TacticalLines.BOTTOM_SEDIMENTS_LAND:case g.TacticalLines.BOTTOM_SEDIMENTS_NO_DATA:case g.TacticalLines.BOTTOM_ROUGHNESS_SMOOTH:case g.TacticalLines.BOTTOM_ROUGHNESS_MODERATE:case g.TacticalLines.BOTTOM_ROUGHNESS_ROUGH:case g.TacticalLines.CLUTTER_LOW:case g.TacticalLines.CLUTTER_MEDIUM:case g.TacticalLines.CLUTTER_HIGH:case g.TacticalLines.IMPACT_BURIAL_0:case g.TacticalLines.IMPACT_BURIAL_10:case g.TacticalLines.IMPACT_BURIAL_20:case g.TacticalLines.IMPACT_BURIAL_75:case g.TacticalLines.IMPACT_BURIAL_100:case g.TacticalLines.BOTTOM_CATEGORY_A:case g.TacticalLines.BOTTOM_CATEGORY_B:case g.TacticalLines.BOTTOM_CATEGORY_C:case g.TacticalLines.BOTTOM_TYPE_A1:case g.TacticalLines.BOTTOM_TYPE_A2:case g.TacticalLines.BOTTOM_TYPE_A3:case g.TacticalLines.BOTTOM_TYPE_B1:case g.TacticalLines.BOTTOM_TYPE_B2:case g.TacticalLines.BOTTOM_TYPE_B3:case g.TacticalLines.BOTTOM_TYPE_C1:case g.TacticalLines.BOTTOM_TYPE_C2:case g.TacticalLines.BOTTOM_TYPE_C3:t=3;break;case g.TacticalLines.MRR:case g.TacticalLines.SL:case g.TacticalLines.TC:case g.TacticalLines.SC:case g.TacticalLines.LLTR:case g.TacticalLines.DIRATKAIR:case g.TacticalLines.ABATIS:case g.TacticalLines.CLUSTER:case g.TacticalLines.MNFLDFIX:case g.TacticalLines.FERRY:case g.TacticalLines.MFLANE:case g.TacticalLines.RAFT:case g.TacticalLines.FOXHOLE:case g.TacticalLines.LINTGT:case g.TacticalLines.LINTGTS:case g.TacticalLines.FPF:case g.TacticalLines.CONVOY:case g.TacticalLines.HCONVOY:default:t=2}return P.isClosedPolygon(e)&&(t=3),t}static isClosedPolygon(e){let t=!1;switch(e){case g.TacticalLines.AT:case g.TacticalLines.DEPICT:case g.TacticalLines.DZ:case g.TacticalLines.MINED:case g.TacticalLines.FENCED:case g.TacticalLines.UXO:case g.TacticalLines.ROZ:case g.TacticalLines.AARROZ:case g.TacticalLines.UAROZ:case g.TacticalLines.WEZ:case g.TacticalLines.FEZ:case g.TacticalLines.JEZ:case g.TacticalLines.FAADZ:case g.TacticalLines.HIDACZ:case g.TacticalLines.MEZ:case g.TacticalLines.LOMEZ:case g.TacticalLines.HIMEZ:case g.TacticalLines.WFZ:case g.TacticalLines.PNO:case g.TacticalLines.BATTLE:case g.TacticalLines.EA:case g.TacticalLines.EZ:case g.TacticalLines.LZ:case g.TacticalLines.PZ:case g.TacticalLines.GENERAL:case g.TacticalLines.JTAA:case g.TacticalLines.SAA:case g.TacticalLines.SGAA:case g.TacticalLines.ASSAULT:case g.TacticalLines.ATKPOS:case g.TacticalLines.OBJ:case g.TacticalLines.AO:case g.TacticalLines.AIRHEAD:case g.TacticalLines.NAI:case g.TacticalLines.TAI:case g.TacticalLines.BASE_CAMP_REVD:case g.TacticalLines.BASE_CAMP:case g.TacticalLines.GUERILLA_BASE_REVD:case g.TacticalLines.GUERILLA_BASE:case g.TacticalLines.GENERIC_AREA:case g.TacticalLines.OBSFAREA:case g.TacticalLines.OBSAREA:case g.TacticalLines.ZONE:case g.TacticalLines.STRONG:case g.TacticalLines.DRCL:case g.TacticalLines.FSA:case g.TacticalLines.ACA:case g.TacticalLines.ASSY:case g.TacticalLines.BSA:case g.TacticalLines.NFA:case g.TacticalLines.RFA:case g.TacticalLines.FARP:case g.TacticalLines.AIRFIELD:case g.TacticalLines.LAA:case g.TacticalLines.BOMB:case g.TacticalLines.FFA:case g.TacticalLines.SMOKE:case g.TacticalLines.PAA:case g.TacticalLines.ENCIRCLE:case g.TacticalLines.DHA_REVD:case g.TacticalLines.DHA:case g.TacticalLines.EPW:case g.TacticalLines.RHA:case g.TacticalLines.DSA:case g.TacticalLines.CSA:case g.TacticalLines.RSA:case g.TacticalLines.FORT_REVD:case g.TacticalLines.FORT:case g.TacticalLines.PEN:case g.TacticalLines.BIO:case g.TacticalLines.NUC:case g.TacticalLines.RAD:case g.TacticalLines.CHEM:case g.TacticalLines.SERIES:case g.TacticalLines.ATI:case g.TacticalLines.TBA:case g.TacticalLines.TVAR:case g.TacticalLines.CFFZ:case g.TacticalLines.CENSOR:case g.TacticalLines.SENSOR:case g.TacticalLines.ZOR:case g.TacticalLines.DA:case g.TacticalLines.CFZ:case g.TacticalLines.KILLBOXBLUE:case g.TacticalLines.KILLBOXPURPLE:case g.TacticalLines.IFR:case g.TacticalLines.MVFR:case g.TacticalLines.TURBULENCE:case g.TacticalLines.ICING:case g.TacticalLines.NON_CONVECTIVE:case g.TacticalLines.CONVECTIVE:case g.TacticalLines.FROZEN:case g.TacticalLines.THUNDERSTORMS:case g.TacticalLines.FOG:case g.TacticalLines.SAND:case g.TacticalLines.FREEFORM:case g.TacticalLines.DEPTH_AREA:case g.TacticalLines.ISLAND:case g.TacticalLines.BEACH:case g.TacticalLines.WATER:case g.TacticalLines.FISH_TRAPS:case g.TacticalLines.SWEPT_AREA:case g.TacticalLines.OIL_RIG_FIELD:case g.TacticalLines.FOUL_GROUND:case g.TacticalLines.KELP:case g.TacticalLines.BEACH_SLOPE_MODERATE:case g.TacticalLines.BEACH_SLOPE_STEEP:case g.TacticalLines.ANCHORAGE_AREA:case g.TacticalLines.TRAINING_AREA:case g.TacticalLines.FORESHORE_AREA:case g.TacticalLines.DRYDOCK:case g.TacticalLines.LOADING_FACILITY_AREA:case g.TacticalLines.PERCHES:case g.TacticalLines.UNDERWATER_HAZARD:case g.TacticalLines.DISCOLORED_WATER:case g.TacticalLines.BEACH_SLOPE_FLAT:case g.TacticalLines.BEACH_SLOPE_GENTLE:case g.TacticalLines.MARITIME_AREA:case g.TacticalLines.OPERATOR_DEFINED:case g.TacticalLines.SUBMERGED_CRIB:case g.TacticalLines.VDR_LEVEL_12:case g.TacticalLines.VDR_LEVEL_23:case g.TacticalLines.VDR_LEVEL_34:case g.TacticalLines.VDR_LEVEL_45:case g.TacticalLines.VDR_LEVEL_56:case g.TacticalLines.VDR_LEVEL_67:case g.TacticalLines.VDR_LEVEL_78:case g.TacticalLines.VDR_LEVEL_89:case g.TacticalLines.VDR_LEVEL_910:case g.TacticalLines.SOLID_ROCK:case g.TacticalLines.CLAY:case g.TacticalLines.VERY_COARSE_SAND:case g.TacticalLines.COARSE_SAND:case g.TacticalLines.MEDIUM_SAND:case g.TacticalLines.FINE_SAND:case g.TacticalLines.VERY_FINE_SAND:case g.TacticalLines.VERY_FINE_SILT:case g.TacticalLines.FINE_SILT:case g.TacticalLines.MEDIUM_SILT:case g.TacticalLines.COARSE_SILT:case g.TacticalLines.BOULDERS:case g.TacticalLines.OYSTER_SHELLS:case g.TacticalLines.PEBBLES:case g.TacticalLines.SAND_AND_SHELLS:case g.TacticalLines.BOTTOM_SEDIMENTS_LAND:case g.TacticalLines.BOTTOM_SEDIMENTS_NO_DATA:case g.TacticalLines.BOTTOM_ROUGHNESS_SMOOTH:case g.TacticalLines.BOTTOM_ROUGHNESS_MODERATE:case g.TacticalLines.BOTTOM_ROUGHNESS_ROUGH:case g.TacticalLines.CLUTTER_LOW:case g.TacticalLines.CLUTTER_MEDIUM:case g.TacticalLines.CLUTTER_HIGH:case g.TacticalLines.IMPACT_BURIAL_0:case g.TacticalLines.IMPACT_BURIAL_10:case g.TacticalLines.IMPACT_BURIAL_20:case g.TacticalLines.IMPACT_BURIAL_75:case g.TacticalLines.IMPACT_BURIAL_100:case g.TacticalLines.BOTTOM_CATEGORY_A:case g.TacticalLines.BOTTOM_CATEGORY_B:case g.TacticalLines.BOTTOM_CATEGORY_C:case g.TacticalLines.BOTTOM_TYPE_A1:case g.TacticalLines.BOTTOM_TYPE_A2:case g.TacticalLines.BOTTOM_TYPE_A3:case g.TacticalLines.BOTTOM_TYPE_B1:case g.TacticalLines.BOTTOM_TYPE_B2:case g.TacticalLines.BOTTOM_TYPE_B3:case g.TacticalLines.BOTTOM_TYPE_C1:case g.TacticalLines.BOTTOM_TYPE_C2:case g.TacticalLines.BOTTOM_TYPE_C3:case g.TacticalLines.TGMF:t=!0}return t}static ClosePolygon(e){try{let t=e[0],i=e[e.length-1];t.x===i.x&&t.y===i.y||e.push(new c.POINT2(t.x,t.y))}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"ClosePolygon",new I.RendererException("Failed inside ClosePolygon",e))}}static shiftModifiersLeft(e,t,i){try{let a=new c.POINT2(e),n=new c.POINT2(t),s=o.lineutility.CalcDistanceDouble(a,n);a.x<n.x||a.x===n.x&&a.y<n.y?(a=o.lineutility.ExtendAlongLineDouble(n,a,s+i),n=o.lineutility.ExtendAlongLineDouble(a,n,s-i)):(a=o.lineutility.ExtendAlongLineDouble(n,a,s-i),n=o.lineutility.ExtendAlongLineDouble(a,n,s+i)),e.x=a.x,e.y=a.y,t.x=n.x,t.y=n.y}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"shiftModifiersLeft",new I.RendererException("Failed inside shiftModifiersLeft",e))}}static ResolveModifierShape(e,t){try{let i=t.get_Style(),n=e.get_LineStyle(),s=e.get_LineType(),l=P.LinesWithFill(s);if(M.clsMETOC.IsWeather(e.get_SymbolId())>0)return;let r=0;switch(e.get_LineType()){case g.TacticalLines.NFA:case g.TacticalLines.NFA_CIRCULAR:case g.TacticalLines.NFA_RECTANGULAR:case g.TacticalLines.BIO:case g.TacticalLines.NUC:case g.TacticalLines.CHEM:case g.TacticalLines.RAD:case g.TacticalLines.WFZ:r=3,e.get_UseHatchFill()&&(r=0),t.getShapeType()===u.Shape2.SHAPE_TYPE_POLYLINE&&(t.set_Style(e.get_LineStyle()),t.setLineColor(e.get_LineColor()),t.setFillStyle(r),t.setFillColor(e.get_FillColor()));break;case g.TacticalLines.OBSAREA:t.getShapeType()===u.Shape2.SHAPE_TYPE_POLYLINE&&(t.set_Style(e.get_LineStyle()),t.setLineColor(e.get_LineColor()),t.setFillStyle(0),t.setFillColor(e.get_FillColor()));break;case g.TacticalLines.LAA:r=2,e.get_UseHatchFill()&&(r=0),t.getShapeType()===u.Shape2.SHAPE_TYPE_POLYLINE&&(t.set_Style(e.get_LineStyle()),t.setLineColor(e.get_LineColor()),t.setFillStyle(r),t.setFillColor(e.get_FillColor()));break;case g.TacticalLines.DIRATKAIR:case g.TacticalLines.ATDITCHC:case g.TacticalLines.ATDITCHM:case g.TacticalLines.SARA:case g.TacticalLines.FOLSP:case g.TacticalLines.FERRY:case g.TacticalLines.MNFLDFIX:case g.TacticalLines.TURN:case g.TacticalLines.MNFLDDIS:case g.TacticalLines.EASY:case g.TacticalLines.BYDIF:case g.TacticalLines.BYIMP:e.set_lineCap(a.BasicStroke.CAP_BUTT),t.getShapeType()===u.Shape2.SHAPE_TYPE_FILL&&(t.setFillStyle(1),t.setFillColor(e.get_LineColor())),t.getShapeType()===u.Shape2.SHAPE_TYPE_POLYLINE&&(t.set_Style(e.get_LineStyle()),t.setLineColor(e.get_LineColor()));break;case g.TacticalLines.CLUSTER:case g.TacticalLines.CATK:case g.TacticalLines.CATKBYFIRE:case g.TacticalLines.PLD:case g.TacticalLines.PLANNED:case g.TacticalLines.CFL:case g.TacticalLines.FORDSITE:case g.TacticalLines.ACOUSTIC_AMB:t.getShapeType()===u.Shape2.SHAPE_TYPE_POLYLINE&&(t.set_Style(1),t.setLineColor(e.get_LineColor()));break;case g.TacticalLines.PNO:t.getShapeType()===u.Shape2.SHAPE_TYPE_POLYLINE&&(t.set_Style(1),t.setLineColor(e.get_LineColor()),t.setFillColor(e.get_FillColor()),t.setFillStyle(e.get_FillStyle()));break;case g.TacticalLines.FOLLA:case g.TacticalLines.ESR1:case g.TacticalLines.FORDIF:t.getShapeType()===u.Shape2.SHAPE_TYPE_POLYLINE&&(t.setLineColor(e.get_LineColor()),i!==n&&1!==i&&t.set_Style(n));break;default:if(t.getShapeType()===u.Shape2.SHAPE_TYPE_FILL&&(t.setFillStyle(e.get_FillStyle()),t.setFillColor(e.get_FillColor())),t.getShapeType()===u.Shape2.SHAPE_TYPE_POLYLINE&&(s!==g.TacticalLines.LC?t.setLineColor(e.get_LineColor()):P.SetLCColor(e,t),t.set_Style(n),l||P.isClosedPolygon(s)||P.IsChange1Area(s)))switch(s){case g.TacticalLines.RANGE_FAN:case g.TacticalLines.RANGE_FAN_SECTOR:case g.TacticalLines.RADAR_SEARCH:t.setFillColor(null);break;default:t.setFillStyle(e.get_FillStyle()),t.setFillColor(e.get_FillColor())}}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"ResolveModifierShape",new I.RendererException("Failed inside ResolveModifierShape",e))}}static GetOpaqueColor(e){let t=e.getRed(),i=e.getGreen(),a=e.getBlue();return new _.Color(t,i,a)}static LinesWithFill(e){let t=!1;try{switch(e){case g.TacticalLines.PAA_RECTANGULAR:case g.TacticalLines.RECTANGULAR_TARGET:case g.TacticalLines.CFL:case g.TacticalLines.DIRATKAIR:case g.TacticalLines.BOUNDARY:case g.TacticalLines.ISOLATE:case g.TacticalLines.CORDONKNOCK:case g.TacticalLines.CORDONSEARCH:case g.TacticalLines.OCCUPY:case g.TacticalLines.RETAIN:case g.TacticalLines.SECURE:case g.TacticalLines.FLOT:case g.TacticalLines.LC:case g.TacticalLines.PL:case g.TacticalLines.FEBA:case g.TacticalLines.LL:case g.TacticalLines.EWL:case g.TacticalLines.DIRATKGND:case g.TacticalLines.DIRATKSPT:case g.TacticalLines.FCL:case g.TacticalLines.HOLD:case g.TacticalLines.BRDGHD:case g.TacticalLines.HOLD_GE:case g.TacticalLines.BRDGHD_GE:case g.TacticalLines.LOA:case g.TacticalLines.LOD:case g.TacticalLines.LDLC:case g.TacticalLines.RELEASE:case g.TacticalLines.HOL:case g.TacticalLines.BHL:case g.TacticalLines.LINE:case g.TacticalLines.ABATIS:case g.TacticalLines.ATDITCH:case g.TacticalLines.ATWALL:case g.TacticalLines.SFENCE:case g.TacticalLines.DFENCE:case g.TacticalLines.UNSP:case g.TacticalLines.PLD:case g.TacticalLines.DOUBLEA:case g.TacticalLines.LWFENCE:case g.TacticalLines.HWFENCE:case g.TacticalLines.SINGLEC:case g.TacticalLines.DOUBLEC:case g.TacticalLines.TRIPLE:case g.TacticalLines.FORTL:case g.TacticalLines.LINTGT:case g.TacticalLines.LINTGTS:case g.TacticalLines.FSCL:case g.TacticalLines.BCL_REVD:case g.TacticalLines.BCL:case g.TacticalLines.ICL:case g.TacticalLines.IFF_OFF:case g.TacticalLines.IFF_ON:case g.TacticalLines.GENERIC_LINE:case g.TacticalLines.NFL:case g.TacticalLines.MFP:case g.TacticalLines.RFL:case g.TacticalLines.CONVOY:case g.TacticalLines.HCONVOY:case g.TacticalLines.MSR:case g.TacticalLines.MSR_ONEWAY:case g.TacticalLines.MSR_TWOWAY:case g.TacticalLines.MSR_ALT:case g.TacticalLines.ASR:case g.TacticalLines.ASR_ONEWAY:case g.TacticalLines.ASR_TWOWAY:case g.TacticalLines.ASR_ALT:case g.TacticalLines.ROUTE:case g.TacticalLines.ROUTE_ONEWAY:case g.TacticalLines.ROUTE_ALT:t=!0;break;default:t=!1}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"LinesWithFill",new I.RendererException("Failed inside LinesWithFill",e))}return t}static tweakFillColor(e){try{if(!1===P.isSameColor(e.get_LineColor(),e.get_FillColor()))return;let t=e.get_FillColor(),i=t.getRed(),a=t.getGreen(),n=t.getBlue(),s=t.getAlpha();i*=.9,a*=.9,n*=.9,s*=.8,t=new _.Color(i,a,n,s),e.set_FillColor(t)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"tweakFillColor",new I.RendererException("Failed inside tweakFillColor",e))}}static isSameColor(e,t){try{if(null==e||null==t)return!0;let i=e.getRed(),a=t.getRed(),n=e.getGreen(),s=t.getGreen(),l=e.getBlue(),r=t.getBlue();if(Math.abs(i-a)<5&&Math.abs(n-s)<5&&Math.abs(l-r)<5)return!0}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"isSameColor",new I.RendererException("Failed inside isSameColor",e))}return!1}static getLineStroke(e,t,i,n){let s;try{let l=2*e,r=1,o=2*e;switch(t){case 0:default:s=new a.BasicStroke(e,i,n);break;case 1:{let t=[l,l];s=new a.BasicStroke(e,i,n,4,t,0);break}case 2:{let t=[r,o];s=new a.BasicStroke(e,i,n,4,t,0);break}case 3:{let t=[2*l,o,r,o];s=new a.BasicStroke(e,i,n,4,t,0);break}case 4:{let t=[l,o,r,o,r,o];s=new a.BasicStroke(e,i,n,4,t,0);break}}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"getLineStroke",new I.RendererException("Failed inside getLineStroke",e))}return s}static SetShapeProperties(e,t){try{if(null==t)return;let i,n,s=0,l=e.get_LineThickness(),r=-1,o=e.get_LineType();if(P.LinesWithFill(o),P.IsChange1Area(o),P.isClosedPolygon(o),null==e.get_FillColor())switch(e.get_LineType()){case g.TacticalLines.AC:case g.TacticalLines.SAAFR:case g.TacticalLines.MRR:case g.TacticalLines.SL:case g.TacticalLines.TC:case g.TacticalLines.SC:case g.TacticalLines.LLTR:i=t[t.length-1],t.length=0,t.push(i);break;case g.TacticalLines.CATK:case g.TacticalLines.AIRAOA:case g.TacticalLines.AAAAA:case g.TacticalLines.SPT:case g.TacticalLines.MAIN:case g.TacticalLines.CATKBYFIRE:{let e=new Array;for(s=0;s<t.length;s++)i=t[s],i.getShapeType()!==u.Shape2.SHAPE_TYPE_FILL&&e.push(i);t=e;break}}for(s=0;s<t.length;s++)i=t[s],null!=i&&null!=i.getShape()&&(i.getShapeType()===u.Shape2.SHAPE_TYPE_FILL&&(e.get_LineType()===g.TacticalLines.DEPTH_AREA||i.setFillColor(e.get_FillColor())),P.ResolveModifierShape(e,i),o===g.TacticalLines.AIRFIELD&&1===s&&i.setFillColor(null),r=i.getShapeType(),e.get_TexturePaint(),0===l&&(l=1),n=P.getLineStroke(l,i.get_Style(),e.get_lineCap(),a.BasicStroke.JOIN_ROUND),i.getShapeType()===u.Shape2.SHAPE_TYPE_FILL&&(n=new a.BasicStroke(l,a.BasicStroke.CAP_ROUND,a.BasicStroke.JOIN_MITER)),i.setStroke(n));if(e.get_LineType()===g.TacticalLines.DIRATKAIR)for(let i=2;i<t.length;i++){let s=t[i];s.set_Style(0),n=P.getLineStroke(l,0,e.get_lineCap(),a.BasicStroke.JOIN_ROUND),s.setStroke(n)}else if(e.get_LineType()===g.TacticalLines.DIRATKGND||e.get_LineType()===g.TacticalLines.DIRATKSPT){let i=t[1];i.set_Style(0),n=P.getLineStroke(l,0,e.get_lineCap(),a.BasicStroke.JOIN_ROUND),i.setStroke(n)}else if(e.get_LineType()===g.TacticalLines.PDF){let i=t[1];i.set_Style(0),n=P.getLineStroke(l,0,e.get_lineCap(),a.BasicStroke.JOIN_ROUND),i.setStroke(n),i.setFillColor(i.getLineColor())}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"SetShapeProperties",new I.RendererException("Failed inside SetShapeProperties",e))}}static IsChange1Area(e){try{switch(e){case g.TacticalLines.LAUNCH_AREA:case g.TacticalLines.DEFENDED_AREA_CIRCULAR:case g.TacticalLines.SHIP_AOI_CIRCULAR:case g.TacticalLines.RECTANGULAR:case g.TacticalLines.CUED_ACQUISITION:case g.TacticalLines.CIRCULAR:case g.TacticalLines.BDZ:case g.TacticalLines.FSA_CIRCULAR:case g.TacticalLines.NOTACK:case g.TacticalLines.FFA_CIRCULAR:case g.TacticalLines.NFA_CIRCULAR:case g.TacticalLines.RFA_CIRCULAR:case g.TacticalLines.ACA_CIRCULAR:case g.TacticalLines.PAA_CIRCULAR:case g.TacticalLines.ATI_CIRCULAR:case g.TacticalLines.CFFZ_CIRCULAR:case g.TacticalLines.SENSOR_CIRCULAR:case g.TacticalLines.CENSOR_CIRCULAR:case g.TacticalLines.DA_CIRCULAR:case g.TacticalLines.CFZ_CIRCULAR:case g.TacticalLines.ZOR_CIRCULAR:case g.TacticalLines.TBA_CIRCULAR:case g.TacticalLines.TVAR_CIRCULAR:case g.TacticalLines.KILLBOXBLUE_CIRCULAR:case g.TacticalLines.KILLBOXPURPLE_CIRCULAR:case g.TacticalLines.RANGE_FAN:case g.TacticalLines.RANGE_FAN_FILL:case g.TacticalLines.RANGE_FAN_SECTOR:case g.TacticalLines.RADAR_SEARCH:case g.TacticalLines.PAA_RECTANGULAR:case g.TacticalLines.RECTANGULAR_TARGET:case g.TacticalLines.FSA_RECTANGULAR:case g.TacticalLines.SHIP_AOI_RECTANGULAR:case g.TacticalLines.DEFENDED_AREA_RECTANGULAR:case g.TacticalLines.FFA_RECTANGULAR:case g.TacticalLines.RFA_RECTANGULAR:case g.TacticalLines.NFA_RECTANGULAR:case g.TacticalLines.ACA_RECTANGULAR:case g.TacticalLines.ATI_RECTANGULAR:case g.TacticalLines.CFFZ_RECTANGULAR:case g.TacticalLines.SENSOR_RECTANGULAR:case g.TacticalLines.CENSOR_RECTANGULAR:case g.TacticalLines.DA_RECTANGULAR:case g.TacticalLines.CFZ_RECTANGULAR:case g.TacticalLines.ZOR_RECTANGULAR:case g.TacticalLines.TBA_RECTANGULAR:case g.TacticalLines.TVAR_RECTANGULAR:case g.TacticalLines.KILLBOXBLUE_RECTANGULAR:case g.TacticalLines.KILLBOXPURPLE_RECTANGULAR:return!0;default:return!1}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"IsChange1Area",new I.RendererException("Failed inside IsChange1Area",e))}return!1}static CalcIntersectPt(e,t,i,a,n){try{if(t===a)return;let s=e.x,l=e.y,r=i.x,o=i.y,c=(l-o+t*r-t*s)/(a-t),T=r+c,u=o+a*c;n.x=T,n.y=u}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"CalcIntersectPt",new I.RendererException("Failed inside CalcIntersectPt",e))}}static ChannelWidth(e,t){let i=0;try{let a=e.length/2;if(a<3)return 0;let n=new c.POINT2(0,0),s=new c.POINT2(0,0),l=new c.POINT2(0,0);s.x=e[2*a-6],s.y=e[2*a-5],l.x=e[2*a-4],l.y=e[2*a-3],n.x=e[2*a-2],n.y=e[2*a-1];let r=new T.ref,u=0,g=0,L=new c.POINT2(0,0),d=o.lineutility.CalcTrueSlopeDouble2(s,l,r);if(!0===d&&0!==r.value[0]&&(u=-1/r.value[0],P.CalcIntersectPt(n,u,l,r.value[0],L),g=o.lineutility.CalcDistanceDouble(n,L)),!0===d&&0===r.value[0]&&(g=Math.abs(n.y-s.y)),!1===d)return g=Math.abs(n.x-s.x),t.value=new Array(1),t.value[0]=g,4*g;i=8*g,i<2&&(i=2);let _=o.lineutility.CalcDistanceDouble(l,n);t.value=new Array(1),t.value[0]=Math.sqrt(_*_-g*g)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"ChannelWidth",new I.RendererException("Failed inside ChannelWidth",e))}return i}static InYOrder(e,t,i){try{if(e.y<=t.y&&t.y<=i.y)return!0;if(i.y<=t.y&&t.y<=e.y)return!0}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"InYOrder",new I.RendererException("Failed inside InYOrder",e))}return!1}static InXOrder(e,t,i){try{if(e.x<=t.x&&t.x<=i.x)return!0;if(i.x<=t.x&&t.x<=e.x)return!0}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"InXOrder",new I.RendererException("Failed inside InXOrder",e))}return!1}static GetSectorRadiiFromPoints(e){try{if(e.get_LineType()===g.TacticalLines.RANGE_FAN_FILL)return;let t=e.LatLongs[0],i=new c.POINT2,a=new c.POINT2,n=0,s="",l="",r="",o="",u="",d=0,_=0,h=0,E=0,A=0,I=new T.ref,S=new T.ref,y=0;if(e.LatLongs.length>2){for(y=(e.LatLongs.length-2)/2,n=0;n<y;n++)i=e.LatLongs[2*n+2],a=e.LatLongs[2*n+3],A=L.mdlGeodesic.geodesic_distance(t,i,I,S),d=I.value[0],s=d.toString(),h=A,r=h.toString(),A=L.mdlGeodesic.geodesic_distance(t,a,I,S),_=I.value[0],l=_.toString(),E=A,o=E.toString(),0===n?u=s+","+l+","+r+","+o:u+=","+s+","+l+","+r+","+o;""!==u&&e.set_LRMM(u)}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"GetSectorRadiiFromPoints",new I.RendererException("Failed inside GetSectorRadiiFromPoints",e))}}static ReorderPixels(e){try{let t,i=0,a=0,n=0,s=0,l=0;for(s=0,l=e.length/2,t=new Array(e.length),i=0;i<l-1;i++)a=e[e.length-2*i-4],n=e[e.length-2*i-3],t[s]=a,t[s+1]=n,s+=2;let r=e.length;t[s]=e[r-2],t[s+1]=e[r-1];let o=e.length;for(i=0;i<o;i++)e[i]=t[i]}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"ReorderPixels",new I.RendererException("Failed inside ReorderPixels",e))}}static FilterVerticalSegments(e){try{switch(e.get_LineType()){case g.TacticalLines.MAIN:case g.TacticalLines.CATK:case g.TacticalLines.CATKBYFIRE:case g.TacticalLines.AIRAOA:case g.TacticalLines.AAAAA:case g.TacticalLines.SPT:case g.TacticalLines.LC:case g.TacticalLines.UNSP:case g.TacticalLines.DFENCE:case g.TacticalLines.SFENCE:case g.TacticalLines.DOUBLEA:case g.TacticalLines.LWFENCE:case g.TacticalLines.HWFENCE:case g.TacticalLines.SINGLEC:case g.TacticalLines.DOUBLEC:case g.TacticalLines.TRIPLE:case g.TacticalLines.MSR_ONEWAY:case g.TacticalLines.MSR_TWOWAY:case g.TacticalLines.MSR_ALT:case g.TacticalLines.ASR_ONEWAY:case g.TacticalLines.ASR_TWOWAY:case g.TacticalLines.ASR_ALT:case g.TacticalLines.ROUTE_ONEWAY:case g.TacticalLines.ROUTE_ALT:case g.TacticalLines.ATWALL:break;default:return}let t,i,a=e.Pixels.length;for(let n=1;n<a;n++)i=new c.POINT2(e.Pixels[n-1]),t=new c.POINT2(e.Pixels[n]),Math.abs(t.x-i.x)<1&&(t.x>=i.x?t.x+=1:t.x-=1,e.Pixels[n]=t)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException("clsUtility","FilterVerticalSegments",new I.RendererException("Failed inside FilterVerticalSegments",e))}}static ComputeLastPoint(e){let t=new c.POINT2(0,0);try{let i=e[1],a=e[0],n=a.x-i.x,s=a.y-i.y,l=Math.atan2(-s,n),r=new c.POINT2(0,0);r.x=Math.trunc(i.x+.85*n),r.y=Math.trunc(i.y+.85*s);let o=l+Math.PI/2;o>Math.PI&&(o-=2*Math.PI),o<-Math.PI&&(o+=2*Math.PI);let T=30;t.x=r.x+T*Math.cos(o),t.y=r.y-T*Math.sin(o)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"ComputeLastPoint",new I.RendererException("Failed inside ComputeLastPoint",e))}return t}static GetSegments(e,t,i){try{let a=0,n=new T.ref,s=new T.ref,l=0,r=!1,u=!1,g=new c.POINT2(0,0),L=new c.POINT2(0,0),d=new c.POINT2(0,0);for(t[0]=!0,l=e.length/2,a=0;a<l-2;a++)g.x=e[2*a],g.y=e[2*a+1],L.x=e[2*a+2],L.y=e[2*a+3],d.x=e[2*a+4],d.y=e[2*a+5],r=o.lineutility.CalcTrueSlopeDoubleForRoutes(g,L,n),u=o.lineutility.CalcTrueSlopeDoubleForRoutes(L,d,s),t[a+1]=!0,!0===r&&!0===u&&Math.abs(Math.atan(n.value[0])-Math.atan(s.value[0]))<1/i&&!1===P.InXOrder(g,L,d)&&(t[a+1]=!1),(!1===r||Math.abs(n.value[0])>i)&&(!1===u||Math.abs(s.value[0])>i)&&!1===P.InYOrder(g,L,d)&&(t[a+1]=!1)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"GetSegments",new I.RendererException("Failed inside GetSegments",e))}}static GetLCPartitions(e,t,i,a){try{let n=e.length/2,s=new c.POINT2(0,0),l=new c.POINT2(0,0),r=new c.POINT2(0,0),T=new d.P1;T.start=0;let u=new Array(n-1);for(let c=0;c<n-2;c++){s.x=e[2*c],s.y=e[2*c+1],l.x=e[2*c+2],l.y=e[2*c+3],r.x=e[2*c+4],r.y=e[2*c+5];let n=Math.atan2(l.y-s.y,l.x-s.x)-Math.atan2(l.y-r.y,l.x-r.x),g=180*n/Math.PI;if(n<0&&(g=360+g),g>270){let e=!1;if(o.lineutility.CalcDistanceDouble(s,l)<o.lineutility.CalcDistanceDouble(l,r)){let i=o.lineutility.ExtendAlongLineDouble2(l,r,o.lineutility.CalcDistanceDouble(l,s));o.lineutility.CalcDistanceDouble(s,i)<t&&(e=!0)}else{let i=o.lineutility.ExtendAlongLineDouble2(l,s,o.lineutility.CalcDistanceDouble(l,r));o.lineutility.CalcDistanceDouble(r,i)<t&&(e=!0)}e&&(T.end_Renamed=c-1,i.push(T),T=new d.P1,T.start=c,T.end_Renamed=c+2,a.push(T),c++,T=new d.P1,T.start=c+1)}else g<90&&(T.end_Renamed=c,i.push(T),T=new d.P1,T.start=c+1);u[c]=g}T.end_Renamed=n-2,i.push(T)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"GetLCPartitions",new I.RendererException("Failed inside GetLCPartitions",e))}}static SetLCColor(e,t){try{e.isHostile()?t.getLineColor()===_.Color.RED?t.setLineColor(e.get_LineColor()):t.setLineColor(_.Color.RED):t.getLineColor()!==_.Color.RED?t.setLineColor(e.get_LineColor()):t.setLineColor(_.Color.RED)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"SetLCColor",new I.RendererException("Failed inside SetLCColor",e))}}static ReverseUSASLCPointsByQuadrant(e){try{if(e.Pixels.length<2)return;let t=o.lineutility.GetQuadrantDouble(e.Pixels[0],e.Pixels[1]);if(e.get_LineType()===g.TacticalLines.LC)if(e.isHostile())switch(t){case 2:case 3:break;case 1:case 4:{let t=e.Pixels.length,i=[...e.Pixels];for(let a=0;a<t;a++)e.Pixels[a]=i[t-a-1];break}}else switch(t){case 1:case 4:break;case 2:case 3:{let t=e.Pixels.length,i=[...e.Pixels];for(let a=0;a<t;a++)e.Pixels[a]=i[t-a-1];break}}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"ReverseUSASLCPointsByQuadrant",new I.RendererException("Failed inside ReverseUSASLCPointsByQuadrant",e))}}static GetLinetypeFromString(e){try{if(e.length<16)return-1;let t=y.SymbolID.getSymbolSet(e),i=y.SymbolID.getEntityCode(e),a=y.SymbolID.getVersion(e);if(25===t)return f.clsRenderer.getCMLineType(a,i);if(45===t||46===t)return M.clsMETOC.getWeatherLinetype(a,i)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"GetLinetypeFromString",new I.RendererException("Failed inside GetLinetypeFromString",e))}return-1}static isAutoshape(e){try{let t=A.MSLookup.getInstance().getMSLInfo(e.get_SymbolId());if(null==t||P.IsChange1Area(e.get_LineType()))return!1;switch(e.get_LineType()){case g.TacticalLines.DIRATKAIR:case g.TacticalLines.DIRATKGND:case g.TacticalLines.DIRATKSPT:return!1}switch(t.getDrawRule()){case h.DrawRules.LINE26:case h.DrawRules.LINE27:case h.DrawRules.AREA26:case h.DrawRules.CORRIDOR1:return!0;default:return t.getMaxPointCount()===t.getMinPointCount()}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"isAutoshape",new I.RendererException("Failed inside isAutoshape",e))}return!1}static getMSRSegmentColors(e){let t;try{switch(e.get_LineType()){case g.TacticalLines.MSR:case g.TacticalLines.ASR:case g.TacticalLines.ROUTE:case g.TacticalLines.BOUNDARY:if(null==e.get_H()||0===e.get_H().length)return null;t=new Map;break;default:return null}let i,a,n=e.get_H().split(","),s=0,l=n.length,r="",o=-1;for(s=0;s<l;s++)r=n[s],r.includes(":")&&(i=r.split(":"),a=S.RendererUtilities.getColorFromHexString(i[1]),o=parseInt(i[0]),t.set(o,a))}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"getMSRSegmentColors",new I.RendererException("Failed inside getMSRSegmentColors",e))}return t}static getMSRSegmentColorStrings(e){let t;try{switch(e.get_LineType()){case g.TacticalLines.MSR:case g.TacticalLines.ASR:case g.TacticalLines.ROUTE:case g.TacticalLines.BOUNDARY:if(null==e.get_H()||0===e.get_H().length)return null;t=new Map;break;default:return null}let i,a=e.get_H().split(","),n=0,s=a.length,l="",r=-1;for(n=0;n<s;n++)l=a[n],l.includes(":")&&(i=l.split(":"),r=parseInt(i[0]),t.set(r,i[1]))}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"getMSRSegmentColorStrings",new I.RendererException("Failed inside getMSRSegmentColorStrings",e))}return t}static reviseHModifier(e,t){try{if(null==t.get_H()||0===t.get_H().length)return;switch(t.get_LineType()){case g.TacticalLines.ASR:case g.TacticalLines.MSR:case g.TacticalLines.ROUTE:case g.TacticalLines.BOUNDARY:break;default:return}let i=0,a=0,s=-1,l=!1,r=e.length,c=t.Pixels.length;for(i=0;i<r;i++){for(a=0;a<c;a++)if(e[i].x===t.Pixels[a].x&&e[i].y===t.Pixels[a].y){s=i,l=!0;break}if(l)break}let T,u,L,d,_,h=P.getMSRSegmentColors(t),E=new Map;s<1&&(s=1);for(let a of h.keys())if(!(a<s-1)){if(a+1>e.length-1)break;for(_=h.get(a),T=e[a],u=e[a+1],c=t.Pixels.length,i=0;i<c-1;i++){if(L=t.Pixels[i],d=t.Pixels[i+1],T.x===L.x&&T.y===L.y){E.set(i,_);break}if(u.x===d.x&&u.y===d.y){E.set(i,_);break}if(!(L.x===u.x&&L.y===u.y||d.x===T.x&&d.y===T.y)){let e=o.lineutility.CalcDistanceToLineDouble(T,u,L),t=o.lineutility.CalcDistanceToLineDouble(T,u,d),a=new n.Line2D(T.x,T.y,u.x,u.y).getBounds2D(),s=new n.Line2D(L.x,L.y,d.x,d.y).getBounds2D();e<1&&t<1&&a.contains(s)&&E.set(i,_)}}}if(0===E.size)return void t.set_H("");let A="",I="";for(let e of E.keys())_=E.get(e),I=S.RendererUtilities.colorToHexString(_,!1),A+=e.toString()+":"+I+",";A=A.substring(0,A.length-1),t.set_H(A)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"reviseHModifer",new I.RendererException("Failed inside reviseHModifier",e))}}static SegmentLCPoints(e,t){try{if(e.get_LineType()!==g.TacticalLines.LC&&e.get_LineType()!==g.TacticalLines.LC_HOSTILE)return;let i=e.get_Pixels(),a=r.arraysupport.getScaledSize(40,e.get_LineThickness());for(let e=0;e<i.length-2;e++){let t=new c.POINT2(i[e].x,i[e].y),n=new c.POINT2(i[e+1].x,i[e+1].y),s=new c.POINT2(i[e+2].x,i[e+2].y),l=Math.atan2(n.y-t.y,n.x-t.x)-Math.atan2(n.y-s.y,n.x-s.x),r=180*l/Math.PI;if(l<0&&(r=360+r),r>270)if(o.lineutility.CalcDistanceDouble(n,t)<o.lineutility.CalcDistanceDouble(n,s)){let l=o.lineutility.ExtendAlongLineDouble2(n,s,o.lineutility.CalcDistanceDouble(n,t));o.lineutility.CalcDistanceDouble(t,l)<a&&(i.splice(e+2,0,new c.POINT2(l.x,l.y)),e++)}else{let l=o.lineutility.ExtendAlongLineDouble2(n,t,o.lineutility.CalcDistanceDouble(n,s));o.lineutility.CalcDistanceDouble(s,l)<a&&(i.splice(e+1,0,new c.POINT2(l.x,l.y)),e++)}}e.Pixels=i,e.LatLongs=D.clsUtility.PixelsToLatLong(i,t)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"segmentLCPoints",new I.RendererException("Failed inside segmentLCPoints",e))}}static InterpolatePixels(e){try{if(!1===e.get_UseLineInterpolation())return;let t=e.get_LineType(),i=10;switch(t){case g.TacticalLines.ATDITCH:case g.TacticalLines.ATDITCHC:i=25;break;case g.TacticalLines.ATDITCHM:i=50;break;case g.TacticalLines.FLOT:case g.TacticalLines.LC:case g.TacticalLines.FORT_REVD:case g.TacticalLines.FORT:case g.TacticalLines.FORTL:case g.TacticalLines.ENCIRCLE:case g.TacticalLines.ZONE:case g.TacticalLines.OBSFAREA:case g.TacticalLines.OBSAREA:case g.TacticalLines.DOUBLEA:case g.TacticalLines.LWFENCE:case g.TacticalLines.HWFENCE:case g.TacticalLines.SINGLEC:case g.TacticalLines.DOUBLEC:case g.TacticalLines.TRIPLE:case g.TacticalLines.STRONG:i=r.arraysupport.getScaledSize(30,e.get_LineThickness());break;case g.TacticalLines.UNSP:case g.TacticalLines.LINE:case g.TacticalLines.ATWALL:case g.TacticalLines.SFENCE:i=r.arraysupport.getScaledSize(40,e.get_LineThickness());break;case g.TacticalLines.DFENCE:i=r.arraysupport.getScaledSize(50,e.get_LineThickness());break;default:return}let a,n,s,l=new Map,c=new Map,T=0,u=0,L=0,d=0,_=0,h=0,E=0,A=e.Pixels.length;for(T=0;T<A;T++)0===T?(l.set(T,e.Pixels[T]),c.set(T,e.LatLongs[T]),u=0):T===e.Pixels.length-1?(l.set(T,e.Pixels[T]),c.set(T,e.LatLongs[T])):(L=o.lineutility.CalcDistanceDouble(e.Pixels[u],e.Pixels[T]),d=o.lineutility.CalcDistanceDouble(e.Pixels[T],e.Pixels[T+1]),a=e.Pixels[u],n=e.Pixels[T],s=e.Pixels[T+1],_=180/Math.PI*Math.atan((a.y-n.y)/(a.x-n.x)),h=180/Math.PI*Math.atan((n.y-s.y)/(n.x-s.x)),E=Math.abs(_-h),(L>i||d>i||E>20)&&(l.set(T,e.Pixels[T]),c.set(T,e.LatLongs[T]),u=T));let I=new Array,S=new Array;for(A=e.Pixels.length,T=0;T<A;T++)l.has(T)&&I.push(l.get(T)),c.has(T)&&S.push(c.get(T));switch(t){case g.TacticalLines.FORT_REVD:case g.TacticalLines.FORT:case g.TacticalLines.ENCIRCLE:case g.TacticalLines.ZONE:case g.TacticalLines.OBSFAREA:case g.TacticalLines.OBSAREA:case g.TacticalLines.STRONG:if(2===I.length)for(A=e.Pixels.length,T=0;T<A;T++)if(!1===l.has(T)&&!1===c.has(T)){I.splice(T,0,e.Pixels[T]),S.splice(T,0,e.LatLongs[T]);break}}e.Pixels=I,e.LatLongs=S}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"InterpolatePixels",new I.RendererException("Failed inside InterpolatePixels",e))}}static getExtendedLine(e,t,i){let a;try{let s,r,c,T=new l.Polygon,u=0,g=e.Pixels.length;for(u=0;u<g;u++)T.addPoint(e.Pixels[u].x,e.Pixels[u].y);e.Pixels.length>3?(s=e.Pixels[t],r=e.Pixels[t+1]):(s=e.Pixels[1],r=e.Pixels[2]);let L,d,_=-1,h=o.lineutility.MidPointDouble(s,r,0);Math.abs(r.y-s.y)/(r.x-s.x)<=1?(c=o.lineutility.ExtendDirectedLine(s,r,h,o.lineutility.extend_above,2),_=T.contains(c.x,c.y)?o.lineutility.extend_below:o.lineutility.extend_above):(c=o.lineutility.ExtendDirectedLine(s,r,h,o.lineutility.extend_left,2),_=T.contains(c.x,c.y)?o.lineutility.extend_right:o.lineutility.extend_left),L=o.lineutility.ExtendDirectedLine(s,r,s,_,i),d=o.lineutility.ExtendDirectedLine(s,r,r,_,i),a=new n.Line2D(L.x,L.y,d.x,d.y)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(P._className,"getExtendedLine",new I.RendererException("Failed inside getExtendedLine",e))}return a}}t.clsUtility=P},8712:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ref=void 0,t.ref=class{value}},8739:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JavaRendererUtilities=void 0;const a=i(9441),n=i(9866),s=i(6932);t.JavaRendererUtilities=class{static HOSTILE_FILL_COLOR="FFFF8080";static FRIENDLY_FILL_COLOR="FF80E0FF";static NEUTRAL_FILL_COLOR="FFAAFFAA";static UNKNOWN_FILL_COLOR="FFFFFF80";static ARGBtoABGR(e){6===e.length&&(e="FF".concat(e));let t=e.toUpperCase();if(8===e.length){let i=e.split(""),a=i[2],n=i[3];i[2]=i[6],i[3]=i[7],i[6]=a,i[7]=n,t=i.join("")}else if(6===e.length){let i=e.split(""),a=i[0],n=i[1];i[0]=i[4],i[1]=i[5],i[4]=a,i[5]=n,t="FF"+i.join("")}else console.error('JavaRendererUtilties.ARGBtoABGR(): "'+e.toString()+'" is not a 6 or 8 character String in the format of RRGGBB or AARRGGBB');return t}static normalizeSymbolCode(e){let t=e;return(e.startsWith("G")||e.startsWith("S"))&&(t=t.substring(0,1)+"*"+t.substring(2),t=t.substring(0,3)+"*"+t.substring(4),t=t.substring(0,10)+"****"+t.substring(14)),e.startsWith("S")&&(t=t.substring(0,14)+"*"),t}static addAltModeToModifiersString(e,t){"relativeToGround"===t?e.set(n.MilStdAttributes.AltitudeMode,"AGL"):"absolute"===t&&e.set(n.MilStdAttributes.AltitudeMode,"AMSL")}static createParameterMapFromURL(e){let t,i,a,n,s,l,r,o=new Map,c=e.lastIndexOf("?");try{t=-1===c?decodeURI(e):decodeURI(e.substring(0,c))}catch(e){if(!(e instanceof Error))throw e;console.error("Error parsing SymbolID"),console.error(e.message)}try{if(c>0&&c+1<e.length){i=e.substring(c+1,e.length),s=i.split("&");let t=s.length;for(let e=0;e<t;e++)l=s[e].split("="),2===l.length&&null!=l[1]&&""!==l[1]&&(a=l[0],n=l[1],r=decodeURI(n),o.set(a.toUpperCase(),r))}}catch(e){if(!(e instanceof Error))throw e;console.error('Error parsing "'+a.toUpperCase()+'" parameter from URL'),console.error(e.message)}return o}static is3dSymbol(e,t){let i=!1;try{let a=e.substring(4,10);if("ACAI--"===a||"ACAR--"===a||"ACAC--"===a||"AKPC--"===a||"AKPR--"===a||"AKPI--"===a||"ALC---"===a||"ALM---"===a||"ALS---"===a||"ALU---"===a||"ALL---"===a||"AAR---"===a||"AAF---"===a||"AAH---"===a||"AAM---"===a||"AAML--"===a||"AAMH--"===a)try{null!=t&&t.has(s.Modifiers.X_ALTITUDE_DEPTH)&&(i=!(t.get(s.Modifiers.X_ALTITUDE_DEPTH).split(",").length<2))}catch(e){if(!(e instanceof Error))throw e;console.error(e.message)}}catch(e){if(!(e instanceof Error))throw e;console.error(e.message)}return i}static isNumber(e){return!(null==e||!RegExp("((-|\\+)?[0-9]+(\\.[0-9]+)?)+").test(e))}static getStackTrace(e){try{return e.stack}catch(e){if(e instanceof Error)return"";throw e}}static getEndPointWithAngle(e,t,i){let n=0,s=0,l=new a.Point2D;try{let a=0+Math.PI*t/180,r=i*Math.cos(a),o=i*Math.sin(a);n=e.getX()+r,s=e.getY()+o,l.setLocation(n,s)}catch(e){if(!(e instanceof Error))throw e;console.log(e.message),console.log(e.stack)}return l}static measureDistance(e,t,i,a,n){let s=-1,l=0,r=n.toLowerCase();if("meters"===r)l=6378137;else if("kilometers"===r)l=6378.137;else if("miles"===r)l=3963.1;else if("feet"===r)l=20925524.9;else if("yards"===r)l=6975174.98;else if("nautical"===r)l=3443.9;else{if("nautical miles"!==r)return-1;l=3443.9}return e*=Math.PI/180,i*=Math.PI/180,t*=Math.PI/180,a*=Math.PI/180,s=Math.acos(Math.cos(e)*Math.cos(t)*Math.cos(i)*Math.cos(a)+Math.cos(e)*Math.sin(t)*Math.cos(i)*Math.sin(a)+Math.sin(e)*Math.sin(i))*l,s}}},8795:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeInfo=void 0;const a=i(1358),n=i(151),s=i(9441),l=i(7940),r=i(8276);class o{static SHAPE_TYPE_POLYLINE=0;static SHAPE_TYPE_FILL=1;static SHAPE_TYPE_MODIFIER=2;static SHAPE_TYPE_MODIFIER_FILL=3;static SHAPE_TYPE_UNIT_FRAME=4;static SHAPE_TYPE_UNIT_FILL=5;static SHAPE_TYPE_UNIT_SYMBOL1=6;static SHAPE_TYPE_UNIT_SYMBOL2=7;static SHAPE_TYPE_UNIT_DISPLAY_MODIFIER=8;static SHAPE_TYPE_UNIT_ECHELON=9;static SHAPE_TYPE_UNIT_AFFILIATION_MODIFIER=10;static SHAPE_TYPE_UNIT_HQ_STAFF=11;static SHAPE_TYPE_TG_SP_FILL=12;static SHAPE_TYPE_TG_SP_FRAME=13;static SHAPE_TYPE_TG_Q_MODIFIER=14;static SHAPE_TYPE_TG_SP_OUTLINE=15;static SHAPE_TYPE_SINGLE_POINT_OUTLINE=16;static SHAPE_TYPE_UNIT_OUTLINE=17;static SHAPE_TYPE_UNIT_OPERATIONAL_CONDITION=18;static justify_left=0;static justify_center=1;static justify_right=2;_Shape=null;stroke=null;gp=null;fillStyle=0;texturePaint=null;_ShapeType=-1;lineColor=null;fillColor=null;textBackgoundColor=null;_TextLayout=null;_Position=null;_ModifierString=null;_ModifierPosition=null;_ModifierImageInfo=null;_ModifierAngle=0;_Tag=null;_shader=null;_patternFillInfo=null;_justify=o.justify_left;_Polylines=null;constructor(...e){switch(e.length){case 0:break;case 1:{const[t]=e;this._Shape=t;break}case 2:if(e[0]instanceof r.TextLayout){const[t,i]=e;this._TextLayout=t,this._Position=i}else{const[t,i]=e;this._Shape=t,this._ShapeType=i}break;default:throw Error("Invalid number of arguments")}}getShape(){return this._Shape}setShape(e){this._Shape=e,this._TextLayout=null}getTextLayout(){return this._TextLayout}setTextLayout(e){this._TextLayout=e,this._Shape=null}setModifierString(e){this._ModifierString=e}getModifierString(){return this._ModifierString}setModifierPosition(e){this._ModifierPosition=e}getModifierPosition(){return this._ModifierPosition}setModifierAngle(e){this._ModifierAngle=e}getModifierAngle(){return this._ModifierAngle}setModifierStringPosition(e){this.setModifierPosition(e)}getModifierStringPosition(){return this.getModifierPosition()}setModifierStringAngle(e){this.setModifierAngle(e)}getModifierStringAngle(){return this.getModifierAngle()}setModifierImage(e){this._ModifierImageInfo=e}getModifierImage(){return this._ModifierImageInfo?this._ModifierImageInfo.getSVGDataURI():null}getModifierImageInfo(){return this._ModifierImageInfo}setTag(e){this._Tag=e}getTag(){return this._Tag}getBounds(){let e;if(null!=this._Shape)e=this._Shape.getBounds(),this._Shape instanceof a.GeneralPath&&(this._ShapeType===o.SHAPE_TYPE_UNIT_OUTLINE?null!=this.lineColor&&null!=this.stroke&&null!=this.stroke&&this.stroke.getLineWidth()>2&&e.grow(this.stroke.getLineWidth()/2,this.stroke.getLineWidth()/2):null!=this.lineColor&&null!=this.stroke&&null!=this.stroke&&this.stroke.getLineWidth()>2&&e.grow(this.stroke.getLineWidth()-1,this.stroke.getLineWidth()-1));else if(null!=this._TextLayout&&null!=this._Position)e=this._TextLayout.getPixelBounds(null,this._Position.getX(),this._Position.getY());else{if(null==this._TextLayout)return null;e=new l.Rectangle,e.setRect(this._TextLayout.getBounds())}return e}setGlyphPosition(e){e instanceof n.Point?this._Position=new s.Point2D(e.x,e.y):this._Position=e}getGlyphPosition(){return this._Position}setLineColor(e){this.lineColor=e}getLineColor(){return this.lineColor}setFillColor(e){this.fillColor=e}getFillColor(){return this.fillColor}setTextBackgroundColor(e){this.textBackgoundColor=e}getTextBackgroundColor(){return this.textBackgoundColor}getStroke(){return this.stroke}getTexturePaint(){return this.texturePaint}setTexturePaint(e){this.texturePaint=e}getFillStyle(){return this.fillStyle}setFillStyle(e){this.fillStyle=e}setStroke(e){this.stroke=e}setShapeType(e){this._ShapeType=e}getShapeType(){return this._ShapeType}getPolylines(){return this._Polylines}setPolylines(e){this._Polylines=e}setShader(e){this._shader=e}getShader(){return this._shader}setPatternFillImage(e){this._patternFillInfo=e}getPatternFillImage(){return this._patternFillInfo?this._patternFillInfo.getSVGDataURI():null}getPatternFillImageInfo(){return this._patternFillInfo}getTextJustify(){return this._justify}setTextJustify(e){this._justify=e}}t.ShapeInfo=o},8965:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clsRenderer2=void 0;const a=i(8087),n=i(7142),s=i(7940),l=i(3170),r=i(4305),o=i(8262),c=i(1207),T=i(7389),u=i(5772),g=i(8101),L=i(6621),d=i(8678),_=i(2493),h=i(7300),E=i(3874),A=i(106),I=i(3254),S=i(498),y=i(1024),f=i(4738);class D{static _className="clsRenderer2";static getMSRShapes(e,t){try{let i=e.get_LineType();if(i!==g.TacticalLines.MSR&&i!==g.TacticalLines.ASR&&i!==g.TacticalLines.ROUTE)return;let n,s,l,r,o=d.clsUtility.getMSRSegmentColors(e),L=d.clsUtility.getLineStroke(e.get_LineThickness(),e.get_LineStyle(),e.get_lineCap(),a.BasicStroke.JOIN_ROUND),_=0,h=e.Pixels.length;n=new u.Shape2(u.Shape2.SHAPE_TYPE_POLYLINE),n.setLineColor(e.get_LineColor()),n.setStroke(L);let E,A,I,S=0,y=0;for(_=0;_<h-1;_++)E=e.Pixels[_],A=e.Pixels[_+1],null!=o&&o.has(_)?(s=o.get(_),s!==r&&(null!=l&&t.push(l),l=new u.Shape2(u.Shape2.SHAPE_TYPE_POLYLINE),l.setLineColor(s),l.set_Style(e.get_LineStyle()),l.setStroke(L)),l.moveTo(E),l.lineTo(A),r=s):null!=o&&o.has(_+1)||null!=o&&o.has(_-1)?(n.moveTo(E),n.lineTo(A),I=new T.POINT2(A)):_===e.Pixels.length-2?(n.moveTo(E),n.lineTo(A)):(null==I&&(I=new T.POINT2(E),n.moveTo(I)),S=c.lineutility.CalcDistanceDouble(E,A),S>10?(n.lineTo(A),I=new T.POINT2(A)):(y=c.lineutility.CalcDistanceDouble(I,A),y>10&&(n.lineTo(A),I=new T.POINT2(A))));null!=l&&t.push(l),t.push(n)}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(D._className,"getMSRShapes",new A.RendererException("Failed inside getMSRShapes",e))}}static GetLineArray(e,t,i,a){let T=new Array;try{if(null==e.Pixels||0===e.Pixels.length)return null;let i,u,M,P=0,R=0,N=0,C=0;if(null!=a)if(a instanceof l.Rectangle2D)u=a,P=u.getMinX()-50,R=u.getMinY()-50,N=u.getWidth()+100,C=u.getHeight()+100,i=new l.Rectangle2D(P,R,N,C);else if(a instanceof s.Rectangle){let e=a;u=new l.Rectangle2D(e.x,e.y,e.width,e.height),P=u.getMinX()-50,R=u.getMinY()-50,N=u.getWidth()+100,C=u.getHeight()+100,i=new l.Rectangle2D(P,R,N,C)}else a instanceof Array&&(M=a,i=S.clsUtility.getMBR(M));let O=e.get_LineType(),p=O,x=I.RendererSettings.getInstance().getDeviceDPI()/96;(O===g.TacticalLines.FOLLA||O===g.TacticalLines.FOLSP||O===g.TacticalLines.CONVOY)&&c.lineutility.CalcDistanceDouble(e.Pixels[0],e.Pixels[1])<=30*x&&(O=g.TacticalLines.DIRATKSPT,e.set_LineType(O));let b=0,w=E.MSLookup.getInstance().getMSLInfo(e.get_SymbolId());b=null!=w?w.getMinPointCount():-1;let m=d.clsUtility.IsChange1Area(O),F=f.clsMETOC.IsWeather(e.get_SymbolId()),G=new Array,U=0,v=e.Pixels.length;if(e.get_LineType()===g.TacticalLines.SINGLEC)for(G=[...e.Pixels],U=0;U<v;U++)e.Pixels[U]=G[G.length-U-1];let H=new n.Graphics2D;if(H.setFont(e.get_Font()),e.Pixels.length<b&&(m=!1),m)e.Pixels.length=0,m=y.clsUtilityCPOF.Change1TacticalAreas(e,O,t,T);else if(F>0){if(e.Pixels.length<2)return null;try{f.clsMETOC.GetMeTOCShape(e,T)}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(D._className,"GetLineArray",new A.RendererException("Failed inside GetLineArray",e))}}else{if(e.Pixels.length<2)return null;0===o.CELineArray.CIsChannel(O)?O===g.TacticalLines.ASR||O===g.TacticalLines.MSR||O===g.TacticalLines.ROUTE?D.getMSRShapes(e,T):e.Pixels=r.arraysupport.GetLineArray2(e,e.Pixels,T,i,t):L.clsChannelUtility.DrawChannel(e.Pixels,O,e,T,null,i,t)}F<=0&&O!==g.TacticalLines.ASR&&O!==g.TacticalLines.MSR&&O!==g.TacticalLines.ROUTE&&d.clsUtility.SetShapeProperties(e,T),O!==p&&e.set_LineType(p),_.Modifier2.AddModifiers2(e,t),_.Modifier2.GetIntegralTextShapes(e,H,T)}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(D._className,"GetLineArray",new A.RendererException("Failed inside GetLineArray",e))}return T}static getAutoshapeFillShape(e,t){try{if(null==t||0===t.length)return;if(null==e.Pixels||0===e.Pixels.length)return;if(null==e.get_FillColor())return;let i=e.get_LineType(),a=0,n=new u.Shape2(u.Shape2.SHAPE_TYPE_FILL);n.setFillColor(e.get_FillColor()),n.setLineColor(null);let s=t.length,l=e.Pixels.length;switch(i){case g.TacticalLines.RETAIN:if(null!=t&&t.length>0)for(a=0;a<s;a++)t[a].setFillColor(null);for(n.moveTo(e.Pixels[0]),a=1;a<26;a++)n.lineTo(e.Pixels[a]);n.lineTo(e.Pixels[0]),t.splice(0,0,n);break;case g.TacticalLines.SECURE:case g.TacticalLines.OCCUPY:if(null!=t&&t.length>0)for(a=0;a<s;a++)t[a].setFillColor(null);for(n.moveTo(e.Pixels[0]),a=1;a<l-3;a++)n.lineTo(e.Pixels[a]);n.lineTo(e.Pixels[0]),t.splice(0,0,n);break;case g.TacticalLines.CONVOY:case g.TacticalLines.HCONVOY:if(null!=t&&t.length>0)for(a=0;a<s;a++)t[a].setFillColor(null);for(n.moveTo(e.Pixels[0]),a=1;a<l;a++)n.lineTo(e.Pixels[a]);n.lineTo(e.Pixels[0]),t.splice(0,0,n);break;case g.TacticalLines.CORDONSEARCH:case g.TacticalLines.CORDONKNOCK:case g.TacticalLines.ISOLATE:if(null!=t&&t.length>0)for(a=0;a<s;a++)t[a].setFillColor(null);for(n.moveTo(e.Pixels[0]),a=26;a<47;a++)n.lineTo(e.Pixels[a]);n.lineTo(e.Pixels[23]),n.lineTo(e.Pixels[24]),n.lineTo(e.Pixels[25]),n.lineTo(e.Pixels[0]),t.splice(0,0,n);break;default:return}}catch(e){if(!(e instanceof Error))throw e;h.ErrorLogger.LogException(D._className,"getAutoshapeFillShape",new A.RendererException("Failed inside getAutoshapeFillShape",e))}}}t.clsRenderer2=D},8977:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clsUtilityGE=void 0;const a=i(8624),n=i(8087),s=i(9485),l=i(2876),r=i(9441),o=i(6967),c=i(7940),T=i(3170),u=i(1207),g=i(7389),L=i(5772),d=i(8101),_=i(4738),h=i(8678),E=i(7300),A=i(106),I=i(8795),S=i(498);class y{static _className="clsUtilityGE";static setSplineLinetype(e){switch(e.get_LineType()){case d.TacticalLines.BRDGHD:e.set_LineType(d.TacticalLines.BRDGHD_GE);break;case d.TacticalLines.HOLD:e.set_LineType(d.TacticalLines.HOLD_GE);break;case d.TacticalLines.ICE_OPENINGS_FROZEN:e.set_LineType(d.TacticalLines.ICE_OPENINGS_FROZEN_GE);break;case d.TacticalLines.ICE_OPENINGS_LEAD:e.set_LineType(d.TacticalLines.ICE_OPENINGS_LEAD_GE);break;case d.TacticalLines.ICE_EDGE_RADAR:e.set_LineType(d.TacticalLines.ICE_EDGE_RADAR_GE);break;case d.TacticalLines.CRACKS_SPECIFIC_LOCATION:e.set_LineType(d.TacticalLines.CRACKS_SPECIFIC_LOCATION_GE);break;case d.TacticalLines.JET:e.set_LineType(d.TacticalLines.JET_GE);break;case d.TacticalLines.STREAM:e.set_LineType(d.TacticalLines.STREAM_GE);break;case d.TacticalLines.FLOOD_TIDE:e.set_LineType(d.TacticalLines.FLOOD_TIDE_GE);break;case d.TacticalLines.EBB_TIDE:e.set_LineType(d.TacticalLines.EBB_TIDE_GE);break;case d.TacticalLines.SEAWALL:e.set_LineType(d.TacticalLines.SEAWALL_GE);break;case d.TacticalLines.JETTY_BELOW_WATER:e.set_LineType(d.TacticalLines.JETTY_BELOW_WATER_GE);break;case d.TacticalLines.JETTY_ABOVE_WATER:e.set_LineType(d.TacticalLines.JETTY_ABOVE_WATER_GE);break;case d.TacticalLines.RAMP_BELOW_WATER:e.set_LineType(d.TacticalLines.RAMP_BELOW_WATER_GE);break;case d.TacticalLines.RAMP_ABOVE_WATER:e.set_LineType(d.TacticalLines.RAMP_ABOVE_WATER_GE);break;case d.TacticalLines.PIER:e.set_LineType(d.TacticalLines.PIER_GE);break;case d.TacticalLines.COASTLINE:e.set_LineType(d.TacticalLines.COASTLINE_GE);break;case d.TacticalLines.DEPTH_CONTOUR:e.set_LineType(d.TacticalLines.DEPTH_CONTOUR_GE);break;case d.TacticalLines.DEPTH_CURVE:e.set_LineType(d.TacticalLines.DEPTH_CURVE_GE);break;case d.TacticalLines.CRACKS:e.set_LineType(d.TacticalLines.CRACKS_GE);break;case d.TacticalLines.ESTIMATED_ICE_EDGE:e.set_LineType(d.TacticalLines.ESTIMATED_ICE_EDGE_GE);break;case d.TacticalLines.ICE_EDGE:e.set_LineType(d.TacticalLines.ICE_EDGE_GE);break;case d.TacticalLines.ISOTHERM:e.set_LineType(d.TacticalLines.ISOTHERM_GE);break;case d.TacticalLines.UPPER_AIR:e.set_LineType(d.TacticalLines.UPPER_AIR_GE);break;case d.TacticalLines.ISOBAR:e.set_LineType(d.TacticalLines.ISOBAR_GE);break;case d.TacticalLines.ISODROSOTHERM:e.set_LineType(d.TacticalLines.ISODROSOTHERM_GE);break;case d.TacticalLines.ISOTACH:e.set_LineType(d.TacticalLines.ISOTACH_GE);break;case d.TacticalLines.ISOPLETHS:e.set_LineType(d.TacticalLines.ISOPLETHS_GE)}}static createDashedPolylines(e,t){try{if(null==t.getLineColor())return;let i=t.getStroke().getDashArray();if(null==i||i.length<2)return;let a=new Array;for(let t of e){let e=0,n=i[e];for(let s=0;s<t.length-1;s++){let l=t[s],r=t[s+1],o=0;for(;(o=u.lineutility.CalcDistanceDouble(l,r))>0;){if(o<n){if(e%2==0){let e=new Array(l,r);a.push(e)}n-=o;break}{let t=u.lineutility.ExtendAlongLineDouble2(l,r,n);if(e%2==0){let e=new Array(l,t);a.push(e)}e++,e>=i.length&&(e=0),n=i[e],l=t}}}}e.length=0,e.push(...a)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(y._className,"createDashedPolylines",new A.RendererException("Failed inside createDashedPolylines",e))}}static createSimpleFillShape(e,t,i){try{let a=t.getStroke(),s=a.getDashArray();if(!1===h.clsUtility.isClosedPolygon(e.get_LineType())&&!1===h.clsUtility.IsChange1Area(e.get_LineType()))return null;if(null==s||s.length<2)return null;if(null==t.getFillColor())return null;let l=0,o=0,c=new I.ShapeInfo(t.getShape());c.setShapeType(I.ShapeInfo.SHAPE_TYPE_FILL);let T,u,g,L=new Array;a=new n.BasicStroke(0),c.setStroke(a),c.setFillColor(t.getFillColor());let d=i.length;for(l=0;l<d;l++){T=i[l],u=new Array;let e=T.length;for(o=0;o<e;o++)g=new r.Point2D(T[o].getX(),T[o].getY()),u.push(g);L.push(u)}return t.setShapeType(I.ShapeInfo.SHAPE_TYPE_POLYLINE),t.setFillColor(null),c.setPolylines(L),c}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(y._className,"createSimpleFillShape",new A.RendererException("Failed inside createSimpleFillShape",e))}return null}static createSimplePatternFillShape(e,t,i){try{let a=t.getStroke(),s=a.getDashArray();if(!1===h.clsUtility.isClosedPolygon(e.get_LineType())&&!1===h.clsUtility.IsChange1Area(e.get_LineType()))return null;if(null==s||s.length<2)return null;if(null==t.getPatternFillImage())return null;let l=0,o=0,c=new I.ShapeInfo(t.getShape());c.setShapeType(I.ShapeInfo.SHAPE_TYPE_FILL);let T,u,g,L=new Array;a=new n.BasicStroke(0),c.setStroke(a),c.setPatternFillImage(t.getPatternFillImageInfo()),c.setTexturePaint(t.getTexturePaint());let d=i.length;for(l=0;l<d;l++){T=i[l],u=new Array;let e=T.length;for(o=0;o<e;o++)g=new r.Point2D(T[o].getX(),T[o].getY()),u.push(g);L.push(u)}return t.setShapeType(I.ShapeInfo.SHAPE_TYPE_POLYLINE),t.setPatternFillImage(null),t.setTexturePaint(null),c.setPolylines(L),c}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(y._className,"createSimplePatternFillShape",new A.RendererException("Failed inside createSimplePatternFillShape",e))}return null}static allowFillForThese(e){try{let t=e.get_LineType();if(_.clsMETOC.IsWeather(e.get_SymbolId())>=0)return!0;switch(t){case d.TacticalLines.CATK:case d.TacticalLines.CATKBYFIRE:case d.TacticalLines.AIRAOA:case d.TacticalLines.AAAAA:case d.TacticalLines.MAIN:case d.TacticalLines.SPT:case d.TacticalLines.SARA:case d.TacticalLines.RANGE_FAN_SECTOR:case d.TacticalLines.RADAR_SEARCH:case d.TacticalLines.RANGE_FAN:case d.TacticalLines.MNFLDFIX:case d.TacticalLines.TURN:case d.TacticalLines.MNFLDDIS:case d.TacticalLines.EASY:case d.TacticalLines.ATDITCHC:case d.TacticalLines.ATDITCHM:case d.TacticalLines.FERRY:case d.TacticalLines.BYDIF:case d.TacticalLines.BYIMP:case d.TacticalLines.DEPTH_AREA:return!0;default:return!1}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(y._className,"allowFillForThese",new A.RendererException("Failed inside allowFillForThese",e))}return!1}static SetShapeInfosPolylines(e,t,i){try{let a,n,s,l,r,o=0,c=-1,T=h.clsUtility.isClosedPolygon(e.get_LineType()),u=(e.get_LineType(),t.length);for(o=0;o<u;o++)n=t[o],c=n.getShapeType(),a=n.getShape(),s=!1===T&&c!==L.Shape2.SHAPE_TYPE_FILL?y.createRenderablesFromShape(e,a,c,i):y.createRenderablesFromShape(e,a,c,null),null==l&&(l=y.createSimpleFillShape(e,n,s)),null==l&&(l=y.createSimplePatternFillShape(e,n,s)),r=n.getFillColor(),null!=l&&!1===y.allowFillForThese(e)&&n.setFillColor(null),e.get_UseDashArray()||y.createDashedPolylines(s,n),n.setPolylines(s);null!=l&&t.splice(0,0,l)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(y._className,"SetShapeInfosPolylines",new A.RendererException("Failed inside SetShapeInfosPolylines",e))}}static createRenderablesFromShape(e,t,i,a){let n,s=new Array,o=new Array;try{let e=new Array(6);for(let a=t.getPathIterator(null);!a.isDone();a.next())switch(a.currentSegment(e)){case l.PathIterator.SEG_MOVETO:if(s.length>0){if(i===I.ShapeInfo.SHAPE_TYPE_FILL&&(s[s.length-1].getX()!==s[0].getX()||s[s.length-1].getY()!==s[0].getY())){let e=new r.Point2D(s[0].getX(),s[0].getY());s.push(e)}s.length>1&&o.push(s)}s=new Array,n=new r.Point2D(e[0],e[1]),s.push(n);break;case l.PathIterator.SEG_LINETO:n=new r.Point2D(e[0],e[1]),s.push(n);case l.PathIterator.SEG_QUADTO:case l.PathIterator.SEG_CUBICTO:case l.PathIterator.SEG_CLOSE:}if(s.length>1){if(i===I.ShapeInfo.SHAPE_TYPE_FILL&&(s[s.length-1].getX()!==s[0].getX()||s[s.length-1].getY()!==s[0].getY())){let e=new r.Point2D(s[0].getX(),s[0].getY());s.push(e)}o.push(s)}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(y._className,"createRenderableFromShape",new A.RendererException("Failed inside createRenderableFromShape",e))}return o}static expandPolygon(e,t){let i;try{let a=0,n=!1;e[e.length-1].getX()===e[0].getX()&&e[e.length-1].getY()===e[0].getY()&&(e.splice(e.length-1,1),n=!0);let l,c,T,L,d=S.clsUtility.Points2DToPOINT2(e),_=0,h=0,E=0,A=0,I=new Array,y=d.length;for(a=0;a<y-1;a++)l=new g.POINT2(d[a]),c=new g.POINT2(d[a+1]),l.x===c.x&&(c.x+=1,d[a+1]=c);let f=d[d.length-1];l=new g.POINT2(d[0]),f.x===l.x&&(f.x+=1,d[d.length-1]=f),d.push(l);let D,M,P=new o.Polygon;for(y=d.length,a=0;a<y;a++)P.addPoint(d[a].x,d[a].y);for(y=d.length,a=0;a<y-1;a++)l=new g.POINT2(d[a]),c=new g.POINT2(d[a+1]),_=(l.y-c.y)/(l.x-c.x),Math.abs(_)<1?(T=u.lineutility.ExtendDirectedLine(l,c,l,u.lineutility.extend_above,t),L=u.lineutility.ExtendDirectedLine(l,c,c,u.lineutility.extend_above,t),M=u.lineutility.MidPointDouble(T,L,0),P.contains(M.x,M.y)&&(T=u.lineutility.ExtendDirectedLine(l,c,l,u.lineutility.extend_below,t),L=u.lineutility.ExtendDirectedLine(l,c,c,u.lineutility.extend_below,t))):(T=u.lineutility.ExtendDirectedLine(l,c,l,u.lineutility.extend_left,t),L=u.lineutility.ExtendDirectedLine(l,c,c,u.lineutility.extend_left,t),M=u.lineutility.MidPointDouble(T,L,0),P.contains(M.x,M.y)&&(T=u.lineutility.ExtendDirectedLine(l,c,l,u.lineutility.extend_right,t),L=u.lineutility.ExtendDirectedLine(l,c,c,u.lineutility.extend_right,t))),D=new s.Line2D(T.x,T.y,L.x,L.y),I.push(D);let R,N,C=new Array,O=0,p=0,x=0,b=0,w=0,m=0,F=I.length;for(a=0;a<F;a++)R=I[a],O=R.getX1(),p=R.getY1(),x=R.getX2(),b=R.getY2(),_=(p-b)/(O-x),E=p-_*O,N=a===I.length-1?I[0]:I[a+1],O=N.getX1(),p=N.getY1(),x=N.getX2(),b=N.getY2(),h=(p-b)/(O-x),A=p-h*O,_!==h?(w=(A-E)/(_-h),m=_*w+E):(w=R.getX2(),m=R.getY2()),C.push(new g.POINT2(w,m));for(i=new Array,F=C.length,a=0;a<F;a++)i.push(new r.Point2D(C[a].x,C[a].y));n&&i.push(new r.Point2D(i[0].getX(),i[0].getY()))}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(y._className,"expandPolygon2",new A.RendererException("Failed inside expandPolygon2",e))}return i}static expandPolygon2(e,t,i){let a;try{let t=0,i=0,n=0,s=0,l=0,o=!1;e[e.length-1].getX()===e[0].getX()&&e[e.length-1].getY()===e[0].getY()&&(e.splice(e.length-1,1),o=!0);let c=e.length;for(l=0;l<c;l++)n+=e[l].getX(),s+=e[l].getY();t=n/e.length,i=s/e.length;let T=new Array(e.length);for(c=e.length,l=0;l<c;l++)T[l]=new r.Point2D(e[l].getX(),e[l].getY());let u=new Array(e.length);a=new Array;let g=u.length;for(l=0;l<g;l++)a.push(u[l]);o&&a.push(new r.Point2D(u[0].getX(),u[0].getY()))}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(y._className,"expandPolygon",new A.RendererException("Failed inside expandPolygon",e))}return a}static ptsPolyToPtsPoly(...e){if(e[2]instanceof T.Rectangle2D){const[t,i,a]=e;let n;try{if(!0===h.clsUtility.IsChange1Area(t.get_LineType()))return i;let e,l,r,o,c,T=0,u=0;n=new Array;let g=i.length;for(T=0;T<g;T++){l=null,e=i[T];let t=e.length;for(u=0;u<t-1;u++)if(r=e[u],o=e[u+1],c=new s.Line2D(r,o),!1===a.contains(r)&&!1===a.contains(o)){if(!1===a.intersectsLine(c)){l=null;continue}null==l&&(l=new Array,l.push(r)),!1===l.includes(r)&&l.push(r),l.push(o),n.push(l),l=null}else!1===a.contains(r)&&!0===a.contains(o)||!0===a.contains(r)&&!0===a.contains(o)?(null==l&&(l=new Array,l.push(r)),!1===l.includes(r)&&l.push(r),l.push(o)):!0===a.contains(r)&&!1===a.contains(o)&&(null==l&&(l=new Array,l.push(r)),!1===l.includes(r)&&l.push(r),l.push(o),n.push(l),l=null);null!=l&&l.length>0&&n.push(l)}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(y._className,"ptsPolyToPtsPoly",new A.RendererException("Failed inside ptsPolyToPtsPoly",e))}return n}{const[t,i,a]=e;let n;try{if(!0===h.clsUtility.IsChange1Area(t.get_LineType()))return i;let e,l,r,c,T,u=0,g=0;n=new Array;let L=new o.Polygon,d=a.length;for(u=0;u<d;u++)L.addPoint(a[u].getX(),a[u].getY());for(d=i.length,u=0;u<d;u++){l=null,e=i[u];let t=e.length;for(g=0;g<t-1;g++)if(r=e[g],c=e[g+1],T=new s.Line2D(r,c),!1===L.contains(r)&&!1===L.contains(c)){if(!1===y.lineIntersectsClipArea(T,a)){l=null;continue}null==l&&(l=new Array,l.push(r)),!1===l.includes(r)&&l.push(r),l.push(c),n.push(l),l=null}else!1===L.contains(r)&&!0===L.contains(c)||!0===L.contains(r)&&!0===L.contains(c)?(null==l&&(l=new Array,l.push(r)),!1===l.includes(r)&&l.push(r),l.push(c)):!0===L.contains(r)&&!1===L.contains(c)&&(null==l&&(l=new Array,l.push(r)),!1===l.includes(r)&&l.push(r),l.push(c),n.push(l),l=null);null!=l&&l.length>0&&n.push(l)}}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(y._className,"ptsPolyToPtsPoly",new A.RendererException("Failed inside ptsPolyToPtsPoly",e))}return n}}static removeTrailingPoints(e,t){try{if(h.clsUtility.isClosedPolygon(e.get_LineType()))return;let i,n,l,u=new o.Polygon,L=0;if(null==t)return;if(t instanceof T.Rectangle2D)n=t;else if(t instanceof c.Rectangle){let e=t;n=new T.Rectangle2D(e.x,e.y,e.width,e.height)}else t instanceof Array&&(l=t);null!=n&&(l=new Array,l.push(new r.Point2D(n.getX(),n.getY())),l.push(new r.Point2D(n.getX()+n.getWidth(),n.getY())),l.push(new r.Point2D(n.getX()+n.getWidth(),n.getY()+n.getHeight())),l.push(new r.Point2D(n.getX(),n.getY()+n.getHeight())),l.push(new r.Point2D(n.getX(),n.getY())));let d=l[l.length-1],_=l[0];_.getX()===d.getX()&&_.getY()===d.getY()||l.push(new r.Point2D(_.getX(),_.getY()));let E,A,I,S=l.length;for(L=0;L<S;L++)_=l[L],u.addPoint(_.getX(),_.getY());i=new a.Area(u);let f=!1,D=0,M=e.Pixels.length-1;for(S=e.Pixels.length,L=0;L<S-1;L++){if(A=e.Pixels[L],I=e.Pixels[L+1],E=new s.Line2D(A.x,A.y,I.x,I.y),f=y.lineIntersectsClipArea(E,l),!0===f){D=L;break}if(i.contains(A.x,A.y)||i.contains(I.x,I.y)){D=L;break}}for(S=e.Pixels.length,L=S-1;L>0;L--){if(A=e.Pixels[L],I=e.Pixels[L-1],E=new s.Line2D(A.x,A.y,I.x,I.y),f=y.lineIntersectsClipArea(E,l),!0===f){M=L;break}if(i.contains(A.x,A.y)||i.contains(I.x,I.y)){M=L;break}}let P=new Array;for(L=D;L<=M;L++)A=new g.POINT2(e.Pixels[L]),P.push(A);e.Pixels=P}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException("clsRenderer","removeTrailingPoints",new A.RendererException("Failed inside removeTrailingPoints",e))}}static lineIntersectsClipArea(e,t){try{let i,a=0,n=new o.Polygon,l=t.length;for(a=0;a<l;a++)n.addPoint(t[a].getX(),t[a].getY());if(n.contains(e.getX1(),e.getY1()))return!0;if(n.contains(e.getX2(),e.getY2()))return!0;for(l=t.length,a=0;a<l-1;a++)if(i=new s.Line2D(t[a].getX(),t[a].getY(),t[a+1].getX(),t[a+1].getY()),!0===e.intersectsLine(i))return!0;let r=t[0],c=t[t.length-1];if((r.getX()!==c.getX()||r.getY()!==c.getY())&&(i=new s.Line2D(c.getX(),c.getY(),r.getX(),r.getY()),!0===e.intersectsLine(i)))return!0}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(y._className,"lineIntersectsClipArea",new A.RendererException("Failed inside lineIntersectsClipArea",e))}return!1}static segmentColorsSet(e){try{switch(e.get_LineType()){case d.TacticalLines.BOUNDARY:case d.TacticalLines.MSR:case d.TacticalLines.ASR:case d.TacticalLines.ROUTE:break;default:return!1}let t=e.get_H();if(null==t||0===t.length)return!1;if(t.split(",").length>1)return!0}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(y._className,"segmentColorsSet",new A.RendererException("Failed inside segmentColorsSet",e))}return!1}static getZoomFactor(e,t,i){let a=-1;try{if(null==i||i.length<2)return a;if(null==t&&null==e)return a;let n,s,l,r,o=0,c=0,T=0,L=0;for(L=0;L<i.length-1;L++)l=i[L],r=i[L+1],T=u.lineutility.CalcDistanceDouble(l,r),T>o&&(o=T);if(T=0,null!=t)for(L=0;L<t.length-1;L++)n=t[L],s=t[L+1],l=new g.POINT2(n.getX(),n.getY()),r=new g.POINT2(s.getX(),s.getY()),T=u.lineutility.CalcDistanceDouble(l,r);else null!=e&&(T=e.getMaxX()-e.getMinX(),T<e.getMaxY()-e.getMinY()&&(T=e.getMaxY()-e.getMinY()));T>c&&(c=T),o>0&&c>0&&(a=c/o)}catch(e){if(!(e instanceof Error))throw e;E.ErrorLogger.LogException(y._className,"getZoomFactor",new A.RendererException("Failed inside getZoomFactor",e))}return a}}t.clsUtilityGE=y},9303:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontMetrics=void 0,t.FontMetrics=class{_fontRenderContext;_font;constructor(e){this._font=e}stringWidth(e){return this._font.getSize()/2*e.length}getFontRenderContext(){return this._fontRenderContext}}},9441:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Point2D=void 0;class i{x=0;y=0;constructor(...e){switch(e.length){case 0:break;case 1:{const[t]=e;this.x=t.x,this.y=t.y;break}case 2:{const[t,i]=e;this.x=t,this.y=i;break}default:throw Error("Invalid number of arguments")}}getX(){return this.x}getY(){return this.y}toString(){return"Point2D["+this.x+", "+this.y+"]"}clone(){return new i(this.getX(),this.getY())}static serialVersionUID=0;setLocation(...e){switch(e.length){case 1:{const[t]=e;this.setLocation(t.getX(),t.getY());break}case 2:{const[t,i]=e;this.x=t,this.y=i;break}default:throw Error("Invalid number of arguments")}}static distanceSq(e,t,i,a){return(e-=i)*e+(t-=a)*t}static distance(e,t,i,a){return e-=i,t-=a,Math.sqrt(e*e+t*t)}distance(e,t){return e-=this.getX(),t-=this.getY(),Math.sqrt(e*e+t*t)}equals(e){if(e instanceof i){let t=e;return this.getX()===t.getX()&&this.getY()===t.getY()}return!1}}t.Point2D=i},9485:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Line2D=void 0;const a=i(9441),n=i(3170);class s{intersectsLine(e){return s.linesIntersect(e.getX1(),e.getY1(),e.getX2(),e.getY2(),this.getX1(),this.getY1(),this.getX2(),this.getY2())}static linesIntersect(e,t,i,a,n,l,r,o){return s.relativeCCW(e,t,i,a,n,l)*s.relativeCCW(e,t,i,a,r,o)<=0&&s.relativeCCW(n,l,r,o,e,t)*s.relativeCCW(n,l,r,o,i,a)<=0}x1=0;y1=0;x2=0;y2=0;constructor(...e){switch(e.length){case 0:break;case 2:{const[t,i]=e;this.setLine(t,i);break}case 4:{const[t,i,a,n]=e;this.setLine(t,i,a,n);break}default:throw Error("Invalid number of arguments")}}getX1(){return this.x1}getY1(){return this.y1}getP1(){return new a.Point2D(this.x1,this.y1)}getX2(){return this.x2}getY2(){return this.y2}getP2(){return new a.Point2D(this.x2,this.y2)}getBounds2D(){let e=0,t=0,i=0,a=0;return this.x1<this.x2?(e=this.x1,i=this.x2-this.x1):(e=this.x2,i=this.x1-this.x2),this.y1<this.y2?(t=this.y1,a=this.y2-this.y1):(t=this.y2,a=this.y1-this.y2),new n.Rectangle2D(e,t,i,a)}static serialVersionUID=0;setLine(...e){switch(e.length){case 1:{const[t]=e;this.setLine(t.getX1(),t.getY1(),t.getX2(),t.getY2());break}case 2:{const[t,i]=e;this.setLine(t.getX(),t.getY(),i.getX(),i.getY());break}case 4:{const[t,i,a,n]=e;this.x1=t,this.y1=i,this.x2=a,this.y2=n;break}default:throw Error("Invalid number of arguments")}}static relativeCCW(e,t,i,a,n,s){let l=(n-=e)*(a-=t)-(s-=t)*(i-=e);return 0===l&&(l=n*i+s*a,l>0&&(l=(n-=i)*i+(s-=a)*a,l<0&&(l=0))),l<0?-1:l>0?1:0}relativeCCW(e,t){return s.relativeCCW(this.getX1(),this.getY1(),this.getX2(),this.getY2(),e,t)}static ptLineDistSq(e,t,i,a,n,s){let l=(n-=e)*(i-=e)+(s-=t)*(a-=t),r=n*n+s*s-l*l/(i*i+a*a);return r<0&&(r=0),r}static ptLineDist(e,t,i,a,n,l){return Math.sqrt(s.ptLineDistSq(e,t,i,a,n,l))}ptLineDistSq(...e){switch(e.length){case 1:{const[t]=e;return s.ptLineDistSq(this.getX1(),this.getY1(),this.getX2(),this.getY2(),t.getX(),t.getY())}case 2:{const[t,i]=e;return s.ptLineDistSq(this.getX1(),this.getY1(),this.getX2(),this.getY2(),t,i)}default:throw Error("Invalid number of arguments")}}ptLineDist(...e){switch(e.length){case 1:{const[t]=e;return s.ptLineDist(this.getX1(),this.getY1(),this.getX2(),this.getY2(),t.getX(),t.getY())}case 2:{const[t,i]=e;return s.ptLineDist(this.getX1(),this.getY1(),this.getX2(),this.getY2(),t,i)}default:throw Error("Invalid number of arguments")}}contains(...e){return!1}clone(){try{throw Error("Need to implement clone for Line2D")}catch(e){throw Error("Need to implement clone for Line2D"+e.message)}}}t.Line2D=s},9596:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PointConversion=void 0;const a=i(151),n=i(9441);t.PointConversion=class{_pixelWidth=0;_PixelHeight=0;_geoTop=0;_geoLeft=0;_geoBottom=0;_geoRight=0;_normalize=!0;_pixelMultiplierX=0;_pixelMultiplierY=0;set_normalize(e){this._normalize=e}constructor(e,t,i,a,n,s){this.UpdateExtents(e,t,i,a,n,s)}UpdateExtents(e,t,i,a,n,s){this._pixelWidth=e,this._PixelHeight=t,this._geoTop=i,this._geoLeft=a,this._geoBottom=n,this._geoRight=s,this._pixelMultiplierX=(this._geoRight-this._geoLeft)/this._pixelWidth,this._pixelMultiplierY=(this._geoTop-this._geoBottom)/this._PixelHeight,this._geoRight-this._geoLeft<-180&&(this._pixelMultiplierX=(this._geoRight-this._geoLeft+360)/this._pixelWidth),this._geoRight-this._geoLeft>180&&(this._pixelMultiplierX=(360-(this._geoRight-this._geoLeft))/this._pixelWidth),this._geoTop<this._geoBottom?this._pixelMultiplierY=-Math.abs(this._pixelMultiplierY):this._pixelMultiplierY=Math.abs(this._pixelMultiplierY)}PixelsToGeo(...e){const[t]=e;let i;return i=t instanceof a.Point?new a.Point:new n.Point2D,i.x=t.getX()*this._pixelMultiplierX+this._geoLeft,i.y=this._geoTop-t.getY()*this._pixelMultiplierY,i.x<-180&&(i.x+=360),i.x>180&&(i.x-=360),i}GeoToPixels(...e){const[t]=e;let i;i=t instanceof a.Point?new a.Point:new n.Point2D;let s=0,l=t.getX()-this._geoLeft;return this._normalize&&(l<-180?l+=360:l>180&&(l-=360)),s=l/this._pixelMultiplierX,i.x=s,s=(this._geoTop-t.getY())/this._pixelMultiplierY,i.y=s,i}getPixelWidth(){return this._pixelWidth}getPixelHeight(){return this._PixelHeight}getUpperLat(){return this._geoTop}getLowerLat(){return this._geoBottom}getLeftLon(){return this._geoLeft}getRightLon(){return this._geoRight}}},9625:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Path=void 0;const a=i(3867),n=i(7706),s=i(6001),l=i(2517);t.Path=class{_actions=[];_dashArray=null;_startPoint=null;_endPoint=null;_lastMoveTo=null;_rectangle=null;_method=null;getShapeType(){return l.ShapeTypes.PATH}setLineDash(e){this._dashArray=e}getBounds(){return this._rectangle?new s.Rectangle(this._rectangle.getX(),this._rectangle.getY(),this._rectangle.getWidth(),this._rectangle.getHeight()):null}shift(e,t){var i=this._actions.length,a=null;this._rectangle.shift(e,t);for(var n=0;n<i;n++)(a=this._actions[n])[0]===l.ActionTypes.ACTION_MOVE_TO||a[0]===l.ActionTypes.ACTION_LINE_TO?(a[1]=a[1]+e,a[2]=a[2]+t):a[0]===l.ActionTypes.ACTION_CURVE_TO?(a[1]=a[1]+e,a[2]=a[2]+t,a[3]=a[3]+e,a[4]=a[4]+t,a[5]=a[5]+e,a[6]=a[6]+t):a[0]===l.ActionTypes.ACTION_QUAD_TO||a[0]===l.ActionTypes.ACTION_ARC_TO?(a[1]=a[1]+e,a[2]=a[2]+t,a[3]=a[3]+e,a[4]=a[4]+t):a[0]===l.ActionTypes.ACTION_ARC&&(a[1]=a[1]+e,a[2]=a[2]+t);this._startPoint.shift(e,t),this._endPoint.shift(e,t),this._lastMoveTo.shift(e,t)}getLength(){this._actions.length}moveTo(e,t){0===this._actions.length&&(this._rectangle=new s.Rectangle(e,t,1,1),this._startPoint=new n.Point(e,t),this._endPoint=new n.Point(e,t)),this._rectangle.unionPoint(new n.Point(e,t)),this._actions.push([l.ActionTypes.ACTION_MOVE_TO,e,t]),this._lastMoveTo=new n.Point(e,t),this._endPoint=new n.Point(e,t)}lineTo(e,t){0===this._actions.length&&this.moveTo(0,0),this._actions.push([l.ActionTypes.ACTION_LINE_TO,e,t]),this._rectangle.unionPoint(new n.Point(e,t)),this._endPoint=new n.Point(e,t)}dashedLineTo(e,t,i){0===this._actions.length&&this.moveTo(0,0);var a=this.getCurrentPoint();this._actions.push([l.ActionTypes.ACTION_DASHED_LINE_TO,a.getX(),a.getY(),e,t,i]),this._rectangle.unionPoint(new n.Point(e,t)),this._endPoint=new n.Point(e,t)}bezierCurveTo(e,t,i,a,s,r){0===this._actions.length&&this.moveTo(0,0),this._actions.push([l.ActionTypes.ACTION_CURVE_TO,e,t,i,a,s,r]),this._rectangle.unionPoint(new n.Point(e,t)),this._rectangle.unionPoint(new n.Point(i,a)),this._rectangle.unionPoint(new n.Point(s,r)),this._endPoint=new n.Point(s,r)}quadraticCurveTo(e,t,i,a){0===this._actions.length&&this.moveTo(0,0),this._actions.push([l.ActionTypes.ACTION_QUAD_TO,e,t,i,a]),this._rectangle.unionPoint(new n.Point(e,t)),this._rectangle.unionPoint(new n.Point(i,a)),this._endPoint=new n.Point(i,a)}arcTo(e,t,i,a,s){0===this._actions.length&&this.moveTo(0,0),this._actions.push([l.ActionTypes.ACTION_ARC_TO,e,t,i,a]),this._rectangle.unionPoint(new n.Point(e,t)),this._rectangle.unionPoint(new n.Point(i,a)),this._endPoint=new n.Point(i,a)}arc(e,t,i,a,r,o){!0!==o&&(o=!1);var c=a*(Math.PI/180),T=r*(Math.PI/180);if(null===this._startPoint){var u=i*Math.cos(c)+e,g=i*Math.sin(c)+t;this._startPoint=new n.Point(u,g),this._rectangle=new s.Rectangle(u,g,1,1)}this._actions.push([l.ActionTypes.ACTION_ARC,e,t,i,c,T,o]),this._rectangle.union(new s.Rectangle(e-i,t-i,2*i,2*i));var L=i*Math.cos(T)+e,d=i*Math.sin(T)+t;this._endPoint=new n.Point(L,d),this.moveTo(L,d)}closePath(){this.lineTo(this._lastMoveTo.getX(),this._lastMoveTo.getY()),this._endPoint=this._lastMoveTo.clone()}getCurrentPoint(){return this._endPoint.clone()}getPathIterator(){return new a.PathIterator(this._actions)}setPath(e){for(var t=this._actions.length,i=null,a=0;a<t;a++)(i=this._actions[a])[0]===l.ActionTypes.ACTION_MOVE_TO?0===a||"fillPattern"!==this._method?e.moveTo(i[1],i[2]):e.lineTo(i[1],i[2]):i[0]===l.ActionTypes.ACTION_LINE_TO?e.lineTo(i[1],i[2]):i[0]===l.ActionTypes.ACTION_DASHED_LINE_TO?(this._method,e.lineTo(i[3],i[4])):i[0]===l.ActionTypes.ACTION_CURVE_TO?e.bezierCurveTo(i[1],i[2],i[3],i[4],i[5],i[6]):i[0]===l.ActionTypes.ACTION_QUAD_TO?e.quadraticCurveTo(i[1],i[2],i[3],i[4]):i[0]===l.ActionTypes.ACTION_ARC_TO?e.arcTo(i[1],i[2],i[3],i[4],i[5]):i[0]===l.ActionTypes.ACTION_ARC&&e.arc(i[1],i[2],i[3],i[4],i[5],i[6])}stroke(e){if(this._method="stroke",this._dashArray){let t=this._dashArray.split(" "),i=new Array;for(let e=0;e<t.length;e++)i[e]=parseInt(t[e]);e.setLineDash(i)}e.beginPath(),this.setPath(e),e.stroke(),e.setLineDash([])}fill(e){this._method="fill",e.beginPath(),this.setPath(e),e.fill()}fillPattern(e,t){this._method="fillPattern",e.beginPath(),this.setPath(e);let i=e.createPattern(t,"repeat");e.fillStyle=i,e.fill()}toSVGElement(e,t,i,a=1,n=1,s=null,r=0){var o=1;r&&(o=r);for(var c=this._actions.length,T=null,u="",g=0;g<c;g++)(T=this._actions[g])[0]===l.ActionTypes.ACTION_LINE_TO?u+="L"+T[1]+" "+T[2]:T[0]===l.ActionTypes.ACTION_MOVE_TO?0===g||"fillPattern"!==this._method?u+="M"+T[1]+" "+T[2]:u+="L"+T[1]+" "+T[2]:T[0]===l.ActionTypes.ACTION_DASHED_LINE_TO?u+="L"+T[3]+" "+T[4]:T[0]===l.ActionTypes.ACTION_CURVE_TO?u+="C"+T[1]+" "+T[2]+" "+T[3]+" "+T[4]+" "+T[5]+" "+T[6]:T[0]===l.ActionTypes.ACTION_QUAD_TO?u+="Q"+T[1]+" "+T[2]+" "+T[3]+" "+T[4]:T[0]===l.ActionTypes.ACTION_ARC_TO||(T[0],l.ActionTypes.ACTION_ARC);var L='<path d="'+u+'"';return e&&(L+=2===o?' stroke="'+e.replace(/#/g,"%23")+'"':' stroke="'+e+'"',L+=t?' stroke-width="'+t+'"':' stroke-width="2"',1!==a&&(L+=' stroke-opacity="'+a+'"'),null==s||"butt"!==s.toLowerCase()&&"round"!==s.toLowerCase()&&"square"!==s.toLowerCase()?L+=' stroke-linecap="round"':L+=' stroke-linecap="'+s+'"'),null!=this._dashArray&&(L+=' stroke-dasharray="'+this._dashArray+'"'),i?0===i.indexOf("url")?L+=' fill="url(#fillPattern)"':(L+=2===o?' fill="'+i.replace(/#/g,"%23")+'"':' fill="'+i+'"',1!==n&&(L+=' fill-opacity="'+n+'"')):L+=' fill="none"',L+" />"}}},9866:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MilStdAttributes=void 0;const a=i(6932),n=i(2466);class s{static LineColor="LINECOLOR";static FillColor="FILLCOLOR";static IconColor="ICONCOLOR";static PixelSize="PIXELSIZE";static KeepUnitRatio="KEEPUNITRATIO";static Alpha="ALPHA";static OutlineSymbol="OUTLINESYMBOL";static OutlineColor="OUTLINECOLOR";static DrawAsIcon="DRAWASICON";static LineWidth="LINEWIDTH";static TextColor="TEXTCOLOR";static TextBackgroundColor="TEXTBACKGROUNDCOLOR";static UseDashArray="USEDASHARRAY";static AltitudeMode="ALTITUDEMODE";static HideOptionalLabels="HIDEOPTIONALLABELS";static UsePatternFill="USEPATTERNFILL";static PatternFillType="PATTERNFILLTYPE";static DistanceUnits="DISTANCEUNITS";static AltitudeUnits="ALTITUDEUNITS";static EngagementBarColor="ENGAGEMENTBARCOLOR";static GetModifierList(){let e=new Array;return e.push(s.LineColor),e.push(s.FillColor),e.push(s.PixelSize),e.push(s.KeepUnitRatio),e.push(s.Alpha),e.push(s.OutlineSymbol),e.push(s.OutlineColor),e.push(s.DrawAsIcon),e.push(s.HideOptionalLabels),e.push(s.DistanceUnits),e.push(s.AltitudeUnits),e.push(s.EngagementBarColor),e}static GetAttributesList(e){let t=new Array;return t.push(s.LineColor),t.push(s.FillColor),t.push(s.PixelSize),!1===n.SymbolUtilities.isMultiPoint(e)?(t.push(s.KeepUnitRatio),t.push(s.OutlineSymbol),t.push(s.OutlineColor),t.push(s.DrawAsIcon),n.SymbolUtilities.hasModifier(e,a.Modifiers.AO_ENGAGEMENT_BAR)&&t.push(s.EngagementBarColor)):(t.push(s.LineWidth),t.push(s.HideOptionalLabels),t.push(s.DistanceUnits),t.push(s.AltitudeUnits)),t.push(s.Alpha),t}static getAttributeName(e){switch(e){case s.LineColor:return"Line Color";case s.FillColor:return"Fill Color";case s.PixelSize:return"Pixel Size";case s.KeepUnitRatio:return"Keep Unit Ratio";case s.Alpha:return"Alpha";case s.OutlineSymbol:return"Outline Symbol";case s.OutlineColor:return"Outline Color";case s.DrawAsIcon:return"Draw as Icon";case s.LineWidth:return"Line Width";case s.TextColor:return"Text Color";case s.TextBackgroundColor:return"Text Background Color";case s.UseDashArray:return"Use Dash Array";case s.AltitudeMode:return"Altitude Mode";case s.HideOptionalLabels:return"Hide Optional Labels";case s.UsePatternFill:return"Use Pattern Fill";case s.PatternFillType:return"Pattern Fill Type";case s.DistanceUnits:return"Distance Units";case s.AltitudeUnits:return"Altitude Units";default:return"unrecognized attribute"}}static getAttributeKey(e){switch(e.toUpperCase()){case"LINECOLOR":return s.LineColor;case"FILLCOLOR":return s.FillColor;case"PIXELSIZE":return s.PixelSize;case"KEEPUNITRATIO":return s.KeepUnitRatio;case"ALPHA":return s.Alpha;case"OUTLINESYMBOL":return s.OutlineSymbol;case"OUTLINECOLOR":return s.OutlineColor;case"DRAWASICON":return s.DrawAsIcon;case"LINEWIDTH":return s.LineWidth;case"TEXTCOLOR":return s.TextColor;case"TEXTBACKGROUNDCOLOR":return s.TextBackgroundColor;case"USEDASHARRAY":return s.UseDashArray;case"ALTITUDEMODE":return s.AltitudeMode;case"HIDEOPTIONALLABELS":return s.HideOptionalLabels;case"USEPATTERNFILL":return s.UsePatternFill;case"PATTERNFILLTYPE":return s.PatternFillType;case"DISTANCEUNITS":return s.DistanceUnits;case"ALTITUDEUNITS":return s.AltitudeUnits;default:return null}}}t.MilStdAttributes=s},9909:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RectF=void 0,t.RectF=class{top=0;left=0;bottom=0;right=0;constructor(...e){if(4===e.length){const[t,i,a,n]=e;4===arguments.length&&(this.left=t,this.top=i,this.right=a,this.bottom=n)}}static intersects(e,t){return!!(e.contains(t.left,t.top)||e.contains(t.left,t.bottom)||e.contains(t.right,t.top)||e.contains(t.right,t.bottom))}width(){return this.right-this.left}height(){return this.bottom-this.top}contains(e,t){return this.left<e&&e<this.right&&this.top<t&&t<this.bottom}}}},t={};function i(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,i),s.exports}var a={};return(()=>{var e=a;Object.defineProperty(e,"__esModule",{value:!0}),e.WebRenderer=e.MilStdIconRenderer=e.RendererUtilities=e.clsRenderer=e.PointConverter3D=e.MilStdSymbol=e.ShapeInfo=e.SymbolID=e.RendererSettings=e.SymbolUtilities=e.SVGSymbolInfo=e.SVGInfo=e.MSInfo=e.MSLookup=e.GENCLookup=e.MODrawRules=e.DrawRules=e.Modifiers=e.MilStdAttributes=e.ErrorLogger=e.LogLevel=e.Color=e.Font=e.Rectangle2D=e.Point2D=e.Point=void 0,e.initialize=async function(e){m=!0;try{if(!w){let t=new Array;e&&0==e.startsWith("/")&&(e="/"+e),t.push(n.GENCLookup.loadData(e)),t.push(s.MSLookup.loadData(e)),t.push(l.SVGLookup.loadData(e)),await Promise.all(t).then((e=>{n.GENCLookup.getInstance(),s.MSLookup.getInstance(),l.SVGLookup.getInstance()})).catch((e=>{throw e})),w=!0}}catch(e){throw e}finally{m=!1}},e.isReady=function(){try{return!!(n.GENCLookup.getInstance()&&s.MSLookup.getInstance()&&l.SVGLookup.getInstance())&&n.GENCLookup.getInstance().isReady()&&s.MSLookup.getInstance().isReady()&&l.SVGLookup.getInstance().isReady()}catch(e){return t.ErrorLogger.LogException("C5Ren","isReady()",e),!1}};const t=i(7300),n=i(7017),s=i(3874),l=i(6142);var r=i(151);Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return r.Point}});var o=i(9441);Object.defineProperty(e,"Point2D",{enumerable:!0,get:function(){return o.Point2D}});var c=i(3170);Object.defineProperty(e,"Rectangle2D",{enumerable:!0,get:function(){return c.Rectangle2D}});var T=i(628);Object.defineProperty(e,"Font",{enumerable:!0,get:function(){return T.Font}});var u=i(8113);Object.defineProperty(e,"Color",{enumerable:!0,get:function(){return u.Color}});var g=i(7028);Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return g.LogLevel}});var L=i(7300);Object.defineProperty(e,"ErrorLogger",{enumerable:!0,get:function(){return L.ErrorLogger}});var d=i(9866);Object.defineProperty(e,"MilStdAttributes",{enumerable:!0,get:function(){return d.MilStdAttributes}});var _=i(6932);Object.defineProperty(e,"Modifiers",{enumerable:!0,get:function(){return _.Modifiers}});var h=i(3247);Object.defineProperty(e,"DrawRules",{enumerable:!0,get:function(){return h.DrawRules}});var E=i(2051);Object.defineProperty(e,"MODrawRules",{enumerable:!0,get:function(){return E.MODrawRules}});var A=i(7017);Object.defineProperty(e,"GENCLookup",{enumerable:!0,get:function(){return A.GENCLookup}});var I=i(3874);Object.defineProperty(e,"MSLookup",{enumerable:!0,get:function(){return I.MSLookup}});var S=i(680);Object.defineProperty(e,"MSInfo",{enumerable:!0,get:function(){return S.MSInfo}});var y=i(92);Object.defineProperty(e,"SVGInfo",{enumerable:!0,get:function(){return y.SVGInfo}});var f=i(3444);Object.defineProperty(e,"SVGSymbolInfo",{enumerable:!0,get:function(){return f.SVGSymbolInfo}});var D=i(2466);Object.defineProperty(e,"SymbolUtilities",{enumerable:!0,get:function(){return D.SymbolUtilities}});var M=i(3254);Object.defineProperty(e,"RendererSettings",{enumerable:!0,get:function(){return M.RendererSettings}});var P=i(2421);Object.defineProperty(e,"SymbolID",{enumerable:!0,get:function(){return P.SymbolID}});var R=i(8795);Object.defineProperty(e,"ShapeInfo",{enumerable:!0,get:function(){return R.ShapeInfo}});var N=i(8003);Object.defineProperty(e,"MilStdSymbol",{enumerable:!0,get:function(){return N.MilStdSymbol}});var C=i(1773);Object.defineProperty(e,"PointConverter3D",{enumerable:!0,get:function(){return C.PointConverter3D}});var O=i(979);Object.defineProperty(e,"clsRenderer",{enumerable:!0,get:function(){return O.clsRenderer}});var p=i(1059);Object.defineProperty(e,"RendererUtilities",{enumerable:!0,get:function(){return p.RendererUtilities}});var x=i(5108);Object.defineProperty(e,"MilStdIconRenderer",{enumerable:!0,get:function(){return x.MilStdIconRenderer}});var b=i(1036);Object.defineProperty(e,"WebRenderer",{enumerable:!0,get:function(){return b.WebRenderer}});let w=!1,m=!1})(),a})()));
//# sourceMappingURL=C5Ren.js.map